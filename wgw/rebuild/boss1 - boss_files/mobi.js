function asyncGeneratorStep(e,t,i,o,n,a,r){try{var s=e[a](r),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(o,n)}function _asyncToGenerator(e){return function(){var t=this,i=arguments;return new Promise(function(o,n){var a=e.apply(t,i);function r(e){asyncGeneratorStep(a,o,n,r,s,"next",e)}function s(e){asyncGeneratorStep(a,o,n,r,s,"throw",e)}r(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,i[t])})}return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var i=[],o=!0,n=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(n)throw a}}return i}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"undefined"==typeof Mobi&&(Mobi={}),Mobi.getPreviewWindow=function(){var e=Fai.top.document.getElementById("mobiReviewPageFrame");return e?e.contentWindow:window},Mobi.getPreviewDocument=function(){return Mobi.getPreviewWindow().document},Mobi.getPreviewObject=function(e){if(e)return"string"==typeof e&&e.indexOf("#")>-1&&(e=e.replace("#","")),Mobi.getPreviewDocument().getElementById(e)},Mobi.getPreviewObjectClass=function(e){if(e)return Mobi.getPreviewDocument().getElementsByClassName(e)},Mobi.getJQMobi=function(){return Mobi.getPreviewWindow().jm},Mobi.unifiedAttrVal=function(e,t,i){var o=e.find(t),n=0;o.each(function(){var e=jm(this).css(i);(e=parseInt(e))>n&&(n=e)}),o.each(function(){jm(this).css(i,n+"px")})},Mobi.orientationchange=function(){var e="onorientationchange"in window?"orientationchange":"resize";window.addEventListener(e,function(){Mobi.orientationFunctions()},!1)},Mobi.orientationFunctions=function(){Mobi.logoSizeCompressByMargin(),Mobi.titlePositionRefreshByLogo()},Mobi.createElementByHtml=function(e){var t=document.createElement("div");return t.innerHTML=e,(t=t.firstChild).parentNode.removeChild(t),t},Mobi.isNull=function(e){return void 0===e||null==e},Mobi.addInterval=function(e,t,i){Mobi.isNull(Mobi.intervalFunc)&&(Mobi.intervalFunc=new Array);for(var o=0;o<Mobi.intervalFunc.length;++o)if(Mobi.intervalFunc[o].id==e){Mobi.intervalFunc.splice(o,1);break}Mobi.intervalFunc.push({id:e,func:t,interval:i,type:1})},Mobi.startInterval=function(e){if(!Mobi.isNull(Mobi.intervalFunc))for(var t=0;t<Mobi.intervalFunc.length;++t){var i=Mobi.intervalFunc[t];null!=e&&i.id!=e||(i.timer&&clearInterval(i.timer),1==i.type?i.timer=setInterval(i.func,i.interval):i.timer=setTimeout(i.func,i.interval))}},Mobi.bindTouchAndClickEvent=function(e,t,i){var o=i?"."+i:"";jm.os.supportsTouch?(e.unbind("touchstart"+o),e.bind("touchstart"+o,t)):(e.unbind("mousedown"+o),e.bind("mousedown"+o,t))},Mobi.onTouchAndClickEvent=function(e,t){jm.os.supportsTouch?(jm("body").off("touchstart",e),jm("body").on("touchstart",e,t)):(jm("body").off("mousedown",e),jm("body").on("mousedown",e,t))},Mobi.bindTransitionEnd=function(e,t){if(e){var i=e;"[object String]"===Object.prototype.toString.call(i)&&(i=jm(e));var o=Mobi.getTransitionEndEventName();i.unbind(o),i.bind(o,t)}},Mobi.bindClickEvent=function(e,t,i){var o=jm(e);if(jm.os.supportsTouch){var n="touchstart."+t;touchmoveEvt="touchmove."+t,touchendEvt="touchend."+t,o.off(n).on(n,function(){var e=!1;o.off(touchmoveEvt).on(touchmoveEvt,function(){e=!0}),o.off(touchendEvt).on(touchendEvt,function(){if(o.off(touchendEvt).off(touchmoveEvt),!e)return i.apply(this,arguments)})})}else{var a="click."+t;o.off(a).on(a,i)}},Mobi.bindTapEvent=function(e,t,i){var o=jm.os.supportsTouch?{down:"touchstart",up:"touchend",move:"touchmove"}:{down:"mousedown",up:"mouseup",move:"mousemove"},n=o.up+"."+t,a=o.down+"."+t,r=o.move+"."+t,s=jm(e);s.off(a).on(a,function(){var e=!1;s.off(r).on(r,function(){e=!0}),s.off(n).on(n,function(){if(s.off(n).off(r),!e)return i.apply(this,arguments)})})},Mobi.autoFixGWebTop=function(e){if(!Fai.top._openThemeV3)if(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3)jm("#fk-gWebPlaceholdPT").remove();else if(28!=Fai.top._pageId&&21!=Fai.top._pageId){var t=Mobi.webTop(),i=Mobi.getPreviewObject("g_web"),o=Mobi.getPreviewObject("webTop"),n=(Mobi.getPreviewObject("webBodyBackground"),Mobi.getPreviewObject("webHeaderBox"));if(n.style.top="",o.style.top="",0!=jm("#fk-tipsLimitUv").length&&(t+=parseInt(jm("#fk-tipsLimitUv").height())),2===e||7===e||8===e){if(7==e){var a=jm("#webHeader"),r=Mobi.getPreviewObject("navbar");if(t>0&&(r.style.top=t+"px"),"none"===a.css("display"))return}n.style.top=t+"px",o.style.top=t+"px";var s=Mobi.getPreviewObject("fk-gWebPlaceholdPT"),l=Mobi.getPreviewObject("webHeader");s?s.style.height=l.offsetHeight+"px":(s=jm("<div id='fk-gWebPlaceholdPT' style='height:"+l.offsetHeight+"px;'></div>"),jm(i).prepend(s))}else jm("#fk-gWebPlaceholdPT").remove()}},Mobi.webTop=function(){var e=0;return Mobi.getPreviewObject("mobiTipsMarquee")?e=Mobi.getPreviewObject("webTips").offsetHeight:e},Mobi.closeRightClickTool=function(){var e=jm(document);e.on("contextmenu copy cut",function(e){return!!jm(e.target).is("input, textarea")&&void 0}),e.off("touchend.bc").on("touchend.bc",function(){jm(".img_no_select").removeClass("img_no_select")}),jm(window).on("load",function(){setTimeout(function(){jm("img").forEach(function(e){Mobi.initImgNoSelect(e)})},1e3)})},Mobi.initImgNoSelect=function(e){var t=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),i=!1,o=0,n=0,a=0,r=0,s=jm(e);s.off("touchstart.bc").on("touchstart.bc",function(e){throw o=e.touches[0].pageX,n=e.touches[0].pageY,s.addClass("img_no_select"),new Error("NO ERRPR:禁止长按弹出的菜单")}),s.off("touchmove.bc").on("touchmove.bc",function(e){var t=e.touches[0].pageX,s=e.touches[0].pageY;a=t-o,r=s-n,i=Math.abs(a)>Math.abs(r)&&a>0||(Math.abs(a)>Math.abs(r)&&a<0||(Math.abs(r)>Math.abs(a)&&r>0||Math.abs(r)>Math.abs(a)&&r<0))}),s.off("touchend.bc").on("touchend.bc",function(e){s.removeClass("img_no_select"),!i&&t&&s.trigger("click")})},Mobi.topTipMarquee=function(){var e=Mobi.getPreviewObject("mobiTipsMarquee");if(!e)return!1;for(var t=Mobi.getPreviewObjectClass("J_marquee")[0],i=e.querySelectorAll("li"),o=jm(t).width(),n=(t.offsetWidth,!1),a=[],r=0,s=0;s<i.length;s++)a[s]=parseInt(i[s].offsetWidth),r=o>a[s]?0==s?o:parseInt(r)+a[s]:0==s?a[s]:parseInt(r)+a[s];1==i.length&&a[0]<o||(Mobi.copyTipsDom(i,e),n=!0),n&&Mobi.initTipsMarquee(r)},Mobi.copyTipsDom=function(e,t){var i,o=e.length-1,n=Mobi.getPreviewObjectClass("J_marqueeContainer")[0],a=Mobi.createElementByHtml("<ul class='marquee j-marquee J_marquee' id='J_mobiTipsMarqueeCopy'></ul>");n.appendChild(a);for(var r=0;r<=o;r++)i=jm(e[r]).clone(),jm(a).append(i)},Mobi.initTipsMarquee=function(e){Mobi.getPreviewObjectClass("J_marqueeContainer")[0];var t,i=Mobi.getPreviewObject("mobiTipsMarquee"),o=Mobi.getPreviewObject("J_mobiTipsMarqueeCopy");jm(i).addClass("j-marquee"),jm(i).css({width:e+"px",left:"0",top:"0"}),t=i.offsetWidth,jm(o).css({width:e+"px",left:t+"px",top:"0"}),Mobi.setParentMarquee(i,o)},Mobi.setParentMarquee=function(e,t){var i=e.offsetWidth+t.offsetWidth,o=Mobi.getPreviewObjectClass("J_marqueeContainer")[0];jm(o).css({width:i+"px",left:"0",top:"0"}),o.setAttribute("style",o.getAttribute("style")+Mobi.marqueeAnimation(i,70))},Mobi.marqueeAnimation=function(e,t){var i="mobi_notice_right_to_left_50";return"-webkit-animation: "+i+" "+e/t+"s linear 1s infinite;-moz-animation:    "+i+" "+e/t+"s linear 1s infinite;-o-animation:      "+i+" "+e/t+"s linear 1s infinite;animation:         "+i+" "+e/t+"s linear 1s infinite;"},Mobi.ingTigs=function(e,t){var i=null==e||""==e?"正在处理...":e;Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight;0==jm("#mobiIng").length&&jm("<div id='mobiIng' class='mobiIng'></div>").appendTo("body");var o=jm("#mobiIng"),n=parseInt(1e4*Math.random()),a='<div id="'+n+'" class="mobiTips"><div id="mobiMsg'+n+'" class="mobiMsg">'+i+"</div></div>";o.find(".mobiTips").remove(),jm("#mobiIngTigs").find(".mobiTips").remove(),jm(a).appendTo(o),window.setTimeout(function(){o.css("visibility","hidden"),o.css("opacity","0")},2500),window.setTimeout(function(){jm("#"+n).remove(),o.css("visibility","visible"),o.css("opacity","1")},3e3)},Mobi.ing=function(e,t,i){var o=null==e||""==e?"正在处理...":e,n="",a=!1;n=""==t||null==t||0==t?"<div class='faisco-icons-S000359 iconMargin'></div>":1==t?"<div class='faisco-icons-S000357 iconMargin'></div>":2==t?"<div class='faisco-icons-S000358 iconMargin'></div>":"",i=i||!1;Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight,jm("body").attr("class");0==jm("#mobiIngTigs").length?jm("<div id='mobiIngTigs' class='mobiIngTigs'></div>").appendTo("body"):a=!0;var r=jm("#mobiIngTigs"),s=parseInt(1e4*Math.random()),l='<div id="'+s+'" class="mobiTips" \'><div id="mobiMsg'+s+'" class="mobiMsg">'+n+"<div class=''>"+o+"</div></div></div>";r.html(l),a&&(r.css("visibility","inherit"),r.css("opacity","1")),i||(window.setTimeout(function(){r.css("visibility","hidden"),r.css("opacity","0")},2500),window.setTimeout(function(){jm("#"+s).remove(),r.remove()},1500))},Mobi.initForms=function(){for(var e=document.querySelector("#webModuleContainer").querySelectorAll(".form"),t=0;t<e.length;t++){var i=e[t],o=i.getAttribute("id");o&&(o=o.replace("module",""),1==i.getAttribute("_autoHeight")||jm(i).hasClass("formStyle52")||jm(i).hasClass("formStyle53")||jm(i).hasClass("formStyle35")||Mobi.setModuleHeight2(o,i.clientHeight,Fai.top.moduleManageFontSize["module"+o]))}},Mobi.fixFontSizeDeviation=function(){return},Mobi.topContentFixedAutoHidden=function(e){if(0==e||2==e){var t=Mobi.getPreviewObject("webHeaderBox"),i=(t.style.top,document.querySelector("#webTips"),{}),o=Mobi.getPreviewObject("g_web");o.style.top;t.setAttribute("showNav","true"),o.style[jm.feat.cssPrefix+"Transition"]="top 350ms",o.addEventListener("touchstart",function(e){i.y1=e.touches[0].pageY},!1),o.addEventListener("touchmove",function(e){i.y2=e.touches[0].pageY},!1),o.addEventListener("touchend",function(e){i.y1-i.y2>0?"true"==t.getAttribute("showNav")&&(t.setAttribute("showNav","false"),t.style.opacity=0,t.style.zIndex=-1):"false"==t.getAttribute("showNav")&&(t.setAttribute("showNav","true"),t.style.opacity=1,t.style.zIndex=5)},!1)}},Mobi.onlineServiceInputWord=function(){var e=Fai.top._openThemeV3;if((Fai.top._manageMode||jm.os.supportsTouch)&&(!(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3)||e)){var t=jm("input[type='text'], input[type='email'], input[type='tel'], input[type='number'], textArea"),i=e?document.getElementById("p_footer_nav_wrap"):document.getElementById("webCustomerServiceBox"),o=jm("#wxPublicAttentionService"),n="",a="",r=!1;i&&(r=e?!jm(i).hasClass("is_no_nav"):i.querySelectorAll(".service").length>0),!i||!r&&o.length<1||t.each(function(e,t){jm(t).off("blur.inputted").off("focus.inputted").on("blur.inputted",function(){i.style.display=a,o.length&&(o[0].style.display=n)}).on("focus.inputted",function(){a=jm(i).css("display"),i.style.display="none",o.length&&(n=o.css("display"),o.hide())})})}};var ajaxDone=!0;function fixRegSpecialCharacter(e){for(var t=["\\",".","?","$","*","^","[","]","{","}","|","(",")","/"],i=0,o=t.length;i<o;i++)e=e.replace(t[i],"\\"+t[i]);return e}function timestamp2FormatDate(e){var t=new Date(e),i=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();return"".concat(i,"-").concat(o<10?"0"+o:o,"-").concat(n<10?"0"+n:n)}function closeMobiPhotoEdit(e){if(null!=e&&null!=e){var t=jm.parseJSON(e),i=t.photoList,o=t.moduleId,n=$("#module"+o).data("options"),a=n.content;if(i){a.picList=i;var r=new Array,s="ajax/mobimodule_h.jsp?cmd=setBack&id="+n.moduleId+"&colId="+Fai.top._colId+"&style="+n.style+"&extId="+Fai.top._extId;r.push("&content="+jm.encodeUrl(jm.toJSON(a))),Mobi.ing("正在保存...",!1),jm.ajax({type:"post",url:s,data:r.join(""),error:function(){Mobi.ing("服务繁忙，请稍后重试。",!0)},success:function(e){var t=jm.parseJSON(e);t.success?(Mobi.ing("保存成功。",!0),Mobi.jumpUrlMobi(Mobi.getPreviewDocument().location.href)):Mobi.ing(t.msg,!1)}})}else Mobi.ing("图片信息错误。",!0)}}Mobi.createFullScreenDiv=function(e,t,i){if(ajaxDone)if(t)if(i){jm("#"+e).length>0&&jm("#"+e).remove(),jm("#fullScreenDivCotainer").append("<div id='"+e+"' class='fullScreenDiv webBackground webContainerBox moduleContent categoryModel refreshBase'></div>"),jm("#"+e).css("background-image","none"),jm("#"+e).css("background-image",jm("#webBodyBackground").css("background-image"));var o="";"productDetail"==t&&(o="&loadingPath="+Fai.top._loadingPath),jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd="+t+o,data:i,error:function(){Mobi.closeLoading(),Mobi.ing(LS.js_systemError),ajaxDone=!0},success:function(i){var o=jm.parseJSON(i);o.success&&(jm("#"+e).append(o.html),jm("#"+e).addClass("showFullScreen"),Mobi.getPreviewObject(e).focus(),Mobi.switchJump(),Mobi.initModulePhotoSwipe(e),"productDetail"==t&&Mobi.bindImgLazyLoad("productRemarkDiv")),ajaxDone=!0,Mobi.closeLoading()}})}else Mobi.ing(LS.mallStlSubmitError);else Mobi.ing(LS.mallStlSubmitError)},Mobi.createInnerScreenDiv=function(e,t,i,o,n){if(ajaxDone)if(o)if(n){var a=document.getElementById("ngGroupDiv").className,r=new RegExp("ngTag","g");if(a.match(r)){for(var s=0;s<i;++s)if(jm("#line"+s).hasClass("ngLine-bg")){jm("#line"+s).removeClass("ngLine-bg");break}for(s=0;s<i;++s)jm("#ngName"+s).css({width:"90%"}),jm("#ngMark"+s).css({float:"right"}),jm("#line"+s).css({color:"black"});jm("#ngGroupDiv").removeClass("ngTag"),jm("#ngGroupDiv").text(""),jm("#ngGroupDiv").css({"margin-top":"0px"})}Mobi.showLoading();var l=document.getElementById("ngList"+e).offsetHeight;jm("#ngGroupDiv").addClass("ngTag"),setTimeout(function(){for(var e=0;e<i;++e)jm("#ngName"+e).css({width:"34%"}),jm("#ngMark"+e).css({float:"left"}),t==e?jm("#ngMark"+e).css("color","white"):(jm("#line"+e).css({color:"#555555"}),jm("#ngMark"+e).css({color:"#555555"}))},90),setTimeout(function(){jm("#line"+t).addClass("ngLine-bg"),jm("#ngGroupDiv").css({"min-height":l+"px","margin-top":"-"+l+"px"})},100),jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd="+o,data:n,error:function(){Mobi.closeLoading(),Mobi.ing(LS.js_systemError),ajaxDone=!0},success:function(e){var t=jm.parseJSON(e);t.success&&jm("#ngGroupDiv").append(t.html),ajaxDone=!0,Mobi.closeLoading()}})}else Mobi.ing(LS.mallStlSubmitError);else Mobi.ing(LS.mallStlSubmitError)},Mobi.getCommentDiv=function(e,t,i){if(e)if(isNaN(t))Mobi.ing(LS.mallStlSubmitError);else{0===jm("#comemtDiv").length?jm("#fullScreenDivCotainer").append("<div class='fullScreenDiv webContainerBox moduleContent'  style='overflow-y: scroll;background:#fff;' id='comemtDiv'></div>"):jm("#comemtDiv").html("");var o="id="+t;isNaN(i)||(o+="&pageno="+i),Mobi.mobiHideScroll(),Mobi.showLoading();var n=jm("html").css("font-size");n=n.substring(0,n.length-2),jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd="+e+"&rem="+n,data:o,error:function(){Mobi.closeLoading(),Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);t.success&&(jm("#comemtDiv").append(t.html),jm("#comemtDiv").addClass("showFullScreen")),Mobi.closeLoading(),Mobi.hidePlaceholder(),setTimeout(function(){var e=jm(".ct-s-content-m");if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++){var i=e.eq(t)[0].querySelectorAll("img");void 0!==i&&null!=i&&i.length>0&&Mobi.bindCommImgShow(i)}},100)}})}else Mobi.ing(LS.mallStlSubmitError)},Mobi.removeCommentDiv=function(){Mobi.mobiShowScroll(),jm("#comemtDiv").remove(),window.location.reload()},Mobi.productGroupCollapse=function(e){var t=jm("#pgBox"),i=jm("#pgBox2"),o=Mobi.getPreviewObject("group_"+groupId),n=jm("#pgBox2_Item"+groupId),a=jm("#pgSelect"),r=parseInt(t.height()),s=parseInt(i.height()),l=r>s?r:s;jm("#pgBox2").children(".pgBox2Item").removeClass("pgBox2ItemCollapse"),t.addClass("pgBoxCollapse"),i.addClass("pgBox2Collapse"),i.css("height",l+"px"),n.addClass("pgBox2ItemCollapse");var c=parseInt(o.offsetTop)+4;a.length>0?a.css("top",c+"px"):t.prepend("<div id='pgSelect' class='pgSelect' style='top:"+c+"px'></div>"),setTimeout(function(){},100)},Mobi.disableSafeMode=function(){var e,t=Fai.top.$("#mobiReviewPageFrame").attr("src"),i=t.indexOf("?"),o=Fai.top.location.href||"";-1!=i&&(e=t.substring(0,i),t.substring(i+1).indexOf("_safeMode=true")>-1&&(e+="?"+t.substring(i+1).replace("&_safeMode=true","").replace("_safeMode=true&","").replace("_safeMode=true",""))),Fai.top.$("#mobiReviewPageFrame").attr("src",e),location.hash=function(e){if(e){var t,i,o,n=e.indexOf("#"),a=e.indexOf(".jsp"),r=e.indexOf("?"),s=e.substring(n+2,a),l={},c="";if(-1!=r){for(t=e.substring(r+1).split("&"),o=0;o<t.length;o++)0!=t.length&&(i=t[o].split("="),l[i[0]]=i[1]);c+="&data="+jm.toJSON(l)}return"appId="+s+c}}(e),Fai.top.location.href=o.replace("_safeMode=true","_safeMode=false")},Mobi.switchJump=function(){var e=jm(".switchJump"),t=[101,102,107,106,110,112];jm.each(e,function(e,i){if("length"!==e){var o=i.getAttribute("_t"),n=i.getAttribute("_mu")||i.getAttribute("mJUrl"),a=i.getAttribute("_mColHide"),r=i.getAttribute("href");if(100==o&&null==n&&null==r)return i.setAttribute("href","javascript:void(0);"),void i.setAttribute("style","text-decoration:none;");if(null!=n||a)return a&&-1==t.indexOf(parseInt(o))?(i.setAttribute("href","javascript:void(0);"),void i.setAttribute("style","text-decoration:none;")):void(null!=n&&("javascript"==n.substring(0,10)?(i.setAttribute("href","javascript:;"),i.setAttribute("onclick",n.substring(11)+"return false;")):i.setAttribute("href",n)))}}),Mobi.outerUrlJump()},Mobi.outerUrlJump=function(){Fai.top._manageMode&&$("body").on("click","a",function(e){var t=$(this)[0].getAttribute("href");if(null!==t){var i=$(this)[0].getAttribute("target");-1!=t.indexOf("Mobi.openLinkFlv")||-1==t.indexOf("http")&&-1==t.indexOf("https")||"_blank"==i||(Fai.top.Fai.ing("管理态不支持跳转外部链接，请通过“预览”进行访问",!0),e.preventDefault())}})},Mobi.toggleMust=function(){jm(".msgTopV3 .J_checkMust").siblings(".openThemeV3Must").each(function(){""!=jm(this).siblings(".J_checkMust").val()&&jm(this).css("display","none")}),jm(".msgTopV3 .J_checkMust").each(function(){jm(this).keyup(function(){""!=jm(this).val()?jm(this).siblings(".openThemeV3Must").css("display","none"):jm(this).siblings(".openThemeV3Must").css("display","inline-block")})}),jm(".msgTopV3 .J_checkMust").each(function(){jm(this).keydown(function(){""!=jm(this).val()?jm(this).siblings(".openThemeV3Must").css("display","none"):jm(this).siblings(".openThemeV3Must").css("display","inline-block")})})},Mobi.msgCheckMustItem=function(e){jm(e).find(".msg_isMust").on("keyup focusout",function(){var t=!0;jm(e).find(".msg_isMust").each(function(){""!==jm(this).val().trim()||(t=!1)}),!0===t&&jm(".sendIcon").removeAttr("disabled")})},Mobi.addParentDivToTable=function(){},Mobi.viewPageBeforeInit=function(){Fai.top._manageMode||window.top===window.self||(jm("#g_body").addClass("g_viewMode"),jm("#webTips").css("display","none"))},Mobi.getTransitionEndEventName=function(){var e,t=document.createElement("div"),i={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(i.hasOwnProperty(e)&&void 0!==t.style[e])return i[e]},Mobi.prompt=function(e){e=jm.extend({promptWrap:"",content:"",textClass:"",cancelClass:""},e),Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight;var t=parseInt(1e4*Math.random()),i="<div id='mobiPrompt"+t+"' class='mobiPrompt "+e.promptWrap+" '></div>",o="<div id='mobiPrompt_Bg"+t+"' class='mobiPrompt_Bg'></div>";jm(i).appendTo("body"),jm(o).appendTo("body");var n=jm("#mobiPrompt"+t),a=jm("#mobiPrompt_Bg"+t),r=[];r.push("<div class='mobiPrompt_inner'>"),r.push("<div class=' mobiPrompt_content'>"),r.push("<div class=''>"+e.content+"</div>"),r.push("<div class='J-prompt-cancel icon-mobiPromptClose'></div>"),r.push("</div>"),r.push("<div class=' mobiPrompt_buttons '>"),r.push("<div class='J-prompt-cancel mobiPromptCancel "+e.cancelClass+" icon-PromptCancel'></div>"),r.push("<div class='J-prompt-save mobiPromptSave "+e.textClass+" icon-PromptSave'></div>"),r.push("</div>"),r.push("</div>"),n.append(r.join("")),e.callback&&n.find(".J-prompt-save").on("click",function(){n.removeClass("mobiPromptShow"),a.removeClass("mobiPromptBgShow"),setTimeout(function(){n.remove(),a.remove()},200),e.callback()}),e.cancelCallback?n.find(".J-prompt-cancel").on("click",function(){n.removeClass("mobiPromptShow"),a.removeClass("mobiPromptBgShow"),setTimeout(function(){n.remove(),a.remove()},200),e.cancelCallback()}):n.find(".J-prompt-cancel").on("click",function(){n.removeClass("mobiPromptShow"),a.removeClass("mobiPromptBgShow"),setTimeout(function(){n.remove(),a.remove()},200)}),window.setTimeout(function(){a.addClass("mobiPromptBgShow"),n.addClass("mobiPromptShow")},100)},Mobi.customPopup=function(e){e=jm.extend({content:""},e),Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight;var t=parseInt(1e4*Math.random()),i="<div id='mobiPrelude"+t+"' class='mobiPrelude'></div>",o="<div id='mobiPrompt"+t+"' class='mobiPrompt'></div>",n="<div id='mobiPrompt_Bg"+t+"' class='mobiPrompt_Bg' style='opacity: 0.6;'></div>";jm(i).appendTo("body"),jm(o).appendTo("body"),jm(n).appendTo("body");i=jm("#mobiPrelude"+t);var a=jm("#mobiPrompt"+t),r=jm("#mobiPrompt_Bg"+t),s=[];s.push("<div class='mobiPrelude_inner' style='background: transparent;'>"),void 0!==e.prelude&&null!=e.prelude||(e.prelude=""),s.push(e.prelude||""),s.push("</div>"),i.append(s.join(""));var l=[];l.push("<div class='mobiPrompt_inner' style='background: transparent; box-shadow: none;'>"),l.push(e.content),l.push("</div>"),a.append(l.join("")),e.callback&&a.find(".J-prompt-callback").on("click",function(){i.removeClass("mobiPreludeShow"),a.removeClass("mobiPromptShow"),r.removeClass("mobiPromptBgShow"),setTimeout(function(){i.remove(),a.remove(),r.remove()},200),e.callback()}),e.cancelCallback?a.find(".J-prompt-cancel").on("click",function(){i.removeClass("mobiPreludeShow"),a.removeClass("mobiPromptShow"),r.removeClass("mobiPromptBgShow"),setTimeout(function(){i.remove(),a.remove(),r.remove()},200),e.cancelCallback()}):a.find(".J-prompt-cancel").on("click",function(){i.removeClass("mobiPreludeShow"),a.removeClass("mobiPromptShow"),r.removeClass("mobiPromptBgShow"),setTimeout(function(){i.remove(),a.remove(),r.remove()},200)}),window.setTimeout(function(){r.addClass("mobiPromptBgShow"),i.addClass("mobiPreludeShow"),e.mainFrameTimeout?window.setTimeout(function(){i.removeClass("mobiPreludeShow"),i.remove(),a.addClass("mobiPromptShow")},e.mainFrameTimeout):a.addClass("mobiPromptShow")},100)},Mobi.initWebPage=function(e){var t=e.triggerId,i=(e.panelId,e.pageHtml,e.pageHead,e.pageBg,e.returnSeltFun||!1),o=(e.closeWebPage,e.closeCallBack,e.direction,e.callback),n=!1,a=e.callbackAlways||!1;JMWebPagePanel=jm("#webPagePanel"+t),0!==JMWebPagePanel.length&&JMWebPagePanel.remove();var r=["newsDetailShare","newsDetailV3Share","productDetailShare","graphicPosterItem"];if(jm("#"+t).unbind("click.initWebPage").bind("click.initWebPage",function(i){Mobi.showPanel(e,!0),-1!=r.indexOf(t)||a?o&&o():n||(o&&o(),n=!0),window.scrollTo(0,0)}),i)return function(){Mobi.showPanel(e,!0),n||(o&&o(),n=!0)}},Mobi.showPanel=function(e,t){var i=e.triggerId,o=e.panelId,n=e.pageHtml,a=e.pageBg,r=e.closeWebPage,s=e.closeCallBack||function(){},l=e.direction||"right",c=e.callback;t=t||!1;redo=e.redo||!1,pdThemev3="",jm("#g_body").css("overflow-y","hidden");var d,m=jm("#webPagePanel"+i),p=["newsDetailShare","newsDetailV3Share","productDetailShare"];if(-1!=p.indexOf(i)){var u=jm("#webPagePaneloneKeySharing");jm("#"+triggerId).unbind("click.initWebPage"),0!==u.length&&u.remove()}else"oneKeySharing"==i&&p.forEach(function(e){var t=jm("#webPagePanel"+e);jm("#"+triggerId).unbind("click.initWebPage"),0!==t.length&&t.remove()});redo&&m.length&&m.remove(),20==Fai.top._colInfo.id&&Fai.top._openThemeV3&&(pdThemev3=" pdThemev3"),n&&(d=jm(n),d=jm("#"+d[0].id));var h="webPagePanelRight";"left"===l?h="webPagePanelLeft":"top"===l?h="webPagePanelTop":"bottom"===l&&(h="webPagePanelBottom");var f="";a&&(f="<div class='webPagePanelBg' style='z-index:999'></div>");var g=0;"productMallOptionPanel"==o&&jm("video").css("display","none");if(0==m.length||null==d||redo){jm("#g_web").append("<div id='webPagePanel"+i+"' class='webPagePanel"+pdThemev3+"' style='z-index:1000'>"+f+"</div>"),m=jm("#webPagePanel"+i),n?(m.append(n),jm(".swipImgBox").each(function(e,t){}),d=jm(n),d=jm("#"+d[0].id)):(o||alert("panelId is null"),d=jm("#"+o),m.append(d)),d.addClass(h),d.addClass("webPagePanel"),m.show(),d.show(),setTimeout(function(){d.addClass("webPagePanelShow")}),"graphicPosterItem"==i&&d.unbind("touchmove.graphicPosterItem").bind("touchmove.graphicPosterItem",function(e){e.preventDefault()},!1),a&&Mobi.bindTouchAndClickEvent(jm("#webPagePanel"+i+" .webPagePanelBg"),function(e){return d.removeClass("webPagePanelShow"),d.removeClass("webPagePanelShow"),jm("#g_body").css({overflow:"",height:"",top:""}),jm("#g_body").css("overflow-y",""),jm("html").css({overflow:""}),jm("#g_web").removeClass("gwNoScroll"),jm("#webPagePanel"+i).css("z-index","-1"),"graphicPosterItem"==i&&jm("#webPagePanel"+i).remove(),window.scrollTo(0,g),!1});for(var v=r.split(","),b=0;b<v.length;b++){var j=v[b].trim();Mobi.bindTouchAndClickEvent(jm(j),function(e){return d.removeClass("webPagePanelShow"),jm("#g_body").css({overflow:"",height:"",top:""}),jm("#g_body").css("overflow-y",""),jm("html").css({overflow:""}),jm("#g_web").removeClass("gwNoScroll"),jm("#webPagePanel"+i).css("z-index","-1"),jm("#webPagePanel"+i).css("display","none"),"graphicPosterItem"==i&&(jm("#webPagePanel"+i).remove(),d.unbind("touchmove.graphicPosterItem")),window.scrollTo(0,g),"userCommentId"!=i&&"postComment"!=i||jm("input,textarea").each(function(e,t){t.blur()}),"function"==typeof s&&s(),!1}),jm(j).unbind("click"),jm(j).bind("click",function(){return d.removeClass("webPagePanelShow"),jm("#g_body").css({overflow:"",height:"",top:""}),jm("#g_body").css("overflow-y",""),jm("html").css({overflow:""}),jm("#g_web").removeClass("gwNoScroll"),jm("#webPagePanel"+i).css("z-index","-1"),jm("#webPagePanel"+i).css("display","none"),"graphicPosterItem"==i&&(jm("#webPagePanel"+i).remove(),d.unbind("touchmove.graphicPosterItem")),window.scrollTo(0,g),"userCommentId"!=i&&"postComment"!=i||jm("input,textarea").each(function(e,t){t.blur()}),"function"==typeof s&&s(),!1})}Mobi.bindTransitionEnd(d,function(){d.hasClass("webPagePanelShow")||m.hide()}),c&&!t&&c()}else m.show(),d.addClass(h),setTimeout(function(){d.addClass("webPagePanelShow")},0);g=window.scrollY;var _=jm(window).height();m.css("height",_+"px"),m.css("z-index","1000"),Mobi.initShare("shareLinkWeixin","","shareLinkQQ"),jm("#copy_url").bind("click",function(){var e=new ClipboardJS("#copy_url");e.on("success",function(t){Mobi.ing("复制成功",1),e.destroy(),t.clearSelection()}),e.on("error",function(t){navigator.userAgent.indexOf("UCBrowser")>-1?Mobi.ing("复制成功",1):Mobi.ingTigs("该浏览器不支持复制链接的功能，请手动复制"),e.destroy()})})},Mobi.initProductGroundNav=function(e,t){var i=jm("#module"+e).find(".productNewGroup"),o=i.find(".J_navOpenBtn"),n=i.find(".J_navHorizon");o.on("click",function(){var e=i.find(".J_navMask");o.hasClass("faisco-icons-downward1")?(o.removeClass("faisco-icons-downward1").addClass("faisco-icons-upward1"),n.addClass("f-navOpenStyle"),e.length>0?e.show():(i.append("<div class='J_navMask f-navMask'></div>"),i.find(".J_navMask").on("click",function(){o.trigger("click")}))):(e.hide(),o.removeClass("faisco-icons-upward1 f-navOpenStyle").addClass("faisco-icons-downward1"),n.removeClass("f-navOpenStyle"))})},Mobi.initProductGroup=function(e,t,i){if(1==t||0==e)return!1;var o=window.innerHeight?window.innerHeight:window.screen.height,n=jm("#module22"),a=jm(".productNewGroup"),r=jm(".webCustomerServiceBox"),s=0;r.length&&(s=r[0].offsetHeight);var l,c,d,m,p,u,h=a.attr("_prUrl")||"",f=(n[0]||{}).offsetHeight,g=!1;Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3&&(g=!0),g&&(l=a.find(".firstGroup"),jm("#webFooter").find(".footerMenu").hide(),jm("#webFooter").find(".technical").hide(),a.height(jm("body").height()-jm("#webHeaderBox").height()-jm("#fixedAreaBox").height()+"px"));for(var v=jm(a).find(".J_itemImage"),b=0;b<v.length;b++){_(v[b])}if(a.css("height",o-f-s+"px"),(c=a.find(".firstGroup .firstGroupItem")).off(".productNewGroup").on("click.productNewGroup",function(){var e,t=a.find(".firstGroup .checkedItem"),i=a.find(".unFirstGroup .checkedPanel"),o=jm(this),n=jm(o).attr("data-id"),r=jm("#sed_"+n),s=jm(".hideScollBar");if(0!=a.find(".J_hasThreeGroup").length){if(!r.html()&&h)return window.location.href=h+"?groupId="+n,!1}else if((""===r.html()||""===r.find(".f-groupImgWrap").html())&&h)return window.location.href=h+"?groupId="+n,!1;if(jm(this).hasClass("checkedItem"))return!1;t.removeClass("checkedItem"),i.removeClass("checkedPanel"),o.addClass("checkedItem"),r.addClass("checkedPanel"),t.find(".firstGroupName").removeClass("f-fontColor"),o.find(".firstGroupName").addClass("f-fontColor"),s[0].scrollTop=0,g&&(u=0,c.find(".J_navSelect").removeClass("fk-navSelect"),o.find(".J_navSelect").addClass("fk-navSelect"),u=jm("body")[0].clientWidth/2-o[0].getBoundingClientRect().left,clearInterval(e),e=u>0?setInterval(function(){u>0?(u--,l[0].scrollLeft--):clearInterval(e)},1):setInterval(function(){u<0?(u++,l[0].scrollLeft++):clearInterval(e)},1))}),5!=e&&6!=e?Mobi.SimpleDrag.__create(a.find(".firstGroupList")):(d=0,c.each(function(e,t){p=jm(t),m=t.offsetWidth+2+parseFloat(p.css("margin-right").replace("px","")),d+=m}),a.find(".firstGroupList").width(d+"px")),i&&(g||1==e)){var j={key:"productGroup",targets:jm(a).find(".J_groupItem"),type:Mobi.QuickIn.TYPE.FU,popupWindowOption:{settings:{title:"添加图片",maxSize:5,type:["jpg","jpeg","bmp","png","gif"],imgMode:2,maxChoiceList:1,netFileMode:!0,openIcon:!0,tabIndex:0,group:"thumbImg"},closeFunc:function(e,t){if(0==e.length||!t.fileId||0==t.fileId.length)return;var i=parseInt(jm(e).parent().attr("data-id")),o=t.fileId,n=t.filePath,a=t.isDefaultColor,r=t.color,s="ajax/productGroup_h.jsp?cmd=setSingle&id="+i+"&mIcon="+o;a||(s=s+"&mIconColor="+Fai.top.Fai.encodeUrl(r));jm.ajax({url:s,type:"get",error:function(){top.Fai.ing("服务繁忙，请稍候重试",!1)},success:function(i){var s=jm.parseJSON(i);if(s.success){var l=jm(e).parent().find(".J_itemImage"),c=jm(l).parent(),d=g?"f-itemImg":"itemImage";c.empty(),top.Fai.isFontIcon(o)?a?c.append("<span class='J_itemImage "+d+" "+n+"'></span>"):c.append("<span class='J_itemImage "+d+" "+n+"' style='color:"+r+"'></span>"):c.append("<img  class='J_itemImage "+d+"' src='"+n+"' data-w='"+t.fileWidth+"' data-h='"+t.fileHeight+"' />"),_(jm(c).find(".J_itemImage")),top.Fai.ing(s.msg,!0)}else top.Fai.ing(s.msg,!0)}})}}};2!=e&&Mobi.QuickIn.__createInstance(j)}function _(e){var t=parseInt(jm(e).attr("data-w")),i=parseInt(jm(e).attr("data-h")),o=g?"3.0rem":"2.8rem",n=g?"3.0rem":"2.9rem";t>=i?jm(e).css("width",o).css("height","auto").css("vertical-align","middle"):i>t&&jm(e).css("width","auto").css("height",n).css("display","block").css("margin","0 auto")}},Mobi.initProductGroupV3=function(e,t,i){if(1==t||0==e)return!1;window.innerHeight?window.innerHeight:window.screen.height;var o,n,a,r,s,l,c=jm("#module22"),d=jm(".productNewGroup"),m=jm(".firstGroup"),p=d.attr("_prUrl")||"";c.height();m=d.find(".firstGroup"),jm("#webFooter").find(".footerMenu").hide(),jm("#webFooter").find(".technical").hide(),"block"==jm("#p_footer_nav_wrap").css("display")?(l=jm("body").height()-jm(".sysSearch").height()-jm("#J_footer_nav").height()+"px",d.height(l),m.css({height:l,"min-height":l})):(l=jm("body").height()-jm(".sysSearch").height()-1+"px",d.height(l),m.css({height:l,"min-height":l}));for(var u=jm(d).find(".J_itemImage"),h=0;h<u.length;h++){g(u[h])}if((o=d.find(".firstGroup .firstGroupItem")).off(".productNewGroup").on("click.productNewGroup",function(){var e,t=d.find(".firstGroup .checkedItem"),i=d.find(".unFirstGroup .checkedPanel"),n=jm(this),a=jm(n).attr("data-id"),r=jm("#sed_"+a),l=jm(".hideScollBar");if(0!=d.find(".J_hasThreeGroup").length){if(!r.html()&&p)return window.location.href=p+"?groupId="+a,!1}else if((""===r.html()||""===r.find(".f-groupImgWrap").html())&&p)return window.location.href=p+"?groupId="+a,!1;if(jm(this).hasClass("checkedItem"))return!1;t.removeClass("checkedItem"),i.removeClass("checkedPanel"),n.addClass("checkedItem"),r.addClass("checkedPanel"),l[0].scrollTop=0,t.find(".firstGroupName").removeClass("f-fontColor"),n.find(".firstGroupName").addClass("f-fontColor"),s=0,o.find(".J_navSelect").removeClass("fk-navSelect"),n.find(".J_navSelect").addClass("fk-navSelect"),s=jm("body")[0].clientWidth/2-n[0].getBoundingClientRect().left,clearInterval(e),e=s>0?setInterval(function(){s>0?(s--,m[0].scrollLeft--):clearInterval(e)},1):setInterval(function(){s<0?(s++,m[0].scrollLeft++):clearInterval(e)},1)}),5!=e&&6!=e?Mobi.SimpleDrag.__create(d.find(".firstGroupList")):(n=0,o.each(function(e,t){r=jm(t),a=t.offsetWidth+2+parseFloat(r.css("margin-right").replace("px","")),n+=a}),d.find(".firstGroupList").width(n+"px")),i){var f={key:"productGroup",targets:jm(d).find(".J_groupItem"),type:Mobi.QuickIn.TYPE.FU,popupWindowOption:{settings:{title:"添加图片",maxSize:5,type:["jpg","jpeg","bmp","png","gif"],imgMode:2,maxChoiceList:1,netFileMode:!0,openIcon:!0,tabIndex:0,group:"thumbImg"},closeFunc:function(e,t){if(0==e.length||!t.fileId||0==t.fileId.length)return;var i=parseInt(jm(e).parent().attr("data-id")),o=t.fileId,n=t.filePath,a=t.isDefaultColor,r=t.color,s="ajax/productGroup_h.jsp?cmd=setSingle&id="+i+"&mIcon="+o;a||(s=s+"&mIconColor="+Fai.top.Fai.encodeUrl(r));jm.ajax({url:s,type:"get",error:function(){top.Fai.ing("服务繁忙，请稍候重试",!1)},success:function(i){var s=jm.parseJSON(i);if(s.success){var l=jm(e).parent().find(".J_itemImage"),c=jm(l).parent();c.empty(),top.Fai.isFontIcon(o)?a?c.append("<span class='J_itemImage f-itemImg "+n+"'></span>"):c.append("<span class='J_itemImage f-itemImg "+n+"' style='color:"+r+"'></span>"):c.append("<img  class='J_itemImage f-itemImg' src='"+n+"' data-w='"+t.fileWidth+"' data-h='"+t.fileHeight+"' />"),g(jm(c).find(".J_itemImage")),top.Fai.ing(s.msg,!0)}else top.Fai.ing(s.msg,!0)}})}}};2!=e&&Mobi.QuickIn.__createInstance(f)}function g(e){var t=parseInt(jm(e).attr("data-w")),i=parseInt(jm(e).attr("data-h"));t>=i?jm(e).css("width","2.625rem").css("height","auto").css("vertical-align","middle"):i>t&&jm(e).css("width","auto").css("height","2.625rem").css("display","block").css("margin","0 auto")}},Mobi.QuickIn={TYPE:{FU:1},__data:{},__html:{},__func:{},__createInstance:new Function},function(e,t){t.__createInstance=function(i){!function(i){(function(i){for(var o=t.__html.replace("_$dataId",t.__data.count).replace("_$dataType",i.type),n=0;n<i.targets.length;n++){var a=i.targets[n];e(a).append(o)}t.__data.instances[t.__data.count]=i})(i),n=t.__data.instances[t.__data.count],e(n.targets).find(".quick_in").unbind("click.quickIn").bind("click.quickIn",function(t){o=e(this);var i=e(o).parents(".thirdGroupImageItem").find(".itemImage");switch(n.type){case Mobi.QuickIn.TYPE.FU:top.Mobi.fileUpload2("",e.extend({oldIcon:{filePath:function(e){var t="";try{t=e.attr("class").match(/faisco-icons-\w{7}/gi).pop()}finally{return t}}(i),color:i.css("color")}},n.popupWindowOption.settings),function(t){var i=e.parseJSON(t);i&&n.popupWindowOption.closeFunc(o,i.data[0])});break;default:alert("not found quickIn type!")}}),e(n.targets).off(".quickIn").on("mouseenter.quickIn",function(){e(this).find(".quick_in").show()}).on("mouseleave",function(){e(this).find(".quick_in").hide()});var o,n}(i)},t.__data.init||(t.__data.count=0,t.__data.init=!1,t.__data.instances={},t.__html="<div class='quick_in' data-id='_$dataId' data-type='_$dataType'></div>"),t.__data.init=!0}(jm,Mobi.QuickIn),Mobi.SimpleDrag={__data:{},__func:{},__create:new Function},function(e,t,i){function o(e,t,i){t.isClicking=!0,t.startY=r(e),0!=t.overflowHeight&&(t.transformY=s(i))}function n(t,i,o){i.isClicking=!1,i.moveY=function(e){if(!e.moveY||e.moveY>0)return 0;if(e.moveY<0&&-1*e.moveY>=e.overflowHeight)return-1*e.overflowHeight;return e.moveY}(i),e(o).css("transform","translateY("+i.moveY+")").css("-webkit-transform","translateY("+i.moveY+"px)"),e(o).css("transition","transform 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95) 0s").css("-webkit-transition","transform 0.5s cubic-bezier(0.45, 0.05, 0.55, 0.95) 0s"),setTimeout(function(){e(o).css("transition","").css("-webkit-transition","")},550)}function a(t,i,o){i.isClicking&&(i.moveY=r(t)-i.startY,0!=i.overflowHeight&&(i.moveY+=i.transformY),i.moveY>i.moveOverflowRange?i.moveY=i.moveOverflowRange:i.moveY<-1*i.overflowHeight-i.moveOverflowRange&&(i.moveY=-1*i.overflowHeight-i.moveOverflowRange),e(o).css("transform","translateY("+i.moveY+")").css("-webkit-transform","translateY("+i.moveY+"px)"))}function r(e){var t=e.clientY;return e.touches&&(t=e.touches[0].clientY),t}function s(t){if(0==t.length)return 0;var i=e(t).css("transform");return i||(i=e(t).css("-webkit-transform")),"none"==i?i=0:(i=i.replace("translateY(","").replace(")",""),i=parseInt(i,10)),i||(i=0),i}Mobi.SimpleDrag.__create=function(t){!function(t){var i={};(function(t,i){var o=parseInt(e(i).parent().height()),n=parseInt(e(i).height());t.startY=0,t.moveY=0,t.isClicking=!1,t.overflowHeight=n-o,t.transformY=s(i),t.moveOverflowRange=e(e(i).children()[0]).height(),n<o&&(t.overflowHeight=0)})(i,t),e(t).css("transform","translateY(0px)"),e(t).off(".simpleDrag"),e(t).on("mousedown.simpleDrag",function(e){o(e,i,this)}).on("touchstart.simpleDrag",function(e){o(e,i,this)}).on("mouseup.simpleDrag",function(e){n(e,i,this)}).on("touchend.simpleDrag",function(e){n(e,i,this)}).on("mousemove.simpleDrag",function(e){a(e,i,this),e.preventDefault()}).on("touchmove.simpleDrag",function(e){a(e,i,this),e.preventDefault()})}(t)}}(jm),function(e,t){"function"==typeof define&&define.amd?define(["$"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.Dialog=t(window.Zepto||window.jQuery||jm)}(this,function(e){e.fn.Dialog=function(i){var o=[];return e(this).each(function(){var n=new t,a=e.extend({trigger:e(this)},i);n.init(a),o.push(n)}),o},e.Dialog=function(i){if("confirm"===i.type){var o=new t,n='<div class="fkarea-ui-confirm-title">'+i.content+"</div>";i.buttons||(i.buttons=[{no:"取消"},{yes:"完成"}]);for(var a="",r=0,s=i.buttons.length;r<s;r++){var l=i.buttons[r];l.no&&(a+='<td><button class="fkarea-ui-confirm-no" data-type="no">'+l.no+"</button></td>"),l.yes&&(a+='<td><button class="fkarea-ui-confirm-submit " data-type="yes">'+l.yes+"</button></td>")}n='<table class="fkarea-ui-dialog-action"><tr>'+a+"</tr></table>"+n;var c=e.extend({target:n,animate:!0,show:!0,fixed:!0,mask:!0,className:"fkarea-ui-alert",afterHide:function(e){this.dispose()},beforeShow:function(t){o.touch(e(".fkarea-ui-confirm-submit",t),function(){i.callback&&i.callback.call(o,"yes",t),e("body").css({overflow:"auto"})}),o.touch(e(".fkarea-ui-confirm-no",t),function(){i.callback&&i.callback.call(o,"no",t),e("body").css({overflow:"auto"})})}},i);o.init(c)}},e.confirm=function(t,i,o,n){var a={},r={zIndex:1001,type:"confirm"};a="object"==_typeof(t)?e.extend(r,t):e.extend(r,{content:t,buttons:i,callback:o}),e.Dialog(e.extend(a,n))};var t=function(){var t=Math.random().toString().replace(".","");this.id="dialog_"+t,this.settings={},this.settings.titleTpl=e('<div class="fkarea-ui-dialog-title"></div>'),this.timer=null,this.showed=!1,this.mask=e()};return t.prototype={init:function(t){this.settings=e.extend({fixed:!1},this.settings,t),this.settings.mask&&(this.mask=e('<div class="fkarea-ui-dialog-mask"/>'),e("body").append(this.mask)),e("body").append('<div class="fkarea-ui-dialog" id="'+this.id+'"></div>'),this.dialogContainer=e("#"+this.id);var i=this.settings.zIndex||10;this.dialogContainer.css({zIndex:i}),this.settings.className&&this.dialogContainer.addClass(this.settings.className),this.mask.css({zIndex:i-1}),this.settings.title&&(this.dialogContainer.append(this.settings.titleTpl),this.settings.titleTpl.html(this.settings.title)),this.bindEvent(),this.settings.show&&this.show()},touch:function(t,i){var o;e(t).on("click",function(e){return i.call(this,e)}),e(t).on("touchmove",function(e){o=!0,e.preventDefault(),e.stopPropagation()}).on("touchend",function(e){(e.preventDefault(),o)||(i.call(this,e,"touch")||(e.preventDefault(),e.stopPropagation()));o=!1})},bindEvent:function(){var t=this;this.settings.trigger&&(e(this.settings.trigger).click(function(){t.show()}),t.touch(e(this.settings.trigger),function(){t.show()})),e(this.dialogContainer).on("click",".js-dialog-close",function(){return t.hide(),!1}),e(this.dialogContainer).on("hide",function(){t.hide()})},dispose:function(){this.dialogContainer.remove(),this.mask.remove(),this.timer&&clearInterval(this.timer)},hide:function(){var t=this;t.settings.beforeHide&&t.settings.beforeHide.call(t,t.dialogContainer),this.showed=!1,this.mask.hide(),this.timer&&clearInterval(this.timer),this.settings.animate?(this.dialogContainer.removeClass("fkarea-zoomIn").addClass("fkarea-zoomOut"),setTimeout(function(){t.dialogContainer.hide(),"object"===_typeof(t.settings.target)&&e("body").append(t.dialogContainer.hide()),t.settings.afterHide&&t.settings.afterHide.call(t,t.dialogContainer)},500)):(this.dialogContainer.hide(),"object"===_typeof(this.settings.target)&&e("body").append(this.dialogContainer),this.settings.afterHide&&this.settings.afterHide.call(this,this.dialogContainer))},show:function(){"string"==typeof this.settings.target?/^(\.|\#\w+)/gi.test(this.settings.target)?this.dailogContent=e(this.settings.target):this.dailogContent=e("<div>"+this.settings.target+"</div>"):this.dailogContent=this.settings.target,this.mask.show(),this.mask.bind("touchmove",function(e){e.preventDefault()}),e("body").css({overflow:"hidden"}),this.dailogContent.show(),this.dailogContent.bind("touchmove",function(e){e.preventDefault()}),this.height=this.settings.height||"auto",this.width=this.settings.width||"auto",this.dialogContainer.append(this.dailogContent).show().css({height:this.height,width:this.width}),this.settings.beforeShow&&this.settings.beforeShow.call(this,this.dialogContainer),this.showed=!0,this.setPosition();var t=this;this.timer&&clearInterval(this.timer),this.settings.fixed&&(this.timer=setInterval(function(){t.setPosition()},1e3)),this.settings.animate&&this.dialogContainer.addClass("fkarea-zoomIn").removeClass("fkarea-zoomOut").addClass("fkarea-animated")},setPosition:function(){if(this.showed){this.dialogContainer.show(),this.height=this.settings.height,this.width=this.settings.width,isNaN(this.height)&&(this.height=this.dialogContainer.outerHeight&&this.dialogContainer.outerHeight()||this.dialogContainer.height()),isNaN(this.width)&&(this.width=this.dialogContainer.outerWidth&&this.dialogContainer.outerWidth()||this.dialogContainer.width());var e=this.settings.clientHeight||document.documentElement.clientHeight||document.body.clientHeight,t=(this.settings.clientWidth||document.documentElement.clientWidth||document.body.clientWidth)/2-this.width/2,i=e/2-this.height/2;t=Math.floor(Math.max(0,t)),i=Math.floor(Math.max(0,i));var o="absolute",n="768px";jm&&jm("#g_web")&&jm("#g_web").length>0&&(n=jm("#g_web").css("max-width")),this.settings.fixed&&(o="fixed"),this.dialogContainer.css({position:o,top:i,width:"100%",left:0,right:0,maxWidth:n,margin:"0px auto"})}}},t}),function(e,t){"function"==typeof define&&define.amd?define(["$","dialog"],t):"function"==typeof define&&define.cmd?define(function(e,i,o){var n=e("$"),a=e("dialog");return t(n,a)}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.MobileSelectArea=t(window.Zepto||window.jQuery||jm)}(this,function(e,t){var i=function(){var e=Math.random().toString().replace(".","");this.id="scroller_"+e,this.scroller,this.data,this.index=0,this.value=[0,0,0],this.oldvalue,this.oldtext=[],this.text=["","",""],this.level=3,this.mtop=30,this.separator=""};return i.prototype={init:function(t){this.settings=e.extend({eventName:"click"},t),this.lcid=parseInt(this.settings.lcid),this.trigger=e(this.settings.trigger),null==this.settings.init?this.init=1:this.init=0,level=parseInt(this.settings.level),this.level=level>0?level:3,this.trigger.attr("readonly","readonly"),this.value=this.settings.value&&this.settings.value.split(",")||[0,0,0],this.text=this.settings.text||this.trigger.val().split(" ")||["","",""],this.oldvalue=this.value.concat([]),this.oldtext=this.text.concat([]),this.clientHeight=document.documentElement.clientHeight||document.body.clientHeight,this.clientWidth=document.documentElement.clientWidth||document.body.clientWidth,this.bindEvent()},getData:function(){"object"==_typeof(this.settings.data)&&(this.data=this.settings.data)},bindEvent:function(){var t=this;this.trigger[t.settings.eventName](function(i){for(var o="",n=0;n<t.level;n++)o+="<div></div>";2052!=t.lcid&&1028!=t.lcid?t.buttons=[{no:"cancel"},{yes:"fulfil"}]:t.buttons=null,e.confirm('<div class="fkarea-ui-scroller-mask"><div id="'+t.id+'" class="ui-scroller">'+o+"<p></p></div></div>",t.buttons,function(e,i){"yes"==e&&t.submit(),"no"==e&&t.cancel(),this.dispose()},{width:320,height:215}),t.scroller=e("#"+t.id),t.getData(),t.format();var a=0,r=0;function s(t){t=t||window.event;var i=(r=t.pageY)-a,o=e(t.target).parent();if("DL"==o[0].nodeName){var n=parseInt(o.css("top")||0)+i;n<60-e(o).height()&&(n=60-e(o).height()),o.css("top",n+"px"),a=r,t.preventDefault()}}function l(i){i=i||window.event,r=i.pageY,e(window).off("mousemove.area-scroller"),e(window).off("mouseup.area-scroller");var o=r-a,n=e(i.target).parent();if("DL"==n[0].nodeName){var s=e(n.parent()).index(),l=parseInt(n.css("top")||0)+o-30;l>t.mtop&&(l=t.mtop),l<60-e(n).height()&&(l=60-e(n).height());var c=l/t.mtop,d=Math.round(c),m=Math.abs(d)+1;1==d&&(m=0),t.value[s]=e(n.children().get(m)).attr("ref"),0==t.value[s]?t.text[s]="":t.text[s]=e(n.children().get(m)).html();for(var p=t.level-1;p>s;p--)t.value[p]=0,t.text[p]="";e(n.children().get(m)).hasClass("focus")||t.format(),e(n.children().get(m)).addClass("focus").siblings().removeClass("focus"),n.css("top",d*t.mtop+"px"),i.preventDefault()}}return t.scroller.children().off("mousedown.area-scroller").on("mousedown.area-scroller",function(t){t=t||window.event,a=t.pageY,e(window).off("mousemove.area-scroller").on("mousemove.area-scroller",s),e(window).off("mouseup.area-scroller").on("mouseup.area-scroller",l),t.preventDefault()}),t.scroller.children().bind("touchstart",function(e){a=(e.changedTouches||e.originalEvent.changedTouches)[0].pageY}),t.scroller.children().bind("touchmove",function(t){var i=(r=(t.changedTouches||t.originalEvent.changedTouches)[0].pageY)-a,o=e(t.target).parent();if("DL"==o[0].nodeName){var n=parseInt(o.css("top")||0)+i;return n<60-e(o).height()&&(n=60-e(o).height()),o.css("top",n+"px"),a=r,!1}}),t.scroller.children().bind("touchend",function(i){var o=(r=(i.changedTouches||i.originalEvent.changedTouches)[0].pageY)-a,n=e(i.target).parent();if("DL"==n[0].nodeName){var s=e(n.parent()).index(),l=parseInt(n.css("top")||0)+o-30;l>t.mtop&&(l=t.mtop),l<60-e(n).height()&&(l=60-e(n).height());var c=l/t.mtop,d=Math.round(c),m=Math.abs(d)+1;1==d&&(m=0),t.value[s]=e(n.children().get(m)).attr("ref"),0==t.value[s]?t.text[s]="":t.text[s]=e(n.children().get(m)).html();for(var p=t.level-1;p>s;p--)t.value[p]=0,t.text[p]="";return e(n.children().get(m)).hasClass("focus")||t.format(),e(n.children().get(m)).addClass("focus").siblings().removeClass("focus"),n.css("top",d*t.mtop+"px"),!1}}),!1})},format:function(){this.scroller.children();this.f(this.data)},f:function(t){var i=t;i||(i=[]);var o,n='<dl><dd ref="0">——</dd>',a=this.mtop;if(0!==this.index&&"0"==this.value[this.index-1]&&0==this.init)n='<dl><dd ref="0" class="focus">——</dd>',this.value[this.index]=0,this.text[this.index]="",0;else{if("0"==this.value[this.index]&&(n='<dl><dd ref="0" class="focus">——</dd>',0),i.length>0&&1==this.init){n="<dl>";var r=i[0].pid||0,s=i[0].id||0;i[0].id,o=2052==this.lcid||1028==this.lcid?site_cityUtil.getCities(i[0].id):site_cityUtil.getCitiesEn(i[0].id),this.value[this.index]||(this.value[this.index]=s,this.text[this.index]=i[0].name),n+='<dd pid="'+r+'" class="'+d+'" ref="'+s+'">'+i[0].name+"</dd>"}for(var l=this.init,c=i.length;l<c;l++){r=i[l].pid||0,s=i[l].id||0;var d="";this.value[this.index]==s&&(d="focus",s,o=2052==this.lcid||1028==this.lcid?site_cityUtil.getCities(i[l].id):site_cityUtil.getCitiesEn(i[l].id),a=this.mtop*-(l-this.init)),n+='<dd pid="'+r+'" class="'+d+'" ref="'+s+'">'+i[l].name+"</dd>"}}var m=n+="</dl>",p=this.scroller.children();e(p[this.index]).html(m),e(p[this.index]).children().css("top",a+30+"px"),this.index++,this.index>this.level-1?this.index=0:this.f(o)},submit:function(){this.oldvalue=this.value.concat([]),this.oldtext=this.text.concat([]),1==this.trigger[0].nodeType&&(this.trigger.val(this.text.join(this.separator)),this.trigger.attr("data-value",this.value.join(","))),this.settings.callback&&this.settings.callback.call(this,this.scroller,this.text,this.value)},cancel:function(){this.value=this.oldvalue.concat([]),this.text=this.oldtext.concat([])}},i}),Mobi.initProductGroupManage=function(e,t){if(!(Fai.top._templateFrameId<2e3||Fai.top._templateFrameId>=3e3)){var i=Mobi.getPreviewDocument().getElementById("module"+e);$(i).mouseover(function(){Mobi.addModuleLayer("module"+e,t)}).mouseleave(function(){Mobi.removeModuleLayer("module"+e)})}},Mobi.initProductGroupManageV3=function(e,t){var i=Mobi.getPreviewDocument().getElementById("module"+e);$(i).mouseover(function(){Mobi.addModuleLayer("module"+e,t)}).mouseleave(function(){Mobi.removeModuleLayer("module"+e)})},Mobi.ajaxClick=function(e,t,i){showLoadingAgain=function(e){closeLoading(e);var t=['<div class="ajaxLoadingAgain width" style="margin-top:50px;margin-bottom:50px;text-align:center;">','<div style="color: #1b7ad1; text-decoration: none; text-align:center; width:100%;cursor:pointer;" onclick="reloadingClick('+e+');">加载失败，请点击重新加载</div>',"</div>"];jm("#module"+e+" .middleCenter").empty().append(t.join(""))},showLoading=function(e){var t=["<div class='moduleLoading' style='height : 150px;'>","<table style='width:100%;height:100%;'><tr><td align='center' valign='middle'>","<img src='"+Fai.top._resRoot+"/image/loading/loading_2.gif?v=201509211806' >","</td></tr></table>","</div>"];jm("#module"+e+" .middleCenter").empty().append(t.join(""))},closeLoading=function(e){jm("#module"+e+" .moduleLoading").remove()},reloadingClick=function(e){loadingAjaxDom(e)};var o=jm(e).attr("href");i&&(o=e.children[e.selectedIndex].getAttribute("value"));var n=3,a=0;try{n=Fai.top._colInfo.id,a=Fai.top._colInfo.extId}catch(e){n=3,a=0}var r=!1;loadingAjaxDom=function(e){setTimeout(function(){r||showLoading(e)},1e3),jm.ajax({type:"post",url:"ajax/ajaxLoadModuleDom_h.jsp",data:"cmd=getAjaxPageModuleInfo&_colId="+n+"&_extId="+a+"&moduleId="+e+"&href="+jm.encodeUrl(o),error:function(t){r=!0,closeLoading(e),showLoadingAgain(e),Mobi.ing(LS.js_systemError)},success:function(t,i,o){var n=o.getResponseHeader("wafUpdate");if(n&&"true"==n&&window.location.reload(),r=!0,closeLoading(e),(t=jm.parseJSON(t)).success){var a=jm(t.domStr).find(".middleCenter"+e).html();jm("#module"+e).find(".middleCenter"+e).html(a),jm.fkEval.call(window,t.scripts),Mobi.scrollToModule(e)}else showLoadingAgain(e),Mobi.ing(t.msg)}})},loadingAjaxDom(t)},Mobi.getOemViewUrl=function(e){return"http://www.webportal.cc/sys/view.jsp?id="+e},Mobi.autoLoginWx=function(){var e=navigator.userAgent.toLowerCase();(-1!=e.indexOf("micromessenger")||-1!=e.indexOf("wxwork"))&&jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd=autoLoginWx",success:function(e){var t=jm.parseJSON(e);if(t.success){var i=t.wxLoginUrl,o=t.appId,n=t.aesKey,a=i+"wxLogin.jsp?aid="+Fai.top._aid+"&appId="+o+"&secondAuth=true&key="+n+"&returnUrl="+encodeURIComponent(document.location.href);document.location.href=a}}})},Mobi.showTopTips=function(e,t,i){jm.parseJSON(i);var o="",n=!1;if(null==e||0==e)o='<li style="color:red;margin-left:20px;">免费域名不支持调用第三方代码，请使用已购买的域名进行访问&nbsp;&nbsp;&nbsp;</li>';else if(1==e)if(Fai.top._manageMode&&Fai.top.httpInCodeCount>0){if(Fai.top.$(".httpInCodeTips").length>0)return void Fai.top.$(".httpIncode").text("点击定位链接位置（"+Fai.top.httpInCodeCount+"条）");n=!0,o="<div class='httpInCodeTips' style='color:#ff8e1e;font-size:13px;text-align:0;margin-left:20px;'>网站内插入的代码存在非HTTPS链接，该链接无法正常加载，请先修改或者删除该链接。<a class='httpIncode' style='text-decoration: underline;color:#ff1d1d;' href='javascript:;' onclick='Mobi.getPreviewWindow().Mobi.jumptoHttpInCodeModule()'>点击定位链接位置（"+Fai.top.httpInCodeCount+"条）</a><a class='tipsDescription' onclick='Mobi.getPreviewWindow().Mobi.jumptoHttpInCodeExplain()' style='cursor:pointer; color:red; margin-left:30px; margin-right:30px; text-decoration:underline;'>详细说明&gt;&gt;</a></div>"}else o="<li style='color:#ff8e1e;font-size:13px;text-align:0;margin-left:20px;'>网站内插入的代码存在非HTTPS链接，该链接无法正常加载显示，请替换成HTTPS链接或使用非HTTPS方式访问&nbsp;&nbsp;&nbsp</li>";else if(2==e)o='<li style="color:red;margin-left:20px;">免费域名不支持插件代码&nbsp;&nbsp;&nbsp</li>';else if(3==e){o=['<li style="color:red;margin-left:20px;">基于安全原因，2018年4月11号起新注册的用户免费域名访问不支持插件代码和第三方代码，请','<a style="color:#5874d8;"  onclick="Mobi.logCorpDog(200848, 5)" href="'+("//"+Fai.top._homeHost+"/marketing/domain.html")+'" target="_blank">绑定独立域名</a>','进行访问或<a style="color:#5874d8;" onclick="Mobi.logCorpDog(200848, 2)"  href="'+("//"+Fai.top._portalHost+"/portal.jsp#appId=setAuth")+'" target="_blank">申请凡科认证</a>',"</li>"].join("")}if(t&&""!=t&&(o=t),n){var a=['<div id="fk-tips" class="fk-tips" style="position: fixed; width: 100%; height: 40px; background: #fff5dc; font-size: 13px; color: #ff8e1e; line-height: 40px; text-align: center;">',o,"</div>"];return Fai.top.$(".fk-toolTopBar").css("top","40px"),Fai.top.$(".mobiStyleDesign").css("top","100px"),void Fai.top.$("body").prepend(a.join(""))}if(jm("#webTips").length>0)jm("#mobiTipsMarquee").append(o);else{var r=['<div id="webTips" class="webTips jz-webTips">','   <div id="mobitips" class="mobitips">','       <div class="mobiScrollbar">','           <div class="j-marqueeContainer J_marqueeContainer">','               <ul class="marquee J_marquee" id="mobiTipsMarquee">',o,"               </ul>","           </div>","       </div>","   </div>","</div>"];jm("body").prepend(r.join(""))}jm(".detailHeaderColor.detailHeaderColor").css("top","1.5rem"),jm(".productDetailHeader").css("top","1.5rem"),Mobi.topTipMarquee()},Mobi.jumptoHttpInCodeExplain=function(){var e="";e=Fai.top._oem?"http://adm.webportal.top/sys/view.jsp?id=844":"http://jz.fkw.com/blog/11673",Fai.top.window.open(e)},Mobi.changeHttp=function(){var e=Fai.top.location.href;0==e.indexOf("https://")&&(e="http://"+e.substring(8)),Fai.top.location.href=e},Mobi.fixIphoneXFooter=function(){if(function(){var e=/iphone/gi.test(navigator.userAgent),t=812==screen.height&&375==screen.width,i=896==screen.height&&414==screen.width;return e&&(t||i)}()&&Mobi.checkHasFooter()){var e=jm("#g_body");e.addClass(Fai.top._isMall?"isMall":"notIsMall"),t(),jm(window).on("scroll.fixfooter",Mobi.debounce(t,100))}function t(){var t=window.innerWidth;window.innerHeight/(t/window.screen.width)-window.screen.width>350?e.addClass("fixed_iphoneX_footer"):e.removeClass("fixed_iphoneX_footer")}},Mobi.checkHasFooter=function(){var e=jm("#p_footer_nav_wrap"),t=jm("#webCustomerServiceBox"),i=jm(".mallFixNavWrap"),o=jm(".J_newsBottom"),n=jm(".newsBottom"),a=jm("#fixedAreaBox"),r=jm("#serviceBtnOuter");return!!(e.length&&"none"!=e.css("display")&&"0px"==e.find("#J_footer_nav").css("margin-bottom")||t.length&&"none"!=t.css("display")||i.length&&"none"!=i.css("display")||o.length&&"none"!=o.css("display")||n.length&&"none"!=n.css("display")||a.length&&"none"!=a.css("display")&&!a.hasClass("p_footer_item_wrap")||r.length&&"none"!=r.css("display")||(Fai.top._bookingOpen||Fai.top._productFormOpen||Fai.top._isMobiMallOpen||Fai.top._immediatelyConsultOpen)&&20==Fai.top._pageId)},function(e,t,i){t.allFixWXPAList=[],t.hasInit=!1,t.fixWXPublicAttentionTip=function(i,o,n){t.hasInit=!0;var a=e("#wxPublicAttentionService");n&&a.show();var r=0,s=a.find(".close"),l=a.find(".clickContent"),c=['<div id="wxTopTip" class="wxTopTip">',"</div>",'   <div id="wxPage" class="wxPage">','       <div class="pic" id="wxPagePic">','           <img class="img" src="'+o+'"/>',"       </div>",'       <div class="pic1">','           <img class="img" src="'+o+'"/>',"       </div>",'       <div class="text">',"           长按识别图中二维码快来关注我吧","       </div>","   </div>"];s.bind("click",function(){a.hide(),e.cookie("_hideWXPublicAttentionTip",1,{expires:1,path:"/"})}),l.bind("click",function(){e("body").append(c.join("")),""==o&&e("#wxPage").find(".img").hide(),e("#wxTopTip").bind("click",function(){e(this).remove(),e("#wxPage").remove()}),e("#wxPagePic").bind("mouseup",function(e){e.stopPropagation(),e.preventDefault()})}),i&&(1!=top.Fai.top._other.pa.st?a.hide():a.show()),Fai.top._openThemeV3?r=e("#p_footer_nav_wrap").length&&"none"!=e("#p_footer_nav_wrap").css("display")&&e("#J_footer_nav").length&&"true"!=e("#J_footer_nav").attr("_issuspension")?e("#J_footer_nav").height():0:Fai.top._templateFrameId>=2e3?e("#serviceBtnOuter").length>0&&"none"!=e("#serviceBtnOuter").css("display")?r=e("#serviceBtnOuter").height():e("#fixedAreaBox").length>0&&"none"!=e("#fixedAreaBox").css("display")&&(r=e("#fixedAreaBox").height()):(Fai.top._templateFrameId>=1e3&&Fai.top._templateFrameId,e("#webCustomerServiceBox").length>0&&"none"!=e("#webCustomerServiceBox").css("display")&&(r=e("#customerServiceDiv").height())),a.css("bottom",r+"px"),t.allFixWXPAList.length&&e(t.allFixWXPAList).each(function(e,i){t.doAllFixWXPA(i.number,i.moduleId,i.other)})},t.doAllFixWXPA=function(t,i,o){var n=e("#wxPublicAttentionService"),a=0;if(1==t)Fai.top._openOnlineService&&(a=e("#customerServiceDiv").height()),n.css("bottom",a+"px");else if(2==t)if(o){var r=e("#module"+i).find(".newsBottom"),s=r.length>0?r:e(".newsBottom");a=parseInt(s.height()),setTimeout(function(){n.css("bottom",a+"px")},0)}else Fai.top._openThemeV3&&e(".only_share").length>0&&"none"!=e(".only_share").css("display")&&(a=parseInt(e(".only_share").height()),setTimeout(function(){n.css("bottom",a+"px")},0));else 3==t&&(Fai.top._openThemeV3?e("#productBottomBox").length>0&&"none"!=e("#productBottomBox").css("display")&&(a=parseInt(e("#productBottomBox").offset().height),n.css("bottom",a+"px")):o&&(a=parseInt(e(".productMallShop").offset().height),n.css("bottom",a+"px")))}}(jm,Mobi.mobiPATipFix||(Mobi.mobiPATipFix={})),Mobi.allFixWXPA=function(e,t,i){Mobi.mobiPATipFix.hasInit?Mobi.mobiPATipFix.doAllFixWXPA(e,t,i):Mobi.mobiPATipFix.allFixWXPAList.push({number:e,moduleId:t,other:i})},Mobi.fixNewsJumpLink=function(e,t){jm("#module"+e).find(".newsLine").off("click.link").on("click.link",function(e){if(!jm(e.target).hasClass("J_linkH")){var i=jm(this).find(".J_linkH").attr("href");-1!=i.indexOf("http:")||-1!=i.indexOf("https:")?window.location.href=i:-1!=i.indexOf("Fai.ing")?top.Fai.ing("管理态不支持跳转外部链接，请通过“预览”进行访问"):window.location.href="/"+t+"/"+i}})},Mobi.statisticsHttpInCode=function(e,t){for(var i in Fai.top.httpInCode||(Fai.top.httpInCode={}),Fai.top.httpInCode[e]=t,Fai.top.httpInCodeModuleList=[],Fai.top.httpInCodeCount=0,Fai.top.httpInCode)0!=Fai.top.httpInCode[i]&&(Fai.top.httpInCodeModuleList.push(i),Fai.top.httpInCodeCount+=Fai.top.httpInCode[i]);0==Fai.top.httpInCodeCount?jm(".httpIncode").length>0&&jm(document).ready(function(){window.location.reload()}):Fai.top.$(".httpIncode").text("点击定位链接位置（"+Fai.top.httpInCodeCount+"条）")},Mobi.fixParamAreaHeight=function(e){var t=jm("#module"+e),i=0,o=t.find(".paramCollectionWrap");o.each(function(e,t){var o=parseInt(jm(t).height());o>i&&(i=o)}),i>0&&o.each(function(e,t){jm(t).height(i+"px")})},Mobi.fixNewsDetailVideo=function(){var e=Fai.top.navigator.userAgent;/(iPhone)/i.test(e)&&jm("video").each(function(e,t){jm(t).on("progress",function(){t.played.length<1&&t.play()})})},Mobi.jumptoHttpInCodeModule=function(){Fai.top.curHttpInCode||(Fai.top.curHttpInCode=0),Fai.top.curHttpInCode==Fai.top.httpInCodeModuleList.length-1?Fai.top.curHttpInCode=0:++Fai.top.curHttpInCode;var e=Fai.top.httpInCodeModuleList[Fai.top.curHttpInCode];if(jm("#mobiImagePage").remove(),jm("#g_web").show(),0==e)setTimeout(function(){Fai.top.$(".f_item_set").click(),setTimeout(function(){Fai.top.$(".tabs-label:eq(1)").click()},100)},0);else if(-1==e)jm("html, body, #g_main, #web").animate({scrollTop:document.getElementById("footer").offsetTop+jm("#webHeaderBox").height()},{duration:500,easing:"swing"});else{var t=document.getElementById("module"+e).offsetTop;document.getElementById("module"+e).offsetParent.offsetTop>0&&(t+=document.getElementById("module"+e).offsetParent.offsetTop),jm("html, body, #g_main, #web").animate({scrollTop:t+jm("#webHeaderBox").height()+jm("#webBannerBox").height()+document.getElementById("g_web").offsetTop},{duration:500,easing:"swing"})}},Mobi.bindCommitBtn=function(e,t,i,o,n,a){jm(e).on("click",function(e){Mobi.siteFormAdd(t,i,o,n,a)})},Mobi.checkFaiAnchor=function(){var e=window.location.hash.substring(1).split("_");if("fai"==e[0]){var t=parseInt(e[1]);if(t){var i={};i.jumpModuleId=t,i.colUrl="",i.colId=-1,setTimeout(function(){Mobi.jumpToModulePosition(i)},1e3)}}},Mobi.isModuleV2=function(e){return!!Fai.top.isModuleV2Map["style_"+e]},Mobi.addFontFaceToHead2=function(e){e.forEach(function(e){var t=e.fontFamily,i=e.resUrl;if(0===jm("#".concat(t)).length){var o="\n            <style type='text/css' id='".concat(t,"'>\n                @font-face {\n                    font-family: '").concat(t,"';\n                    src: url('").concat(i,"') format('truetype');\n                    font-weight: normal;\n                    font-style: normal;\n                }\n            </style>\n            ");jm("head").append(o)}})},Mobi.linkToForm=function(e){jm.ajax({type:"post",url:"ajax/mobiForm_h.jsp?cmd=get&formId="+e,error:function(){},success:function(t){var i=jm.parseJSON(t);if(i.success){var o=i.module,n=i.renderOptions,a=o.srcUploadJS,r=o.srcCityJS,s=Mobi.executeFormScripts(a),l=Mobi.executeFormScripts2(r);Promise.all([s,l]).then(function(){Fai.top.Mobi.formPopup.rending||(Fai.top.Mobi.formPopup.rending=!0,Mobi.formPopup.render(e,o,n))})}else Fai.top._manageMode?Fai.top.Fai.ing("表单已被删除",!0):Mobi.ing("表单已被删除",!0)}})},Mobi.executeFormScripts=function(e){return new Promise(function(t,i){if(jm(this).uploadify)t();else{var o=document.createElement("script");o.type="text/javascript",o.src=e,o.onload=function(){t(),o.onload=null},document.head.appendChild(o)}})},Mobi.executeFormScripts2=function(e){return new Promise(function(t,i){if("undefined"==typeof site_cityUtil){var o=document.createElement("script");o.type="text/javascript",o.src=e,o.onload=function(){t(),o.onload=null},document.head.appendChild(o)}else t()})},Mobi.updatePopupThemeModules=function(e){if(null!=e)if(Fai.top._manageMode)top.Fai.top.Mobi.updatePopupThemeModule(e);else{var t=Fai.top._themeColor;e.forEach(function(e){var i=e.style;switch(i){case 54:Mobi.updatePopupFloatBtnModule(e,t);break;case 52:Mobi.updatePopupSimpleTextModule(e,t);break;default:console.log("not aim styleId"+i)}})}},Mobi.updatePopupFloatBtnModule=function(e,t){var i=e.id,o=Mobi.getPreviewDocument().querySelector(".formMiddleContent"+i),n=jm(o).find("a"),a=e.pattern.cl,r=e.content;if(null!=n&&null!=a&&1===a.ftc&&(a.c=t,n.css("color",t)),null!=r&&null!=r.b&&1===r.b.btc&&(r.b.c=t,Mobi.removeCtrlStyleCssList("mobiStyleModule","module"+i,[{cls:".floatBtnStyle .middle",key:"border"}]),Mobi.setCtrlStyleCssList("mobiStyleModule","module"+i,[{cls:".floatBtnStyle .middle",key:"border",value:r.b.w+"px solid "+t}])),null!=r&&null!=r.sh&&1===r.sh.stc){var s=r.sh;r.sh.c=t;var l;l=s.dx+"px "+s.dy+"px "+s.f+"px "+t,Mobi.removeCtrlStyleCssList("mobiStyleModule","module"+i,[{cls:".floatBtnStyle .middle",key:"-moz-box-shadow"},{cls:".floatBtnStyle .middle",key:"-webkit-box-shadow"},{cls:".floatBtnStyle .middle",key:"box-shadow"}]),Mobi.setCtrlStyleCssList("mobiStyleModule","module"+i,[{cls:".floatBtnStyle .middle",key:"-moz-box-shadow",value:l},{cls:".floatBtnStyle .middle",key:"-webkit-box-shadow",value:l},{cls:".floatBtnStyle .middle",key:"box-shadow",value:l}])}},Mobi.updatePopupSimpleTextModule=function(e,t){var i=e.id,o=Mobi.getPreviewDocument().querySelector(".formMiddleContent"+i);jm(o).find(".simpleText").find("span").each(function(e,i){var o=jm(i),n=o.attr("_themecolor"),a=o.attr("style");n&&""!=a&&o.css("color",t)})},Mobi.setModuleStyleCssList=function(e,t){Mobi.setCtrlStyleCssList("mobiStyleModule","module"+e,t)},Mobi.setCtrlStyleCssList=function(e,t,i,o,n){var a=n||Mobi.getPreviewWindow(),r=a.document,s=a.jm("#"+e),l=new Array;if(1==s.length){var c=s.html();l=(c=c.replace(/{\r\n/g,"{").replace(/\t/g,"").replace(/\r\n}/g,";}")).split("\n"),s.remove()}for(var d=l.length-1;d>=0;--d)for(var m=l[d],p=0;p<i.length;++p){var u=i[p].cls,h=i[p].key,f=new RegExp("#"+t+" +"+fixRegSpecialCharacter(u)+" *{ *"+h+"[^;]*;","gi");if(""!=t&&"undefined"!=t||(f=new RegExp(fixRegSpecialCharacter(u)+" *{ *"+h+"[^;]*;","gi")),0==m.length||/^\s$/.test(m)||f.test(m)){if(o&&o.noRemoveModuleStyle&&m.indexOf("module")>-1&&(""==t||"undefined"==t)&&-1===u.indexOf("module"))break;l.splice(d,1);break}}for(p=0;p<i.length;++p)""==t||"undefined"==t?l.push(i[p].cls+"{"+i[p].key+":"+i[p].value+";}"):l.push("#"+t+" "+i[p].cls+"{"+i[p].key+":"+i[p].value+";}");o&&o.rev&&l.reverse(),jm(r.querySelector("head")).append('<style type="text/css" id="'+e+'">'+l.join("\n")+"</style>")},Mobi.checkUserDomainAction=function(){function e(){jm("body").html("")}Fai.top._manageMode||Fai.top._isDev||jm.ajax({url:"/ajax/siteDomain_h.jsp?cmd=checkFaiDomain",type:"POST",data:{domain:window.location.host},success:function(t){try{var i=jm.parseJSON(t);if(i.success&&i.isFaiDomain)return;e()}catch(t){e()}},error:function(t){t.status;var i=t.responseText;t.statusText;500==t.status&&-1!=i.indexOf("empty response")&&e()}})},Mobi.shareDataGetProductInfo=function(){var e={},t=Fai.top._shareDataProdectDetail||{},i=t.productInfo||{},o=t.jsShareInfo||"{}",n=JSON.parse(o);return e.title=i.name||"",e.img=i.picPath||"",e.url=t.shareUrl||"",e.price=n.sharePrices.firstPrice||"0.00",e},Mobi.commShareTemplateData=function(e,t){var i;e=e||"page";var o=Fai.top._colInfo,n={},a=Fai.top.location.origin,r=o.url;switch("product"==e&&(n=Mobi.shareDataGetProductInfo()),(i={photo:Fai.top._shareDataPhotoDetail,news:Fai.top._shareDataNewsDetail,product:n,page:{title:o.name,url:a+r,img:t||""}}[e]||{}).type=e,o.id){case 4:case 28:i.type="news",i.title=Fai.top._shareDataNewsDetail.title+"";break;case 5:case 20:n=Mobi.shareDataGetProductInfo(),i.type="product",i.title=n.title+"",i.price=n.price,i.isHiddenPrice=Fai.top._shareDataProdectDetail.isHiddenPrice;break;case 24:i.type="photo",i.title=Fai.top._shareDataPhotoDetail.title+""}return i},Mobi.showCreateShareGrapic=function(e){var t,i=Mobi.createGraphicPosterPage(),o="graphicPosterItem",n=jm("#webPagePanel"+o),a="",r="#webPagePanel"+o+" .webPagePanelBg",s=Fai.top._colInfo,l=Fai.top.location.origin,c=s.url,d={title:s.name,url:l+c,img:e.picUrl||""};switch(s.id){case 4:case 28:d.title=Fai.top._shareDataNewsDetail.title+"",d.type="news";break;case 5:case 20:var m=Mobi.shareDataGetProductInfo();d.title=m.title+"",d.type="product",d.price=m.price,d.isHiddenPrice=Fai.top._shareDataProdectDetail.isHiddenPrice;break;case 24:d.title=Fai.top._shareDataPhotoDetail.title+"",d.type="photo"}0!==n.length&&n.remove(),jm("#g_body").css("overflow-y","hidden"),20==Fai.top._colInfo.id&&Fai.top._openThemeV3&&(a=" pdThemev3");jm("#g_web").append("<div id='webPagePanel"+o+"' class='webPagePanel"+a+"' style='z-index:1000'><div class='webPagePanelBg' style='z-index:999'></div></div>"),n=jm("#webPagePanel"+o),i&&(n.append(i),t=jm(i),(t=jm("#"+t[0].id)).addClass("webPagePanelBottom"),t.addClass("webPagePanel"),n.show(),t.show(),setTimeout(function(){t.addClass("webPagePanelShow")}),t.unbind("touchmove").bind("touchmove",function(e){e.preventDefault()},!1),jm(r).unbind("touchmove").bind("touchmove",function(e){e.preventDefault()},!1),jm(r).unbind("click").bind("click",function(){return t.removeClass("webPagePanelShow"),jm("#g_body").css({overflow:"",height:"",top:""}),jm("#g_body").css("overflow-y",""),jm("html").css({overflow:""}),jm("#g_web").removeClass("gwNoScroll"),jm("#webPagePanel"+o).css("z-index","-1"),jm("#webPagePanel"+o).css("display","none"),jm("#webPagePanel"+o).remove(),jm(r).unbind("touchmove"),t.unbind("touchmove"),!1}),Mobi.bindTransitionEnd(t,function(){t.hasClass("webPagePanelShow")||n.hide()}));var p=jm(window).height();n.css("height",p+"px"),n.css("z-index","1000"),Mobi.drawCommCanvasSharePicture(d)},Mobi.showCommSharePanel=function(e,t,i){var o=Mobi.getJQMobi();e=e||"shareListShowSwipe";var n=Mobi.getPreviewObject(e);if(n){var a=Mobi.commShareTemplateData(t,i),r={triggerId:"graphicPosterItem",pageBg:!0,pageHtml:Mobi.createGraphicPosterPage(),direction:"bottom",closeWebPage:"#graphicPosterPanelBg",redo:!0,callback:function(){Mobi.drawCommCanvasSharePicture(a)}};if(Mobi.initWebPage(r),Mobi.initScaleImage(n),o("#"+e).swipehandle(n,{continuous:!0,bulletsClick:!0,callback:function(e){for(var t=s.length;t--;)s[t].className=" ";s[e]?s[e].className="on":s[e-s.length].className="on",1==jm(".mobiProductVideoDialog").length&&Mobi.videoQuit()}}),jm(".shareListSwipe").bind("click",function(e){Mobi.logDog(201083,1)}),n.querySelector(".bullets"))var s=n.querySelector(".bullets").getElementsByTagName("li")}},Mobi.drawCommCanvasSharePicture=function(e){var t=document.getElementById("myCanvas");if(null!=t){var i=Mobi.getcanvasTool(t);if(i){var o=i.ctx,n=i.baseFontSize,a=11*n,r=13.85*n,s=.8*n,l=10*n,c=0,d=jm("#_TOKEN").attr("value"),m={font:.55*n+"px PingFang-SC-Medium"};"product"==e.type&&!1===e.isHiddenPrice&&(r+=c=1.15*n);var p=function(e,t,i,o){var n=2*i;e.font=o.font;var a=e.measureText(t).width;return a<=i?1:a>i&&a<=n?2:3}(o,e.title,l,m);r+=(s*=p)-.275*n,t.width=a,t.height=r;var u=10*n,h=u,f=u,g=u,v=u,b=!1,j=!1,_=new Image;_.src="".concat(document.location.protocol,"//").concat(document.location.host,"/ajax/mobiImgTransfer_h.jsp?_TOKEN=").concat(d,"&imgUrl=").concat(jm.encodeUrl(e.img),"&isZip=true"),_.onload=function(){g=this.naturalHeight;(v=this.naturalWidth)>=g?h=(f=u)/g*v:f=(h=u)/v*g,b=!0,y()&&S(o)};var M=new Image;M.src="".concat(document.location.protocol,"//").concat(document.location.host,"/qrCode.jsp?cmd=printUrlCode&size=166&url=").concat(jm.encodeUrl(e.url)),M.onload=function(){j=!0,y()&&S(o)}}}function y(){return b&&j}function S(t){var l=jm("html").css("fontSize").split("px");backgroundHeight=13.85+.8*p+2+c/n+"rem",backgroundHeightPx=(13.85+.8*p+2+c/n)*parseFloat(l),drawCanvasWidth=a,drawCanvasHeight=r,jm("#myCanvas").attr("height",drawCanvasHeight),jm("#myCanvas").attr("width",drawCanvasWidth),jm("#graphicPosterShowSwipe").css("height",backgroundHeight);var d,m,b,j,y,S,C,P,x,L,k,F,T,B=i.Rect(0,0,drawCanvasWidth,drawCanvasHeight);if(i.drawRoundedRect(B,.35*n,"#F7F7F7",!1),d=.5*n,m=(h-u)/2*v/h,b=(f-u)/2*g/f,j=u*g/f,y=u*v/h,o.drawImage(_,m,b,y,j,d,d,u,u),I(),"product"==e.type&&!1===e.isHiddenPrice&&function(){var t={font:.65*n+"px PingFang-SC-Medium",style:Fai.top._themeColor||"#FD6F28",align:"left",baseLine:"top"},a={maxWidth:10*n,textX:.5*n,textY:10.875*n,offset:.8*n};if(Fai.top._openThemeV3){var r=e.price.split("."),s=w(o,.5*n+"px PingFang-SC-Medium",Fai.top.choiceCurrencyVal),l=w(o,.65*n+"px PingFang-SC-Medium",r[0]+"."),c=10.875*n+.15*n,d=10.875*n;t.font=.5*n+"px PingFang-SC-Medium",a.textY=c,i.drawText(Fai.top.choiceCurrencyVal,t,a,"...",1),t.font=.65*n+"px PingFang-SC-Medium",a.textX=a.textX+s,a.textY=d,i.drawText(r[0]+".",t,a,"...",1),t.font=.5*n+"px PingFang-SC-Medium",a.textX=a.textX+l,a.textY=c,i.drawText(r[1],t,a,"...",1)}else{var m=Fai.top.choiceCurrencyVal+e.price;i.drawText(m,t,a,"...",1)}}(),S="product"==e.type?e.isHiddenPrice?10.875*n:10.75*n+c:10.875*n,C={font:.55*n+"px PingFang-SC-Medium",style:"#333333",align:"left",baseLine:"top"},P={maxWidth:10*n,textX:.5*n,textY:S,offset:.8*n},i.drawText((x=e.title)&&x.replace?x.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/g,">").replace(/&#92;/gi,"\\").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/\<br\/\>/gi,"\n").replace(/&amp;/gi,"&"):x,C,P,"...",3),L=.5*n,k=s-.255*n+10.875*n+c+.5*n,F=1.875*n,T=1.875*n,o.drawImage(M,L,k,F,T),I(),function(){o.save();window.devicePixelRatio,o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio;var e=LS.posterTips,t=.5*n+1.875*n+.45*n,i=s-.255*n+10.875*n+1.6*n+c;o.font=.5*n+"px SourceHanSansCN-Regular",o.fillStyle="#999",o.fillText(e,t,i),o.restore()}(),document.getElementById("myCanvas")){var A=document.getElementById("myCanvas").toDataURL("image/png"),D=new Image;D.src=A,D.setAttribute("class","actualPoster"),D.setAttribute("style","width:11rem;height:"+drawCanvasHeight/n+"rem;user-select: none;-webkit-user-select:none;"),jm("#myCanvasImg").remove(),jm(".myCanvasContain").empty().append(D),jm(".myCanvasContain").append('<div style="margin-top: 1rem; text-align:center; color: #fff; font-size: 0.65rem;">'+LS.posterButtonTips+"</div>");var O=jm("#webPagePanelgraphicPosterItem")[0].offsetHeight;jm("#graphicPosterShowSwipe").css("width",a/n+"rem").css("left",(16-a/n)/2+"rem").css("top",(O-backgroundHeightPx)/2+"px"),jm(".myCanvas").css("opacity",1),Fai.top._manageMode||Mobi.logDog(201187,2)}}function I(){o.closePath(),o.restore()}function w(e,t,i){return e.font=t,e.measureText(i).width}},Mobi.copyAccountAndOpenWX=function(e){if(Fai.top.isWXAddFansAuthAllow){var t=window.navigator.userAgent,i=/MicroMessenger/.test(t);Mobi.copyDataToClipboard({data:e,sCb:function(){if(i)Mobi.ing("复制微信号成功",1);else{var e=jm('\n            <div id="wx_addFans_popup_wrap" class="wx_addFans_popup_wrap">\n              <div class="wx_addFans_popup">\n                <div class="text_wrap">\n                  <span class="success_text">微信号复制成功</span>\n                  <span class="countdown">是否跳转到微信搜索该微信号？</span>\n                </div>\n                <div class="btn_wrap">\n                  <div class="cancel_btn">取消</div>\n                  <div class="open_btn">打开</div>\n                </div>\n              </div>\n            </div>\n          ');jm("body").append(e),e.on("touchmove",function(e){e.stopPropagation(),e.preventDefault()}),e.find(".cancel_btn").on("click",function(){e.remove()}),e.find(".open_btn").on("click",function(){window.location.href="weixin://",e.remove()})}},fCb:function(){Mobi.ing("复制微信号失败，请手动复制",1)}})}else Mobi.ing("网站版本已过期，请联系管理员",0)},Mobi.copyDataToClipboard=function(e){var t=e.data,i=e.sCb,o=e.fCb,n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length);var a=!1;try{a=document.execCommand("copy")}catch(e){o()}finally{document.body.removeChild(n)}a?i():o()},Mobi.actionByformPayResult=function(jumpUrl){var isFromPay="true"===window.sessionStorage.getItem("from_mobi_pay");if(window.sessionStorage.removeItem("from_mobi_pay"),isFromPay){var curUrlSearch=window.location.search,urlParams=new URLSearchParams(curUrlSearch),payStatus=urlParams.get("payStatus"),scrollTop=+urlParams.get("scrollTop"),isPopupForm="true"===urlParams.get("isPopupForm"),formId=+urlParams.get("formId"),formModuleId=+urlParams.get("formModuleId"),bssId=+urlParams.get("bssId"),param=[];param.push("&id=".concat(bssId)),jm.ajax({type:"post",url:"ajax/mobiForm_h.jsp?cmd=getSiteFormSubmitById",data:param.join(""),error:function(){Mobi.ing("系统繁忙，请稍后重试",!1)},success:function success(result){result=jm.parseJSON(result);var _result=result,_result$isPaySuccess=_result.isPaySuccess,isPaySuccess=void 0!==_result$isPaySuccess&&_result$isPaySuccess;function setscrollTop(e){document.documentElement.scrollTop=e,window.pageYOffset=e,document.body.scrollTop=e}if(isPaySuccess){Mobi.logDog(201217,4),setscrollTop(scrollTop),Mobi.ing("支付成功",1);var isAction=jumpUrl.startsWith("javascript:");jumpUrl&&setTimeout(function(){isAction?eval(jumpUrl):window.location.href=jumpUrl},2500)}else Mobi.logDog(201217,3),setscrollTop(scrollTop),isPopupForm&&Mobi.linkToForm(formId),Mobi.ing("支付失败",2)}})}},Mobi.updateProductTypeList=function(e){null!=e&&0!=e&&jm.ajax({type:"post",url:"../ajax/productGroup_h.jsp?cmd=getList&fullName=true&getLevel=true",error:function(){},success:function(t){var i=jm.parseJSON(t),o=Fai.top._rootStore.getters.getModuleById(e);if(null!=o&&i.success){var n=[];jm.each(i.list,function(e,t){0!=t.id&&n.push(t)}),o.groupListOptions.initGroupIconDatas=n;for(var a=[],r=o.groupListOptions.productGroupList,s=0;s<i.productGroupList.length;s++){var l=i.productGroupList[s];if(0!=l.id){for(var c=!0,d=0;d<r.length;d++){var m=r[d];if(m.id==l.id){m.name=l.name,m.parentId=l.parentId,a.push(m),c=!1;break}}1==c&&a.push(l)}}o.groupListOptions.productGroupList=a;var p=[],u=[];i.productGroupList.forEach(function(e){if(0!=e.id){for(var t=0;t<o.content.idList.length;t++){var i=o.content.idList[t];if(i==e.id){p.push(i);break}}u.push(e.id)}}),o.content.idList=p;for(var h=function(e){var t=o.content.catalogList[e],i=[];t.groupList.forEach(function(e){-1!=u.indexOf(e)&&i.push(e)}),i.length!=t.length&&(t.groupList=i)},f=0;f<o.content.catalogList.length;f++)h(f)}}})},Mobi.fileDownload=function(e){var t=e.fileId,i=e.mll,o=e.dat;jm.ajax({type:"get",url:"../ajax/fileDownload_h.jsp?fileId=".concat(t,"&mll=").concat(i,"&dat=").concat(o,"&cmd=getDownloadInfo"),error:function(){Mobi.ing("服务繁忙，请稍候重试",!1)},success:function(e){if(!(e=JSON.parse(e)).success){if(!1===e.login){var t="".concat(window.location.pathname).concat(window.location.search);return t=Fai.top.encodeURIComponent(t),void(document.location.href="login.jsp?returnUrl=".concat(t))}if(!1===e.auth){var i=e.visitorMemberAcct,o=e.levelLimitName;return void Mobi.ing("亲爱的".concat(i,",您还需要升级到").concat(o,"才能下载该文件。"),0)}}var n=e.downloadUrl;n?self!==top?window.open(n):window.open(n,"_self"):Mobi.ing("当前文件已丢失",0)}})},Mobi.openLinkFlv=function(e){var t=e.flvCode,i=e.flvType,o=new RegExp("`","g");t=t.replace(o,'"'),Mobi.dialogVideo(0,{flvCode:t,flvType:i})},Mobi.dialogVideo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={t:t.flvType,iu:t.flvCode},o="cmd=getMobiVideoDialog&moduleId="+e+"&content="+jm.encodeUrl(jm.toJSON(i));jm.ajax({type:"post",url:"ajax/flv_h.jsp",data:o,success:function(e){if(0!=(e=jm.parseJSON(e)).success){var t="<div class='videoDialog' id='videoDialog'>"+'<div class="cancelVideo faisco-icons-" onclick="Mobi.cancelVideoDialog()"></div>'+e.data+"</div>";jm("#g_body").append(t),document.getElementById("g_body").style.overflowY="hidden"}else Fai.top._manageMode?Fai.top.Fai.ing("视频信息有误，无法正常打开，请联系管理员",!0):Mobi.ing("视频信息有误，无法正常打开，请联系管理员",!0)}})},Mobi.fixedInputFocusAutoHideFooter=function(){jm('input[type="text"], input[type="number"], input[type="password"], input[type="email"]').forEach(function(e){jm(e).off("focus.f").off("blur.f").on("focus.f",function(){setTimeout(function(){document.activeElement==e&&(jm(".J_area_box_wrap").addClass("is_inputing"),jm("#p_footer_nav_wrap").addClass("is_inputing"))},200)}).on("blur.f",function(){jm(".J_area_box_wrap").removeClass("is_inputing"),jm("#p_footer_nav_wrap").removeClass("is_inputing")})})},Mobi.reloadFontIconOnIphone=function(){var e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent),t=jm("#jzBasicFontIcons");if(!Fai.top._manageMode&&jm.cookie("_checkWxLogin")&&e){var i=t.attr("href"),o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",i),o.setAttribute("id","jzBasicFontIcons"),t.remove(),console.log(1),document.head.appendChild(o)}},function(e,t,i){e.clearAllJumpModuleCookie=function(){var e=[/module\d+_page/,/module\d+_tabModuleId/,/module\d+_searchId/,/module\d+_search/,/module\d+_foldModuleId/];document.cookie.split(";").filter(function(t){for(var i=t.split("=")[0].trim(),o=0;o<e.length;o++){var n=i.match(e[o]);if(n&&n.length)return!0}return!1}).forEach(function(e){var i=e.split("=")[0].trim();t.cookie(i,null,{expires:-2,path:"/",domain:location.host})})},e.jumpModuleUtils={modules:null,cookieMap:{},COOKIE_MAP_KEY:"cookie_map_key",init:function(){null==this.modules&&(this.modules=this.getDataFromLocal(this.getCurrentModuleId()),null==this.modules&&(this.modules={id:this.getCurrentModuleId(),colId:Fai.top._colInfo.id,moduleList:{},scrollY:0,time:Date.now(),expires:216e5})),this.cookieMap=this.getDataFromLocal(this.COOKIE_MAP_KEY)||{}},getDataFromLocal:function(e){var t=sessionStorage.getItem(e);return null!=t?JSON.parse(t):null},setDataToLocal:function(e,t){t.time=Date.now(),sessionStorage.setItem(e,JSON.stringify(t))},removeDataFromLocal:function(e){sessionStorage.removeItem(val)},addModule:function(e,i,o){this.init(),this.modules.moduleList[e]=i,this.modules.scrollY=t("html,body")[0].scrollTop||0,this.setDataToCookie(i),this.setDataToLocal(this.modules.id,this.modules),this.setDataToLocal(this.COOKIE_MAP_KEY,this.cookieMap),Fai.top._manageMode&&this.setDataToLocal("scrollPage",{colId:Fai.top._colId,scrollTop:this.modules.scrollY||0})},getModuleInfoById:function(e){if(this.init(),null!=this.modules)return this.modules.moduleList[e]},removeModuleInfoById:function(e){this.init(),null!=this.modules&&(this.modules.moduleList[e]=null,this.setDataToLocal(this.modules.id,this.modules),this.removeDataFromCookie(e),this.setDataToLocal(this.COOKIE_MAP_KEY,this.cookieMap))},getCurrentModuleId:function(){return Fai.top._colInfo.aid},setDataToCookie:function(e,i){i=i||12;var o=e.data,n=new Date;if(n.setTime(n.getTime()+60*i*60),25==e.style){var a="id"==e.data.pType;t.cookie("module"+e.moduleId+"_searchId",a,{expires:n,path:"/",domain:location.host}),t.cookie("module"+e.moduleId+"_search",a?o.id:o.name,{expires:n,path:"/",domain:location.host}),this.cookieMap[e.moduleId]=["module"+e.moduleId+"_searchId","module"+e.moduleId+"_search"]}else 6==e.style?(t.cookie("module"+e.moduleId+"_page",e.data.page,{expires:n,path:"/",domain:location.host}),this.cookieMap[e.moduleId]=["module"+e.moduleId+"_page"]):50==e.style?(t.cookie("module"+e.moduleId+"_tabModuleId",e.data.currentModuleId,{expires:n,path:"/",domain:location.host}),this.cookieMap[e.moduleId]=["module"+e.moduleId+"_tabModuleId"]):3==e.style?(t.cookie("module"+e.moduleId+"_page",e.data.page,{expires:n,path:"/",domain:location.host}),this.cookieMap[e.moduleId]=["module"+e.moduleId+"_page"]):34==e.style?(t.cookie("module"+e.moduleId+"_page",e.data.page,{expires:n,path:"/",domain:location.host}),this.cookieMap[e.moduleId]=["module"+e.moduleId+"_page"]):58==e.style&&(t.cookie("module"+e.moduleId+"_foldModuleId",e.data.currentModuleId,{expires:n,path:"/",domain:location.host}),this.cookieMap[e.moduleId]=["module"+e.moduleId+"_foldModuleId"])},removeDataFromCookie:function(e){(this.cookieMap[e]||[]).forEach(function(e){t.cookie(e,null,{expires:-2,path:"/",domain:location.host})}),this.cookieMap[e]=[]}},window.addEventListener("onload",function(){null==sessionStorage.getItem(Fai.top._aid)&&Mobi.clearAllJumpModuleCookie()})}(Mobi,jm,top),Mobi.banCurPageContentCopy=function(){jm(document).ready(function(){if(!Fai.top.banCopyTextImg&&!Fai.top._manageMode){var e=jm(document);e.on("contextmenu copy cut",function(e){return!jm(e.target).parents(".richContent").length||!!jm(e.target).is("input, textarea")&&void 0}),e.off("touchend.bc").on("touchend.bc",function(){jm(".img_no_select").removeClass("img_no_select")}),jm(window).on("load",function(){setTimeout(function(){jm(".richContent img").forEach(function(e){Mobi.initImgNoSelect(e),function(e){var t=jm(e).attr("src-original")||"",i=jm(e).attr("src")||"",o="";if(t||i){var n=t||i,a=n.includes(Fai.top._resImageRoot),r=n.includes("!"),s=Fai.top._loadingPath,l=!0;l=["faiusr.com","faisys.com","faiusrd.com"].some(function(e){return n.includes(e)});var c=n.indexOf(".webp"),d=-1;d=-1!==c?n.lastIndexOf(".",c):n.lastIndexOf("."),o=n.substring(d+1),l&&["jpg","jpeg","bmp","png","gif"].includes(o)&&!a&&!r&&(n=n.slice(0,d),t&&i.includes(s)?jm(e).attr("src-original",n):i&&jm(e).attr("src",n))}}(e)})},1e3)});var t=jm("head"),i=jm("\n            <style>\n            .richContent *{-webkit-touch-callout: none;-moz-touch-callout: none;-ms-touch-callout: none;touch-callout: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}\n            </style>");t.append(i)}})},Mobi.showNavItemContainer=function(){Mobi.hideNavItemContainer(),Mobi.removeNavIconPositionFix();for(var e=Mobi.getPreviewObject("navbarList"),t=Mobi.getPreviewObject("navbar"),i=e,o=parseInt(jm(t).width()),n=0,a=t.querySelectorAll(".navItem"),r=t.querySelectorAll(".itemSep"),s=jm(t),l=(s.find(".navItem"),jm(e)),c=s.offset(),d="true"===s.attr("_arrowopen")||!jm.os.supportsTouch,m=jm("#g_web")[0].offsetLeft,p=0;p<a.length;p++)n+=a[p].offsetWidth;for(var u=0;u<r.length;u++)n+=r[u].offsetWidth;if((n=n+a.length+.7*_htmlFontSize)>o){var h=function(){var e=l.offset().left-m;Math.abs(e)+o<n&&j.css("display","block"),e>=-1&&b.css("display","none"),e<0&&b.css("display","block"),Math.abs(e)+o+1>=n&&j.css("display","none")};navigator.appVersion.match(/MSIE [\d.]+/)&&10===parseInt(navigator.appVersion.match(/MSIE ([\d.]+)/)[1])&&(n+=2*a.length),jm(i).css("width",n+"px").removeClass("navbarList-horizontalLayout");var f=jm.getCookie("startX")?parseInt(jm.getCookie("startX")):0;if(jm.os.supportsTouch){var g=function(e,t){var i=t.wrapper.querySelector(".navTouchLeft"),o=t.wrapper.querySelector(".navTouchRight");i.style.display=e<0?"block":"none",t.maxScrollX===t.x?o.style.display="none":o.style.display="block"},v=new iScroll(t,{x:f,scrollX:!0,scrollY:!1,mouseWheel:!0,remarkXCoordinate:!0,remarkNavLeftRight:g,onScrollEnd:function(){d&&h()}});g(f,v),s.on("swipe",function(){Mobi.hideOfficalNavSubMenu()})}if(d){var b=jm(t).find(".navLeft"),j=jm(t).find(".navRight"),_=(jm(t).find(".navbarList"),o-n);timer=null,f<0&&(b.css("display","block"),jm(i).css("transform","translate3d("+_+"px, 0px, 0px) scale(1)")),j.css("display","block");u=jm.getCookie("startX_p")?parseInt(jm.getCookie("startX_p")):0;var M,y=0,S=0;M=jm(r[0]).css("display")?0:jm(t).find(".itemSep").width()/2;var I=t.offsetLeft,w=[];jm(t).find(".navItem").each(function(e){w[e]=this.offsetLeft-I,y++}),j.unbind("click"),b.unbind("click"),j.on("click",function(e){e.stopPropagation(),function e(t,i){var a=l.offset();jm(t).unbind(i),u>=w.length-1&&(u=w.length-2),S=w[u+1]-w[u],0==u&&(S-=M),++u==y&&(u=y-1);var r=a.left-m-S;Math.abs(r)+o>n&&(r=0-(n-o)),l.css("transform","translate3d("+r+"px, 0px, 0px) scale(1)"),jm.setCookie("startX",r),jm.setCookie("startX_p",u),setTimeout(function(){h(),jm(t).bind(i,function(){e(this,i)})},300)}(this,"click"),jm(".nav_offical_sub_menu_wrap").length>0&&Mobi.hideOfficalNavSubMenu()}),b.on("click",function(e){e.stopPropagation(),function e(t,i){var o=l.offset();jm(t).unbind(i),u>=w.length-1&&(u=w.length-2),u<1&&(u=1),S=w[u]-w[u-1],1==u&&(S-=M),u--;var n=o.left-m+S;n>0&&(n=0),l.css("transform","translate3d("+n+"px, 0px, 0px) scale(1)"),jm.setCookie("startX",n),jm.setCookie("startX_p",u),setTimeout(function(){h(),jm(t).bind(i,function(){e(this,i)})},300)}(this,"click"),jm(".nav_offical_sub_menu_wrap").length>0&&Mobi.hideOfficalNavSubMenu()})}s.on("click.nav",".navItem",function(){var e=jm(this),t=e.offset(),o=jm.os.supportsTouch?v.x:jm(i).offset().left,n=parseInt(e.width());c.right<t.right?e.closest(".nav_1_level").length<1&&jm.setCookie("startX",o-n):c.left>t.left&&e.closest(".nav_1_level").length<1&&jm.setCookie("startX",o+n)})}jm(i).removeClass("navbarList-horizontalLayout")},Mobi.hideNavItemContainer=function(){jm(Mobi.getPreviewObject("navbarList")).removeAttr("style"),jm(Mobi.getPreviewObject("navbar")).find(".navLeft").hide(),jm(Mobi.getPreviewObject("navbar")).find(".navRight").hide()},Mobi.removeAllSwipeMenuClass=function(){function e(e){jm("#webHeaderBox").removeClass(e),jm("#webBannerBox").removeClass(e),jm("#webContainerBox").removeClass(e),jm("#customerServiceDiv").removeClass(e),jm("#webFooter").removeClass(e),jm("#bgm_icon").removeClass(e)}e("moveAnimation"),e("moveRight"),jm("#navbar").removeClass("open"),jm("#navButton").removeClass("navButtonOpen"),jm("#navExistOffPanel").removeClass("navButtonOpen")},Mobi.navSwipeMenu=function(e){var t=!1;function i(e){jm("#webBannerBox").addClass(e),jm("#webContainerBox").addClass(e),jm("#customerServiceDiv").addClass(e),jm("#webFooter").addClass(e),jm("#bgm_icon").addClass(e),jm(".J_newsBottom").addClass(e)}function o(o){var n;-1!==Mobi.getPreviewObject("navbar").className.indexOf("open")?(Mobi.fixNavAnimation(),jm("#navbar").removeClass("open"),jm("#navExistOffPanel").removeClass("navPanelOpen"),jm("#navButton").removeClass("navButtonOpen"),n="moveRight",jm("#webHeaderBox").removeClass(n),jm("#webBannerBox").removeClass(n),jm("#webContainerBox").removeClass(n),jm("#customerServiceDiv").removeClass(n),jm("#webFooter").removeClass(n),jm("#bgm_icon").removeClass(n),jm(".J_newsBottom").removeClass(n),2===e&&jm("#webTop").css("height","")):(jm("#navbar").addClass("open"),jm("#navExistOffPanel").addClass("navPanelOpen"),jm("#navButton").addClass("navButtonOpen"),i("moveRight"),t||(Mobi.fixNavIconPosition(),t=!0),2===e&&jm("#webTop").css("height","100%"))}i("moveAnimation"),5!=e&&2!=e&&8!==e&&Mobi.autoSetNavBarHeight(e),Mobi.bindTouchAndClickEvent(jm("#navButton"),function(){return o(),!1},"show"),Mobi.bindTouchAndClickEvent(jm("#navExistOffPanel"),function(){return o(),!1}),jm(".J_newsBottom").appendTo(jm("#g_web"))},Mobi.fixNavIconPosition=function(){var e,t,i,o,n,a=Fai.top._templateLayoutId,r=(jm("#navbar"),jm("#navbarList")),s=r.find(".J_imgIcon"),l=r.find(".J_fontIcon"),c=r.find(".icon-navItemIcon");Mobi.removeNavIconPositionFix(),2!=a&&4!=a&&7!=a&&5!=a||l.length<1||s.length<1||(o=jm(l[0]),e=parseFloat(l[0].offsetWidth),o.addClass("fk-fixNavIconStyle"),t=parseFloat(l[0].offsetWidth),i=parseFloat(l[0].offsetHeight),o.removeClass("fk-fixNavIconStyle"),e>t||c.each(function(e,o){n=jm(o).parent().attr("id"),Mobi.setCtrlStyleCssList("mobiStyleNav",n,[{cls:".icon-navItemIcon",key:"width",value:t+"px"},{cls:".icon-navItemIcon",key:"height",value:i+"px"}])}))},Mobi.removeNavIconPositionFix=function(){var e=jm("#navbarList").find(".icon-navItemIcon");Fai.top._manageMode&&e.each(function(e,t){styleId=jm(t).parent().attr("id"),Mobi.removeCtrlStyleCssList("mobiStyleNav",styleId,[{cls:".icon-navItemIcon",key:"width"},{cls:".icon-navItemIcon",key:"height"}])})},Mobi.initNavSubMenu=function(e,t,i){var o=[],n=[],a=Fai.top._manageMode&&Fai.top._columnStyleJson.s||t,r=Fai.top._manageMode&&Fai.top._other.templateInfo.templatePresetIndex||i;for(var s in e)if(nav=e[s],nav.children||nav.cil,n.push(nav.id),Fai.top._manageMode){if(nav.children&&nav.children.length>0)for(var l=0;l<nav.children.length;l++)o.push(nav.children[l].id)}else o=o.concat(nav.cil);for(l=0;l<o.length;l++)index=jm.inArray(o[l],n),index>=0&&n.splice(index,1);var c=jm("#fixedAreaBox"),d=c.offset();for(l=0;l<n.length;l++)!function(o){var s,l,m=e["nav"+n[o]],p=[];if(m.children)for(o=0;o<m.children.length;o++)p.push(m.children[o].id);else p=m.cil;var u=jm("#mallNavItem_"+m.id);u.length<1||(p.length<1?(u.find(".mallNavText").removeClass("icon-subMenuIcon"),u.off("click.subMenu")):(Fai.top._manageMode&&(u.attr("href","javascript:;"),7!=a&&3!=a||u.find(".mallNavText").addClass("icon-subMenuIcon")),u.off("click.subMenu").on("click.subMenu",function(){if(a=Fai.top._manageMode&&Fai.top._columnStyleJson.s||t,r=Fai.top._manageMode&&Fai.top._other.templateInfo.templatePresetIndex||i,jm(".nav_sub_menu_wrap").remove(),c.data("subMenuOpen")!=m.id){l="<div class='nav_sub_menu_wrap nav_style"+a+" nav_style"+a+"_color"+r+"'>",l+="<div id='sub_menu_"+m.id+"'  class='nav_sub_menu_wrap2'>",l+="<div class='nav_sub_menu_content'>";for(var o=0;o<p.length;o++)(s=e["nav"+p[o]])&&(l+="<a class='nav_sub_menu_item' href='"+s.jumpCtrl.href+"'>"+Mobi.encodeHtml(s.name)+"</a>");l+="</div>",l+="</div>",l+="<div id='sub_menu_triangle"+m.id+"' class='nav_sub_menu_triangle'></div>",l+="</div>",jm(l).appendTo(jm("#fixedAreaBox"));var n=jm(this),u=jm("#sub_menu_"+m.id),h=jm("#sub_menu_triangle"+m.id),f=parseFloat(h.width()),g=parseFloat(h.height()),v=parseFloat(n.offset().left)-d.left,b=parseFloat(n.width()),j=parseFloat(u[0].offsetWidth),_=c.height(),M=_.indexOf("rem")>-1?parseFloat(_.replace("rem",0)*_htmlFontSize):parseFloat(_),y=v+(b-j)/2,S=y+u[0].offsetWidth,I=jm("body")[0].offsetWidth;if(y=y<0?0:y,y=S>I?y-(S-I):y,6==a&&jm(event.target).closest(".bigCircle").length>0){var w=c.find(".bigCircle .mallNavBtnText");M=2*parseFloat(w.css("border-right-width").replace("px",""))+parseFloat(w.height())}u.css({left:y+"px",bottom:M+"px"}),h.css({left:v+(b-f)/2+"px",bottom:2+M+g/2+"px"}),c.data("subMenuOpen",m.id)}else c.data("subMenuOpen",0)})))}(l);jm("body").off("click.subMenu").on("click.subMenu",function(e){jm(e.target).closest("#fixedAreaBox").length<1&&c.data("subMenuOpen")>0&&Mobi.hideNavSubMenu()})},Mobi.hideNavSubMenu=function(){var e=jm("#fixedAreaBox");jm(".nav_sub_menu_wrap").remove(),e.data("subMenuOpen",0)},Mobi.initOfficalNavSubMenu=function(e,t,i){var o=[],n=[],a="ontouchstart"in window?"tap":"click",r=(Fai.top._manageMode,jm("#navbar")),s=jm("#navbarList"),l=jm("#navButton"),c=document.body.offsetHeight,d=Mobi.checkSubMenuType(),m=Fai.top._templateLayoutId,p=jm.getCookie("navId");for(var u in jm.cookie("navId","",{expires:-1}),Mobi.initOfficalSubMenu(),e)if(nav=e[u],nav.children||nav.cil,n.push(nav.id),Fai.top._manageMode){if(nav.children&&nav.children.length>0)for(var h=0;h<nav.children.length;h++)o.push(nav.children[h].id)}else o=o.concat(nav.cil);for(h=0;h<o.length;h++)index=jm.inArray(o[h],n),index>=0&&n.splice(index,1);for(h=0;h<n.length;h++)!function(o){var l=n[o],c=e["nav"+n[o]];if(c){var d=[],m=jm("#navItem_"+n[o]);if(v(m,l),i||(m.removeClass("nav_1_level"),m.off(a+".subMenu")),Fai.top._manageMode&&!i){if(c.children&&c.children.length>0)for(o=0;o<c.children.length;o++)d.push(c.children[o].id)}else d=d.concat(c.cil);!d||d.length<1||(m.addClass("nav_1_level"),b(m,"subMenu",function(i){if(i.preventDefault(),r.data("subMenuOpen")!=c.id){var o,n,a=jm(this),l=(Fai.top._templateLayoutId,Mobi.checkSubMenuType()),u="panel"!=l&&"panel2"!=l?"navItem":"",h=!1;n="<div class='nav_offical_sub_menu_wrap nav_sub_layout_"+l+" subMenu_"+Fai.top._templateFrameId+"'>","bubble"!=l&&"bubble_horizon"!=l||(n+="<div class='icon- nav_sub_menu_triangle2'></div>"),n+="<div class='nav_offical_sub_menu_wrap2'>","panel"!=l&&"panel2"!=l||(n+="<div class='parent_menu sub_menu_nav_item_wrap'><a href='javascript:;'><span class='icon-parentMenu'></span><span class='navItemName'>"+c.name+"</span></a></div>");for(var b=0;b<d.length;b++){var j=d[b],_=e["nav"+j];_&&(h||(p?p==j&&(o=j,h=!0):_.jumpCtrl&&_.jumpCtrl.info&&(100==_.jumpCtrl.info.t&&(_.jumpCtrl.info.i==Fai.top._pageId||-5==_.jumpCtrl.info.i&&6==Fai.top._pageId)?o=j:106==_.jumpCtrl.info.t&&6==Fai.top._pageId&&Fai.top._groupId==_.jumpCtrl.info.i?o=j:107==_.jumpCtrl.info.t&&7==Fai.top._pageId&&Fai.top._groupId==_.jumpCtrl.info.i?o=j:112==_.jumpCtrl.info.t&&27==Fai.top._pageId&&Fai.top._groupId==_.jumpCtrl.info.i&&(o=j))),"bubble"==l&&"dragDown"==l||(n+="<div id='itemSep_"+j+"' class='itemSep'></div>"),n+="<div id='navItem_"+j+"' class='sub_menu_nav_item_wrap navItem_"+j+" icon-navItem "+u+"'>",n+="<a href='"+_.jumpCtrl.href+"' _colid='"+j+"' id='navbar_"+j+"'>","panel"==l||"panel2"==l?n+="<span class='icon_subMenu'></span>":"fold"!=l&&"fold2"!=l||2!=t||(n+="<span class='navItemIcon icon-navItemIcon'></span>"),n+="<span class='navItemName '>"+Mobi.encodeHtml(_.name)+"</span>",n+="</a>",n+="</div>")}if(n+="</div>",n+="</div>",Mobi.hideOfficalNavSubMenu(!0),a.addClass("subMenuOpen"),s.addClass("jz_navbar_sub_menu_open"),r.addClass("jz_navbar_sub_menu_open_1"),"fold"==l||"fold2"==l){var M=r.find(".itemSelected a").css("background-color");Mobi.setCtrlStyleCssList("mobiStyleNav","",[{cls:".subMenuOpen",key:"background-color",value:M}])}"fold"==l||"fold2"==l?jm(n).insertAfter(a):"panel"==l?s.append(n):"panel2"==l?r.append(jm(n)):"bubble"!=l&&"bubble_horizon"!=l&&"dragDown"!=l||jm("#g_web").append(jm(n));var y=jm(".nav_offical_sub_menu_wrap");if("bubble"==l||"dragDown"==l)y.addClass("is_initing"),setTimeout(function(){f(jm(".nav_offical_sub_menu_wrap"),m,l),y.removeClass("is_initing")},200);else if("bubble_horizon"==l){g(jm(".nav_offical_sub_menu_wrap"),m);var S=jm("#webHeader"),I=jm(".nav_sub_layout_bubble_horizon"),w=jm("#navbar");if(I.length){var C=parseInt(w.height())-parseInt(S.height()),P=parseInt(I.height()),x={top:I.css("top"),left:I.css("left")};P>=C&&(x.height="100%",x.overflowY="auto"),I.css(x)}}r.data("subMenuOpen",c.id),"panel"!=l&&"panel2"!=l||(Fai.top._scrollCash=r[0].scrollTop,r[0].scrollTop=0,jm(".parent_menu").on("click.nav",function(){Mobi.hideOfficalNavSubMenu(),r[0].scrollTop=Fai.top._scrollCash}));var L=jm("#navItem_"+o);L.addClass("fk_subMenuSelected"),L.find(".navItemName").addClass("g_mainColor");for(b=0;b<d.length;b++){j=d[b];v(jm("#navItem_"+j),j)}}else Mobi.hideOfficalNavSubMenu()}))}}(h);function f(e,t,i){if(!(e.length<1||t.length<1)){var o,n,a=jm("#g_web").offset(),r=t.offset(),s=a.width,l=e[0].offsetWidth,c=r.left+(r.width-l)/2-0,d=c+l,m=(a.left,d-a.left),p=(jm("body")[0].offsetWidth,c-a.left<0),u=m>a.width;(p||u)&&(o=p?c-a.left:m-s),c=p?a.left+.5*_htmlFontSize:c,c=u?c-(m-s):c,e.css({top:r.bottom+"px",left:c+"px"}),o&&(n=l/2+o,jm(".nav_sub_menu_triangle2").css("left",n+"px"))}}function g(e,t){if(!(e.length<1||t.length<1)){var i,o,n=document.documentElement.scrollTop||document.body.scrollTop,a=n+c,r=n,s=jm("#navbar").offset(),l=t.offset(),d=e.offset(),m=e[0].offsetWidth,p=l.top-(d.height-l.height)/2,u=s.left-m+1,h=p<=r,f=p+d.height>=a;h?i=-((p=_htmlFontSize+n)+_htmlFontSize):f&&(p-=i=p+d.height-a+.5*_htmlFontSize),e.css({top:p-n+"px",left:u+"px"}),i&&(o=l.top-n,jm(".nav_sub_menu_triangle2").css("top",o+"px"))}}function v(e,t){var i="ontouchstart"in window?"touchend":"click",o=!1;e.find("#navbar_"+t).off(i+".navHref").on(i+".navHref",function(){var e=jm(this),i=e.attr("href");if(!e.closest(".navItem").hasClass("nav_1_level")&&void 0!==i&&""!=i&&"javascript:;"!=jm.trim(i)){if(!o)return event.stopPropagation(),jm.setCookie("navId",t),(!Fai.top._manageMode||!Fai.top.Mobi.checkSaveBar())&&(i=Mobi.fixJzmHomeIframeParam(jm(this),i),window.location.href=i,!1);o=!1}}).on("touchmove",function(){o=!0})}function b(e,t,i){var o=Fai.top._templateFrameId,n="ontouchstart"in window?"touchend":"click";if(1019==o||1023==o||1015==o||1024==o||1021==o||1005==o){var a="".concat(n,".").concat(t);e.off(a).on(a,i)}else Mobi.bindTapEvent(e[0],"subMenu",i)}r.find(".nav_1_level").length>0&&r.addClass("jz_subMenu_bar"),jm("body").off(a+".subMenu2").on(a+".subMenu2",function(e){jm(e.target).closest("#navbar").length<1&&r.data("subMenuOpen")>0&&setTimeout(function(){Mobi.hideOfficalNavSubMenu()},200)}),"bubble_horizon"==d&&r.off("scroll.subMenu").on("scroll.subMenu",function(){r.find(".subMenuOpen").length>0&&Mobi.hideOfficalNavSubMenu()}),l.on(a+".subMenu",function(){Mobi.hideOfficalNavSubMenu()}),jm("#navExistOffPanel").off(a+".subMenu").on(a+".subMenu",function(){Mobi.hideOfficalNavSubMenu()}),8!=m&&6!=m&&1!=m&&0!=m||Mobi.showNavItemContainer()},Mobi.checkSubMenuType=function(e){return Fai.top._openThemeV3?function(){var t="fold";switch(e&&e.advance.routine.subMenuType){case 1:t="panel";break;case 2:t="fold";break;case 3:t="bubble_horizon";break;case 4:t="bubble";break;case 5:t="dragDown";break;case 6:t="fold2"}return t}():function(){var e="fold",t=Fai.top._templateLayoutId;switch(t){case 2:e="fold";break;case 0:case 3:case 6:e="bubble";break;case 4:e="panel";break;case 1:e="panel2";break;case 7:e="fold2";break;case 8:e="dragDown"}[1022,1006].indexOf(Fai.top._templateFrameId)>-1?e="panel":[1016,1008].indexOf(Fai.top._templateFrameId)>-1?e="bubble_horizon":[1005,1019].indexOf(Fai.top._templateFrameId)>-1?e="dragDown":[1010,1020,326].indexOf(Fai.top._templateFrameId)>-1&&(e="fold2");return e}()},Mobi.getSecMenuAnimationName=function(e){var t="";if(Fai.top._openThemeV3)switch(e&&e.advance.routine.subMenuType){case 1:t+="translationLeft"}else t+=Fai.top._templateFrameId;return t},Mobi.initOfficalSubMenu=function(e){var t=Mobi.checkSubMenuType(e),i="jz_subMenu_"+Mobi.getSecMenuAnimationName(e),o=jm("#navbar");Fai.top._openThemeV3||o.removeClass("jz_subMenu_"+e),Mobi.hideOfficalNavSubMenu(!0,e),o.removeClass("jz_subMenu_fold jz_subMenu_fold2 jz_subMenu_bubble jz_subMenu_bubble_horizon jz_subMenu_panel jz_subMenu_panel2 jz_subMenu_dragDown jz_subMenu_bar jz_subMenu_translationLeft").addClass("jz_subMenu_"+t),o.removeClass(i).addClass(i)},Mobi.hideOfficalNavSubMenu=function(e,t){var i=jm("#navbar"),o=Mobi.checkSubMenuType(t),n=Fai.top._templateLayoutId,a=Mobi.getSecMenuAnimationName(t);"fold"!=o&&"fold2"!=o||Mobi.removeCtrlStyleCssList("mobiStyleNav","",[{cls:".subMenuOpen",keu:"background-color"}]),i.removeClass("jz_navbar_sub_menu_open_1"),i.find(".subMenuOpen").removeClass("subMenuOpen"),i.find(".jz_navbar_sub_menu_open").removeClass("jz_navbar_sub_menu_open"),i.data("subMenuOpen",0),4!=n&&"translationLeft"!=a||e||t&&(3==t.layout||8==t.layout)&&"fold"==o?"panel2"!=o||e?jm(".nav_offical_sub_menu_wrap").remove():jm(".nav_offical_sub_menu_wrap").css({top:"100%"}):jm(".nav_offical_sub_menu_wrap").css({left:"100%",width:"0",height:"0"})},Mobi.fixNavAnimation=function(){if([1028,1e3].includes(Fai.top._templateFrameId)){var e=jm("#navbar");e.removeClass("banNavAnimationDelay"),e[0].scrollTop>0&&e.addClass("banNavAnimationDelay")}},Mobi.checkNavType=function(){return{isMoveRightDrawer:[1029,1016,1017,1022].includes(Fai.top._templateFrameId)}},function(e){var t={DRAWER_ALL_COVER:1,DRAWER_PART_COVER:2,DRAWER_LEFT:3,DRAWER_RIGHT:4,SUSPENSION_ALL_COVER:5,LABEL_SLIDE:6,LABEL_PANEL:7,SUSPENSION_LEFT:8,SUSPENSION_BOX:9,DRAWER_PART_COVER_SLIDE:10},i={drawer:[1,2,3,4,10],suspension:[5,8,9],label:[6,7]};function o(e,t){switch(e){case"drawer":return i.drawer.indexOf(t)>-1;case"suspension":return i.suspension.indexOf(t)>-1;case"label":return i.label.indexOf(t)>-1}}function n(e){return e&&"string"==typeof e&&(e=e.replace("px","")),parseInt(e)||0}e.initMainNavV3=function(e,i,n){var a=i.layout,r=jm("#navbar"),s=jm("#navbarList"),l=jm("#navButton"),c=jm(".J_headerFixBox"),d=jm(".J_headerFixBox"),m=jm("#webBannerBox"),p=jm("#webTop"),u=jm("#webTopBox"),h=jm("#J_nav_bar_wrap"),f=o("suspension",a),g=o("drawer",a);p.css("height",""),s.attr("style",""),Mobi.removeAllSwipeMenuClass(),Mobi.autoSetNavBarBottomV3(a),1==a||2==a||3==a||4==a||5==a||8==a?p.append(r):6==a||7==a?1==i.advance.routine.navPos?r.prependTo(m):2==i.advance.routine.navPos&&m.append(r):10==a&&c.append(r),(f||g||7==a)&&Mobi.navSwipeMenuV3(a,i),6!=a&&10!=a||Mobi.initNavHorizonSlider(i),7==a?r.append(l):f?l.insertAfter(p):e.hs.hh?l.insertAfter(u):l.prependTo(d),r.removeClass("is_initing"),l.removeClass("is_initing");var v=0!=e.hs.styleId?e.hs.styleId:n.hs.styleId;3==i.type&&e.nav.advance.routine.fixedTop&&(Mobi.scrollNavFix(v),jm(window).off("load.nav").on("load.nav",function(){Mobi.scrollNavFix(v)})),a==t.DRAWER_PART_COVER&&(Mobi.setCtrlStyleCssList("mobiStyleNav","",[{cls:".jz_nav-drawer-halfCover .navbarV3.open",key:"height",value:parseInt(h.height())+"px"}]),Fai.top._manageMode&&(r.off("transitionend.nav webkitTransitionEnd.nav oTransitionEnd.nav otransitionend.nav MSTransitionEnd.nav").on("transitionend.nav webkitTransitionEnd.nav oTransitionEnd.nav otransitionend.nav MSTransitionEnd.nav",function(){r.hasClass("open")&&Mobi.removeCtrlStyleCssList("mobiStyleNav","",[{cls:".jz_nav-drawer-halfCover .navbarV3.open",key:"height"}])}),l.on("click.click",function(){r.hasClass("open")||Mobi.setCtrlStyleCssList("mobiStyleNav","",[{cls:".jz_nav-drawer-halfCover .navbarV3.open",key:"height",value:parseInt(h.height())+"px"}])})))},e.navSwipeMenuV3=function(e,i){var o=i.advance.routine.mask.type,n=jm.os.supportsTouch?"touchstart.navE":"click.navE";function a(i){var n=Mobi.getPreviewObject("navbar").className,a=jm("#navButton"),s=jm("#main_nav_mask"),l=jm("#webTop");-1!==n.indexOf("open")?Mobi.closeNavV3(e):(jm("#navbar").addClass("open"),jm("#navExistOffPanel").addClass("navPanelOpen"),a.addClass("navButtonOpen"),r("jz_navOpen"),r("moveRight"),1!==e&&2!==e&&3!=e&&4!=e&&e!=t.SUSPENSION_ALL_COVER||jm("#webTopBox").addClass("jz_navWebTopOpen"),e!=t.DRAWER_ALL_COVER&&e!=t.DRAWER_PART_COVER||a.appendTo(l),o&&(s.length>0?s.show():(jm("<div id='main_nav_mask' class='p_main_nav_mask'></div>").prependTo(l),s=jm("#main_nav_mask"),Mobi.bindClickEvent(s,"click",function(){Mobi.closeNavV3(e)}))))}function r(e){jm("#webHeaderBox").addClass(e),jm("#webBannerBox").addClass(e),jm("#webContainerBox").addClass(e),jm("#customerServiceDiv").addClass(e),jm("#webFooter").addClass(e),jm("#bgm_icon").addClass(e),jm("#web_header_fixed_box").addClass(e),jm("#webFooter_v3").addClass(e),jm("#J_footer_nav").addClass(e)}r("moveAnimation"),e==t.SUSPENSION_BOX&&Mobi.autoSetNavBarHeightV3(e),Mobi.bindClickEvent(jm("#navButton"),"click",function(){return a(),!1}),jm("#navExistOffPanel").off(n).on(n,function(){return a(),!1})},e.closeNavV3=function(e){var i=jm("#navButton"),o=jm("#webHeader_v3"),n=jm("#main_nav_mask");function a(e){jm("#webBannerBox").removeClass(e),jm("#webContainerBox").removeClass(e),jm("#customerServiceDiv").removeClass(e),jm("#webFooter").removeClass(e),jm("#bgm_icon").removeClass(e),o.removeClass(e),jm("#J_footer_nav").removeClass(e),jm("#webFooter_v3").removeClass(e),jm("#web_header_fixed_box").removeClass(e)}jm("#navbar").removeClass("open"),jm("#navExistOffPanel").removeClass("navPanelOpen"),i.removeClass("navButtonOpen"),a("jz_navOpen"),a("moveRight"),jm("#webTopBox").removeClass("jz_navWebTopOpen"),n.hide(),o.hasClass("J_header_is_hide")||e!=t.DRAWER_ALL_COVER&&e!=t.DRAWER_PART_COVER||i.prependTo(o.find(".J_headerFixBox"))},e.autoSetNavBarHeightV3=function(e){var i=0,o=4+parseInt(jm(Mobi.getPreviewObject("navbar")).css("bottom").replace("px","")),n=e==t.SUSPENSION_BOX,a=jm("#navbar");(jm.os.iphone?n&&(i=Mobi.getPreviewWindow().innerHeight-o):jm.os.android?(i=Mobi.getPreviewWindow().screen.height/Mobi.getPreviewWindow().devicePixelRatio-Mobi.getPreviewWindow().screenTop,n&&(i=Mobi.getPreviewWindow().innerHeight-o)):jm.os.supportsTouch||(i=Mobi.getPreviewWindow().innerHeight,n&&(i=Mobi.getPreviewWindow().innerHeight-o)),i>0)&&(n?parseInt(jm("#navbarList").height())+parseInt(jm("#navbarList").css("padding-bottom").replace("px",""))>i&&(i-=parseInt(a.css("bottom").replace("px","")),jm("#navbar").css("height",i+"px")):jm("#navbar").css("height",i+"px"))},e.autoSetNavBarBottomV3=function(e){var i,o,n,a=jm("#navbar"),r=jm("#navButton");jm("#J_footer_nav");e==t.SUSPENSION_BOX?(n=r[0].getBoundingClientRect(),i=parseInt(r.css("bottom").replace("px",""))+n.height-.6*_htmlFontSize,o=n.left+n.width/2-.13*_htmlFontSize,a.css("bottom",i+"px"),a.css("left",o+"px")):(r.removeAttr("style"),a.removeAttr("style"))},e.initNavButtonV3=function(e,t,i){if(e&&t){var o=e.nav,n=0==o.button?t.nav.button:o.button,a=jm("#navButton");a.find(".J_hamburger"),a.find(".hamburger_line");a.removeClass("navButton-swing navButton-border navButton-circle g_nav_bgColor_v3 g_nav_bdColor_v3 g_nav_color_v3 is_fixed");for(var r=0;r<=11;r++)a.removeClass("navButton_"+r);switch(a.addClass("navButton_"+n),e.hs.hh&&1==i.type&&a.addClass("is_fixed"),n){case 2:case 4:a.addClass("g_nav_color_v3");break;case 6:a.addClass("g_nav_bdColor_v3 g_nav_color_v3");break;case 8:a.addClass("g_nav_bgColor_v3 g_nav_bdColor_v3");break;case 11:a.addClass("g_nav_bgColor_v3")}}},e.initOfficalNavSubMenuV3=function(e,t,i,o){var n=[],a=[],r="ontouchstart"in window,s=r?"touchstart":"click",l=r?"tap":"click",c=(Fai.top._manageMode,jm("#navbar")),d=jm("#navbarList"),m=jm("#navButton"),p=(i.nav.advance.routine.contentType,document.body.offsetHeight),u=Mobi.checkSubMenuType(o),h=(Fai.top._templateLayoutId,jm.getCookie("navId"));for(var f in jm.cookie("navId","",{expires:-1}),Mobi.initOfficalSubMenu(o),e)if(nav=e[f],nav.children||nav.cil,a.push(nav.id),Fai.top._manageMode){if(nav.children&&nav.children.length>0)for(var g=0;g<nav.children.length;g++)n.push(nav.children[g].id)}else n=n.concat(nav.cil);for(g=0;g<n.length;g++)index=jm.inArray(n[g],a),index>=0&&a.splice(index,1);for(g=0;g<a.length;g++)!function(i){var n=a[i],r=e["nav"+a[i]];if(r){var m=[],p=jm("#navItem_"+a[i]);if(j(p,n),t||(p.removeClass("nav_1_level"),p.off(s+".subMenu")),Fai.top._manageMode&&!t){if(r.children&&r.children.length>0)for(i=0;i<r.children.length;i++)m.push(r.children[i].id)}else m=m.concat(r.cil);!m||m.length<1||(p.addClass("nav_1_level"),p.on(l+".subMenu",function(t){if(t.preventDefault(),c.data("subMenuOpen")!=r.id){var i,n,a=jm(this),s=(Fai.top._templateLayoutId,Mobi.checkSubMenuType(o)),l="subMenu_"+Mobi.getSecMenuAnimationName(),u="panel"!=s&&"panel2"!=s?"navItem":"",f=!1;"fold"==s&&p.clone();n="<div id='main_nav_sub_menu_wrap' class='nav_offical_sub_menu_wrap nav_sub_layout_"+s+" "+l+" '>","bubble"!=s&&"bubble_horizon"!=s||(n+="<div class='icon- nav_sub_menu_triangle2'></div>"),n+="<div class='nav_offical_sub_menu_wrap2'>","panel"!=s&&"panel2"!=s||(n+="<div class='parent_menu sub_menu_nav_item_wrap'><a href='javascript:;' class='sub_nav_link'><span class='icon-parentMenu'></span><span class='navItemName'>"+r.name+"</span></a></div>");for(var g=0;g<m.length;g++){var _=m[g],M=e["nav"+_];M&&(f||(h?h==_&&(i=_,f=!0):M.jumpCtrl&&M.jumpCtrl.info&&(100==M.jumpCtrl.info.t&&(M.jumpCtrl.info.i==Fai.top._pageId||-5==M.jumpCtrl.info.i&&6==Fai.top._pageId)?i=_:106==M.jumpCtrl.info.t&&6==Fai.top._pageId&&Fai.top._groupId==M.jumpCtrl.info.i?i=_:107==M.jumpCtrl.info.t&&7==Fai.top._pageId&&Fai.top._groupId==M.jumpCtrl.info.i?i=_:112==M.jumpCtrl.info.t&&27==Fai.top._pageId&&Fai.top._groupId==M.jumpCtrl.info.i&&(i=_))),n+="<div id='navItem_"+_+"' class='sub_menu_nav_item_wrap navItem_"+_+" icon-navItem "+u+"'>",n+="<a class='sub_nav_link' href='"+M.jumpCtrl.href+"' _colid='"+_+"' id='navbar_"+_+"'>",n+="<span class='icon_subMenu'></span>",n+="<span class='navItemName'>"+Mobi.encodeHtml(M.name)+"</span>",n+="</a>",n+="</div>")}if(n+="</div>",n+="</div>",Mobi.hideOfficalNavSubMenu(!0,o),a.addClass("subMenuOpen"),d.addClass("jz_navbar_sub_menu_open"),c.addClass("jz_navbar_sub_menu_open_1"),"fold"==s||"fold2"==s){var y=c.find(".itemSelected a").css("background-color");Mobi.setCtrlStyleCssList("mobiStyleNav","",[{cls:".subMenuOpen",key:"background-color",value:y}])}"fold"==s||"fold2"==s?jm(n).insertAfter(a):"panel"==s?d.append(n):"panel2"==s?c.append(jm(n)):"bubble"!=s&&"bubble_horizon"!=s&&"dragDown"!=s||jm("#g_web").append(jm(n));var S=jm(".nav_offical_sub_menu_wrap");"bubble"==s||"dragDown"==s?(S.addClass("is_initing"),setTimeout(function(){v(S,p,s),S.removeClass("is_initing")},200)):"bubble_horizon"==s&&b(jm(".nav_offical_sub_menu_wrap"),p),c.data("subMenuOpen",r.id),"panel"!=s&&"panel2"!=s||jm(".parent_menu").on("click.nav",function(){Mobi.hideOfficalNavSubMenu(!1,o)});var I=jm("#navItem_"+i);I.addClass("fk_subMenuSelected"),I.find(".navItemName").addClass("g_mainColor");for(g=0;g<m.length;g++){_=m[g];j(jm("#navItem_"+_),_)}}else Mobi.hideOfficalNavSubMenu(!1,o)}))}}(g);function v(e,t,i){if(!(e.length<1||t.length<1)){var o,n,a=jm("#g_web").offset(),r=t.offset(),s=a.width,l=e[0].offsetWidth,c=r.left+(r.width-l)/2-0,d=c+l,m=(a.left,d-a.left),p=(jm("body")[0].offsetWidth,c-a.left<0),u=m>a.width;(p||u)&&(o=p?c-a.left:m-s),c=p?a.left+.5*_htmlFontSize:c,c=u?c-(m-s):c,e.css({top:r.bottom+"px",left:c+"px"}),o&&(n=l/2+o,jm(".nav_sub_menu_triangle2").css("left",n+"px"))}}function b(e,t){if(!(e.length<1||t.length<1)){var i,o,n=document.documentElement.scrollTop||document.body.scrollTop,a=n+p,r=n,s=jm("#navbar").offset(),l=t.offset(),c=e.offset(),d=e[0].offsetWidth,m=l.top-(c.height-l.height)/2,u=s.left-d+1,h=m<=r,f=m+c.height>=a;h?i=-((m=_htmlFontSize+n)+_htmlFontSize):f&&(m-=i=m+c.height-a+.5*_htmlFontSize),e.css({top:m-n+"px",left:u+"px"}),i&&(o=l.top-n,jm(".nav_sub_menu_triangle2").css("top",o+"px"))}}function j(e,t){var i="ontouchstart"in window?"touchend":"click",o=!1;e.find("#navbar_"+t).off(i+".navHref").on(i+".navHref",function(){var e=jm(this),i=e.attr("href");if(!e.closest(".navItem").hasClass("nav_1_level")&&void 0!==i&&""!=i&&"javascript:;"!=jm.trim(i)){if(!o)return event.stopPropagation(),jm.setCookie("navId",t),(!Fai.top._manageMode||!Fai.top.Mobi.checkSaveBar())&&(i=Mobi.fixJzmHomeIframeParam(jm(this),i),window.location.href=i,!1);o=!1}}).on("touchmove",function(){o=!0})}c.find(".nav_1_level").length>0&&c.addClass("jz_subMenu_bar"),jm("body").off(s+".subMenu2").on(s+".subMenu2",function(e){var t=jm(e.target);t.closest("#navbar").length<1&&t.closest("#qqDiv").length<1&&c.data("subMenuOpen")>0&&setTimeout(function(){Mobi.hideOfficalNavSubMenu(!1,o)},200)}),"bubble_horizon"==u&&c.off("scroll.subMenu").on("scroll.subMenu",function(){c.find(".subMenuOpen").length>0&&Mobi.hideOfficalNavSubMenu(!1,o)}),m.on(s+".subMenu",function(){Mobi.hideOfficalNavSubMenu(!1,o)}),jm("#navExistOffPanel").off(s+".subMenu").on(s+".subMenu",function(){Mobi.hideOfficalNavSubMenu(!1,o)}),6!=o.layout&&10!=o.layout||Mobi.initNavHorizonSlider(o)},e.initNavHorizonSlider=function(e){Mobi.hideNavItemContainer(),Mobi.removeNavIconPositionFix();var t,i=jm("#navbarList"),o=jm("#navbar"),a=Mobi.getPreviewObject("J_nav_bar_wrap"),r=jm(a),s=parseInt(jm(a).width()),l=0,c=a.querySelectorAll(".J_nav_item"),d=r.offset(),m="true"===o.attr("_arrowopen")||!jm.os.supportsTouch,p=jm("#g_web")[0].offsetLeft;6==e.layout&&jm.each(c,function(e,t){jm(t).addClass("flexShrinkZero")});for(var u=0;u<c.length;u++)t=window.getComputedStyle(c[u]),l+=c[u].offsetWidth+n(t.marginRight)+n(t.marginLeft);if((l+=c.length)>s){var h=function(){var e=i.offset().left-p;Math.abs(e)+s<l&&j.css("display","block"),e>=-1&&b.css("display","none"),e<0&&b.css("display","block"),Math.abs(e)+s+1>=l&&j.css("display","none")};navigator.appVersion.match(/MSIE [\d.]+/)&&10===parseInt(navigator.appVersion.match(/MSIE ([\d.]+)/)[1])&&(l+=2*c.length),i.css("width",l+"px");var f=jm.getCookie("startX")?parseInt(jm.getCookie("startX")):0;if(jm.os.supportsTouch){var g=function(e,t){var i=t.wrapper.querySelector(".navTouchLeft"),o=t.wrapper.querySelector(".navTouchRight");i.style.display=e<0?"block":"none",t.maxScrollX===t.x?o.style.display="none":o.style.display="block",Mobi.hideOfficalNavSubMenu()},v=new iScroll(a,{x:f,scrollX:!0,scrollY:!1,mouseWheel:!0,momentum:!1,remarkXCoordinate:!0,remarkNavLeftRight:g,onScrollEnd:function(){m&&h()}});g(f,v)}if(m){var b=jm(a).find(".navLeft"),j=jm(a).find(".navRight"),_=(jm(a).find(".navbarList"),s-l);timer=null,f<0&&(b.css("display","block"),i.css("transform","translate3d("+_+"px, 0px, 0px) scale(1)")),j.css("display","block");var M=jm.getCookie("startX_p")?parseInt(jm.getCookie("startX_p")):0,y=0,S=0,I=a.offsetLeft,w=[];jm(a).find(".J_nav_item").each(function(e){w[e]=this.offsetLeft-I,y++}),j.unbind("click"),b.unbind("click"),j.on("click",function(t){t.stopPropagation(),function e(t,o){var n=i.offset().left-p;jm(t).unbind(o),M>=w.length-1&&(M=w.length-2),S=w[M+1]-w[M],++M==y&&(M=y-1);var a=n-S;Math.abs(a)+s>l&&(a=0-(l-s)),i.css("transform","translate3d("+a+"px, 0px, 0px) scale(1)"),jm.setCookie("startX",a),jm.setCookie("startX_p",M),setTimeout(function(){h(),jm(t).bind(o,function(){e(this,o)})},300)}(this,"click"),jm(".nav_offical_sub_menu_wrap").length>0&&Mobi.hideOfficalNavSubMenu(!1,e)}),b.on("click",function(t){t.stopPropagation(),function e(t,o){var n=i.offset().left-p;jm(t).unbind(o),M>=w.length-1&&(M=w.length-2),M<1&&(M=1),S=w[M]-w[M-1],M--;var a=n+S;a>0&&(a=0),i.css("transform","translate3d("+a+"px, 0px, 0px) scale(1)"),jm.setCookie("startX",a),jm.setCookie("startX_p",M),setTimeout(function(){h(),jm(t).bind(o,function(){e(this,o)})},300)}(this,"click"),jm(".nav_offical_sub_menu_wrap").length>0&&Mobi.hideOfficalNavSubMenu(!1,e)})}r.on("click.nav",".J_nav_item",function(){var e=jm(this),t=e.offset(),o=jm.os.supportsTouch?v.x:i.offset().left,n=parseInt(e.width());d.right<t.right?e.closest(".nav_1_level").length<1&&jm.setCookie("startX",o-n):d.left>t.left&&e.closest(".nav_1_level").length<1&&jm.setCookie("startX",o+n)})}i.removeClass("navbarList-horizontalLayout")},e.getMainNavLayoutId=function(){return Fai.top._manageMode?Fai.top._navSkinPattern.layout:jm("#navbar").attr("layout")},e.initFooterSubMenuV3=function(e,t){var i=[],o=[];for(var n in e)if(nav=e[n],nav.children||nav.cil,o.push(nav.id),Fai.top._manageMode){if(nav.children&&nav.children.length>0)for(var a=0;a<nav.children.length;a++)i.push(nav.children[a].id)}else i=i.concat(nav.cil);for(a=0;a<i.length;a++)index=jm.inArray(i[a],o),index>=0&&o.splice(index,1);var r=jm("#J_footer_nav"),s=r.offset();for(a=0;a<o.length;a++)!function(i){var n,a,l=e["nav"+o[i]],c=[];if(l.children)for(i=0;i<l.children.length;i++)c.push(l.children[i].id);else c=l.cil;var d=jm("#footer_nav_"+l.id);d.length<1||(c.length<1?(d.removeClass("one_level_nav"),d.off("click.subMenu")):(Fai.top._manageMode&&(d.attr("href","javascript:;"),d.addClass("one_level_nav")),d.off("click.subMenu").on("click.subMenu",function(){if(jm(".nav_sub_menu_wrap").remove(),r.data("subMenuOpen")!=l.id){a="<div class='nav_sub_menu_wrap'>",a+="<div id='sub_menu_"+l.id+"'  class='nav_sub_menu_wrap2'>",a+="<div class='nav_sub_menu_content'>";for(var i=0;i<c.length;i++)(n=e["nav"+c[i]])&&(a+="<a class='nav_sub_menu_item' href='"+n.jumpCtrl.href+"'>"+Mobi.encodeHtml(n.name)+"</a>");a+="</div>",a+="</div>",a+="<div id='sub_menu_triangle"+l.id+"' class='nav_sub_menu_triangle'></div>",a+="</div>",jm(a).appendTo(jm("#J_footer_nav"));var o=jm(this),d=jm("#sub_menu_"+l.id),m=jm("#sub_menu_triangle"+l.id),p=parseFloat(m.width()),u=parseFloat(m.height()),h=parseFloat(o.offset().left)-s.left,f=parseFloat(o.width()),g=parseFloat(d[0].offsetWidth),v=r.height(),b=v.indexOf("rem")>-1?parseFloat(v.replace("rem",0)*_htmlFontSize):parseFloat(v),j=h+(f-g)/2,_=j+d[0].offsetWidth,M=jm("body")[0].offsetWidth;if(j=j<0?0:j,j=_>M?j-(_-M):j,2==(Fai.top._manageMode?Fai.top._footerNavSkinPattern:t).advance.routine.layout&&jm(event.target).closest(".is_middle").length>0){var y=r.find(".is_middle").find(".u_nav_icon_decorate");b=parseFloat(b+parseFloat(y.height()/2+.3*_htmlFontSize))}d.css({left:j+"px",bottom:b+"px"}),m.css({left:h+(f-p)/2+"px",bottom:2+b+u/2+"px"}),r.data("subMenuOpen",l.id)}else r.data("subMenuOpen",0)})))}(a);jm("body").off("click.subMenu").on("click.subMenu",function(e){jm(e.target).closest("#J_footer_nav").length<1&&r.data("subMenuOpen")>0&&Mobi.hideNavSubMenu()})},e.fixMainNavPCVisitStyle=function(e){if(Mobi.isPC()&&!Fai.top._manageMode){var i=parseInt(jm("#navbar").attr("skinid")),n=e.layout==t.DRAWER_LEFT,a=e.layout==t.DRAWER_RIGHT,r=o("suspension",e.layout),s=o("drawer",e.layout),l=jm("#navButton"),c=jm("#navButton"),d=jm("#navbar"),m=document.querySelector("#g_web").getBoundingClientRect(),p=l.offset(),u=e.advance,h=(document.documentElement||document.body).clientWidth,f=jm("#navExistOffPanel");if(!(h<=m.width)&&(s&&(a?(l.css("left",m.width-p+"px"),l.css("margin-right","0.5rem")):(l.css("left","auto"),l.css("margin-left","0.5rem"))),n||a||r||[].includes(i)))if(r){var g=u.navBtn.pos;if(1==g.type){var v=g.left/100*m.width;c.css("left",v+m.left+"px")}1===u.routine.navPanel.t&&0==u.routine.navPanel.unit&&1===u.routine.navPanel.width.t&&d.css("left","auto")}else n?1===u.routine.navPanel.t&&0==u.routine.navPanel.unit&&1===u.routine.navPanel.width.t&&(d.css("width",u.routine.navPanel.width.width/100*m.width+"px"),d.css("left","auto"),f.css("margin-left","0")):a&&1===u.routine.navPanel.t&&0==u.routine.navPanel.unit&&1===u.routine.navPanel.width.t&&(d.css("width",u.routine.navPanel.width.width/100*m.width+"px"),d.css("right",h-m.right+"px"),f.css("margin-left","0"))}}}(Mobi),Mobi.getStyle=function(e,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i=e.currentStyle[t]),i},Mobi.getFrameHeight=function(e){var t=parseInt(Mobi.getStyle(e,"padding-top").replace("px",""))+parseInt(Mobi.getStyle(e,"padding-bottom").replace("px","")),i=parseInt(Mobi.getStyle(e,"margin-top").replace("px",""))+parseInt(Mobi.getStyle(e,"margin-bottom").replace("px",""));return parseInt(Mobi.getStyle(e,"border-top-width").replace("px",""))+parseInt(Mobi.getStyle(e,"border-bottom-width").replace("px",""))+i+t},Mobi.setModuleHeight2=function(e,t,i){var o=Mobi.getPreviewObject("module"+e);if(o){var n=i||_htmlFontSize,a=_htmlFontSize/n,r=jm(o).attr("_modulestyle"),s=53==r;t*=a,t=parseInt(t),o.style.height=t/_htmlFontSize+"rem";var l=o.querySelector(".formBannerTitle"+e),c=o.querySelector(".formMiddle"),d=0,m=s&&Mobi.isModuleV2(r);if(l&&"none"!=getComputedStyle(l).display&&(d=jm(o).hasClass("formStyle2")?2*_htmlFontSize:l.offsetHeight),!m){var p=t-d-Mobi.getFrameHeight(c);c.style.height=p/_htmlFontSize+"rem";var u=c.querySelector(".middleCenter");p-=Mobi.getFrameHeight(u);var h=c.querySelector(".formMiddleContent");p-=Mobi.getFrameHeight(h),h.style.height=p/_htmlFontSize+"rem",h.style.overflow="hidden"}jm(o).hasClass("formStyle51")&&(c.querySelector(".J_packContentList").style.height=p/_htmlFontSize+"rem")}},Mobi.setModuleBannerHeight2=function(e,t){if(0!==e){var i=Mobi.getPreviewObject("module"+e).querySelector(".formBannerTitle");i&&(i.style.height=t/_htmlFontSize+"rem")}},Mobi.scrollToModule=function(e){var t=jm("#module"+e),i=Mobi.getPreviewObject("webHeaderBox"),o=0;void 0===t||t.length<1||("fixed"==jm(i).css("position")&&(o=parseInt(jm(i).height())),scrollElem=document.documentElement.scrollTop?document.documentElement:document.body,scrollElem.scrollTop=t.offset().top-o)},Mobi.msgBoardShowMsg=function(e){jm(".notice").show(),jm(".notice").html(e)},Mobi.msgBoardAddMsg=function(e,t,i){jm("#reqName").val(),jm("#reqPhone").val(),jm("#reqEmail").val();var o=jm("#reqContent").val(),n=jm("#msgBoardCaptcha").val(),a=jm(".notice").show(),r=jm(".J_msgBoardCaptcha"),s=0;if(Fai.top.isJuly3FreeUser)return Mobi.logDog(200964,4),void Mobi.msgBoardShowMsg("免费版暂不支持此功能");if(jm("input.msg_isMust").each(function(){var e=jm(this).attr("id"),t=jm(this).attr("placeholder"),i=jm(this).val();return""==i||null==i?(a.html(jm.format(LS.msgBoardInputIsEmpty,jm.encodeHtml(t))),Mobi.getPreviewObject(e).focus(),s=1,!1):("reqPhone"!=e||jm.isPhone(i))&&("reqEmail"!=e||jm.isEmail(i))?void 0:(a.html(jm.format(LS.msgBoardInputCorrect,jm.encodeHtml(t))),Mobi.getPreviewObject(e).focus(),s=1,!1)}),1==s)return!1;var l=0;if(jm("input.msg_ipt").each(function(){var e=jm(this).attr("id"),t=jm(this).attr("placeholder"),i=jm(this).val(),o=jm(this).attr("maxlength");return i.length>o?(a.html(jm.format(LS.msgBoardInputMaxLength,jm.encodeHtml(t),o)),l=1,!1):"reqPhone"==e&&i.length&&!jm.isPhone(i)?(a.html(jm.format(LS.msgBoardInputCorrect,jm.encodeHtml(t))),Mobi.getPreviewObject(e).focus(),l=1,!1):"reqEmail"==e&&i.length&&!jm.isEmail(i)?(a.html(jm.format(LS.msgBoardInputCorrect,jm.encodeHtml(t))),Mobi.getPreviewObject(e).focus(),l=1,!1):void 0}),1==l)return!1;if(null==o||""==o)return Mobi.msgBoardShowMsg(LS.msgBoardInputContent),void Mobi.getPreviewObject("reqContent").focus();if(o.length>1e4)return Mobi.msgBoardShowMsg(jm.format(LS.msgBoardInputContent2,1e4)),void Mobi.getPreviewObject("reqContent").focus();if(!r.hasClass("msgBoardCaptchaHide")&&(null==n||""==n))return Mobi.msgBoardShowMsg(LS.msgBoardInputValidateCode),void Mobi.getPreviewObject("msgBoardCaptcha").focus();Mobi.msgBoardShowMsg(LS.msgBoardDoing);var c={};jm("input.msg_ipt").each(function(){var e=jm(this).attr("id"),t=jm(this).val();c[e]=t.trim()}),c.reqContent=o,c.memberId=void 0===t?0:t,jm.ajax({type:"post",url:"ajax/msgBoard_h.jsp",data:"cmd=add&msgBdData="+jm.encodeUrl(jm.toJSON(c))+"&validateCode="+jm.encodeUrl(n)+"&moduleId="+jm.encodeUrl(i),error:function(){Mobi.msgBoardShowMsg(LS.js_systemError)},success:function(t){(t=jm.parseJSON(t)).success?(e?Mobi.ing(LS.msgBoardSendOkAutoOpen,1):Mobi.ing(LS.msgBoardSendOk,1),setTimeout(function(){Fai.top.location.reload()},1500)):(1==t.errno?Mobi.msgBoardShowMsg(LS.js_captchaError):2==t.errno?Mobi.msgBoardShowMsg(LS.js_argsError):-4==t.errno?Mobi.msgBoardShowMsg(LS.msgBoardAddCountLimit):Mobi.msgBoardShowMsg(LS.js_systemError),t.needCode&&(Mobi.msgBoardShowMsg(t.msg),r.removeClass("msgBoardCaptchaHide")),t.hasFW&&(Mobi.ing(t.msg),jm(".notice").hide())),Mobi.changeValidateCode(jm("#msgBoardCaptchaImg"))}})},Mobi.noticeLeftRightMarquee=function(e,t){var i={direction:"up",speed:"normal",loop:"infinite",moveout:!1,isScrolling:!1};jm.extend(i,e),"normal"==i.speed?jm.extend(i,{speed:70}):"slow"==i.speed?jm.extend(i,{speed:40}):jm.extend(i,{speed:100}),jm("#noticeMarquee"+i.id).data("options",e);for(var o=i.id,n=Mobi.getPreviewObject("noticeMarquee"+o),a=n.offsetHeight,r=n.offsetWidth,s=0,l=n.querySelectorAll(".noticeMarqueeRow>span"),c=0;c<l.length;c++)s+=l[c].offsetWidth;var d=Mobi.getPreviewObject("noticeContainer"+o),m=d.offsetWidth,p=s>m?s:m,u=i.direction,h=0,f=i.speed,g=!1,v=i.isScrolling,b=i.noticeType,j=Mobi.createElementByHtml("<div id='noticeMarqueeCopy"+o+"' class='noticeMarquee' style='overflow:hidden;width:"+p+"px;' ></div>"),_="<div id='noticeMarqueeNewParent"+o+"' style='position:relative;overflow:hidden;width:"+(p+m)+"px;'></div>";if(b<=5&&b>=1)var M=Mobi.createElementByHtml("<div style='-webkit-text-size-adjust:none;position: relative;width: 100%;height:1.5rem;line-height:1.5rem;overflow: hidden;"+(4==b?"":"left: 23px;")+"'></div>");else M=Mobi.createElementByHtml("<div style='-webkit-text-size-adjust:none; position: relative; width: auto;height:70px; line-height:70px; margin-left:70px; overflow: hidden;"+(4==b?"":"left: 20px;")+"'></div>");var y=Mobi.createElementByHtml(_);function S(e,t,i,o){var n;return"left"==t?n=i?"mobi_notice_right_to_left_50":"mobi_notice_right_to_left":"right"==t&&(n=i?"mobi_notice_left_to_right_50":"mobi_notice_left_to_right"),"-webkit-animation: "+n+" "+e/o+"s linear 1s infinite;-moz-animation:    "+n+" "+e/o+"s linear 1s infinite;-o-animation:      "+n+" "+e/o+"s linear 1s infinite;animation:         "+n+" "+e/o+"s linear 1s infinite;"}n.style.width=p+"px",null!=e&&(d.appendChild(M),M.appendChild(y),y.appendChild(n),y.appendChild(j),v?j.appendChild(n.querySelector(".noticeMarqueeDiv").cloneNode(!0)):(j.style.height="20px",j.style.width=m+"px"),"left"==u?h=a:(h=0-p,(v&&!g||!v&&!g)&&(h=0),v&&g&&(h=-p)),n.style.left=g?"0px":h+"px","left"!=u&&"right"!=u||(n.style.top="0px"),function(e){"left"!=e&&"right"!=e||(y.style.position="relative",j.style.top="0px","left"==e?(v&&!g&&(y.style.width=2*p+"px",n.style.left="0px",j.style.left=p+"px"),v||g||(n.style.left=r+"px",j.style.left=p+m+"px")):(n.style.width=p+"px",v&&!g&&(y.style.width=2*p+"px",n.style.paddingLeft=p+"px",y.style.left=-(2*p-m+23)+"px"),v&&g&&(y.style.width=2*p+"px",n.style.paddingLeft=p+"px",y.style.left=-(2*p-m+23)+"px"),v||g||(j.style.left=p+"px",y.style.left=-p+"px"),!v&&g&&(y.style.left=-(p+23)+"px",n.style.left=m+"px",j.style.left="0px")))}(u),"left"==u?(y.scrollLeft,v&&!g&&y.setAttribute("style",y.getAttribute("style")+S(p+m,u,v,f)),v||g||y.setAttribute("style",y.getAttribute("style")+S(p+m,u,v,f)),!v&&g&&(y.className+=" mobi_notice_right_to_left",setTimeout(function(){y.style.left=m+"px"},15e3))):"right"==u&&(y.scrollLeft,v&&!g&&y.setAttribute("style",y.getAttribute("style")+S(p+m,u,v,f)),v&&g&&(y.className+=" mobi_notice_left_to_right_50_"+f),v||g||y.setAttribute("style",y.getAttribute("style")+S(p+m,u,v,f)),!v&&g&&(y.className+=" mobi_notice_left_to_right_"+f,setTimeout(function(){y.style.left=-(m+p+23)+"px"},15e3))))},Mobi.saveNoticeMarqueeProps=function(e){null!=e&&jm("#noticeMarquee"+e.id).data("options",e),jm("#module"+e.id).on("Fai_onModuleSizeChange",function(){Mobi.noticeMarquee(jm("#noticeMarquee"+e.id).data("options"),e.id)}),jm("#module"+e.id).on("Fai_onModulePositionChange",function(){Mobi.noticeMarquee(jm("#noticeMarquee"+e.id).data("options"),e.id)})},Mobi.noticeMarqueeUpDown1=function(e){var t={direction:"top",speed:"normal",stopTime:1e3};jm.extend(t,e),"fast"===t.speed?jm.extend(t,{speed:500}):"slow"===t.speed?jm.extend(t,{speed:1100}):jm.extend(t,{speed:850});var i=jm("#noticeScrollbar"+t.id+" li");if(1==i.length){var o=jm(i.get(0)),n="<li class='"+o.getAttribute("class")+"'>"+o.html()+"</li>";jm(n).insertAfter(o)}jm("#noticeScrollbar"+t.id).marquee({yScroll:t.direction,showSpeed:t.speed,pauseSpeed:t.stopTime,hoverChange:!1});var a=jm("#module"+t.id+" .formMiddleContent");a.css("overflow","hidden"),a.css("width","98%"),jm("#module"+t.id+" .formMiddleCenter").css("overflow","hidden")},Mobi.revertIcon=function(e){var t=jm("#module"+e),i=!1,o=t.find(".noticeContainer").height();0!=t.find(".noticeFontIcon").length&&(i=!0),i?t.find(".noticeFontIcon").css("font-size","21px").css("line-height",o+"px"):t.find(".noticeImg").css("width","21px").css("height","21px")},Mobi.noticeMarqueeUpDown=function(e){var t={direction:"top",speed:"normal",stopTime:1e3};jm.extend(t,e),"fast"===t.speed?jm.extend(t,{speed:500}):"slow"===t.speed?jm.extend(t,{speed:1100}):jm.extend(t,{speed:850});var i=Mobi.getPreviewObject("noticeScrollbar"+t.id);if(!(i.length<1)){var o=i.style,n=jm(i),a=i.querySelectorAll("li"),r=a.length,s="",l=a[0].getAttribute("class"),c=a[0].getAttribute("style")||"";if(1==r){var d="";if(1==r)d="<li class='"+l+"' style='"+c+"'>"+a[0].innerHTML+"<li class='"+l+"' style='"+c+"'>"+a[0].innerHTML+"</li>";else for(var m in a)d+="<li class='"+l+"' style='"+c+"'>"+a[m].innerHTML+"</li>";n.append(jm(d))}else"top"==t.direction?(s="<li class='"+l+"' style='"+c+"'>"+a[r-1].innerHTML+"</li>",i.insertBefore(jm(s)[0],i.getElementsByClassName("scrollbarLi")[0])):(s="<li class='"+l+"' style='"+c+"'>"+a[0].innerHTML+"</li>",n.append(s));a=i.querySelectorAll("li"),o[jm.feat.cssPrefix+"TransitionProperty"]="top",o[jm.feat.cssPrefix+"TransitionTimingFunction"]="ease",i.parentNode.style.height=a[0].offsetHeight+"px";for(var p=[],u=0;u<a.length;u++)p[u]=a[u].offsetTop;"top"==t.direction&&p.reverse(),i.style.top=-p[0]+"px",Mobi.noticeMarqueetimeIds=Mobi.noticeMarqueetimeIds||{};var h=Mobi.noticeMarqueetimeIds["scroll"+t.id];h>=0&&clearTimeout(h);var f=p.length-1,g=p.length,v=t.speed+"ms",b=0,j=jm.feat.cssPrefix+"TransitionDuration";a.length>1&&function e(){f<g?(f?(o[j]=v,b=t.stopTime+t.speed):(o[j]="0ms",b=25),o.top=-p[f]+"px",f++):(f=0,b=0);Mobi.getPreviewWindow().Mobi.noticeMarqueetimeIds["scroll"+t.id]=setTimeout(e,b)}()}},Mobi.noticeUpDownSizeChange=function(e){var t=jm("#noticeMarquee"+e),i=t.height(),o=t.children().children();jm.each(o,function(e,t){jm(t).css("top",-(i+2)+"px")}),jm("#noticeScrollbar"+e).removeData("_innerHeight")},Mobi.siteFormAdd=function(e,t,i,o,n){var a=[],r=i,s=!0,l=o,c=jm("#M"+e+"F"+t+"siteFormValidateCode"),d=c.val(),m=[],p=jm("#M"+e+"F"+t+"siteFormAddButton");if(r.length>0&&jm.each(r,function(i,o){if(o.hide)return!0;var n=o.id,r=o.name,l=o.must,c=o.type,d=o.openAreaCode,p={};p.id=n,p.type=c;var u=jm.parseJSON(o.wordLimit);if(0==c){var h=jm("#M"+e+"F"+t+"siteFormInput"+n).val();if(l&&""==h)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(r))),s=!1,!1;var f=100,g=0;if(void 0!==u&&null!=u&&1==u.o&&(f=u.a,g=u.i),h.length>f)return Mobi.ing(jm.format(LS.siteFormSubmitInputMaxLength,jm.encodeHtml(r),f)),s=!1,!1;if(h.length<g)return Mobi.ing(jm.format(LS.siteFormSubmitInputMinLength,jm.encodeHtml(r),g)),s=!1,!1;p.val=h}else if(1==c){var v=jm("#M"+e+"F"+t+"siteFormTextArea"+n).val();if(l&&""==v)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(r))),s=!1,!1;if(v.length>1e3)return Mobi.ing(jm.format(LS.siteFormSubmitInputMaxLength,jm.encodeHtml(r),1e3)),s=!1,!1;p.val=v}else if(2==c){var b=document.querySelectorAll("input[name='M"+e+"F"+t+"siteFormRadioR"+n+"']:checked");if(l&&0==b.length)return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(r))),s=!1,!1;b.length>0?p.val=b[0].value:p.val=""}else if(3==c){var j=document.querySelectorAll("input[name='M"+e+"F"+t+"siteFormCheckboxR"+n+"']:checked");if(l&&0==j.length)return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(r))),s=!1,!1;var _=[];for(i=0;i<j.length;i++)_.push(j[i].value);p.val=_.join("\n")}else if(4==c){var M=document.getElementById("M"+e+"F"+t+"siteFormSelect"+n),y=M.options[M.selectedIndex].value;if(l&&(0==y.length||"none"==y))return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(r))),s=!1,!1;p.val=y}else{if(5==c)return!0;if(6==c){h=jm("#Mobi"+e+"Calendar"+n+"Pluginsinput").val();var S=o.dateSetting?o.dateSetting.type:0,I=1==S?jm("#Mobi"+e+"Calendar"+n+"Plugins_endinput").val():"";if(l&&(""==h||1==S&&""==I))return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(r))),s=!1,!1;h=1==S?h+" 至 "+I:h,p.val=h}else if(7==c){var w=jm("#module"+e).find("#siteForm"+e+"fileName"+n),C={};if(l&&""==w.attr("_tmpFileId"))return Mobi.ing("请选择文件上传"),s=!1,!1;""==w.attr("_tmpFileId")?p.val="":(p.val=w.attr("_fileId"),C.tmpFileName=w.attr("_tmpFileName"),C.fileId=p.val,C.tmpFileId=w.attr("_tmpFileId"),C.fileType=Number(w.attr("_type"),0),C.fileWidth=Number(w.attr("_width"),0),C.fileHeight=Number(w.attr("_height"),0),m.push(C))}else if(8==c){var P=jm("#M"+e+"F"+t+"siteFormPhoneInput"+n).val(),x=o.phoneNumberLength;x||(x="7-11");var L=x,k=x;if(-1!=x.indexOf("-")){var F=x.split("-");L=F[0],k=F[1]}if(l){if(""==P)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(r))),s=!1,!1;if(!jm.isLimitedRangeNationMobile(P,L,k))return Mobi.ing(jm.format(LS.newMobileNumRegular,x)),s=!1,!1}else if(""!=P&&!jm.isLimitedRangeNationMobile(P,L,k))return Mobi.ing(jm.format(LS.newMobileNumRegular,x)),s=!1,!1;if(d){var T=jm("#M"+e+"F"+t+"siteFormSelectPhoneCT"+n).val();p.val=T+P}else p.val=P}else if(9==c){var B=jm("#M"+e+"F"+t+"siteFormMailInput"+n).val();if(l){if(""==B)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(r))),s=!1,!1;if(!jm.isEmail(B))return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,jm.encodeHtml(r))),s=!1,!1}else if(""!=B&&!jm.isEmail(B))return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,jm.encodeHtml(r))),s=!1,!1;p.val=B}else if(10==c){var A=jm("#M"+e+"F"+t+"siteFormIndentityInput"+n).val();if(l){if(""==A)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(r))),s=!1,!1;if(!jm.isCardNo(A))return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,jm.encodeHtml(r))),s=!1,!1}else if(""!=A&&!jm.isCardNo(A))return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,jm.encodeHtml(r))),s=!1,!1;p.val=A}else if(11==c){var D=jm("#M"+e+"F"+t+"siteFormAddressInput"+n).val();if(l&&""==D)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(r))),s=!1,!1;p.val=D}}a.push(p)}),!s)return!1;if(l&&""==d)return Mobi.ing(jm.format(c.attr("msg"))),s=!1,!1;if("提交中..."!=p.find("input")[0].value){p.css("opacity","0.5"),p.find("input")[0].value="提交中...",p.attr("disabled",!0);jm.encodeUrl(jm.toJSON(a));Mobi.ing(LS.siteFormSubmitIng,-1);var u=Fai.top._colInfo.id;jm.ajax({type:"post",url:"ajax/mobiForm_h.jsp",data:"cmd=addSubmit&formId="+t+"&submitContentList="+jm.encodeUrl(jm.toJSON(a))+"&vCodeId="+e+t+"&validateCode="+d+"&tmpFileList="+jm.encodeUrl(jm.toJSON(m))+"&id="+e+"&colId="+u,error:function(){Mobi.ing(LS.js_systemError,2)},success:function(i){if((i=jm.parseJSON(i)).success)Mobi.ing(LS.siteFormSubmitOk,1),Mobi.resertForm(i.formHtml.id,i.formHtml.div),setTimeout(function(){n||window.location.reload(),location.href=n},2500);else{if(i.hasFW)return void Mobi.ing(i.msg);-4==i.rt?Mobi.ing(LS.siteFormSubmitCountLimit):-20==i.rt?Mobi.ing(i.msg):-28==i.rt?Mobi.ing(LS.hasSubmitThisSiteForm):-401==i.rt?(Mobi.ing(LS.siteFormSubmitValidateCodeErr),jm("#M"+e+"F"+t+"siteFormValidateCode").val(""),Mobi.siteFormValidation(t,e)):-302==i.rt?Mobi.ing(LS.siteFormSubmitNotLogin+LS.login+LS.period):Mobi.ing(LS.js_systemError,2),i.needCode&&(Mobi.ing(i.msg),jm("#module"+e+" .J_formValidation").removeClass("siteFormValidationHide")),p.css("opacity","1"),p.find("input")[0].value="提交",p.attr("disabled",!1)}}})}},Mobi.siteFormNotLogin=function(e,t){jm.encodeUrl(Fai.top.location.href);var i=LS.siteFormSubmitNotLogin+LS.login+LS.period;Mobi.ing(i)},Mobi.siteFormValidation=function(e,t){jm("#M"+t+"F"+e+"validateCodeImg").attr("src","validateCode.jsp?"+parseInt(1e3*Math.random())+"&vCodeId="+t+e)},Mobi.siteFormFileUpload=function(e,t,i,o,n,a,r,s){var l=jm(".uploadify-button").height(),c=jm(".uploadify-button").width(),d=jm(".uploadify-button").css("font-size"),m={file_post_name:"Filedata",upload_url:"/ajax/upsiteimg_h.jsp",button_placeholder_id:"siteForm"+n+"fileUpload"+i,file_size_limit:t+"MB",button_image_type:5,button_height:l,button_width:c,button_text:"<span class='fk_m_btText'>"+s+"</span>",button_text_style:".fk_m_btText{text-align:center;font-family: 微软雅黑; color: #666666;font-size:"+d+"}",button_text_top_padding:10,file_queue_limit:1,requeue_on_error:!1,post_params:{ctrl:"Filedata",app:21,type:0,isSiteForm:!0},file_types:a.join(""),file_dialog_complete_handler:function(e){this._allSuccess=!1,this.startUpload()},file_queue_error_handler:function(e,t,i){switch(t){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:Mobi.ing(LS.siteFormSubmitCheckFileSizeErr,!0);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:Mobi.ing("不允许的文件类型",!0);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:Mobi.ing("一次只能上传一个文件",!0);break;default:Mobi.ing("请重新选择文件上传。",!0)}},upload_success_handler:function(e,t){var o=jQuery.parseJSON(t);this._allSuccess=o.success,this._sysResult=o.msg,o.success?(setTimeout(function(){Mobi.ing("文件上传成功",!0)},2e3),Mobi.onFileUploadEvent("upload",o,n,i)):Mobi.ing("文件"+e.name+"，"+o.msg)},upload_error_handler:function(e,t,i){-280==t?Mobi.ing("文件取消成功",!1):-270==t?Mobi.ing("已经存在名称为"+e.name+"的文件。",!0):Mobi.ing("服务繁忙，文件"+e.name+"上传失败，请稍候重试。")},upload_complete_handler:function(e){e.filestatus==SWFUpload.FILE_STATUS.COMPLETE?setTimeout(function(){swfObj.startUpload()},swfObj.upload_delay):e.filestatus==SWFUpload.FILE_STATUS.ERROR&&Mobi.ing("服务繁忙，文件"+e.name+"上传失败，请稍候重试。")},upload_start_handler:function(e){Mobi.ing("读取文件准备上传",!1)},view_progress:function(e,t,i,o){100==(o=Math.ceil(t/i*100))?Mobi.ing("正在上传"+o+"%",!0):Mobi.ing("正在上传"+o+"%",!1)}},p=document.createElement("script");p.type="text/javascript",p.src=e,p.onload=function(){var e=document.createElement("script");e.src=r,e.type="text/javascript",u.appendChild(e),e.onload=function(){swfObj=SWFUploadCreator.create(m),jm(".swfupload").css("vertical-align","middle")}};var u=document.documentElement||document.body;u.appendChild(p)},Mobi.siteFormFileUploadHtml=function(e,t,i,o,n,a,r,s,l,c,d){var m={siteFree:a,updateUrlViewRes:"updateUrlViewRes",auto:!0,fileTypeExts:i.join(""),multi:!1,fileSizeLimit:1024*r*1024,breakPoints:!0,fileSplitSize:20971520,saveInfoLocal:!1,showUploadedPercent:!0,showUploadedSize:!0,removeTimeout:9999999,post_params:{app:21,type:0,fileUploadLimit:r},isBurst:!1,isDefinedButton:!0,buttonText:d,getFileSizeUrl:"//"+c+"/ajax/advanceUpload.jsp?cmd=_getUploadSize",uploader:"//"+c+"/ajax/advanceUpload.jsp?cmd=_mobiupload",onUploadSuccess:function(i,o){var n=jQuery.parseJSON(o);n.success?(p({status:"end",id:i.id,title:"上传成功。"}),Mobi.onFileUploadEvent("upload",n,t,e),setTimeout(function(){Mobi.ing("文件上传成功",!0)},2500)):(p({status:"end",id:i.id,title:n.msg}),Mobi.ing("文件:"+i.name+"，"+n.msg))},onUploadError:function(e,t){jm("#progressBody_ "+e.id).remove(),jm("#progressWrap_"+e.id).remove(),Mobi.ing("网络繁忙，文件:"+e.name+"上传失败，请稍后重试")},onSelect:function(){return!o||(Mobi.ing("已超过资源库容量限制，请升级网站版本。"),!1)},view_progress:function(e){100==(e=Math.ceil(e))?Mobi.ing("正在上传"+e+"%",!0):Mobi.ing("正在上传"+e+"%",!1,!0)}};function p(e){if("start"==e.status){var t=['<div id="progressBody_'+e.id+'" class="bodyDisable"></div>','<div id="progressWrap_'+e.id+'" class="bodyProgressWrap">','<div class="progressCenter"></div>','<div class="progressIngBody">','<div id="progressTitle'+e.id+'" class="progressIngTitle">'+e.title+"</div>",'<div class="progressIngMission">','<div class="mission"><div id="progress'+e.id+'" class="progress" style="width:1%;"></div></div>','<div id="progressNum'+e.id+'" class="progressNum">0%</div>',"</div>",'<div class="progressInfo"><span id="progressTips'+e.id+'" class="progressFileSize"></span><a class="progressCancel" href="javascript:uploadCancel(\''+e.id+"');\">取消</a></div>","</div>","</div>"];jm("body").append(t.join(""))}else"ing"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progress"+e.id).css("width",Math.round(e.percent)+"%"),jm("#progressNum"+e.id).html(Math.round(e.percent)+"%")):"end"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progressBody_"+e.id).remove(),jm("#progressWrap_"+e.id).remove()):"error"==e.status&&jm("#progress"+e.id).addClass("progressError")}var u=document.createElement("script");u.type="text/javascript",u.src=s,u.onload=function(){var i=document.createElement("script");i.src=l,i.type="text/javascript",h.appendChild(i),i.onload=function(){upload=jm("#uploadButton"+t+e).uploadify(m)}};var h=document.documentElement||document.body;h.appendChild(u)},Mobi.onFileUploadEvent=function(e,t,i,o){if("upload"==e){var n=t.id,a=t.name,r=t.type||0,s=(t.size,t.path,t.createTime,t.groupId,t.fileId),l=t.width||0,c=t.height||0;jm("#module"+i).find("#siteForm"+i+"fileName"+o).html(a),jm("#module"+i).find("#siteForm"+i+"fileName"+o).attr("_tmpFileId",n).attr("_tmpFileName",a).attr("title",a).attr("_fileId",s).attr("_width",l).attr("_height",c).attr("_type",r)}},Mobi.fixMobiFormDropdownItem=function(e,t,i){jm(jm("#M"+e+"F"+t+"siteFormSelect"+i).find("option")[0]).hide()},Mobi.fixIphoneStyle=function(e,t){navigator.userAgent.indexOf("iPhone")>-1&&jm("#module"+t).find(".F"+e+"siteFormItemShowVal").find("select").css({width:"85%",height:"2rem"})},Mobi.siteFormSelectArea=function(e,t,i,o,n){var a;a=2052==o||1028==o?site_cityUtil.getProvince():site_cityUtil.getProvinceEn(),(new MobileSelectArea).init({level:n,lcid:o,trigger:"#M"+i+"F"+t+"siteFormAddressInput"+e,value:jm("#M"+i+"F"+t+"siteFormAddressInput"+e).data("value"),data:a,eventName:"click",init:0})},Mobi.siteFormPhoneValidate=function(e,t){var i,o,n;0!==(i=e?jm("#module"+e).find("#"+t):jm("#"+t)).length&&(i.keydown(function(e){return(n=e.which)>47&&n<58||n>95&&n<106||37===n||39===n||8===n}),i.keypress(function(e){return(n=e.which)>47&&n<58||n>95&&n<106}),i.on("input",function(e){jm(this);var t=e.target.value;8!==n&&(t&&t.length>11&&(e.target.value=t.slice(0,11)),t||(e.target.value=null==o?"":o)),t=null,o=e.target.value,n=0}),i.keyup(function(e){var t=jm(this);t.off("mousewheel.disabledScroll").on("mousewheel.disabledScroll",function(e){e.preventDefault()}),t.get(0).addEventListener("DOMMouseScroll",function(e){e.preventDefault()},!1),38!=e.keyCode&&40!=e.keyCode||e.preventDefault()}))},Mobi.initmobiFormTimeBtn=function(e){var t,i,o,n,a=jm("#webFooterBox"),r="#Mobi"+e.moduleId+"Calendar"+e.siteFormItemId+"Plugins",s=jm(r),l=e.dateSetting,c=JSON.parse(JSON.stringify(l.od.unSelectDay)).sort(),d=0==l.type&&1==l.accuracy,m=1==l.type,p=new Date,u=new Date(p.getFullYear(),p.getMonth(),p.getDate()),h=[{elem:s,isStart:!0}];if(m)o="#Mobi"+e.moduleId+"Calendar"+e.siteFormItemId+"Plugins_end",h.push({elem:jm(o),isStart:!1});else for(var f=0;f<24;f++)if(-1==jm.inArray(f,l.ot.unSelectTime)){n=f;break}for(f=0;f<h.length;f++)!function(t){var i=h[f],o=i.isStart,r=i.elem,s=m?o?"fk-datePickStart":"fk-datePickEnd":"",p=1==l.od.t&&1==l.banPassDate?u:new Date(1900,0,1),g="";m&&(g=o?"<div class='fk-calendarNav'>请选择开始日期</div>":"<div class='fk-calendarNav'>请选择结束日期</div>"),r.Calendar({inputExtClass:s,minDate:p,yearChangeable:e.yearChangeable,monthChangeable:e.monthChangeable,slideAble:!0,placeholder:e.placeholder,showHour:d,minHour:n||0,drawNavHeaderHtml:g,onBeforeInitCalendar:function(e){e._options;e._container.hasClass("fk-startDateInput")&&(e._option("minDate",p),e._option("maxDate",null)),e._input[0].blur(),a.addClass("fk-datepickerContainer")},onBeforeCancel:function(e){var t;m&&o&&(t=e.getTargetOption(e._container[0].id+"_end"))._hideDate(t._container,t)},beforeShowTime:function(e,t){return!(l.ot.unSelectTime.length>0&&jm.inArray(e,l.ot.unSelectTime)>-1)},beforeShowDay:function(e,t){return v(e)},onAfterRefresh:function(e){e._options;m&&(e._container.find(".ui-state-active").addClass("ui-state-active-hide"),o||e._container.find("td").not(".ui-calendar-unSelectable").eq(0).find(".ui-state-default").addClass("ui-calendar-startDate"))},onSelectDate:function(e,t){if(m){var i,o,n,a,r,s=e.replace(/-/g,"/"),d=new Date(s),u=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime(),h={minDate:p,maxDate:null},g=t._container.hasClass("fk-startDateInput");if(g&&(h.minDate=d,1==l.banAll||1==l.banHoliday||c.length>0))for(f=1;f<365;f++)if(!v(r=new Date(u+864e5*f))){h.maxDate=r;break}g?(a="string"==typeof(n=(i=t.getTargetOption(t._container[0].id+"_end"))._input.val())?n.replace(/-/g,"/"):"",(o=new Date(a).getTime())&&(h.minDate&&o<h.minDate.getTime()||h.maxDate&&o>h.maxDate.getTime())&&i._input.val("")):i=t.getTargetOption(t._container[0].id.replace("_end","")),i&&(i._option("minDate",new Date(h.minDate)),i._option("maxDate",null!=h.maxDate?new Date(h.maxDate):null),i.switchMonthTo(t._options._selectedMonth,t._options._selectedYear),i.refresh())}},onAfterSelectDate:function(e,t){},onAfterHidePicker:function(e){(m&&!o||!m)&&a.removeClass("fk-datepickerContainer")}})}();function g(e,t,i){var o,n;n=jm("<div class='fk-dateInputMaskWrap'></div>"),o=jm("<div class='fk-dateInputMask'></div>"),n.insertAfter(e),n.append(e),n.append(o),o.on("click",function(){jm(t+"input").trigger("click"),jm(i+"input").trigger("click")})}function v(e){var t=!0,i=e.getDay(),o=e.getTime();return 0==l.od.t||(1==l.banAll&&(t=!1),0!=i&&6!=i||(t=1!=l.banHoliday),l.banSingleDateList&&l.banSingleDateList.length&&1==l.od.t&&jm.inArray(i,l.banSingleDateList)>-1&&(t=!1),1==l.od.t&&jm.inArray(o,l.od.unSelectDay)>-1&&(t=!1),1==l.od.t&&jm.inArray(o,l.od.openDay)>-1&&(t=!0),t)}m&&(i=jm(o+"input"),t=jm(r+"input"),jm("#Mobi"+e.moduleId+"CalendarInput"+e.siteFormItemId).insertBefore(i),g(t,o,r),g(i,o,r))},Mobi.resertForm=function(e,t,i){var o=jm(Mobi.getPreviewObject("module"+e));o.children("div.formBannerMore").remove(),o.children("div.formBannerTitle, div.formMiddle").remove().end().prepend(t)},Mobi.changeMobileCt=function(e,t){var i=jm(Mobi.getPreviewObject(e)),o=jm(Mobi.getPreviewObject(t));i.on("change",function(e){var t=e.target.value,n=i.find("option[value='"+t+"']").html();o.html(n.substring(n.indexOf("+")))})},Mobi.voidFun=function(){},Mobi.codeInsert=function(e,t){e=(e=Mobi.decodeHtml(e)).replace(/document.write/g,"Mobi.voidFun");var i=document.createElement("script");i.type="text/javascript";try{i.appendChild(document.createTextNode(e))}catch(t){i.text=e}if(1==t)document.body.appendChild(i);else if(2==t){(document.head||document.getElementsByTagName("head")[0]).appendChild(i)}},Mobi.decodeHtml=function(e){return e&&e.replace?e.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/g,">").replace(/&#92;/gi,"\\").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/\<br\/\>/gi,"\n").replace(/&amp;/gi,"&"):e},Mobi.storageReturnUrl=function(e){e.match(/login.jsp$/)||localStorage.setItem("returnUrl",jm.encodeUrl(e))},Mobi.loadReturnUrl=function(e){e=jm.decodeUrl(e);var t=localStorage.getItem("returnUrl");t=jm.decodeHtml(t),localStorage.removeItem("returnUrl");var i=!1;-1!=e.indexOf("?")&&(i=!0),document.location.href=t?i?e+"&returnUrl="+t:e+"?returnUrl="+t:i?e+"&noReturn=true":e+"?noReturn=true"},Mobi.mobileFastLoginToggle=function(){jm(".forAcctLogin").hide(),jm(".forFastLogin").show(),jm(".forFastLogin").css("display","inline-block")},Mobi.acctLoginToggle=function(){jm(".forAcctLogin").show(),jm(".forFastLogin").hide(),jm(".forAcctLogin").css("display","inline-block")},Mobi.loginAcquireCode=function(){var e=jm("#acquirerInput").val();return!(Mobi.isNull(e)||!e)&&(jm.isMobile(e)?void jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=sendMobileLoginCode",data:"memName="+jm.encodeUrl(e)+"&new=true",error:function(){Mobi.ing(LS.js_systemError)},success:function(e){(e=jm.parseJSON(e)).success?(Mobi.loginAcquireCodeCountdown(60),jm("#memCodeSign").val(e.mobileCodeSign)):e.argErr?Mobi.ing(LS.memberDialogSendMobileClose):e.apiKeyNotFound?Mobi.ing(LS.memberDialogYunPianErr):e.tplNotFound?Mobi.ing(LS.memberDialogMobileTplErr):e.notFound?Mobi.ing(LS.memberDialogNotFound):e.limitOne?Mobi.ing(LS.getMobileOneMin):e.limitTwo?Mobi.ing(LS.getMobileHalfHour):e.noMoney?Mobi.ing(LS.memberDialogMobileMoneyErr):e.mobileErr?Mobi.ing(LS.memberDialogSendMobileCodeErr):e.sendLimit?Mobi.ing(LS.memberDialogSendMobileCodeLimit):e.mobileSysErr?Mobi.ing(LS.memberDialogSendMobileSysErr):e.tplNationErr?Mobi.ing(LS.mobileNationTplErr):e.systemErr?Mobi.ing(LS.js_systemError):-301==e.rt?Mobi.ing(LS.smsRanout):Mobi.ing(LS.js_argsError)}}):(Mobi.ing(LS.mobileNumRegular),!1))},Mobi.loginAcquireCodeCountdown=function(e){jm("#acquireCode").attr("onclick","");var t=setInterval(function(){jm("#acquireCode").attr("onclick",""),jm("#acquireCode").text(jm.format(LS.reacquireMemCode,e)),e<0&&(clearInterval(t),jm("#acquireCode").text(LS.memberDialogAcquireCode),jm("#acquireCode").attr("onclick","Mobi.loginAcquireCode();return false;")),e--},1e3)},Mobi.fastLogin=function(url,mid,fid,fromMerchants){var acquirer=jm("#acquirerInput").val(),code=jm("#memCodeInput").val(),memCodeSign=jm("#memCodeSign").val();if(null!=mid&&null!=fid&&(jm.cookie("_moduleid",mid),jm.cookie("_fileid",fid)),null!=acquirer&&""!=acquirer)if(null!=code&&""!=code){var loginBtn=jm(".loginSubmit");loginBtn.attr("disabled",!0),jm(".g_botton").removeClass("sendIcon");var autoLoginBtn=jm("#autoLogin"),autoLogin=!1;autoLoginBtn&&autoLoginBtn.prop("checked")&&(autoLogin=!0);var bssKey="AP7hkeIECAEQARoEWzE4XSIJ5ZSQ5LiW5rCR",fastLoginAction=function fastLoginAction(checkSign){var data="memCode="+jm.encodeUrl(code)+"&memCodeSign="+jm.encodeUrl(memCodeSign)+"&acquirer="+jm.encodeUrl(acquirer)+"&mode="+jm.encodeUrl("mobile")+"&fromMerchants="+fromMerchants;jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=checkMobileCodeGeneral",data:data,error:function(){Mobi.ing(LS.js_systemError)},success:function success(result){var result=jm.parseJSON(result);if(result.success){var memId=result.memId,fastLoginDataStr="cmd=loginMemberByMobile&memId="+jm.encodeUrl(memId)+"&autoLogin="+jm.encodeUrl(autoLogin);checkSign&&(fastLoginDataStr+="&bssKey=".concat(bssKey,"&checkSign=").concat(checkSign)),jm.ajax({type:"post",url:"ajax/login_h.jsp",data:fastLoginDataStr,error:function(){loginBtn.removeAttr("disabled"),Mobi.showMemberLoginMsg(-1)},success:function success(result){loginBtn.removeAttr("disabled");var result=jm.parseJSON(result);if(result.success){if(Mobi.logMonitor(6060),jm("#_TOKEN").attr("value")||jm("#g_web").append("<span id='_TOKEN' value='"+result._TOKEN+"'></span>"),Mobi._needFLoginFaitest=!1,Mobi.mallBuyLoginCheck(),-1==url.indexOf("javascript"))return void(Fai.top.location.href=url);for(var methods=url.split(";"),i=0;i<methods.length-1;i++){var patt1=new RegExp("[^script:]");if(patt1.test(url)){var cells=methods[i].split(/:(.+)/),start=cells[1].indexOf("(")+1,end=cells[1].lastIndexOf(")"),plist=Array.prototype.slice.call(cells[1].substring(start,end).split(","));namespace=cells[1].substring(0,start-1),eval(cells[1]),-1!=url.indexOf("PhotoDetailSwipeForJumpCtrl")&&(window.klass.returnIndex=function(){Fai.top.location.href="/index.jsp"})}}}else{if(fromMerchants&&(-302===result.rt||-303===result.rt||-304===result.rt||-305===result.rt))return void(Fai.top.location.href="/merchantResult.jsp?loginFail=true&loginRt="+result.rt);jm(".g_botton").addClass("sendIcon"),jm(".loginIcon ").hide(),result.active?Mobi.ing(LS.memberLoginMailActivation):-2e3==result.rt?Fai.top.location.href="login.jsp?errno=-307":(Mobi.showMemberLoginMsg(result.rt,result.captcha),result.captcha&&(Mobi._needFLoginFaitest=!0,Mobi.fastLogin(url,mid,fid,fromMerchants)))}}})}else result.notFound?Mobi.ing(LS.memberDialogNotFound,!0):-2e3==result.rt?Fai.top.location.href="login.jsp?errno=-307":1==result.rt&&Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch)}})};Mobi._needFLoginFaitest?initFaitest({bss:1,bssKey:bssKey},function(e){fastLoginAction(e)}):fastLoginAction()}else Mobi.showMemberLoginMsg(5,!1);else Mobi.showMemberLoginMsg(4,!1)},Mobi.memberLogin1=function(e){Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(jm.getUrlRoot(Fai.top.location.href))+"&errno="+e},Mobi.checkHaveMultipleMember=function(e){jm("#user").on("blur",function(){t("#user")}),jm("#acquirerInput").on("blur",function(){t("#acquirerInput")});var t=function(t){if(3==e||4==e){var i=jm(t).val(),o=jm.isEmail(i),n=jm.isMobile(i),a=LS.mobiMultipleMemberMobileMsg;o&&(a=LS.mobiMultipleMemberEmailMsg),(o||n)&&jm.ajax({type:"post",url:"ajax/login_h.jsp",data:"cmd=checkHaveMultipleMember&authType="+e+"&acct="+i,error:function(){Mobi.showMemberLoginMsg(-1)},success:function(e){if((e=jm.parseJSON(e)).success&&e.isMultipleMember){var i={cancelClass:"acctlogin",textClass:"acctlogin",content:a,callback:function(){Mobi.acctLoginToggle(),jm(t).val("")}};Mobi.prompt(i)}}})}}},Mobi.memberLogin=function(url,mid,fid,fromMerchants){if(Mobi.logDog(200061,0),Fai.top.isJuly3FreeUser)return Mobi.logDog(200964,2),void Mobi.ing("免费版暂不支持此功能");var acct=jm("#user").val(),pwd=jm("#password").val();if(null!=mid&&null!=fid&&(jm.cookie("_moduleid",mid),jm.cookie("_fileid",fid)),null!=acct&&""!=acct)if(null!=pwd&&""!=pwd){pwd=jm.md5(pwd);var loginBtn=jm(".loginSubmit");loginBtn.attr("disabled",!0),jm(".g_botton").removeClass("sendIcon");var autoLoginBtn=jm("#autoLogin"),autoLogin=!1;autoLoginBtn&&autoLoginBtn.prop("checked")&&(autoLogin=!0);var bssKey="AKWWpqEHCAEQARoDWzFdIgnllJDkuJbmsJE",loginAction=function loginAction(checkSign){var dataStr="cmd=loginMember&acct="+jm.encodeUrl(acct)+"&pwd="+jm.encodeUrl(pwd)+"&autoLogin="+autoLogin+"&fromMerchants="+fromMerchants;checkSign&&(dataStr+="&bssKey=".concat(bssKey,"&checkSign=").concat(checkSign)),jm.ajax({type:"post",url:"ajax/login_h.jsp",data:dataStr,error:function(){loginBtn.removeAttr("disabled"),Mobi.showMemberLoginMsg(-1),Mobi.logMonitor(6063,!0)},success:function success(result){loginBtn.removeAttr("disabled"),result.msg&&delete result.msg;var result=jm.parseJSON(result);if(result.success){if(Mobi._needLoginFaitest=!1,Mobi.logMonitor(6059),jm("#_TOKEN").attr("value")||jm("#g_web").append("<span id='_TOKEN' value='"+result._TOKEN+"'></span>"),Mobi.mallBuyLoginCheck(),-1==url.indexOf("javascript"))return Fai.top.loginMemberSucJumpUrlIllegality&&(url="./index.jsp"),void(Fai.top.location.href=url);for(var methods=url.split(";"),i=0;i<methods.length-1;i++){var patt1=new RegExp("[^script:]");if(patt1.test(url)){var cells=methods[i].split(/:(.+)/),start=cells[1].indexOf("(")+1,end=cells[1].lastIndexOf(")"),plist=Array.prototype.slice.call(cells[1].substring(start,end).split(","));namespace=cells[1].substring(0,start-1),eval(cells[1]),-1!=url.indexOf("PhotoDetailSwipeForJumpCtrl")&&(window.klass.returnIndex=function(){Fai.top.location.href="/index.jsp"})}}}else{if(fromMerchants&&(-302===result.rt||-303===result.rt||-304===result.rt||-305===result.rt||-2004===result.rt))return void(Fai.top.location.href="/merchantResult.jsp?loginFail=true&loginRt="+result.rt);jm(".g_botton").addClass("sendIcon"),jm(".loginIcon ").hide(),result.active?(Mobi.ing(LS.memberLoginMailActivation),Mobi.logMonitor(6062,!0)):-2e3==result.rt?(Fai.top.location.href="login.jsp?errno=-307",Mobi.logMonitor(6062,!0)):(Mobi.logMonitor(6063,!0),Mobi.showMemberLoginMsg(result.rt,result.captcha),result.captcha&&(Mobi._needLoginFaitest=!0,Mobi.memberLogin(url,mid,fid,fromMerchants)))}}})};Mobi._needLoginFaitest?initFaitest({bss:1,bssKey:bssKey},function(e){loginAction(e)}):loginAction()}else Mobi.showMemberLoginMsg(2,!1);else Mobi.showMemberLoginMsg(1,!1)},Mobi.showMemberLoginMsg=function(e,t){var i="";1==e?(i=LS.memberInputAcct,Mobi.getPreviewObject("user").focus()):2==e?(i=LS.memberInputPwd,Mobi.getPreviewObject("password").focus()):i=3==e?LS.memberInputCaptcha:4==e?LS.memberDialogPlzEnterMobile:5==e?LS.memberDialogEnterCode:11==e?LS.memberLoginFirst:12==e?LS.memberLoginSignup:13==e?LS.memberLoginToView:14==e?LS.memberLoginNoPermission:-3==e?LS.memberPwdError:-301==e?LS.memberCaptchError:-302==e?LS.memberPwdError:-303==e?LS.memberNoAuth:-305==e?LS.memberPwdError:-307==e?LS.loginUseAcct:-308==e?LS.memberDialogGetCodeFirst:-2003==e?"已超过当天可登录次数（20次），请于明日再进行登录":-2004==e?"帐号/密码有误，请重新输入":LS.memberLoginError;var o=jm(".loginErrorLine");o.show(),Mobi.ing(i),setTimeout(function(){o.hide()},3e3)},Mobi.changeValidateCode=function(e,t){jm(e).attr("src","validateCode.jsp?"+1e3*Math.random()+"&validateCodeRegType="+t)},Mobi.onLogout=function(e){null==e&&(e="index.jsp"),jm.ajax({type:"post",url:"ajax/login_h.jsp?cmd=logoutMember",error:function(){},success:function(t){(t=jm.parseJSON(t)).success&&(location.href=e)}})},Mobi.initWBLogin=function(e,t,i,o,n,a,r){jm("#"+a).click(function(){jm.cookie("_wbLoginKey",r,{expires:1}),window.location.href="https://api.weibo.com/oauth2/authorize?client_id="+e+"&redirect_uri="+t+"/wbLogin.jsp&display=mobile&response_type=code"})},Mobi.wbWinListener=function(e,t,i,o,n,a,r){"string"==typeof e&&(e=jm.parseJSON(e));var s=Mobi.checkHasMobileOption(e),l=!1;if(e)for(var c=0;c<e.length;c++)if(e[c].otherLoginMust){l=!0;break}var d="loginType=2&openId="+encodeURIComponent(o);l||(d+="&avator="+encodeURIComponent(a)+"&name="+n),jm.ajax({type:"post",url:"ajax/login_h.jsp?cmd=otherLoginMember&hasMobile="+s+"&otherLoginMust="+l,data:d,error:function(){Mobi.ing(LS.memberLoginError,!0)},success:function(t){if((t=jm.parseJSON(t)).success)return Mobi.logMonitor(6061),Mobi.mallBuyLoginCheck(),void(Fai.top.location.href="/login.jsp"==r?"/index.jsp":r);t.active?Mobi.memberActive(t.mail,t.memName):-3==t.rt?Mobi.memberOtherLoginFill(e,n,o,a,2,t.mobileCtNameList,t.signNeenMobile,r):-303==t.rt?Mobi.ing(LS.memberNoAuth,!0):Mobi.ing(LS.js_argsError,!0)}})},Mobi.initQQLogin=function(e,t,i,o,n,a,r){jm("#"+a).off("click").on("click",function(){jm.cookie("_qqLoginKey",r,{expires:1}),window.location.href="https://graph.qq.com/oauth2.0/authorize?client_id="+e+"&redirect_uri="+t+"/qqLogin.jsp&display=mobile&response_type=token&scope=all"})},Mobi.qqWinListener=function(optionList,noRemark,remarkMaxLen,q_uid,q_name,q_avator,url){"string"==typeof optionList&&(optionList=jm.parseJSON(optionList));var hasMobile=Mobi.checkHasMobileOption(optionList),otherLoginMust=!1;if(optionList)for(var i=0;i<optionList.length;i++)if(optionList[i].otherLoginMust){otherLoginMust=!0;break}var data="loginType=1&openId="+encodeURIComponent(q_uid);otherLoginMust||(data+="&avator="+encodeURIComponent(q_avator)+"&name="+q_name),jm.ajax({type:"post",url:"ajax/login_h.jsp?cmd=otherLoginMember&hasMobile="+hasMobile+"&otherLoginMust="+otherLoginMust,data:data,error:function(){Mobi.ing(LS.memberLoginError,!0)},success:function success(result){var result=jm.parseJSON(result);if(result.success){if(Mobi.logMonitor(6061),Mobi.mallBuyLoginCheck(),-1==url.indexOf("javascript"))return void(Fai.top.location.href="/login.jsp"==url?"/index.jsp":url);for(var methods=url.split(";"),i=0;i<methods.length-1;i++){var patt1=new RegExp("[^script:]");if(patt1.test(url)){var cells=methods[i].split(/:(.+)/),start=cells[1].indexOf("(")+1,end=cells[1].lastIndexOf(")"),plist=Array.prototype.slice.call(cells[1].substring(start,end).split(","));namespace=cells[1].substring(0,start-1),eval(cells[1]),-1!=url.indexOf("PhotoDetailSwipeForJumpCtrl")&&(window.klass.returnIndex=function(){Fai.top.location.href="/index.jsp"})}}}else result.active?Mobi.memberActive(result.mail,result.memName):-3==result.rt?Mobi.memberOtherLoginFill(optionList,q_name,q_uid,q_avator,1,result.mobileCtNameList,result.signNeenMobile,url):-303==result.rt?Mobi.ing(LS.memberNoAuth,!0):Mobi.ing(LS.js_argsError,!0)}})},Mobi.wxLogin=function(e,t,i,o,n,a,r,s,l,c,d,m,p){jm("#"+e).on("click",function(){if(jm("#"+e).off("click"),Mobi.logDog(200061,1),c)Mobi.ing("系统维护中",!0);else if("wxb98d3675b04fbc2f"==n&&Mobi.logDog(200314,t),s)Mobi.ing("请在手机预览实际效果",!0);else if(l)Mobi.ing("样板网站无法登录",!0);else{jm.cookie("_wxLoginKey",r,{expires:1});var o="/"+i+"/mobiWxLoginConfirm.jsp?returnUrl="+p+"&_key="+r;window.location.replace(o)}})},Mobi.wxOpenIdLogin=function(optionList,noRemark,remarkMaxLen,openId,nickName,headImg,url,faiOpenIdGreen,faiOpenId){"string"==typeof optionList&&(optionList=jm.parseJSON(optionList));var hasMobile=Mobi.checkHasMobileOption(optionList),otherLoginMust=!1;if(optionList)for(var i=0;i<optionList.length;i++)if(optionList[i].otherLoginMust){otherLoginMust=!0;break}var unionId="";void 0!==Mobi.w_unionId&&Mobi.w_unionId&&(unionId=Mobi.w_unionId);var data="true"==faiOpenIdGreen?"loginType=5&hasMobile="+hasMobile+"&otherLoginMust="+otherLoginMust+"&faiOpenIdGreen="+faiOpenIdGreen+"&faiOpenId="+encodeURIComponent(faiOpenId):"loginType=4&hasMobile="+hasMobile+"&otherLoginMust="+otherLoginMust+"&openId="+encodeURIComponent(openId)+"&faiOpenId="+encodeURIComponent(faiOpenId)+"&faiOpenIdGreen="+faiOpenIdGreen+"&unionId="+encodeURIComponent(unionId);otherLoginMust||(data+="&avator="+encodeURIComponent(headImg)+"&name="+encodeURIComponent(nickName)),jm.ajax({type:"post",url:"ajax/login_h.jsp?cmd=otherLoginMember",data:data,error:function(){Mobi.ing(LS.memberLoginError,!0)},success:function success(result){var result=jm.parseJSON(result);if(result.success){if(Mobi.logMonitor(6061),jm("head").append("<meta id='_TOKEN' value='"+result._TOKEN+"'>"),Mobi.mallBuyLoginCheck(),-1==url.indexOf("javascript"))return void(Fai.top.location.href="/login.jsp"==url?"/index.jsp":url);for(var methods=url.split(";"),i=0;i<methods.length-1;i++){var patt1=new RegExp("[^script:]");if(patt1.test(url)){var cells=methods[i].split(/:(.+)/),start=cells[1].indexOf("(")+1,end=cells[1].lastIndexOf(")"),plist=Array.prototype.slice.call(cells[1].substring(start,end).split(","));namespace=cells[1].substring(0,start-1),eval(cells[1]),-1!=url.indexOf("PhotoDetailSwipeForJumpCtrl")&&(window.klass.returnIndex=function(){Fai.top.location.href="/index.jsp"})}}}else result.active?Mobi.memberActive(result.mail,result.memName):-3==result.rt?void 0!==faiOpenId&&faiOpenId?Mobi.memberOtherLoginFill(optionList,nickName,openId,headImg,5,result.mobileCtNameList,result.signNeenMobile,url,faiOpenId):Mobi.memberOtherLoginFill(optionList,nickName,openId,headImg,4,result.mobileCtNameList,result.signNeenMobile,url):-303==result.rt?Fai.top.location.href="/login.jsp?errno=-303":Mobi.ing(LS.js_argsError,!0)}})},Mobi.memberOtherBindOrLogin=function(e,t,i,o,n,a,r,s,l,c){var d=[],m=Fai.top._openThemeV3?" g_main_bgColor_v3 fpw_btn ":"";d.push("<div style='height:7.38rem;'>"),d.push("<div class='avator loginAvatorCircle' style='background-image:url("+a+");'></div>"),d.push("<div class='userName' style='margin-top:0.5rem; text-align: center;'>"+n+"</div>"),d.push("</div>"),d.push("<div class='remarkCon'>"),d.push("<div class='remarkLine'></div>"),d.push("</div>"),d.push("<div class='signupSubmitCtrl g_globalLine' style='margin-top:0.6rem;'>"),d.push("<input type='button'  class='g_button sendIcon signupSubmit submitIcon "+m+"' onclick='Mobi.bindOtherAcctFirst(\""+r+'","'+o+'","'+l+'","'+c+"\");' value='"+LS.memberOtherLgnBindAcct+"'/>"),d.push("</div>"),d.push("<div class='signupSubmitCtrl g_globalLine' style='margin-top:0.78rem;'>"),"other_qq"==r?d.push("<input type='button'  class='g_button sendIcon signupSubmit submitIcon g_mainColor g_main_color_v3' style='background:rgb(240,240,245);border:1px solid;' onclick='Mobi.qqWinListener("+e+", "+t+","+i+',"'+o+'","'+n+'","'+a+'","'+s+"\");' value='"+LS.memberOtherLgnNow+"'/>"):"other_wb"==r?d.push("<input type='button'  class='g_button sendIcon signupSubmit submitIcon g_mainColor g_main_color_v3' style='background:rgb(240,240,245);border:1px solid;' onclick='Mobi.wbWinListener("+e+", "+t+","+i+',"'+o+'","'+n+'","'+a+'","'+s+"\");' value='"+LS.memberOtherLgnNow+"'/>"):"other_wx"==r&&d.push("<input type='button'  class='g_button sendIcon signupSubmit submitIcon g_mainColor g_main_color_v3' style='background:rgb(240,240,245);border:1px solid;' onclick='Mobi.wxOpenIdLogin("+e+", "+t+","+i+',"'+o+'","'+n+'","'+a+'","'+s+'","'+l+'","'+c+"\");' value='"+LS.memberOtherLgnNow+"'/>"),d.push("</div>"),jm("#bindOrLogin").parents(".g_web, .middleCenter").css("background","#f0f0f5"),Fai.top._openThemeV3&&jm("#bindOrLogin").parents(".g_web, .middleCenter").css("background","#ffffff"),jm("#bindOrLogin .loginContent").children().length||jm("#bindOrLogin .loginContent").append(d.join("")),jm("#mLogin").hide(),jm("#bindOrLogin").show(),jm("#bindOrLogin #bindOrLoginBack").click(function(){jm("#bindOrLogin").hide(),jm("#mLogin").show()})},Mobi.bindOtherAcctFirst=function(e,t,i,o){var n=Fai.top._openThemeV3?LS.memberOtherLgnBindNowV3:LS.memberOtherLgnBindNow;"other_qq"==e?e=1:"other_wb"==e?e=2:"other_wx"==e&&(e=4);var a=Fai.top._openThemeV3?"bindV3":"",r=Fai.top._openThemeV3?" g_main_bgColor_v3 fpw_btn ":"",s="<div class='g_globalLine "+a+"'>";s+="\t<input type='text' maxlength='50'  id='bindUser' class='itemEdit g_input mustItem' placeholder='"+LS.memberSignupRegisterAcctEmpty+"'/><span class='icon-userIcon g_mainColor g_main_color_v3'></span>",s+="</div>",s+="<div class='g_globalLine "+a+"'>",s+="\t<input type='password'maxlength='20' id='bindPassword' class='itemEdit g_input  mustItem' placeholder='"+LS.memberDialogPleaseEnterPwd+"'/><span class='icon-pswIcon g_mainColor g_main_color_v3'></span>",s+="</div>",s+="<div class='g_globalLine "+a+"'>",s+="<input type='button'  class=' g_button "+r+" sendIcon' onclick='Mobi.bindOtherAcctFirstSubmit("+e+',"'+t+'","'+i+'","'+o+"\")' value='"+n+"'/>",s+="</div>",jm("#bindNow .loginContent").children().length||jm("#bindNow .loginContent").append(s),jm("#bindOrLogin").hide(),jm("#bindNow").show(),jm("#bindNow #bindNowBack").click(function(){jm("#bindNow").hide(),jm("#bindOrLogin").show()})},Mobi.memberOtherLoginFill=function(e,t,i,o,n,a,r,s,l){var c=Fai.top._openThemeV3?"otherLoginFillPicV3":"otherLoginFillPic",d=Fai.top._openThemeV3?"otherLoginFillUserV3":"otherLoginFillUser",m=Fai.top._openThemeV3?LS.mobileArea:LS.mobileAreaCode,p=Fai.top._openThemeV3?" register_line ":" ",u=Fai.top._openThemeV3?" input_tip_v3 ":" ",h=[];h.push("<div class='"+c+"'>"),1==n||4==n?h.push("<div class='avator loginTypeAvator' style='background-image:url("+o+");'></div>"):h.push("<div class='avator otherLoginTypeAvator' style='background-image:url("+o+");'></div>"),h.push("<div class='userName "+d+"'>"+t+"</div>"),h.push("</div>"),h.push("<div class='remarkCon'>"),h.push("<div class='remarkLine'></div>"),h.push("<div class='remarkInfo'>"+LS.memberOtherLgnLastStep+"</div>"),h.push("</div>");var f="";Mobi.checkHasMobileOption(e)&&(f="tagWidth8");var g="";jm.each(e,function(e,t){var i="";if(t.otherLoginMust){"email"==t.fieldKey?g="icon-emailIcon g_mainColor g_main_color_v3":"name"==t.fieldKey?g="icon-nameIcon g_mainColor g_main_color_v3":(g="icon-customIcon g_mainColor g_main_color_v3",i="customIcon");var o="";if(o=t.placeholder==t.name?LS.memberOtherLgnPleaseInput+t.name:t.placeholder,"mobile"==t.fieldKey){h.push("<div class='g_globalLine "+p+" "+f+"'>"),Fai.top._openThemeV3&&(t.must?h.push("<input type='text' maxlength='50' id='mobile' name='"+m+"' style='width:65%' class='addCtTel itemEdit userAddItem g_input maxlength='11' loginTelInput ' placeholder='"+o+LS.memberOtherLgnMust+"'>"):h.push("<input type='text' maxlength='50' id='mobile' name='"+m+"' style='width:65%' class='addCtTel itemEdit userAddItem g_input maxlength='11' loginTelInput ' placeholder='"+o+"'>")),Fai.top._openThemeV3?(h.push("<div class='mobileCtIcon otherSettingIcon icon-downward'></div>"),h.push("<div class='g_input selectCover selectCoverRight'>+86</div>"),h.push("<select id='mobileCt' name='mobileCt' class='itemEdit userAddItem g_select ' onchange='Mobi.fillPersInfoChangeMobileCt()'>")):h.push("<select id='mobileCt' name='mobileCt' class='itemEdit g_select'>");for(var n=0;n<a.length;n++)h.push("<option value='"+a[n].ctName+"'>"+a[n].ctShowName+a[n].ctCode+"</option>");h.push("</select>"),h.push("<span class='"+i+"'>"+m+"</span>"),h.push("</div>")}if(t.dropDownType){h.push("<div class='g_globalLine "+f+"'>"),Fai.top._openThemeV3&&(h.push("<div class='mobileCtIcon otherSettingIcon icon-downward'></div>"),h.push("<input class='g_input selectCover'>")),t.must?(h.push("<select id='"+t.fieldKey+"' name='"+t.name+"' class='itemEdit userAddItem isCheckUAI g_select' placeholder='"+o+LS.memberOtherLgnMust+"'>"),h.push("<option value=''>"+t.name+LS.memberOtherLgnMust+"</option>")):(h.push("<select id='"+t.fieldKey+"' name='"+t.name+"' class='itemEdit userAddItem g_select' placeholder='"+o+"'>"),h.push("<option value=''>"+t.name+"</option>"));var r=t.dropDownContent.split("&");for(e=0;e<r.length;e++)h.push("<option value='"+r[e]+"'>"+r[e]+"</option>");h.push("</select><span class='"+g+" "+u+"'></span>"),""!=i&&h.push("<span class='"+i+"'>"+t.name+"</span>"),h.push("</div>")}else(!Fai.top._openThemeV3||Fai.top._openThemeV3&&"mobile"!=t.fieldKey)&&(h.push("<div class='g_globalLine "+f+"'>"),t.must?h.push("<input type='text' maxlength='50' id='"+t.fieldKey+"' name='"+t.name+"' class='mustItem isCheckUAI itemEdit userAddItem  g_input' maxlength='50' placeholder='"+o+LS.memberOtherLgnMust+"'><span class='"+g+" "+u+"'></span>"):h.push("<input type='text' maxlength='50' id='"+t.fieldKey+"' name='"+t.name+"' class='mustItem itemEdit userAddItem  g_input' maxlength='50' placeholder='"+o+"'><span class='"+g+" "+u+"'></span>"),""!=i&&h.push("<span class='"+i+"'>"+t.name+"</span>"),h.push("</div>"))}}),r&&(h.push("<div class='g_globalLine'>"),h.push("<input id='memberSignupCaptcha' type='text' class='captchaText g_input' maxlength='4' placeholder='"+LS.EnterVerificationCode+"'/><img id='signupCaptchaImg'  class='captchaImg' src='validateCode.jsp?"+1e3*Math.random()+"' onclick='Mobi.changeValidateCode(jm(\"#signupCaptchaImg\"))' /><div style='clear:both'></div>"),Fai.top._openThemeV3&&h.push("<span class='fill_input_tip_v3'>"+LS.loginCode+"</span>"),h.push("</div>"),h.push("<div class='g_globalLine'>"),h.push("<input id='messageAuthCode' type='text' class='captchaText g_input' maxlength='6' placeholder='"+LS.inputMobileCode+"' /><div id='messageAuthCodeClick' onclick='Mobi.getSignMobileCode()' class='fk-sign-getMobileCode' title='"+LS.getMobileCode+"'>"+LS.getMobileCode+"</div><div style='clear:both'></div>"),Fai.top._openThemeV3&&h.push("<span class='fill_input_tip_v3'>"+LS.loginCode+"</span>"),h.push("</div>")),h.push("<div class='signupSubmitCtrl g_globalLine "+f+"' style='margin-top:1rem;'>"),h.push("<input type='button'  class='g_button sendIcon signupSubmit submitIcon fpw_btn g_main_bgColor_v3' onclick='Mobi.memberOtherLoginSubmit(\""+jm.encodeHtml(t)+'", '+n+', "'+i+'", "'+s+'", "'+o+'", "'+l+"\")' value='"+LS.login+"'/>"),h.push("</div>"),jm("#fillAcctInfo").parents(".g_web, .middleCenter").css("background","#f0f0f5"),jm("#fillAcctInfo .loginContent").children().length||jm("#fillAcctInfo .loginContent").append(h.join("")),jm("#mLogin").hide(),jm("#bindOrLogin").hide(),jm("#fillAcctInfo").show(),jm("#fillAcctInfo #fillInfoBack").click(function(){jm("#fillAcctInfo").hide(),jm("#mLogin").show()}),Fai.top._openThemeV3&&(jm(".jz_themeV3.mobiCol10 .g_web").css("background-color","#ffffff"),jm(".jz_themeV3.mobiCol10 .middleCenter").css("background-color","#ffffff"),Mobi.selectValueChange("#fillAcctInfo"))},Mobi.memberOtherLoginAdd=function(e,t,i,o,n,a,r,s,l,c){var d=[],m=Fai.top._openThemeV3?LS.memberOtherLgnBindNowV3:LS.memberOtherLgnBindNow;d.push("<div style='height:5rem;'>"),1==r||4==r?d.push("<div class='avator' style='height:2.5rem;width:2.5rem;margin-top:1rem;margin-left:6.2rem;border-radius:50%;background:url("+i+");background-size:2.5rem;'></div>"):d.push("<div class='avator' style='height:1.2rem;width:1.2rem;margin-top:1rem;margin-left:6.6rem;border-radius:50%;background:url("+i+");background-size:1.2rem;'></div>"),d.push("<div class='userName' style='margin-top:0.5rem;'>"+e+"</div>"),d.push("</div>"),d.push("<div class='desc' style='height:3rem;font-size:0.6rem;color:#666;'>"),1==r?d.push("<div class='firstLine' style='width:4.5rem;'>"+LS.memberOtherLgnQQUser+":</div>"):2==r?d.push("<div class='firstLine' style='width:5.8rem;'>"+LS.memberOtherLgnWBUser+":</div>"):d.push("<div class='firstLine' style='width:5rem;'>"+LS.memberOtherLgnWXUser+":</div>"),d.push("<div class='secondLine' style='width:13rem;margin-top:0.5rem;'>"+LS.memberOtherLgnBindAcctMsg+"</div>"),d.push("</div>"),d.push("<div class='choose' style='font-size:0.6rem;color:#999;height:7rem;'>"),d.push("<div class='haveMember' style='width:3rem;'>"+LS.memberOtherLgnHaveAcct+"</div>"),d.push("<div class='bindNow g_button sendIcon' style='margin-bottom:1rem;' onclick='Mobi.bindNow("+r+', "'+t+'", "'+c+"\");'>"+m+"</div>"),d.push("<div class='noMember' style='width:3rem;'>"+LS.memberOtherLgnNotAcct+"</div>"),d.push("<div class='signUp g_button sendIcon' id='signUp' >"+LS.memberOtherLgnSignUp+"</div>"),d.push("</div>"),jm("#bindAcct .loginContent").children().length||jm("#bindAcct .loginContent").append(d.join("")),jm("#mLogin").hide(),jm("#bindAcct").show(),jm("#bindAcct #bindBack").click(function(){jm("#bindAcct").hide(),jm("#mLogin").show()}),jm("#signUp").click(function(){Mobi.signUp(o,n,a,r,t,i,s,l,c)})},Mobi.bindOtherAcct=function(e,t,i,o,n,a){var r=Fai.top._openThemeV3?" g_main_bgColor_v3 fpw_btn ":"",s=Fai.top._openThemeV3?LS.memberOtherLgnBindNowV3:LS.memberOtherLgnBindNow;jm("#changeOtherLoginAcct").click(function(){Mobi.logDog(200199,4);var l=Fai.top._openThemeV3?"profile_v3_msg_icon":"",c=jm.cookie("isOtherLogin"),d="<div class='g_globalLine'>";d+="\t<input type='text' maxlength='50'  id='bindUser' class='itemEdit g_input mustItem ' placeholder='"+LS.memberSignupRegisterAcctEmpty+"'/><span class='icon-userIcon g_mainColor g_main_color_v3 "+l+"'></span>",d+="</div>",d+="<div class='g_globalLine'>",d+="\t<input type='password'maxlength='20' id='bindPassword' class='itemEdit g_input  mustItem '  placeholder='"+LS.memberDialogPleaseEnterPwd+"'/><span class='icon-pswIcon g_mainColor g_main_color_v3 "+l+"'></span>",d+="</div>",d+="<div class='g_globalLine'>",d+="<input type='button'  class=' g_button sendIcon "+r+"' onclick='Mobi.bindOtherAcctSubmit("+e+", true, "+c+")' value='"+s+"'/>",d+="</div>",Fai.top._openThemeV3?d+="<div id='signUp' class='g_globalLine' style='text-align:center; margin-top:0.75rem; color:#666666; font-size:0.55rem;'>"+LS.memberSignUpNewAcct+"</div>":d+="<div id='signUp' class='g_globalLine' style='text-align:right; margin-top:0.4rem;'>"+LS.memberSignUpNewAcct+"</div>",jm("#bindOtherAcct .loginContent").children().length||jm("#bindOtherAcct .loginContent").append(d),jm("#profile").hide(),jm("#bindOtherAcct").show(),jm("#bindOtherAcct #bindAcctBack").click(function(){jm("#bindOtherAcct").hide(),jm("#profile").show()}),jm("#signUp").click(function(){Mobi.logDog(200199,6),Mobi.signUp(e,t,i,o,c,n,a)})})},Mobi.signUp=function(e,t,i,o,n,a,r){var s=[],l="";t=jm.parseJSON(t),a=jm.parseJSON(a);var c=Fai.top._openThemeV3?" input_plceholder_v3 ":" ",d=Fai.top._openThemeV3?" input_tip_v3 ":" ",m=Fai.top._openThemeV3?LS.mobileArea:LS.mobileAreaCode,p=Fai.top._openThemeV3?" register_line ":" ";Mobi.checkHasMobileOption(t)&&(l="tagWidth8");var u="";s.push("<div class='g_globalLine "+l+"'>"),s.push("<input type='text' maxlength='50' id='memberSignupAcct' class='mustItem itemEdit userAddItem g_input "+c+"' placeholder='"+LS.memberSignupRegisterAcctEmpty+LS.memberOtherLgnMust+"'><span class='icon-userIcon g_mainColor g_main_color_v3 input_tip_v3'></span>"),s.push("</div>"),s.push("<div class='g_globalLine "+l+"'>"),s.push("<input type='password'  maxlength='20' id='memberSignupPwd' class='mustItem itemEdit icon-pswIcon userAddItem g_input "+c+"' placeholder='"+LS.memberDialogPleaseEnterPwd+LS.memberOtherLgnMust+"'><span class='icon-pswIcon g_mainColor g_main_color_v3 input_tip_v3'></span>"),s.push("</div>"),s.push("<div class='g_globalLine "+l+"'>"),s.push("<input type='password'  maxlength='20' id='memberSignupRepwd' class='mustItem itemEdit icon-pswIcon userAddItem g_input "+c+"' placeholder='"+LS.memberDialogPleaseEnterPwd2+LS.memberOtherLgnMust+"'><span class='icon-pswIcon g_mainColor g_main_color_v3 input_tip_v3'></span>"),s.push("</div>"),jm.each(t,function(e,t){var i="";"email"==t.fieldKey?u="icon-emailIcon g_mainColor g_main_color_v3":"name"==t.fieldKey?u="icon-nameIcon g_mainColor g_main_color_v3":(u="icon-customIcon g_mainColor g_main_color_v3",i="customIcon");var o="";if(o=t.placeholder==t.name?LS.memberOtherLgnPleaseInput+t.name:t.placeholder,"mobile"==t.fieldKey){s.push("<div class='g_globalLine "+l+" "+p+"'>"),Fai.top._openThemeV3?(s.push("<input type='text' maxlength='50' id='mobile' name='"+LS.mobileArea+"' style='width:65%' class='addCtTel mustItem itemEdit userAddItem isCheckUAI g_input maxlength='11' loginTelInput ' placeholder='"+LS.memberOtherLgnPleaseInput+LS.mobileArea+LS.memberOtherLgnMust+"'>"),s.push("<div class='mobileCtIcon otherSettingIcon icon-downward'></div>"),s.push("<div class='g_input selectCover selectCoverRight'>+86</div>"),s.push("<select id='mobileCt' name='mobileCt' class='itemEdit g_select' onchange='Mobi.mSignUpPersInfoChangeMobileCt()'>")):s.push("<select id='mobileCt' name='mobileCt' class='itemEdit g_select'>");for(var n=0;n<a.length;n++)s.push("<option value='"+a[n].ctName+"'>"+a[n].ctShowName+a[n].ctCode+"</option>");s.push("</select>"),(!Fai.top._openThemeV3&&2!=Fai.top._other.templateInfo.templateDesignType||Fai.top._openThemeV3)&&s.push("<span class='"+i+"'>"+m+"</span>"),s.push("</div>")}if(!Fai.top._openThemeV3||Fai.top._openThemeV3&&"mobile"!=t.fieldKey){s.push("<div class='g_globalLine "+l+"'>");var r=o,h="";if(t.must&&(h="mustItem isCheckUAI ",r=o+LS.memberOtherLgnMust),0==t.pt)s.push("<input type='text' maxlength='50' id='"+t.fieldKey+"' name='"+t.name+"' class='"+h+" itemEdit userAddItem  g_input "+c+"' maxlength='50' placeholder='"+r+"'>");else{Fai.top._openThemeV3&&(s.push("<div class='mobileCtIcon otherSettingIcon icon-downward'></div>"),s.push("<input class='g_input selectCover'>"));var f=t.name;t.must&&(f=t.name+LS.memberOtherLgnMust),s.push("<select id='"+t.fieldKey+"' name='"+t.name+"' class='"+h+" itemEdit userAddItem g_select' placeholder='"+r+"'>"),s.push("<option value=''>"+f+"</option>");for(e=0;e<t.pc.length;e++)s.push("<option value='"+t.pc[e]+"'>"+t.pc[e]+"</option>");s.push("</select>")}(!Fai.top._openThemeV3&&2!=Fai.top._other.templateInfo.templateDesignType||Fai.top._openThemeV3)&&s.push("<span class='"+u+" "+d+"'></span>"),(!Fai.top._openThemeV3&&2!=Fai.top._other.templateInfo.templateDesignType||Fai.top._openThemeV3)&&""!=i&&s.push("<span class='"+i+"'>"+t.name+"</span>"),s.push("</div>")}}),i&&(s.push("<div class='g_globalLine "+l+"'>"),s.push("<input type='text' class='itemEdit g_input userAddItem "+c+"' id='memberSignupRemark' maxlength='200' placeholder='"+LS.memberOtherLgnRemark+"'>"),Fai.top._openThemeV3||2==Fai.top._other.templateInfo.templateDesignType?Fai.top._openThemeV3&&s.push("<span class='icon-msgIcon g_mainColor g_main_color_v3 input_tip_v3'>"+LS.msgBoardSaidV3+"</span>"):s.push("<span class='icon-msgIcon g_mainColor g_main_color_v3 input_tip_v3'></span>"),s.push("</div>")),r&&(s.push("<div class='g_globalLine '>"),s.push("<input id='memberSignupCaptcha' type='text' class='captchaText g_input "+c+"' maxlength='4' placeholder='"+LS.EnterVerificationCode+"'/><img id='signupCaptchaImg'  class='captchaImg' src='validateCode.jsp?"+1e3*Math.random()+"' onclick='Mobi.changeValidateCode(jm(\"#signupCaptchaImg\"))' /><span class='icon-signupCaptchaIcon g_mainColor g_main_color_v3 input_tip_v3'></span><div style='clear:both'></div>"),s.push("</div>"),s.push("<div class='g_globalLine '>"),s.push("<input id='messageAuthCode' type='text' class='captchaText g_input "+c+"' maxlength='6' placeholder='"+LS.inputMobileCode+"' /><span class='icon-signupMobileCaptchaIcon g_mainColor g_main_color_v3 input_tip_v3'></span><div id='messageAuthCodeClick' onclick='Mobi.getSignMobileCode()' class='fk-sign-getMobileCode' title='"+LS.getMobileCode+"'>"+LS.getMobileCode+"</div><div style='clear:both'></div>"),s.push("</div>")),1==n?s.push("<div style='margin-top:0.5rem;font-size:0.6rem;color:#999;width:12rem;'>"+LS.signByQQCanLogin+"</div>"):2==n?s.push("<div style='margin-top:0.5rem;font-size:0.6rem;color:#999;width:13.5rem;'>"+LS.signByWbCanLogin+"</div>"):s.push("<div style='margin-top:0.5rem;font-size:0.6rem;color:#999;width:13.5rem;'>"+LS.signByWXCanLogin+"</div>"),s.push("<div class='signupSubmitCtrl g_globalLine "+l+"'>"),s.push("<input type='button'  class='g_button g_main_bgColor_v3  sendIcon signupSubmit submitIcon fpw_btn' onclick='Mobi.bindOtherAcctSubmit("+e+", false, "+n+");' value='"+LS.memberOtherLgnSignUp+"'/>"),s.push("</div>"),jm("#mSignUp .loginContent").children().length||(Fai.top._openThemeV3&&(jm("#mSignUp .loginContent").addClass("bindSignUpV3Line"),jm("#mSignUp .loginContent input").addClass("input_tip_v3, input_plceholder_v3")),jm("#mSignUp .loginContent").append(s.join(""))),jm("#mSignUp").show(),jm("#bindOtherAcct").hide(),jm("#mSignUp #signUpBack").click(function(){jm("#mSignUp").hide(),jm("#bindOtherAcct").show()}),Fai.top._openThemeV3&&Mobi.selectValueChange("#mSignUp")},Mobi.checkHasMobileOption=function(e){var t=!1;if(e)for(var i=0;i<e.length;i++)if("mobile"==e[i].fieldKey&&e[i].otherLoginMust){t=!0;break}return t},Mobi.bindOtherAcctFirstSubmit=function(e,t,i,o){return info={},data="",acct=jm("#bindUser").val(),pwd=jm("#bindPassword").val(),null==acct||""==acct?(Mobi.ing(LS.memberSignupRegisterAcctEmpty),void Mobi.getPreviewObject("bindUser").focus()):null==pwd||""==pwd?(Mobi.ing(LS.memberSignupRegisterPwdEmpty),void Mobi.getPreviewObject("bindPassword").focus()):(pwd=jm.md5(pwd),info.acct=acct,info.pwd=pwd,"true"==o?(data+="&loginType=5&uid="+jm.encodeUrl(t)+"&faiOpenId="+jm.encodeUrl(o),void 0!==Mobi.w_unionId&&Mobi.w_unionId&&""!=Mobi.w_unionId&&(data+="&unionId="+jm.encodeUrl(Mobi.w_unionId))):(data+="&loginType=4&uid="+jm.encodeUrl(t),void 0!==o&&o&&(data+="&faiOpenId="+jm.encodeUrl(o)),void 0!==Mobi.w_unionId&&Mobi.w_unionId&&""!=Mobi.w_unionId&&(data+="&unionId="+jm.encodeUrl(Mobi.w_unionId))),void jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=bindOtherAcctFirst",data:"info="+jm.encodeUrl(jm.toJSON(info))+data,error:function(){Mobi.ing(LS.memberSignupRegisterError)},success:function(e){var t=jm.parseJSON(e);t.success?t.fromBind?Mobi.memberActive(t.mail,t.memName):t.active?Mobi.memberActive(info.email,info.acct):document.location.reload():-401==t.rt?Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch):-601==t.rt?Mobi.ing(LS.reGetMobileCode):-8==t.rt?Mobi.ing(LS.mobileHasSigned):-6==t.rt?Mobi.ing(LS.memberSignupRegisterExisted):-4==t.rt?Mobi.ing(LS.memberSignupRegisterLimit):-3==t.rt?"密码不正确"==t.msg?Mobi.ing(LS.memberPwdError):Mobi.ing(LS.memberDialogNotFound):t.rt==Mobi.otherLoginErrno.acctAlreadyBind?Mobi.ing(LS.memberOtherLgnAcctAlreadyBind):Mobi.ing(LS.memberSignupRegisterError)}}))},Mobi.bindOtherAcctSubmit=function(e,t,i){var o="",n={};if(t){Mobi.logDog(200199,5),o="cmd=bindOtherAcct";var a=jm("#bindUser").val(),r=jm("#bindPassword").val();if(null==a||""==a)return Mobi.ing(LS.memberSignupRegisterAcctEmpty),void Mobi.getPreviewObject("bindUser").focus();if(null==r||""==r)return Mobi.ing(LS.memberSignupRegisterPwdEmpty),void Mobi.getPreviewObject("bindPassword").focus();r=jm.md5(r),n.acct=a,n.pwd=r}else{if(o="cmd=signUpAndBind",null==(a=jm("#memberSignupAcct").val())||""==a)return Mobi.ing(LS.memberSignupRegisterAcctEmpty),void Mobi.getPreviewObject("memberSignupAcct").focus();if(null==(r=jm("#memberSignupPwd").val())||""==r)return Mobi.ing(LS.memberSignupRegisterPwdEmpty),void Mobi.getPreviewObject("memberSignupPwd").focus();if(r.length<4)return Mobi.ing(LS.memberSignupRegisterPwdMinLength),void Mobi.getPreviewObject("memberSignupPwd").focus();if(r!=jm("#memberSignupRepwd").val())return Mobi.ing(LS.memberSignupRegisterPwdNotMatch),void Mobi.getPreviewObject("memberSignupRepwd").focus();var s="";if(jm("#memberSignupRemark").length>0){s=jm("#memberSignupRemark").val();var l=jm("#memberSignupRemark").attr("maxlength");if(s.length>l)return Mobi.ing(jm.format(LS.memberSignupRegisterRemarkMaxLength,l)),void Mobi.getPreviewObject("memberSignupRemark").focus()}n.acct=a,n.pwd=jm.md5(r),n.remark=s;var c="",d="",m=0,p="",u=0;if(jm("#mSignUp .userAddItem").each(function(){if(userAddItemID=jm(this).attr("id"),d=jm(this).val(),c=jm(this).attr("name"),p=jm(this).attr("maxlength"),n[userAddItemID]=d,void 0!==p&&null!=p&&d.length>p)return Mobi.ing(jm.format(LS.memberSignupUserAddItemMaxLength,c,p)),Mobi.getPreviewObject(userAddItemID).focus(),m=1,!1;if("email"==userAddItemID&&d.length>0&&!jm.isEmail(d))return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,c)),Mobi.getPreviewObject(userAddItemID).focus(),u=1,!1;if("mobile"==userAddItemID&&d.length>0){if(!jm.isNationMobile(d))return Mobi.ing(LS.mobileNumRegular),Mobi.getPreviewObject(userAddItemID).focus(),u=1,!1;n.mobileCt=jm("#mobileCt").val()}}),1==u)return;if(1==m)return;if(void 0!==jm("#messageAuthCode").attr("maxlength")&&null!=jm("#messageAuthCode").attr("maxlength")){var h=jm("#memberSignupCaptcha").val();if(void 0===h||null==h||""==h)return Mobi.ing(LS.memberInputCaptcha),!1;var f=jm("#messageAuthCode").val();if(void 0===f||null==f||""==f)return Mobi.ing(LS.inputMobileCode),!1;n.messageAuthCode=f}var g=0;if(jm(".isCheckUAI").each(function(){return userAddItemID=jm(this).attr("id"),d=jm(this).val(),c=jm(this).attr("name"),null==d||""==d?(jm(this).is("input")?Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty,c)):Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty2,c)),Mobi.getPreviewObject(userAddItemID).focus(),g=1,!1):"email"==userAddItemID&&d.length>0&&!jm.isEmail(d)?(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,c)),Mobi.getPreviewObject(userAddItemID).focus(),g=1,!1):void 0}),1==g)return}jm.ajax({type:"post",url:"ajax/member_h.jsp?"+o,data:"info="+jm.encodeUrl(jm.toJSON(n))+"&mid="+e+"&loginType="+i,error:function(){Mobi.ing(LS.memberSignupRegisterError)},success:function(e){var t=jm.parseJSON(e);t.success?t.fromBind?Mobi.memberActive(t.mail,t.memName):t.active?Mobi.memberActive(n.email,n.acct):document.location.reload():"该帐号已绑定到其他帐号"==t.msg?Mobi.ing(LS.hasBindOtherAcct):-401==t.rt?Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch):-601==t.rt?Mobi.ing(LS.reGetMobileCode):-8==t.rt?Mobi.ing(LS.mobileHasSigned):-6==t.rt?Mobi.ing(LS.memberSignupRegisterExisted):-4==t.rt?Mobi.ing(LS.memberSignupRegisterLimit):-3==t.rt?Mobi.ing(LS.memberDialogNotFound):t.rt==Mobi.otherLoginErrno.acctAlreadyBind?Mobi.ing(LS.memberOtherLgnAcctAlreadyBind):Mobi.ing(LS.memberSignupRegisterError)}})},Mobi.memberOtherLoginSubmit=function(name,loginType,openId,url,avator,faiOpenId){var cmd="cmd=otherAdd",info={};info.headImgUrl=avator,info.name=name;var userAddItemName="",userAddItemId="",userAddItemValue="",isUserAddItemNameTooLong=0,userAddItemMaxLength="",isUserAddItemPass=0,userAddItemType="";if(jm("#fillAcctInfo .userAddItem").each(function(){if(userAddItemID=jm(this).attr("id"),userAddItemValue=jm(this).val(),userAddItemName=jm(this).attr("name"),userAddItemMaxLength=jm(this).attr("maxlength"),info[userAddItemID]=userAddItemValue,void 0!==userAddItemMaxLength&&null!=userAddItemMaxLength&&userAddItemValue.length>userAddItemMaxLength)return Mobi.ing(jm.format(LS.memberSignupUserAddItemMaxLength,userAddItemName,userAddItemMaxLength)),Mobi.getPreviewObject(userAddItemID).focus(),isUserAddItemNameTooLong=1,!1;if("email"==userAddItemID&&userAddItemValue.length>0&&!jm.isEmail(userAddItemValue))return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,userAddItemName)),Mobi.getPreviewObject(userAddItemID).focus(),isUserAddItemPass=1,!1;if("mobile"==userAddItemID&&userAddItemValue.length>0){if(!jm.isNationMobile(userAddItemValue))return Mobi.ing(LS.mobileNumRegular),Mobi.getPreviewObject(userAddItemID).focus(),isUserAddItemPass=1,!1;info.mobileCt=jm("#mobileCt").val()}}),1!=isUserAddItemPass&&1!=isUserAddItemNameTooLong){if(void 0!==jm("#messageAuthCode").attr("maxlength")&&null!=jm("#messageAuthCode").attr("maxlength")){var memberSignupCaptcha=jm("#memberSignupCaptcha").val();if(void 0===memberSignupCaptcha||null==memberSignupCaptcha||""==memberSignupCaptcha)return Mobi.ing(LS.memberInputCaptcha),!1;var messageAuthCode=jm("#messageAuthCode").val();if(void 0===messageAuthCode||null==messageAuthCode||""==messageAuthCode)return Mobi.ing(LS.inputMobileCode),!1;info.messageAuthCode=messageAuthCode}var isCheckUAIStatus=0;if(jm(".isCheckUAI").each(function(){return userAddItemID=jm(this).attr("id"),userAddItemValue=jm(this).val(),userAddItemName=jm(this).attr("name"),null==userAddItemValue||""==userAddItemValue?(jm(this).is("input")?Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty,userAddItemName)):Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty2,userAddItemName)),Mobi.getPreviewObject(userAddItemID).focus(),isCheckUAIStatus=1,!1):"email"==userAddItemID&&userAddItemValue.length>0&&!jm.isEmail(userAddItemValue)?(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,userAddItemName)),Mobi.getPreviewObject(userAddItemID).focus(),isCheckUAIStatus=1,!1):void 0}),1!=isCheckUAIStatus){var unionId="";void 0!==Mobi.w_unionId&&Mobi.w_unionId&&(unionId=Mobi.w_unionId),jm.ajax({type:"post",url:"ajax/member_h.jsp?"+cmd,data:"info="+jm.encodeUrl(jm.toJSON(info))+"&loginType="+loginType+"&faiOpenId="+encodeURIComponent(faiOpenId)+"&openId="+encodeURIComponent(openId)+"&unionId="+encodeURIComponent(unionId),error:function(){Mobi.ing(LS.memberSignupRegisterError)},success:function success(result){var data=jm.parseJSON(result);if(data.success)if(Mobi.mallBuyLoginCheck(),0==data.rt)Fai.top.location.href="/login.jsp?errno=-303";else if(data.fromBind)Mobi.memberActive(data.mail,data.memName);else if(data.active)Mobi.memberActive(info.email,data.acct);else{if(-1==url.indexOf("javascript"))return void(Fai.top.location.href=url);for(var methods=url.split(";"),i=0;i<methods.length-1;i++){var patt1=new RegExp("[^script:]");if(patt1.test(url)){var cells=methods[i].split(/:(.+)/),start=cells[1].indexOf("(")+1,end=cells[1].lastIndexOf(")"),plist=Array.prototype.slice.call(cells[1].substring(start,end).split(","));namespace=cells[1].substring(0,start-1),eval(cells[1]),-1!=url.indexOf("PhotoDetailSwipeForJumpCtrl")&&(window.klass.returnIndex=function(){Fai.top.location.href="/index.jsp"})}}}else Mobi.changeValidateCode(jm("#signupCaptchaImg")),jm("#memberSignupCaptcha").val(""),-401==data.rt?Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch):-601==data.rt?Mobi.ing(LS.reGetMobileCode):-8==data.rt?Mobi.ing(LS.mobileHasSigned):-6==data.rt?Mobi.ing(LS.memberSignupRegisterExisted):-4==data.rt?Mobi.ing(LS.memberSignupRegisterLimit):-3==data.rt?Mobi.ing(LS.memberDialogNotFound):data.rt==Mobi.otherLoginErrno.acctAlreadyBind?Mobi.ing(LS.memberOtherLgnAcctAlreadyBind):Mobi.ing(LS.memberSignupRegisterError)}})}}},Mobi.otherLoginErrno={acctAlreadyBind:1},Mobi.memberSignupSubmit=function(e,t,i){if(!t&&!i){var o=jm("#memberSignupAcct").val().trim();if(null==o||""==o)return Mobi.ing(LS.memberSignupRegisterAcctEmpty),void Mobi.getPreviewObject("memberSignupAcct").focus()}var n=jm("#memberSignupPwd").val();if(null==n||""==n.trim())return Mobi.ing(LS.memberSignupRegisterPwdEmpty),void Mobi.getPreviewObject("memberSignupPwd").focus();if(n.length<4)return Mobi.ing(LS.memberSignupRegisterPwdMinLength),void Mobi.getPreviewObject("memberSignupPwd").focus();var a=jm("#memberSignupRepwd").val();if(n!=a)return Mobi.ing(LS.memberSignupRegisterPwdNotMatch),void Mobi.getPreviewObject("memberSignupRepwd").focus();var r="";if(jm("#memberSignupRemark").length>0){r=jm("#memberSignupRemark").val().trim();var s=jm("#memberSignupRemark").attr("maxlength");if(r.length>s)return Mobi.ing(jm.format(LS.memberSignupRegisterRemarkMaxLength,s)),void Mobi.getPreviewObject("memberSignupRemark").focus()}var l={};if(l.acct=o,l.pwd=jm.md5(n),l.remark=r,l.signUpbyMobile=t,l.signUpbyMail=i,void 0!==jm("#messageAuthCode").attr("maxlength")&&null!=jm("#messageAuthCode").attr("maxlength")){var c=jm("#messageAuthCode").val();if(void 0===c||null==c||""==c)return Mobi.ing(LS.inputMobileCode),void Mobi.getPreviewObject("messageAuthCode").focus();l.messageAuthCode=c}var d="",m="",p=0,u="",h=0;if(jm(".userAddItem").each(function(){return userAddItemID=jm(this).attr("id"),m=jm(this).val().trim(),d=jm(this).attr("name"),u=jm(this).attr("maxlength"),l[userAddItemID]=m,void 0!==u&&null!=u&&m.length,"email"==userAddItemID&&m.length>0&&!jm.isEmail(m)?(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,d)),Mobi.getPreviewObject(userAddItemID).focus(),h=1,!1):"mobile"==userAddItemID&&m.length>0&&!jm.isNationMobile(m)?(Mobi.ing(LS.mobileNumRegular),Mobi.getPreviewObject(userAddItemID).focus(),h=1,!1):void(Fai.top._openThemeV3?"mobileCt"==userAddItemID&&l.mobile.length<=0&&(l.mobileCt=""):"mobile"==userAddItemID&&m.length<=0&&(l.mobileCt=""))}),1!=h&&1!=p){var f=0;if(jm(".isCheckUAI").each(function(){return userAddItemID=jm(this).attr("id"),m=jm(this).val().trim(),d=jm(this).attr("name"),null==m||""==m.trim()?(jm(this).is("input")?Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty,d)):Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty2,d)),Mobi.getPreviewObject(userAddItemID).focus(),f=1,!1):"email"==userAddItemID&&m.length>0&&!jm.isEmail(m)?(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,d)),Mobi.getPreviewObject(userAddItemID).focus(),f=1,!1):void 0}),1!=f){var g=jm("#memberAgreePro");if(g.length>0&&!g.prop("checked"))Mobi.ing(LS.memberAgreeProtocol);else{var v="APuf2tQECAEQARoDWzNdIgnllJDkuJbmsJE",b=function(o){Mobi.ing(LS.memberSignupRegisterIng,!1,!0),jm(".g_button").removeClass("sendIcon"),o&&(l.checkSign=o,l.bssKey=v),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=add",data:"info="+jm.encodeUrl(jm.toJSON(l)),error:function(){Mobi.ing(LS.memberSignupRegisterError)},success:function(o){var a=jm.parseJSON(o);a.success?(Mobi._needSignupFaitest=!1,a.active?Mobi.memberActive(l.email,a.acct,e,function(){}):(0==a.rt&&(Fai.top.location.href="login.jsp?errno=-303"),e?Mobi.autoLogin(a.acct,n,e):Fai.top.location.href="login.jsp?errno=12")):(jm(".g_button").addClass("sendIcon"),jm(".loginIcon ").hide(),-401==a.rt?a.needCode&&(Mobi._needSignupFaitest=!0,Mobi.memberSignupSubmit(e,t,i)):-601==a.rt?Mobi.ing(LS.reGetMobileCode):-8==a.rt?Mobi.ing(LS.mobileHasSigned):-6==a.rt?Mobi.ing(LS.memberSignupRegisterExisted):-4==a.rt?Mobi.ing(LS.memberSignupRegisterLimit):-10==a.rt?Mobi.ing(LS.invalidChar):-28==a.rt?Mobi.ing(LS.memberRegisterLimit):-20==a.rt?Mobi.ing(a.msg):-1001==a.rt?(jm("#mobiIngTigs").remove(),Fai.top._openThemeV3?Mobi.showPluralPopupV3("email",a.headImg,a.name,a.acct,n,l,e):Mobi.showPluralPopup("email",a.headImg,a.name,a.acct,n,l,e)):-1002==a.rt?(jm("#mobiIngTigs").remove(),Fai.top._openThemeV3?Mobi.showPluralPopupV3("mobile",a.headImg,a.name,a.acct,n,l,e):Mobi.showPluralPopup("mobile",a.headImg,a.name,a.acct,n,l,e)):Mobi.ing(LS.memberSignupRegisterError),a.hasFW&&Mobi.ing(a.msg))}})};Mobi._needSignupFaitest?initFaitest({bss:1,bssKey:v},function(e){b(e)}):b()}}}},Mobi.showPluralPopupV3=function(e,t,i,o,n,a,r){var s="email"==e?LS.emailAlreadyRegister:LS.mobileAlreadyRegister,l="email"==e?a.email:a.mobile,c="email"==e?"ajax/member_h.jsp?cmd=proceedAfterMail":"ajax/member_h.jsp?cmd=proceedAfterMobile",d=(Mobi.isNull(i),{textClass:"proceed",cancelClass:"loginInstantly",content:s,callback:function(){!function(){var e=[];e.push("<div class='confirmCancelEmail'>"+jm.format(LS.warningBeforeProceedRegistry,l)+"</div>");var t={promptWrap:"confirmCancelEmailWrap",textClass:"confirm",content:e.join(""),callback:function(){jm.ajax({type:"post",url:c,data:"info="+jm.encodeUrl(jm.toJSON(a)),error:function(){Mobi.ing(LS.memberSignupRegisterError)},success:function(e){var t=jm.parseJSON(e);t.success?t.active?Mobi.memberActive(a.email,t.acct,r,function(){}):(0==t.rt&&(Fai.top.location.href="login.jsp?errno=-303"),r?Mobi.autoLogin(t.acct,n,r):Fai.top.location.href="login.jsp?errno=12"):(jm(".g_button").addClass("sendIcon"),jm(".loginIcon ").hide(),jm("#signupCaptchaImg").attr("src","validateCode.jsp?"+1e3*Math.random()),jm("#memberSignupCaptcha").val(""),-401==t.rt?(Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch),t.needCode&&jm(".J_memberSignupCaptcha").removeClass("memberSignupCaptchaHide")):-601==t.rt?Mobi.ing(LS.reGetMobileCode):-8==t.rt?Mobi.ing(LS.mobileHasSigned):-6==t.rt?Mobi.ing(LS.memberSignupRegisterExisted):-4==t.rt?Mobi.ing(LS.memberSignupRegisterLimit):-10==t.rt?Mobi.ing(LS.invalidChar):-28==t.rt?Mobi.ing(LS.memberRegisterLimit):-20==t.rt?Mobi.ing(t.msg):-1001==t.rt?Fai.top._openThemeV3?Mobi.showPluralPopupV3("email",t.headImg,t.name,t.acct,n,a,r):Mobi.showPluralPopup("email",t.headImg,t.name,t.acct,n,a,r):-1002==t.rt?Fai.top._openThemeV3?Mobi.showPluralPopupV3("mobile",t.headImg,t.name,t.acct,n,a,r):Mobi.showPluralPopup("mobile",t.headImg,t.name,t.acct,n,a,r):-1500==t.rt||Mobi.ing(LS.memberSignupRegisterError),t.hasFW&&Mobi.ing(t.msg))}})}};Mobi.prompt(t)}()},cancelCallback:function(){Fai.top.location.href="login.jsp"}});Mobi.prompt(d)},Mobi.showPluralPopup=function(e,t,i,o,n,a,r){var s="email"==e?LS.emailAcct:LS.mobileNum,l="email"==e?a.email:a.mobile,c="email"==e?"ajax/member_h.jsp?cmd=proceedAfterMail":"ajax/member_h.jsp?cmd=proceedAfterMobile",d=Mobi.isNull(i)||""==i||"null"==i?o:i,m=[];m.push("<div style='position: relative; top: -1.094rem; left: -.125rem; display: inline-block; width: 3.875rem; height: 3.875rem;'>"),m.push("\t<img src="+t+" style='height: 3.875rem; width: 3.875rem; border-radius: 100%; border: .125rem #f2f2f2 solid;' />"),m.push("</div>"),m.push("<div style='font-size: .75rem; color: #333; position: relative; top: -.375rem;'>"),m.push("\t<span style='display: block; text-align: center;'>"+d+"</span>"),m.push("\t<span style='display: block; text-align: center; position: relative; top: .4rem'>"+jm.format(LS.alreadyHasAnAcct,s)+"</span>"),m.push("</div>");var p={textClass:"proceed",cancelClass:"loginInstantly",content:m.join(""),callback:function(){!function(){var e=[];e.push("<div style='width: 2.5rem; height: 2.5rem; border-radius:50%; border: .125rem solid gray; position: relative; top: -.625rem; left: 4.0625rem; border-color: #F8BB86;'>"),e.push("<div style='animation: pulseWarningIns 0.75s infinite alternate; -webkit-animation: pulseWarningIns 0.75s infinite alternate;'>"),e.push("<span style='position: absolute; width: 0.15625rem; height: 1.46875rem; left: 50%; top: .3125rem; webkit-border-radius: .0625rem; border-radius: .0625rem; margin-left: -.0625rem; background-color: #F8BB86;'></span>"),e.push("<span style='position: absolute; width: .21875rem; height: .21875rem; -webkit-border-radius: 50%; border-radius: 50%; margin-left: .09375rem; left: 42%; bottom: .3125rem; background-color: #F8BB86;'></span>"),e.push("</div>"),e.push("</div>"),e.push("<div style='color: #333; font-size: .75rem; text-align:center;'>"+jm.format(LS.warningBeforeProceedRegistry,l)+"</div>");var t={textClass:"confirm",content:e.join(""),callback:function(){jm.ajax({type:"post",url:c,data:"info="+jm.encodeUrl(jm.toJSON(a)),error:function(){Mobi.ing(LS.memberSignupRegisterError)},success:function(e){var t=jm.parseJSON(e);t.success?t.active?Mobi.memberActive(a.email,t.acct,r,function(){}):(0==t.rt&&(Fai.top.location.href="login.jsp?errno=-303"),r?Mobi.autoLogin(t.acct,n,r):Fai.top.location.href="login.jsp?errno=12"):(jm(".g_button").addClass("sendIcon"),jm(".loginIcon ").hide(),jm("#signupCaptchaImg").attr("src","validateCode.jsp?"+1e3*Math.random()),jm("#memberSignupCaptcha").val(""),-401==t.rt?(Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch),t.needCode&&jm(".J_memberSignupCaptcha").removeClass("memberSignupCaptchaHide")):-601==t.rt?Mobi.ing(LS.reGetMobileCode):-8==t.rt?Mobi.ing(LS.mobileHasSigned):-6==t.rt?Mobi.ing(LS.memberSignupRegisterExisted):-4==t.rt?Mobi.ing(LS.memberSignupRegisterLimit):-10==t.rt?Mobi.ing(LS.invalidChar):-28==t.rt?Mobi.ing(LS.memberRegisterLimit):-20==t.rt?Mobi.ing(t.msg):-1001==t.rt?Fai.top._openThemeV3?Mobi.showPluralPopupV3("email",t.headImg,t.name,t.acct,n,a,r):Mobi.showPluralPopup("email",t.headImg,t.name,t.acct,n,a,r):-1002==t.rt?Fai.top._openThemeV3?Mobi.showPluralPopupV3("mobile",t.headImg,t.name,t.acct,n,a,r):Mobi.showPluralPopup("mobile",t.headImg,t.name,t.acct,n,a,r):-1500==t.rt||Mobi.ing(LS.memberSignupRegisterError),t.hasFW&&Mobi.ing(t.msg))}})}};Mobi.prompt(t)}()},cancelCallback:function(){Fai.top.location.href="login.jsp"}};Mobi.prompt(p)},Mobi.getSignMobileCode=function(e){if(Fai.top._manageMode)Mobi.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再获取短信验证码。");else{var t=jm("#mobile").val(),i=jm("#mobileCt").val(),o="";if(jm.isNationMobile(t)){if(e&&(Fai._needFaitest=!0),Fai.top._encryptType&&void 0!==t&&Fai.top._faiEncryptKey&&Fai.top._encryptType>0){var n=new JSEncrypt;n.setPublicKey(Fai.top._faiEncryptKey),1==Fai.top._encryptType?n=new JSEncrypt1:2==Fai.top._encryptType?n=new JSEncrypt2:3==Fai.top._encryptType&&(n=new JSEncrypt3),n.setPublicKey(Fai.top._faiEncryptKey),o=n.encrypt(t)}var a="AObmzq0GCAEQARoDWzldIgnllJDkuJbmsJE",r=function(e){var n="mobile="+t+"&mobileCt="+i+"&mCode="+o;e&&(n+="&bssKey=".concat(a,"&checkSign=").concat(e)),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=getMobileCode",data:n,error:function(){Mobi.ing(LS.getMobileCodeErrAf)},success:function(e){var t=jm.parseJSON(e);t.success?(Mobi.ing(LS.sendMobileCodeSuc),Mobi.getSignMobileCodeCountDown(),Mobi._needFaitest=!1):(t.needCode&&(Mobi._needFaitest=!0,Mobi.getSignMobileCode()),-401==t.rt?Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch):-2==t.rt?Mobi.ing(LS.js_argsError):2==t.rt?Mobi.ing(LS.memberDialogSendMobileCodeErr):-4==t.rt||8==t.rt?Mobi.ing(LS.getMobileOneMin):-8==t.rt?Mobi.ing(LS.getMobileHalfHour):3==t.rt?Mobi.ing(LS.memberDialogMobileMoneyErr):9==t.rt?Mobi.ing(LS.memberDialogSendMobileCodeLimit):101==t.rt?Mobi.ing(LS.mobileSetErr):-6==t.rt?Mobi.ing(LS.mobileHasSigned):23==t.rt?Mobi.ing(LS.mobileNationTplErr):-301==t.rt?Mobi.ing(LS.smsRanout):-1002==t.rt||Mobi.ing(LS.getMobileRefresh))}})};Mobi._needFaitest?initFaitest({bss:1,bssKey:a},function(e){r(e)}):r()}else Mobi.ing(LS.mobileNumRegular)}},Mobi.getSignMobileCodeCountDown=function(e,t){var i=jm("#messageAuthCodeClick"),o=i.attr("cTime"),n=60,a="5.2rem";o&&null!=o?(a="5.6rem",o=parseInt(o),n=1800):o=0,e&&(n=e),t&&(a=t),o++,i.attr("cTime",o),i.attr("s_onclick",i.attr("onclick")),i.removeAttr("onclick"),i.css("width",a),Mobi.mobileCodeCountInterval&&clearInterval(Mobi.mobileCodeCountInterval),Mobi.mobileCodeCountInterval=setInterval(function(){n--,i.html(LS.reGetMsg+"("+n+")"),n<=0&&(i.html(i.attr("title")),i.css("width","4.2rem"),i.attr("onclick",i.attr("s_onclick")),clearInterval(Mobi.mobileCodeCountInterval))},1e3)},Mobi.mobileEditFuc={},function(e){e.init=function(e,t){if(""!=e&&""!=t){var i=document.createElement("script");i.type="text/javascript",i.src=e;var o=document.createElement("script");o.type="text/javascript",o.src=t;var n=document.documentElement||document.body;n.appendChild(i),n.appendChild(o)}},e.revert=function(){jm("#inputMobile").show(),jm("#mobileValidate").hide()},e.save=function(){if(!jm("#saveMobileBtn").hasClass("un-change"))if("none"==jm("#inputMobile").css("display")){var t=jm("#mobile").val(),i=jm("#mobileCt").val(),o=jm("#validateCodeInput").val();if(!t||""==t)return void Mobi.ing("请输入手机号码");if(!o||""==o)return void Mobi.ing(LS.memberSignupRegisterCaptchaEmpty);var n={countryCode:jm("#mobileCt").find("option").text(),validateCode:jm.encodeUrl(o)};jm.ajax({type:"post",url:"ajax/member_h.jsp",data:"cmd=setMemberMobile&mobile="+jm.encodeUrl(t)+"&mobileCt="+jm.encodeUrl(i)+"&propVals="+jm.encodeUrl(jm.toJSON(n)),error:function(){Mobi.showMemberLoginMsg(-1)},success:function(e){var t=jm.parseJSON(e)||{};t.success?(Mobi.ing(t.msg,1),setTimeout(function(){document.location.reload()},1e3)):Mobi.ing(t.msg)}})}else e.getMobileCode()},e.getMobileCode=function(){if(Fai.top._manageMode)Mobi.ing("您目前处于网站管理状态，请先点击网站右上方的“退出”后再获取短信验证码。");else{var t=jm("#mobile").val(),i=jm("#mobileCt").val(),o="";if("ch"!=i||jm.isMobile(t))if(jm.isNationMobile(t)){if(Fai.top._encryptType&&void 0!==t&&Fai.top._faiEncryptKey&&Fai.top._encryptType>0){var n=new JSEncrypt;n.setPublicKey(Fai.top._faiEncryptKey),1==Fai.top._encryptType?n=new JSEncrypt1:2==Fai.top._encryptType?n=new JSEncrypt2:3==Fai.top._encryptType&&(n=new JSEncrypt3),n.setPublicKey(Fai.top._faiEncryptKey),o=n.encrypt(t)}var a="AObmzq0GCAEQARoDWzldIgnllJDkuJbmsJE",r=function(n){var r="mobile="+t+"&mobileCt="+i+"&mCode="+o;n&&(r+="&bssKey=".concat(a,"&checkSign=").concat(n)),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=getMobileCode",data:r,error:function(){Mobi.ing(LS.getMobileCodeErrAf)},success:function(t){var i=jm.parseJSON(t);i.success?(e.needCaptcha=!1,Mobi.ing(LS.sendMobileCodeSuc),Mobi.getSignMobileCodeCountDown(60,"4.37rem"),jm("#inputMobile").hide(),jm("#mobileValidate").show()):(i.needCode&&jm("#showCaptcha").click(),-401==i.rt?e.needCaptcha?Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch):Mobi.ing(LS.memberSignupRegisterCaptchaEmpty):-2==i.rt?i.msg?Mobi.ing(i.msg):Mobi.ing(LS.js_argsError):2==i.rt?Mobi.ing(LS.memberDialogSendMobileCodeErr):-4==i.rt||8==i.rt?Mobi.ing(LS.getMobileOneMin):-8==i.rt?Mobi.ing(LS.getMobileHalfHour):3==i.rt?Mobi.ing(LS.memberDialogMobileMoneyErr):9==i.rt?Mobi.ing(LS.memberDialogSendMobileCodeLimit):101==i.rt?Mobi.ing(LS.mobileSetErr):-6==i.rt?Mobi.ing(LS.mobileHasSigned):23==i.rt?Mobi.ing(LS.mobileNationTplErr):-301==i.rt?Mobi.ing(LS.smsRanout):-1002==i.rt||Mobi.ing(LS.getMobileRefresh),e.needCaptcha=i.needCode||!1,e.needCaptcha&&e.getMobileCode())}})};e.needCaptcha?initFaitest({bss:1,bssKey:a},function(e){r(e)}):r()}else Mobi.ing(LS.mobileNumRegular);else Mobi.ing("手机号码不正确，请输入11位数字。")}},e.infoInputChange=function(){jm("#saveMobileBtn").removeClass("un-change"),""==jm("#mobile").val()?jm("#cleanBtn").hide():jm("#cleanBtn").show(),""==jm("#validateCodeInput").val()?jm("#cleanValidateCodeInput").hide():jm("#cleanValidateCodeInput").show()},e.cleanMobileInput=function(){jm("#mobile")[0].value="",jm("#cleanBtn").hide()},e.cleanValidateCodeInput=function(){jm("#validateCodeInput")[0].value="",jm("#cleanValidateCodeInput").hide()},e.initCaptchaPanel=function(t){e.needCaptcha=t;var i={triggerId:"showCaptcha",pageBg:!0,pageHtml:createCaptchaPanel(),direction:"bottom",callback:function(){jm(".checkCaptcha").unbind("click").click(function(){e.checkCaptcha()})},closeWebPage:".hiddenCaptcha"};Mobi.initWebPage(i),Mobi.changeValidateCode(jm("#mobileEditCaptchaImg"))},createCaptchaPanel=function(){return"<div class='p_validateCode'><div class='contain'><img id='mobileEditCaptchaImg' class='captcha_img' src='validateCode.jsp?"+parseInt(1e3*Math.random())+"' /><div class='refreshCaptcha' onclick='Mobi.changeValidateCode(jm(\"#mobileEditCaptchaImg\"))'><div class='refreshCaptchaIcon icon-refresh'></div><div class='refreshCaptchaText'>看不清，换一张</div></div><div><input id='memberSignupCaptcha' class='validateCodeInput' maxlength='8' placeholder='请输入验证码' /></div></div><div class='foot'><div class='hiddenCaptcha'>取消</div><div class='checkCaptcha' >确定</div></div></div>"},e.checkCaptcha=function(){var t=jm("#memberSignupCaptcha").val()||"";""!=t?jm.ajax({type:"post",url:"ajax/member_h.jsp",data:"cmd=checkCaptcha&captchaCode="+jm.encodeUrl(t)+"&needCaptcha="+e.needCaptcha,error:function(){Mobi.showMemberLoginMsg(-1)},success:function(t){var i=jm.parseJSON(t)||{};if(i.success)e.needCaptcha=!1,jm(".hiddenCaptcha").click(),e.getMobileCode();else switch(i.rt||0){case-2:Mobi.ing(LS.js_argsError);break;case-4:Mobi.ing(LS.smsRanout);break;case-15:Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch);break;default:Mobi.ing(LS.systemError)}}}):Mobi.ing(LS.memberSignupRegisterCaptchaEmpty)}}(Mobi.mobileEditFuc),Mobi.mallBuyLoginCheck=function(){var e=localStorage.getItem("mallBuyCallBack");e&&(localStorage.removeItem("mallBuyCallBack"),(e=jm.parseJSON(e)).login=!0,localStorage.setItem("mallBuyCallBack",jm.toJSON(e)))},Mobi.autoLogin=function(e,t,i){jm.ajax({type:"post",url:"ajax/login_h.jsp",data:"cmd=loginMember&acct="+jm.encodeUrl(e)+"&pwd="+jm.encodeUrl(jm.md5(t)),error:function(){Mobi.showMemberLoginMsg(-1)},success:function(e){if((e=jm.parseJSON(e)).success)return Mobi.mallBuyLoginCheck(),void(Fai.top.location.href=i);Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(i)}})},Mobi.memberActive=function(e,t,i){jm.ajax({type:"post",url:"ajax/mail_h.jsp?cmd=sendMemberActiveMail",data:"memName="+jm.encodeUrl(t)+"&memEmail="+e,error:function(){Mobi.ing(LS.js_systemError)},success:function(t){jm("#profileArea").hide(),jm("#fillAcctInfo").hide(),jm("#mSignUp").show(),jm("#mSignUp .loginContent").hide(),jm(".loginErrorLine").hide();var i=Mobi.getEmailCarriersAddress(e);jm("#checkEmail").html(jm.format(LS.memberSignupMailActivation,e)),-1!=i&&(jm("#emailAddr").attr("href",i.addr),jm("#emailAddr").html(jm.format(LS.memberSignupMailActivationLink,i.name)),jm("#emailAddr").show()),jm("#mobiIngTigs").remove()}})},Mobi.getEmailCarriersAddress=function(e){var t={},i=e.split("@")[1];return"qq.com"===i||"vip.qq.com"===i||"foxmail.com"===i?(t.name="QQ",t.addr="https://w.mail.qq.com",t):"163.com"===i?(t.name="163",t.addr="http://smart.mail.163.com",t):"126.com"===i?(t.name="126",t.addr="http://smart.mail.126.com",t):"sina.com"===i||"vip.sina.com"===i?(t.name="sina",t.addr="http://mail.sina.com.cn",t):-1},Mobi.showErrorMsg=function(e){jm(".loginErrorLine").show(),Mobi.ing(e)},Mobi.readBulletin=function(){var e=jm("#bulletinTitle"),t=jm("#bulletinTitle").attr("sessionMid");jm.ajax({type:"post",url:"ajax/member_h.jsp",data:"cmd=setBulletinReadTime&id="+t,error:function(){Mobi.ing(LS.js_systemError)},success:function(t){(t=jm.parseJSON(t)).success?(jm("#profile").hide(),jm("#mBulletinConten").show(),jm(e).removeClass("newsReminds"),jm("#mBulletinConten img").each(function(){var e=jm("#mBulletinConten p").width();if(jm(this).attr("width")>=e){var t=jm(this).attr("height")/(jm(this).attr("width")/e);jm(this).css({height:t+"px",width:e+"px"})}})):Mobi.ing(LS.js_systemError)}})},Mobi.memberAddrInfoOpera=function(e,t,i,o){var n=t,a="",r="",s=n.length,l="",c={};site_cityUtil.initProvinces(i),jm("#editAddrInfo .g_close").click(function(){jm("#editAddrInfo").hide(),jm("#addrInfoList").show()}),jm("#addrInfoList .orderAddAddrInfo").click(function(t,i){!0,s=jm("#addrInfo .addrInfo").length;var o=Fai.top._addrInfoListLimit||30;s<o?(jm("#editAddrInfo").show(),jm("#editAddrInfo").find(".propItemValue").each(function(){if(9==jm(this).attr("proptype")){var e=jm(this).attr("id");if(null!=e&&""!=e){var t=e.replace("input","")+"_endinput";jm("#"+e).val(""),jm("#"+t).val("")}}jm(this).val("")}),a="addAddr",l="ajax/member_h.jsp?cmd=set&id="+e,Mobi.cusHistory.add("editAddrInfo",i,2,"#addrInfoList .orderAddAddrInfo")):Mobi.ing(LS.mallAddrInfoAmountLimit,!0)}),jm("#addrInfoList").delegate(".edit, .info_name","click",function(){!1,jm("#addrInfoList").hide(),jm("#editAddrInfo").show(),r="edit"==jm(this).attr("class")?jm(this).attr("_index"):jm(this).parent().attr("_item"),a="editAddr",l="ajax/member_h.jsp?cmd=set&id="+e;var t=n[r];jm("#editAddrInfo").find(".propItemValue").each(function(){var e=jm(this).attr("_field"),i=jm(this).attr("proptype"),o=jm(this).attr("id")||"";if(9==i){var n=t[e];null==n&&(n={});var a=n;null==a.s?jm(this).val(""):jm(this).val(a.s);var r=o.replace("input","")+"_endinput";null!=a.e?jm("#"+r).val(a.e):jm("#"+r).val("")}else jm(this).val(t[e])});var o=t.addr_info;if(null!=o){if(o.isCus)jm("#allArea").val(o.provinceCode),jm("#allArea").change(),jm("#areaBox2 .group_item[cid='"+o.cityCode+"']").click(),jm("#areaBox2 .group_item[cid='"+o.countyCode+"']").click();else{2052==i||1028==i?(site_cityUtil.getInfo(o.streetCode).name,site_cityUtil.getInfo(o.countyCode).name,site_cityUtil.getInfo(o.cityCode).name,site_cityUtil.getInfo(o.provinceCode).name):(site_cityUtil.getInfoEn(o.streetCode).name,site_cityUtil.getInfoEn(o.countyCode).name,site_cityUtil.getInfoEn(o.cityCode).name,site_cityUtil.getInfoEn(o.provinceCode).name),99e4==o.provinceCode?(jm("#areaBoxInput").attr("isOs",1),jm("#allArea").val("os"),jm("#allArea").change()):(jm("#areaBoxInput").attr("isCn",1),jm("#allArea").val("cn"),jm("#allArea").change()),jm("#areaBoxInput").attr("area1",o.provinceCode),jm("#areaBoxInput").attr("area2",o.cityCode),jm("#areaBoxInput").attr("area3",o.countyCode),jm("#areaBoxInput").attr("area4",o.streetCode),jm("#areaBox1 .group_item[pid='"+o.provinceCode+"']").click(),jm("#areaBox1 .group_item[cid='"+o.cityCode+"']").click(),jm("#areaBox1 .group_item[cid='"+o.countyCode+"']").click(),jm("#areaBox1 .group_item[cid='"+o.streetCode+"']").click()}jm("#addrInfo_street").val(o.streetAddr)}t.isDefault}),jm("#addrInfoList").delegate(".selectedDiv label","click",function(){a="setDefault";if(1!=n.length){r=jm(this).parents(".selectedArea").parent().attr("_item");var i={isDefault:1};c.opera=a,c._item=r,c.addrInfo=i,t[r].isDefault=i.isDefault;var o=this;jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set&id="+e,data:"info="+jm.encodeUrl(jm.toJSON(c)),error:function(){Mobi.ing(LS.memberProfileError)},success:function(e){var t=jm.parseJSON(e);t.success?(jm(".addrInfo").each(function(){jm(this).find(".text").text(LS.mallSetDefault),jm(this).find(".cutOut").css("display","block"),n[jm(this).attr("_item")].isDefault=0}),jm(o).find(".text").text(LS.mallDefault),jm(o).parents(".addrInfo").find(".cutOut").css("display","none"),n[r].isDefault=1):Mobi.ing(t.msg)}})}}),jm("#g_body").append(jm("<div id='temBox' class='g_color g_main_color_v3'></div>"));var d=jm("#temBox").css("color");jm("head").append("<style>.checkbox-comp:checked +.text:before{background-color:"+d+";}</style>"),jm("#g_body").children("#temBox").remove();jm("#editAddrInfo").delegate(".orderSaveAddrInfo","click",function(){!0;var e=!0,t=0;0==n.length?t=1:n[r]&&(t=n[r].isDefault);var i=jm(this),o={},s={},d="",m="",p="";i.parent().find(".propItemValue").each(function(){d=jm(this).attr("_field"),m=jm(this).val(),p=jm(this).attr("_prop"),propType=jm(this).attr("proptype");var t=jm(this).attr("_required");id=jm(this).attr("id"),!("1"==t||"true"==t)||null!=m&&""!=m||(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,p)),this.focus(),e=!1),8==propType&&m.length>0&&(jm.isNationMobile(m)||(msg=LS.mobileNumRegular,Mobi.ing(msg),this.focus(),e=!1)),10==propType&&m.length>0&&(jm.isNationMobile(m)||(msg=p+LS.mobileNumDefRegular,Mobi.ing(msg),this.focus(),e=!1)),3!=propType&&12!=propType||m.length>0&&(jm.isEmail(m)||(msg=LS.mallStlSubmitInput2+jm(this).attr("_prop"),Mobi.ing(msg),this.focus(),e=!1)),11==propType&&m.length>0&&(jm.isCardNo(m)||(msg=LS.mallStlSubmitInput2+jm(this).attr("_prop"),Mobi.ing(msg),this.focus(),e=!1));var o={};if(9==propType){if(m.length>0){o.s=m;var n=id.replace("input","")+"_endinput",a=i.parent().find("#"+n);if(a.length>0){var r=a.val();""==r?(msg=LS.mallStlSubmitInput2+jm(this).attr("_prop"),Mobi.ing(msg),e=!1):o.e=r}}m=o}s[d]=m});var u=!("os"==jm("#allArea").val()||"cn"==jm("#allArea").val()),h=jm("#areaBoxInput").attr("area4"),f=jm("#areaBoxInput").attr("area3"),g=jm("#areaBoxInput").attr("area2"),v=jm("#areaBoxInput").attr("area1"),b=jm("#addrInfo_street");if("1"==i.parent().find("#addrInfo_street").attr("_required")){if(null==jm("#allArea").val()||""==jm("#allArea").val())return Mobi.ing("请选择地区",1),void!1;if((null==v||""==v)&&!u)return Mobi.ing("请选择省份",1),void!1;if((null==g||""==g)&&!u)return Mobi.ing("请选择城市",1),void!1}o.provinceCode=v,o.cityCode=g,o.countyCode=f,o.streetCode=h,o.streetAddr=b.val(),o.isCus=u,s.addr_info=o;var j="";1==jm("#allArea").length&&(2052==Fai.top._lcid||1028==Fai.top.lcid?(j=jm("#areaBoxInput").val().replace(/-/g,"")+jm("#addrInfo_street").val(),99e4==o.provinceCode&&(j=j.replace(jm("div[pid='990000']").text()+jm("div[pid='990000']").text(),jm("div[pid='990000']").text()))):(j=jm("#areaBoxInput").val().replace(/-/g," ")+" "+jm("#addrInfo_street").val(),99e4==o.provinceCode&&(j=j.replace(jm("div[pid='990000']").text()+" "+jm("div[pid='990000']").text(),jm("div[pid='990000']").text())))),s.addr=j,s.isDefault=t,c.opera=a,c._item=r,c.addrInfo=s,e&&jm.ajax({type:"post",url:l,data:"info="+jm.encodeUrl(jm.toJSON(c)),error:function(){Mobi.ing(LS.memberProfileError)},complete:function(){!1},success:function(e){var i=jm.parseJSON(e);if(i.success){var o=s.name||"",l=s.mobile||"",c=s.addr||"";if(""!=o&&""!=l&&""!=c||jm("#editAddrInfo").find(".propItemValue").each(function(){var e=jm(this).attr("_field");if(null!=e&&"addrDetail"!=e){var t=jm(this).attr("proptype"),i=(jm(this).attr("id"),s[e]);if(2!=t&&4!=t&&7!=t&&8!=t){if(9==t){""!=i&&null!=i||(i={});var n=i;null!=n.s?(i=n.s,null!=n.e&&(i+=LS.to+n.e)):i=""}null==o||""==o?o=i:null==l||""==l?l=i:null!=c&&""!=c||(c=i)}}}),"editAddr"==a)t?jm("#addrInfoList").find(".addrInfo").each(function(){"block"!=jm(this).find(".cutOut").attr("display")&&(n[jm(this).attr("_item")].isDefault=0),jm(this).attr("_item")==r&&(jm(this).find(".name").text(o),jm(this).find(".phone").text(l),jm(this).find("#addr").text(c),addrInfo=jm(this))}):jm("#addrInfoList").find(".addrInfo").each(function(){jm(this).attr("_item")==r&&(jm(this).find(".name").text(o),jm(this).find(".phone").text(l),jm(this).find("#addr").text(c))}),n.splice(r,1,s),jm("#editAddrInfo").hide(),jm("#addrInfoList").show();else if("addAddr"==a){t&&jm("#addrInfoList").find(".addrInfo").each(function(){"block"!=jm(this).find(".cutOut").attr("display")&&(n[jm(this).attr("_item")].isDefault=0)});var d=n.length,m=[];m.push("<div class='addrInfo' _item="+d+">"),m.push("<div class='"+(t?"":"middle")+" info_name' style='width:100%;'>"),m.push("<div class='nameAndPhone'><span class='name'>"+o+"</span><span class='phone'>"+l+"</span></div><div class='address'><span id='addr'>"+c+"</span></div>"),m.push("</div>"),m.push("<div class='selectedArea'>"),m.push("<div class='left'>"),m.push("<div class='selectedDiv'><label for='input"+d+"'><input type='radio' class='checkbox-comp' id='input"+d+"' name='defaultLogo'><span class='text'>设为默认</span></label></div>"),m.push("</div>"),m.push("<div class='right'>"),m.push("<div class='edit' _index="+d+"><span>编辑</span></div><div class='cutOut'><span>删除</span></div>"),m.push("</div>"),m.push("</div>"),m.push("</div>"),jm("#addrInfo").append(m.join("")),n.push(s),jm("#editAddrInfo").hide(),jm("#addrInfoList").show()}}else!1,Mobi.ing(i.msg)}})}),jm("#addrInfo").delegate(".cutOut","click",function(){var t=jm(this);r=t.parents(".selectedArea").parent().attr("_item"),c.opera="delAddr",c._item=r;var i={textClass:"confirm",content:"确定要删除该收货人信息吗？",callback:function(){!function(e,t){jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set&id="+e,data:"info="+jm.encodeUrl(jm.toJSON(c)),error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var i=jm.parseJSON(e);if(i.success){jm("#mobiPrompt").remove(),jm("#mobiPrompt_Bg").remove();var o=0;jm("#addrInfoList").find(".addrInfo").each(function(){jm(this).attr("_item")==t?jm(this).remove():(jm(this).attr("_item",o),o++)}),s--,n.splice(t,1)}else Mobi.ing(i.msg)}})}(e,r)}};Mobi.prompt(i)});LS.mallPleaseChoose;var m=Mobi.initWebPage({triggerId:"areaBoxInput",panelId:"areaBox",pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#areaBoxClose"});jm("#areaBox").unbind("click").bind("click",function(e){var t=e.target.className;t&&jm.inArray("areaBox",t.split(" "))>=0&&(jm("#areaBoxClose").click(),jm("#areaBox1").hide(),jm("#areaBox2").hide())});var p="";function u(e,t,o,n){jm("#areaBox1 .street_content").remove(),null!=o&&null!=n||(n=jm(e).attr("cname"),o=jm(e).attr("cid"));jm("#areaBoxInput").attr("lastArea");var a=jm("#areaBoxInput").attr("lastAreaType");jm("#areaBox1 .J_areaHead .street").click(),t?(null==a||"street"!=a&&"county"!=a||jm("#areaBoxInput").val(jm("#areaBoxInput").val().substring(0,jm("#areaBoxInput").val().indexOf("-",jm("#areaBoxInput").val().indexOf("-")+1))),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+"-"+n),jm("#areaBoxInput").attr("lastArea","-"+n),jm("#areaBoxInput").attr("lastAreaType","county"),jm("#areaBoxInput").attr("area3",o),jm("#areaBoxInput").attr("area4","")):(null!=a&&""!=a&&jm("#areaBoxInput").val(jm("#areaBoxInput").val().substring(0,jm("#areaBoxInput").val().indexOf("-"))),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+"-"+n),jm("#areaBoxInput").attr("lastArea","-"+n),jm("#areaBoxInput").attr("lastAreaType","city"),jm("#areaBoxInput").attr("area2",o),jm("#areaBoxInput").attr("area3",""),jm("#areaBoxInput").attr("area4",""));var r="";r=g(2052==i||1028==i?site_cityUtil.getStreet(o):site_cityUtil.getStreetEn(o));var s=jm(r).html();null!=s&&""!==s||(jm("#areaBox1").hide(),jm("#areaBoxClose").click()),jm("#street_box").append(r)}function h(e){var t="";return t+="<div class='city_content'>",jm.each(e,function(e,o){t+=2052==i||1028==i?"<div class='group_item' cid='"+o.id+"' cname='"+site_cityUtil.getInfo(o.id).name+"'>"+site_cityUtil.simpleCityNameStr(site_cityUtil.getInfo(o.id).name)+"</div>":"<div class='group_item' cid='"+o.id+"' cname='"+site_cityUtil.getInfoEn(o.id).name+"'>"+site_cityUtil.simpleCityNameStrEn(site_cityUtil.getInfoEn(o.id).name)+"</div>"}),t+="</div>"}function f(e){var t="";return t+="<div class='county_content'>",jm.each(e,function(e,o){t+=2052==i||1028==i?"<div class='group_item' cid='"+o.id+"' cname='"+site_cityUtil.getInfo(o.id).name+"'>"+site_cityUtil.getInfo(o.id).name+"</div>":"<div class='group_item' cid='"+o.id+"' cname='"+site_cityUtil.getInfoEn(o.id).name+"'>"+site_cityUtil.getInfoEn(o.id).name+"</div>"}),t+="</div>"}function g(e){var t="";return t+="<div class='street_content'>",jm.each(e,function(e,o){t+=2052==i||1028==i?"<div class='group_item' cid='"+o.id+"' cname='"+site_cityUtil.getInfo(o.id).name+"'>"+site_cityUtil.getInfo(o.id).name+"</div>":"<div class='group_item' cid='"+o.id+"' cname='"+site_cityUtil.getInfoEn(o.id).name+"'>"+site_cityUtil.getInfoEn(o.id).name+"</div>"}),t+="</div>"}function v(e){if(isNaN(e))return"";var t=parseInt(e),i="";return jm.each(function(e){var t=[];return jm.each(o,function(i,o){o.parentId==e&&t.push(o)}),t}(t),function(e,t){i+="<div class='group_item' cid='"+t.id+"' cname='"+t.name+"'>"+t.name+"</div>"}),i}jm.each(site_cityUtil.getAreaGroupsPinYin(),function(e,t){p+="<div class='pv_group' style='"+("OS"==t[0]?"display:none;":"")+"'>",p+="<div class='group_head'>"+t[0]+"</div>",p+="<div class='group_content'>",jm.each(t[1],function(e,t){p+=2052==i||1028==i?"<div class='group_item' pid='"+t+"' pname='"+site_cityUtil.getInfo(t).name+"'>"+site_cityUtil.simpleProvinceNameStr(site_cityUtil.getInfo(t).name)+"</div>":"<div class='group_item' pid='"+t+"' pname='"+site_cityUtil.getInfoEn(t).name+"'>"+site_cityUtil.simpleProvinceNameStrEn(site_cityUtil.getInfoEn(t).name)+"</div>"}),p+="</div>",p+="</div>"}),jm("#areaBox1 .pv_content").html("").append(p),jm("#allArea").change(function(){if(null==jm("#allArea").val()||""==jm("#allArea").val()||"os"==jm("#allArea").val()?(jm("#areaBoxInput").parent(".edit_line").hide(),jm("#areaBox1").hide(),jm("#areaBox2").hide()):jm("#areaBoxInput").parent(".edit_line").show(),jm("#areaBoxInput").attr("isCn",0),jm("#areaBoxInput").attr("isCus",0),jm("#areaBoxInput").attr("isOs",0),jm("#areaBoxInput").attr("area1",""),jm("#areaBoxInput").attr("area2",""),jm("#areaBoxInput").attr("area3",""),jm("#areaBoxInput").attr("area4",""),"cn"==jm("#allArea").val()?(jm("#areaBoxInput").attr("isCn",1),jm("#areaBox1 .pv").click(),jm("#areaBox1 .city_content").remove(),jm("#areaBox1 .county_content").remove(),jm("#areaBox1 .street_content").remove(),jm("#areaBoxInput").val("")):"os"==jm("#allArea").val()?(jm("#areaBoxInput").attr("isOs",1),jm("#areaBoxInput").attr("area1",99e4),jm("#areaBoxInput").attr("area2",990100),jm("#areaBoxInput").val(jm("#areaBox1").find(".group_item[pid='990000']").text())):(jm("#areaBoxInput").attr("isCus",1),jm("#areaBoxInput").attr("area1",jm("#allArea").val()),jm("#areaBox2 .sec_content").html(""),jm("#areaBox2 .thd_content").html(""),jm("#areaBoxInput").val("")),"cn"==jm("#allArea").val()||"os"==jm("#allArea").val())jm(".J_ssq").show(),jm(".J_administrativeRegion").hide();else{var e=v(jm("#allArea").val());jm("#sec_box .sec_content").append(e),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+jm("#allArea option[value='"+jm("#allArea").val()+"']").text()),jm(".J_ssq").hide(),jm(".J_administrativeRegion").show(),null!=e&&""!==e||jm("#areaBoxInput").parents(".edit_line").hide()}}),jm("#areaBoxInput").unbind("click").bind("click",function(){"cn"==jm("#allArea").val()?(m(),jm("#areaBox1").toggle(),jm("#areaBox2").hide(),jm("#areaBox1 .J_areaHead .pv").click()):null==jm("#allArea").val()||"os"==jm("#allArea").val()||(m(),jm("#areaBox2").toggle(),jm("#areaBox1").hide(),jm("#areaBox2 .J_areaHead2 .sec").click()),document.getElementById("areaBoxInput").blur()}),jm("#areaBox1 .J_areaHead .pv").click(function(){jm("#province_box").show(),jm("#city_box").hide(),jm("#county_box").hide(),jm("#street_box").hide()}),jm("#areaBox1 .J_areaHead .city").click(function(){jm("#province_box").hide(),jm("#city_box").show(),jm("#county_box").hide(),jm("#street_box").hide()}),jm("#areaBox1 .J_areaHead .county").click(function(){jm("#province_box").hide(),jm("#city_box").hide(),jm("#county_box").show(),jm("#street_box").hide()}),jm("#areaBox1 .J_areaHead .street").click(function(){jm("#province_box").hide(),jm("#city_box").hide(),jm("#county_box").hide(),jm("#street_box").show()}),jm("#areaBox2 .J_areaHead2 .sec").click(function(){jm("#sec_box").show(),jm("#thd_box").hide()}),jm("#areaBox2 .J_areaHead2 .thd").click(function(){jm("#sec_box").hide(),jm("#thd_box").show()}),jm("#province_box .group_item").bind("click",function(){jm("#areaBox1 .city_content").remove(),jm("#areaBox1 .county_content").remove();var e=jm(this).attr("pname"),t=jm(this).attr("pid");jm("#areaBox1 .J_areaHead .city").click(),jm("#areaBoxInput").val(""),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+e),jm("#areaBoxInput").removeAttr("lastArea"),jm("#areaBoxInput").removeAttr("lastAreaType"),jm("#areaBoxInput").attr("area1",t),jm("#areaBoxInput").attr("area2",""),jm("#areaBoxInput").attr("area3",""),jm("#areaBoxInput").attr("area4","");var o="";o=h(2052==i||1028==i?site_cityUtil.getCities(t):site_cityUtil.getCitiesEn(t));var n=jm(o).html();null!=n&&""!==n||(jm("#areaBox1").hide(),jm("#areaBoxClose").click()),jm("#city_box").append(o)}),jm("#city_box").delegate(".group_item","click",function(){jm("#areaBox1 .county_content").remove();var e=jm(this).attr("cname"),t=jm(this).attr("cid");if(0!=site_cityUtil.getCounty(t).length){jm("#areaBox1 .J_areaHead .county").click();jm("#areaBoxInput").attr("lastArea");var o=jm("#areaBoxInput").attr("lastAreaType");null!=o&&""!=o&&jm("#areaBoxInput").val(jm("#areaBoxInput").val().substring(0,jm("#areaBoxInput").val().indexOf("-"))),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+"-"+e),jm("#areaBoxInput").attr("lastArea","-"+e),jm("#areaBoxInput").attr("lastAreaType","city"),jm("#areaBoxInput").attr("area2",t),jm("#areaBoxInput").attr("area3",""),jm("#areaBoxInput").attr("area4","");var n="";n=f(2052==i||1028==i?site_cityUtil.getCounty(t):site_cityUtil.getCountyEn(t));var a=jm(n).html();null!=a&&""!==a||(jm("#areaBox1").hide(),jm("#areaBoxClose").click()),jm("#county_box").append(n)}else u(this,!1,t,e)}),jm("#county_box").delegate(".group_item","click",function(){u(this,!0)}),jm("#street_box").delegate(".group_item","click",function(){var e=jm(this).attr("cname"),t=jm(this).attr("cid"),i=jm("#areaBoxInput").attr("lastArea"),o=jm("#areaBoxInput").attr("lastAreaType");null!=o&&"street"==o&&jm("#areaBoxInput").val(jm("#areaBoxInput").val().replace(i,"")),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+"-"+e),jm("#areaBoxInput").attr("lastArea","-"+e),jm("#areaBoxInput").attr("lastAreaType","street"),jm("#areaBoxInput").attr("area4",t),jm("#areaBox1").hide(),jm("#areaBoxClose").click()}),jm("#sec_box").delegate(".group_item","click",function(){jm("#areaBox2 .thd_content").html("");var e=jm(this).attr("cname"),t=jm(this).attr("cid");jm("#areaBox2 .J_areaHead2 .thd").click();jm("#areaBoxInput").attr("lastArea");var i=jm("#areaBoxInput").attr("lastAreaType");null!=i&&""!=i&&-1!=jm("#areaBoxInput").val().indexOf("-")&&jm("#areaBoxInput").val(jm("#areaBoxInput").val().substring(0,jm("#areaBoxInput").val().indexOf("-"))),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+"-"+e),jm("#areaBoxInput").attr("lastArea","-"+e),jm("#areaBoxInput").attr("lastAreaType","sec"),jm("#areaBoxInput").attr("area2",t),jm("#areaBoxInput").attr("area3","");var o=v(t);null!=o&&""!==o||(jm("#areaBox2").hide(),jm("#areaBoxClose").click()),jm("#thd_box .thd_content").append(o)}),jm("#thd_box").delegate(".group_item","click",function(){var e=jm(this).attr("cname"),t=jm(this).attr("cid"),i=jm("#areaBoxInput").attr("lastArea"),o=jm("#areaBoxInput").attr("lastAreaType");null!=o&&"thd"==o&&jm("#areaBoxInput").val(jm("#areaBoxInput").val().replace(i,"")),jm("#areaBoxInput").val(jm("#areaBoxInput").val()+"-"+e),jm("#areaBoxInput").attr("lastArea","-"+e),jm("#areaBoxInput").attr("lastAreaType","thd"),jm("#areaBoxInput").attr("area3",t),jm("#areaBox2").hide(),jm("#areaBoxClose").click()})},Mobi.modifyListener=function(e,t){if(Mobi.logDog(201296,4),!Fai.top._manageMode){jm(".modifyArea li").click(function(e,t){"myForm"==jm(this).attr("id")&&Mobi.logDog(201296,5),document.body.scrollTop=0,document.documentElement.scrollTop=0;var i=jm(this).find(".itemName").html();if("0"!==jm(this).attr("orderlist")){if(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3&&!Fai.top._openThemeV3&&jm(".form .loginHeader").show(),"1"===jm(this).attr("orderlist"))return Mobi.changeBackgroundToWhite(),Mobi.readBulletin(),Fai.top._profile&&jm("#mBulletinConten").find(".title").html(i),void Mobi.cusHistory.add("latestNews",t,1,"#latestNews");if("myForm"!==jm(this).attr("id"))if("password"===jm(this).attr("id"))jm("#profile").hide(),jm("#modifyPsw").show(),Fai.top._profile&&jm("#password").find(".title").html(i),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("password",t,1,"#password");else if("consigneeInfo"===jm(this).attr("id"))jm("#addrInfoList").find(".title").html(i),jm("#profile").hide(),jm("#addrInfoList").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("consigneeInfo",t,1,"#consigneeInfo");else if("personalInfo"===jm(this).attr("id"))jm("#modifyPersInfo").find(".title").html(i),jm("#profile").hide(),jm("#modifyPersInfo").show(),Fai.top._openThemeV3&&(Mobi.initMemberMsgHeadPicV3(Fai.top.msgHeadPic),Mobi.changeSelectDefaultColor("#c4c9ca","#333333",".jz_themeV3 #modifyPersInfo select"),Mobi.changeSelectDefaultColor("#c4c9ca","#333333",".jz_themeV3 #modifyPersInfo .mobileLine"),Mobi.initPersInfo(),Fai.top._profile||Mobi.selectOverflow(Fai.top.selectAry)),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("personalInfo",t,1,"#personalInfo"),setTimeout(function(){jm(".memberMsgHeadPicV3").hide(),jm(".memberMsgHeadPicV3").show()},0);else if("cutPrice"===jm(this).attr("id"))jm("#modifyCutPrice").find(".title").html(i),jm("#profile").hide(),jm("#modifyCutPrice").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("cutPrice",t,1,"#cutPrice");else if("groupBuy"===jm(this).attr("id"))Mobi.logDog(200891,1),jm("#modifyGroupBuy").find(".title").html(i),jm("#profile").hide(),jm("#modifyGroupBuy").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("groupBuy",t,1,"#groupBuy"),Mobi.logDog(200891,2);else{if("promoter"===jm(this).attr("id"))return Mobi.changeBackgroundToWhite(),void Mobi.cusHistory.add("promoter",t,1,"#promoter");if("dist"===jm(this).attr("id"))return Mobi.changeBackgroundToWhite(),void Mobi.cusHistory.add("dist",t,1,"#dist");if("integral"===jm(this).attr("id"))jm("#modifyIntegral").find(".title").html(i),jm("#profile").hide(),jm("#modifyIntegral").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("integral",t,1,"#integral"),Mobi.logDog(200751,8);else if("collection"===jm(this).attr("id"))jm("#modifyCollection").find(".title").html(i),jm("#profile").hide(),jm("#modifyCollection").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("collection",t,1,"#collection");else if("coupon"===jm(this).attr("id")){if(jm("#modifyCoupon").find(".title").html(i),jm("#profile").hide(),jm("#modifyCoupon").show(),Mobi.cusHistory.add("coupon",t,1,"#coupon"),Mobi.isGiveCoupon){Mobi.logDog(201475,3),Mobi.isGiveCoupon=!1,jm("#coupon").find(".couponTips").hide();var o=jm("#memberPropertyArea");o.length>0&&o.find(".memberCouponTips").hide(),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=lookCoupon",data:"",error:function(){},success:function(e){jm.parseJSON(e).success}})}}else{if("changeOtherLoginAcct"===jm(this).attr("id"))return Mobi.changeBackgroundToWhite(),void(Fai.top._profile&&jm("#bindOtherAcct").find(".title").html(i));if("knowPayment"===jm(this).attr("id"))i=jm(this).find(".itemName span").html(),jm("#knowPayList").find(".title").html(i),jm("#profile").hide(),jm("#knowPayList").show(),Mobi.changeBackgroundToWhite(),Mobi.loadKnowPayList();else if("logout"===jm(this).attr("id"));else{var n=jm(this).find(".itemText").html();jm("#profile").hide(),jm("#modifyProfile").show(),jm("#modifyProfile").find(".title").html(i),jm("#profileValue").val(jm.decodeHtml(n)),jm("#profileValue").attr("name",jm(this).attr("id")),jm("#profileValue").attr("ismust",jm(this).attr("ismust")),Mobi.revertBackground()}}}else{var a=jm(this).find(".itemName span").html();Mobi.loadFormList(a)}}}),jm(".J_memberJumpToMsg").click(function(e,t){jm("#modifyPersInfo").find(".title").html("个人资料"),jm("#profile").hide(),jm("#modifyPersInfo").show(),Fai.top._openThemeV3&&(Mobi.initMemberMsgHeadPicV3(Fai.top.msgHeadPic),Mobi.changeSelectDefaultColor("#c4c9ca","#333333",".jz_themeV3 #modifyPersInfo select"),Mobi.changeSelectDefaultColor("#c4c9ca","#333333",".jz_themeV3 #modifyPersInfo .mobileLine"),Mobi.initPersInfo(),Fai.top._profile||Mobi.selectOverflow(Fai.top.selectAry)),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("memberHeadPicV3",t,1,"#memberHeadPicV3"),setTimeout(function(){jm(".memberMsgHeadPicV3").hide(),jm(".memberMsgHeadPicV3").show()},0)}),new Mobi.memberHeadPic(e,t).init(),Mobi.cusHistory.init(),"true"==jm.getCookie("showIntegral")&&(jm("#integral").click(),jm.setCookie("showIntegral",""));var i=jm("#coupon");if(i.length>0&&Mobi.isGiveCoupon)i.find(".itemName").append("<span class='couponTips'></span>");var o=jm("#memberPropertyArea");if(o.length>0&&Mobi.isGiveCoupon)o.find(".memberPropertyItem").each(function(e,t){"我的优惠券"==jm(this).find(".memberPropertyItemName").text()&&jm(this).append("<span class='memberCouponTips'></span>")})}},Mobi.persInfoChangeMobileCt=function(){var e=jm("#modifyPersInfo #mobileCt").val(),t=jm("#modifyPersInfo #mobileCt").find("option[value='"+e+"']").html();e&&jm("#modifyPersInfo .mobileCtVal").html(t.substring(t.indexOf("+")))},Mobi.persInfoChangeMobileCtForMallThemeV3=function(){var e=jm("#memberInfoItemEdit #mobileCt").val(),t=jm("#memberInfoItemEdit #mobileCt").find("option[value='"+e+"']").html();e&&jm("#memberInfoItemEdit .mobileCtVal").html(t.substring(t.indexOf("+")))},Mobi.signUpPersInfoChangeMobileCt=function(e){var t=jm("#signupPage #mobileCt").val(),i=jm("#signupPage #mobileCt").find("option[value='"+t+"']").html();return jm("#signupPage .selectCover").html(i.substring(i.indexOf("+"))),jm(e).siblings(".mobileCtIcon").hasClass("selectAnimationRemove")?(jm(e).siblings(".mobileCtIcon").addClass("selectAnimation"),jm(e).siblings(".mobileCtIcon").addClass("hadChangeClass"),jm(e).siblings(".mobileCtIcon").removeClass("selectAnimationRemove"),jm(e).siblings(".mobileCtIcon").find(".icon-downward").css({transform:"rotate(-180deg)","-webkit-transform":"rotate(-180deg)","-ms-transform":"rotate(-180deg)","-moz-transform":"rotate(-180deg)","-o-transform":"rotate(-180deg)"})):jm(e).siblings(".mobileCtIcon").hasClass("selectAnimation")&&(jm(e).siblings(".mobileCtIcon").addClass("selectAnimationRemove"),jm(e).siblings(".mobileCtIcon").addClass("hadChangeClass"),jm(e).siblings(".mobileCtIcon").removeClass("selectAnimation"),jm(e).siblings(".mobileCtIcon").find(".icon-downward").css({transform:"rotate(0deg)","-webkit-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)","-moz-transform":"rotate(0deg","-o-transform":"rotate(0deg)"})),!1},Mobi.clickEditMobile=function(e,t){t?(jm("#modifyPersInfo").hide(),jm("#editMobilePanel").show()):(jm("#editMobile").show(),jm(jm(e).parents(".g_globalLine_wrap")[0]).hide())},Mobi.fillPersInfoChangeMobileCt=function(){var e=jm("#fillAcctInfo #mobileCt").val(),t=jm("#fillAcctInfo #mobileCt").find("option[value='"+e+"']").html();jm("#fillAcctInfo .selectCover").html(t.substring(t.indexOf("+")))},Mobi.mSignUpPersInfoChangeMobileCt=function(){var e=jm("#mSignUp #mobileCt").val(),t=jm("#mSignUp #mobileCt").find("option[value='"+e+"']").html();jm("#mSignUp .selectCover").html(t.substring(t.indexOf("+")))},Mobi.profileLogout=function(e,t){t||(t=e);var i={textClass:"confirm",content:LS.onLogout,callback:function(){Mobi.onLogout("login.jsp?returnUrl="+jm.encodeUrl(t))}};Mobi.prompt(i)},Mobi.profileLogoutV3=function(e,t){t||(t=e);var i={textClass:"confirm",content:LS.onLogoutV3,callback:function(){Mobi.onLogout("login.jsp?returnUrl="+jm.encodeUrl(t))}};Mobi.prompt(i)},Mobi.loadPdCollectionList=function(e,t){this.pIdList=t,this.mid=e,this.panel=jm("#modifyCollection")},function(e,t,i){var o,n,a,r,s=Mobi.loadPdCollectionList.prototype,l=10,c=[];function d(){0==n.length&&a.find(".profileContent").html("<div class='noCollIcon'></div><div class='noCollTip'>"+LS.notCollect+"</div>")}function m(t){e.ajax({url:"ajax/product_h.jsp",data:{cmd:"batchGetPd",ids:e.toJSON(t)},async:!1,type:"POST",dataType:"json",success:function(t){var i,o;t.success&&(i=t.list,o=[],e.each(i,function(t,i){var n,a,r,s=(n=i.lid,r=!1,e.each(c,function(e,t){n==t.lid&&(r=!0,a=t)}),r||(a=function(t){var i={lid:t};return e.ajax({url:"ajax/productProp_h.jsp?cmd=list&lid="+t,async:!1,type:"POST",dataType:"json",success:function(t){if(t.success){var o=!1;e.each(t.list,function(e,t){"mallPrice"==t.fieldKey&&(o=!0)}),i.showPrice=o,c.push(i)}}}),i}(n)),a);o.push("<li>"),o.push('  <div class="pdImg">'),i.isShowKnowPayLabelText&&o.push('<span class="quality_content_label">'.concat(i.knowPayLabelText,"</span>")),o.push('      <a href="javascript:;" _href="pd.jsp?pid='+i.id+'&returnUrl=profile.jsp">'),o.push('          <img src="'+i.picPath+'" />'),o.push("      </a>"),o.push("  </div>  "),o.push('  <div class="pdName">'+i.name+"</div>"),-1!=i.mallPrice&&s.showPrice&&o.push('  <div class="pdPrice"><div class="mallPrice">￥ '+i.mallPrice+"</div></div>"),o.push('  <div class="cancelCollection" data-id="'+i.id+'">'+LS.cancelCollect+"</div>"),o.push("</li>")}),a.find(".collectionList").append(o.join("")))}})}s.init=function(){if(n=this.pIdList,a=this.panel,o=this.mid,0!=n.length){e.post("ajax/product_h.jsp",{mid:o,cmd:"updateCollections",ids:e.toJSON(n)},function(e){e.success&&(n=e.list)},"json");var t=n.slice(0,l);r=t.length,m(t),function(){if(Mobi.onTouchAndClickEvent(".cancelCollection",function(t){var i=e(this),s={textClass:"confirm",content:LS.sureCancelCollect,callback:function(){var t=i.attr("data-id"),s=n.indexOf(Number(t));if(s>-1&&n.splice(s,1),function(t){var i=!1;return e.ajax({url:"ajax/member_h.jsp?cmd=setMemberCollection",data:"mid="+o+"&pid="+t+"&collection=false",type:"POST",async:!1,dataType:"json",success:function(e){e.success&&(i=!0)}}),i}(t)&&(r--,i.parents("li").remove()),a.find(".collectionList li").length<6&&n.length>r){var c=n.slice(r,r+l);r+=c.length,c.length>0&&m(c)}d(),e("#mobiPrompt").remove(),e("#mobiPrompt_Bg").remove()}};Mobi.prompt(s)}),e(".pdName,.pdPrice,.pdImg").click(function(){var t=e(this).parent().find("a").attr("_href");location.href=t,e.setCookie("_fromCollect",!0)}),e(window).on("scroll",function(){if(n.length>r){var t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);if(e(window)[0].scrollY+e(window).height()+100>=t){var i=n.slice(r,r+l);r+=i.length,i.length>0&&m(i)}}}),e.getCookie("_openCollect")){var t=e("#collection").find(".itemName").html();e("#modifyCollection").find(".title").html(t),e("#profile").hide(),e("#modifyCollection").show(),e.setCookie("_openCollect","",-1)}}()}else d()}}(jm),Mobi.loadItg=function(e,t,i,o){e<=0&&(location.href="login.jsp?errno=11");var n=jm(".itgPanel"),a="<div class='whole_top'><div class='top_container webHeaderBg'><img style='position:absolute;top:0;' src='"+Fai.top._resImageRoot+"/image/v2/integralHead.png'></img><div class='credit_points'></div><div class='widget'>"+t+"</div>";o&&(a+="<div id='itgRuleForward' class='itgRuleForward'>"+i+"</div>"),a+="</div><div class='nav_container'><div class='nav'><div class='all item'>"+LS.productScreenAll+"</div><div class='income item'>"+LS.itg_income+"</div><div class='spend item'>"+LS.itg_spend+"</div></div><div class='underline g_bgColor'></div></div></div><div class='no_itg'><div class='img'></div><div class='txt'>"+LS.itg_notYet+" "+t+"~</div></div><div class='list'></div>",n.append(a),jm(".item").on("click",function(){var e=0==jm(".item.checked").length;jm(this).hasClass("checked")||(jm(".item").removeClass("checked"),jm(this).addClass("checked"),jm(this).hasClass("all")?(r=0,jm(".nav_container .underline").css("left","2.2rem"),e||Mobi.logDog(200751,4)):jm(this).hasClass("income")?(r=1,jm(".nav_container .underline").css("left","7.57rem"),Mobi.logDog(200751,5)):(r=2,jm(".nav_container .underline").css("left","12.9rem"),Mobi.logDog(200751,6)),jm(".list").empty(),function e(t,i){t<=s&&jm.ajax({url:"ajax/member_h.jsp?cmd=getIntegralInfo",data:"page="+t+"&type="+i,success:function(o){if(i==r){o=jm.parseJSON(o),rtData=o.rtData,jm(".credit_points").text(rtData.currentItg),s=rtData.maxPage;var n="";0==t&&0==rtData.itgList.length?jm(".no_itg").css("display","flex"):jm(".no_itg").hide(),jm(rtData.itgList).each(function(e,t){n+="<div class='itg_container'>",1==t.type?(n+="<div class='a_itg a_itg_order' onclick='window.location.href=\"mdetail.jsp?id="+t.orderId+"\"'>",n+="<div class='left'>",n+="<div class='top'>"+t.detail+"</div>",n+="<div class='middle'>"+t.orderCode+"</div>",n+="<div class='bottom'>"+t.createTime+"</div>",n+="</div>",0==t.operate?n+="<div class='right income'>"+t.alterNum+"</div>":n+="<div class='right expenses'>"+t.alterNum+"</div>",n+="</div>"):(n+="<div class='a_itg'>",n+="<div class='left'>",n+="<div class='top'>"+t.detail+"</div>",n+="<div class='bottom'>"+t.createTime+"</div>",n+="</div>",0==t.operate?n+="<div class='right income'>"+t.alterNum+"</div>":n+="<div class='right expenses'>"+t.alterNum+"</div>",n+="</div>"),n+="</div>"}),t<s&&1!=s&&(n+="<div class='loadMore'>点击加载更多</div>"),jm(".list").append(n),jm(".loadMore").on("click",function(){t<=s&&e(t+=1,i),jm(this).remove()})}}})}(0,r))});var r=0,s=0;jm(".all").click(),jm("#itgRuleForward").click(function(e,t){jm("#modifyIntegralRule").find(".title").html(i),jm("#modifyIntegral").hide(),jm("#modifyIntegralRule").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("itgRuleForward",t,1,"#itgRuleForward"),Mobi.logDog(201094,14)}),Mobi.logDog(200751,10)},Mobi.loadCutPriceList=function(e){e<=0&&(location.href="login.jsp?errno=11"),jm.ajax({url:"ajax/cutPrice_h.jsp?cmd=getCutPriceByMid",data:"mid="+e,success:function(e){e=jm.parseJSON(e),function(e,o,n){"    <div class='cpPanelText'>","        <div class='cpPanelChoose' id='cpAllHeader'>全部</div>","        <div class='cpPanelChoose' id='cpOngoingHeader'>进行中</div>","        <div class='cpPanelChoose' id='cpEndedHeader'>已结束</div>","    </div>","    <div class='cpUnderline g_bgColor g_main_bgColor_v3'></div>","</div>",t.append("<div class='cpPanelHeader'>    <div class='cpPanelText'>        <div class='cpPanelChoose' id='cpAllHeader'>全部</div>        <div class='cpPanelChoose' id='cpOngoingHeader'>进行中</div>        <div class='cpPanelChoose' id='cpEndedHeader'>已结束</div>    </div>    <div class='cpUnderline g_bgColor g_main_bgColor_v3'></div></div>"),function(e,o,n){var a="<div class='cpListContent'>";if(a+="    <div class='cpList' id='cpAll' style='display: block;'><div class='cpEmpty'><div class='cpEmptyIcon'></div><div class='cpEmptyText'>你还没有砍价记录哦~</div></div></div>",a+="    <div class='cpList' id='cpOngoing' style='display: none;'><div class='cpEmpty'><div class='cpEmptyIcon'></div><div class='cpEmptyText'>你还没有砍价记录哦~</div></div></div>",a+="    <div class='cpList' id='cpEnded' style='display: none;'><div class='cpEmpty'><div class='cpEmptyIcon'></div><div class='cpEmptyText'>你还没有砍价记录哦~</div></div></div>",a+="</div>",t.append(a),0!=e.length){jm("#cpAll").empty();var a="";jm(e).each(function(){var e=i(this);a+=e}),jm("#cpAll").append(a)}if(0!=o.length){jm("#cpOngoing").empty();var a="";jm(o).each(function(){var e=i(this);a+=e}),jm("#cpOngoing").append(a)}if(0!=n.length){jm("#cpEnded").empty();var a="";jm(n).each(function(){var e=i(this);a+=e}),jm("#cpEnded").append(a)}}(e,o,n),jm("#cpAllHeader").click(function(){jm(".cpUnderline").css("left","1.55rem"),jm(".cpList").hide(),jm("#cpAll").show()}),jm("#cpOngoingHeader").click(function(){jm(".cpUnderline").css("left","6.8rem"),jm(".cpList").hide(),jm("#cpOngoing").show()}),jm("#cpEndedHeader").click(function(){jm(".cpUnderline").css("left","12.2rem"),jm(".cpList").hide(),jm("#cpEnded").show()})}(jm.parseJSON(e.all),jm.parseJSON(e.ongoing),jm.parseJSON(e.ended))}});var t=jm(".cutPriceListPanel");function i(e){var t="<div class='cpRecord' onclick='Mobi.jumpToCutPriceDetail("+e.cutPriceId+", "+e.id+", "+e.pdChoice.pid+")'>";1==e.status?t+="   <div class='cpStatusIcon cpSucc'></div>":2==e.status&&(t+="   <div class='cpStatusIcon cpFail'></div>"),t+="    <div class='cpPdImg' style='background-image: url("+e.productInfo.picPath+"); background-size: cover; background-repeat: no-repeat;'></div>",t+="    <div class='cpDetail'>",t+="        <div class='cpPdName'>"+jm.encodeHtml(e.productInfo.name)+"</div>";var i=e.cutPriceInfo.pdList,o=0;jm(i).each(function(){this.i==e.pdChoice.pid&&(o=this.p)});var n=356*((o-e.currentPrice)/(o-e.cutPriceInfo.minPrice))/40;return t+="        <div class='cpPro'>",2==e.status?(t+="        <div class='cpRecProBar' style='background-color: #f2f2f2; opacity: 1;'></div>",t+="        <div class='cpActualRecProBar' style='width: "+n+"rem; background-color: #ddd; opacity: 1;'></div>"):(t+="        <div class='cpRecProBar g_bgColor g_main_bgColor_v3'></div>",t+="        <div class='cpActualRecProBar g_bgColor g_main_bgColor_v3' style='width: "+n+"rem;'></div>"),t+="        </div>",t+="        <div class='cpCurPrice'>已砍至"+Fai.top.choiceCurrencyVal+e.currentPrice.toFixed(2)+"</div>",t+="        <div class='cpPrice'>",t+="            <div class='cpMinPriceTxt'>底价：</div>",t+="            <div class='cpMinPriceVal g_mainColor g_main_color_v3'>"+Fai.top.choiceCurrencyVal+e.cutPriceInfo.minPrice.toFixed(2)+"</div>",t+="        </div>",t+="    </div>",t+="</div>"}},Mobi.loadGroupBuyListV3=function(e){if(!(e<=0)){jm.ajax({url:"ajax/mall_h.jsp?cmd=getGroupBuyByMid",data:"mid="+e,success:function(e){var o=(e=jm.parseJSON(e)).orderList;!function(e,o,n){"    <div class='gbPanelText'>","        <div class='gbPanelChoose' id='gbAllHeader'>全部</div>","        <div class='gbPanelChoose' id='gbOngoingHeader'>进行中</div>","        <div class='gbPanelChoose' id='gbEndedHeader'>已结束</div>","    </div>","    <div class='gbUnderline g_bgColor g_main_bgColor_v3'></div>","</div>",t.append("<div class='gbPanelHeader'>    <div class='gbPanelText'>        <div class='gbPanelChoose' id='gbAllHeader'>全部</div>        <div class='gbPanelChoose' id='gbOngoingHeader'>进行中</div>        <div class='gbPanelChoose' id='gbEndedHeader'>已结束</div>    </div>    <div class='gbUnderline g_bgColor g_main_bgColor_v3'></div></div>"),function(e,o,n){var a="<div class='gbListContent'>";if(a+="    <div class='gbList' id='gbAll' style='display: block;'><div class='gbEmpty'><div class='gbEmptyIcon'></div><div class='gbEmptyText'>暂无拼团记录</div></div></div>",a+="    <div class='gbList' id='gbOngoing' style='display: none;'><div class='gbEmpty'><div class='gbEmptyIcon'></div><div class='gbEmptyText'>暂无拼团记录</div></div></div>",a+="    <div class='gbList' id='gbEnded' style='display: none;'><div class='gbEmpty'><div class='gbEmptyIcon'></div><div class='gbEmptyText'>暂无拼团记录</div></div></div>",a+="</div>",t.append(a),0!=e.length){jm("#gbAll").empty();var a="";jm(e).each(function(){var e=i(this);a+=e}),jm("#gbAll").append(a)}if(0!=o.length){jm("#gbOngoing").empty();var a="";jm(o).each(function(){var e=i(this);a+=e}),jm("#gbOngoing").append(a)}if(0!=n.length){jm("#gbEnded").empty();var a="";jm(n).each(function(){var e=i(this);a+=e}),jm("#gbEnded").append(a)}}(e,o,n),jm("#gbAllHeader").click(function(){jm(".gbUnderline").css("left","1.55rem"),jm(".gbList").hide(),jm("#gbAll").show()}),jm("#gbOngoingHeader").click(function(){jm(".gbUnderline").css("left","6.8rem"),jm(".gbList").hide(),jm("#gbOngoing").show()}),jm("#gbEndedHeader").click(function(){jm(".gbUnderline").css("left","12.2rem"),jm(".gbList").hide(),jm("#gbEnded").show()})}(o,o.filter(function(e){return 0==e.groupBuyDetail.status}),o.filter(function(e){return 5==e.groupBuyDetail.status||6==e.groupBuyDetail.status}))}});var t=jm(".groupBuyListPanel")}function i(e){var t="<div class='gbRecord' onclick='Mobi.jumpToGroupBuyDetail("+e.groupBuyId+", "+e.groupBuyDetailId+")'>";return 5==e.groupBuyDetail.status?t+="<div class='gbStatusIcon gbSucc'></div>":6==e.groupBuyDetail.status&&(t+="<div class='gbStatusIcon gbFail'></div>"),t+="<div class='gbPdInfo'>",t+="<div class='upper'>",t+="<div class='gbPdImg' style='background-image: url("+e.productInfo.picPath+"); background-size: cover; background-repeat: no-repeat;'></div>",t+="<div class='gbDetail'>",t+="<div class='gbPdName'>"+jm.encodeHtml(e.productInfo.name)+"</div>",t+="<div class='gbPdPrice g_main_color_v3'>",t+="<div class='plaque g_main_bgColor_v3'>"+e.groupBuyDetail.groupNum+"人团</div>",t+=Fai.top.choiceCurrencyVal+e.price,t+="</div>",t+="</div>",t+="</div>",t+="<div class='under'>",0==e.groupBuyDetail.status?t+="<div class='indicator g_main_color_v3'>拼团中</div>":t+="<div class='indicator'></div>",t+="<div class='btnPanel'>",t+="<div class='orderBtn btn' onclick='Mobi.logDog(200891, 3);event.stopPropagation(); window.location.href=\"mdetail.jsp?id="+e.id+"\"'>订单详情</div>",t+="<div class='gbBtn btn'>拼团详情</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>"}},Mobi.loadGroupBuyList=function(e){e<=0&&(location.href="login.jsp?errno=11"),jm.ajax({url:"ajax/mall_h.jsp?cmd=getGroupBuyByMid",data:"mid="+e,success:function(e){var o=(e=jm.parseJSON(e)).orderList;!function(e,o,n){"    <div class='gbPanelText'>","        <div class='gbPanelChoose' id='gbAllHeader'>全部</div>","        <div class='gbPanelChoose' id='gbOngoingHeader'>进行中</div>","        <div class='gbPanelChoose' id='gbEndedHeader'>已结束</div>","    </div>","    <div class='gbUnderline g_bgColor g_main_bgColor_v3'></div>","</div>",t.append("<div class='gbPanelHeader'>    <div class='gbPanelText'>        <div class='gbPanelChoose' id='gbAllHeader'>全部</div>        <div class='gbPanelChoose' id='gbOngoingHeader'>进行中</div>        <div class='gbPanelChoose' id='gbEndedHeader'>已结束</div>    </div>    <div class='gbUnderline g_bgColor g_main_bgColor_v3'></div></div>"),function(e,o,n){var a="<div class='gbListContent'>";if(a+="    <div class='gbList' id='gbAll' style='display: block;'><div class='gbEmpty'><div class='gbEmptyIcon'></div><div class='gbEmptyText'>暂无拼团记录</div></div></div>",a+="    <div class='gbList' id='gbOngoing' style='display: none;'><div class='gbEmpty'><div class='gbEmptyIcon'></div><div class='gbEmptyText'>暂无拼团记录</div></div></div>",a+="    <div class='gbList' id='gbEnded' style='display: none;'><div class='gbEmpty'><div class='gbEmptyIcon'></div><div class='gbEmptyText'>暂无拼团记录</div></div></div>",a+="</div>",t.append(a),0!=e.length){jm("#gbAll").empty();var a="";jm(e).each(function(){var e=i(this);a+=e}),jm("#gbAll").append(a)}if(0!=o.length){jm("#gbOngoing").empty();var a="";jm(o).each(function(){var e=i(this);a+=e}),jm("#gbOngoing").append(a)}if(0!=n.length){jm("#gbEnded").empty();var a="";jm(n).each(function(){var e=i(this);a+=e}),jm("#gbEnded").append(a)}}(e,o,n),jm("#gbAllHeader").click(function(){jm(".gbUnderline").css("left","1.55rem"),jm(".gbList").hide(),jm("#gbAll").show()}),jm("#gbOngoingHeader").click(function(){jm(".gbUnderline").css("left","6.8rem"),jm(".gbList").hide(),jm("#gbOngoing").show()}),jm("#gbEndedHeader").click(function(){jm(".gbUnderline").css("left","12.2rem"),jm(".gbList").hide(),jm("#gbEnded").show()})}(o,o.filter(function(e){return 0==e.groupBuyDetail.status}),o.filter(function(e){return 5==e.groupBuyDetail.status||6==e.groupBuyDetail.status}))}});var t=jm(".groupBuyListPanel");function i(e){var t="<div class='gbRecord' onclick='Mobi.jumpToGroupBuyDetail("+e.groupBuyId+", "+e.groupBuyDetailId+")'>";return 5==e.groupBuyDetail.status?t+="<div class='gbStatusIcon gbSucc'></div>":6==e.groupBuyDetail.status&&(t+="<div class='gbStatusIcon gbFail'></div>"),t+="<div class='gbPdInfo'>",t+="<div class='upper'>",t+="<div class='gbPdImg' style='background-image: url("+e.productInfo.picPath+"); background-size: cover; background-repeat: no-repeat;'></div>",t+="<div class='gbDetail'>",t+="<div class='gbPdName'>"+jm.encodeHtml(e.productInfo.name)+"</div>",t+="<div class='gbPdPrice g_mainColor'>",t+="<div class='plaque g_bgColor'>"+e.groupBuyDetail.groupNum+"人团</div>",t+=Fai.top.choiceCurrencyVal+e.price,t+="</div>",t+="</div>",t+="</div>",t+="<div class='under'>",0==e.groupBuyDetail.status?t+="<div class='indicator g_mainColor'>拼团中</div>":t+="<div class='indicator'></div>",t+="<div class='btnPanel'>",t+="<div class='orderBtn btn' onclick='Mobi.logDog(200891, 3);event.stopPropagation(); window.location.href=\"mdetail.jsp?id="+e.id+"\"'>订单详情</div>",t+="<div class='gbBtn btn'>拼团详情</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>"}},Mobi.loadItgV3=function(e,t,i,o){if(!(e<=0)){var n=jm(".itgPanel"),a="<div class='whole_top'><div class='top_container'><div class='widget'>"+t+"</div><div class='top_bar g_bgColor g_main_bgColor_v3'><div class='credit_points'></div></div>";o&&(a+="<div id='itgRuleForward' class='itgRuleForward'>"+i+"</div>"),a+="</div><div class='nav_container'><div class='nav'><div class='all item'>"+LS.productScreenAll+"</div><div class='income item'>"+LS.itg_income+"</div><div class='spend item'>"+LS.itg_spend+"</div></div><div class='underline g_bgColor g_main_bgColor_v3'></div></div></div><div class='no_itg'><div class='img'></div><div class='txt'>"+LS.itg_notYet+" "+t+"~</div></div><div class='list'></div>",n.append(a),jm(".item").on("click",function(e){e=0==jm(".item.checked").length;jm(this).hasClass("checked")||(jm(".item").removeClass("checked"),jm(this).addClass("checked"),jm(this).hasClass("all")?(r=0,jm(".nav_container .underline").css("left","2.1rem"),e||Mobi.logDog(200751,4)):jm(this).hasClass("income")?(r=1,jm(".nav_container .underline").css("left","7.47rem"),Mobi.logDog(200751,5)):(r=2,jm(".nav_container .underline").css("left","12.8rem"),Mobi.logDog(200751,6)),jm(".list").empty(),function e(t,i){t<=s&&jm.ajax({url:"ajax/member_h.jsp?cmd=getIntegralInfo",data:"page="+t+"&type="+i,success:function(o){if(i==r){o=jm.parseJSON(o),rtData=o.rtData,jm(".credit_points").text(rtData.currentItg),s=rtData.maxPage;var n="";0==t&&0==rtData.itgList.length?jm(".no_itg").css("display","flex"):jm(".no_itg").hide(),jm(rtData.itgList).each(function(e,t){n+="<div class='itg_container'>",1==t.type?(n+="<div class='a_itg a_itg_order' onclick='window.location.href=\"mdetail.jsp?id="+t.orderId+"\"'>",n+="<div class='left'>",n+="<div class='top'>"+t.detail+"</div>",n+="<div class='middle'>"+t.orderCode+"</div>",n+="<div class='bottom'>"+t.createTime+"</div>",n+="</div>",0==t.operate?n+="<div class='right income'>"+t.alterNum+"</div>":n+="<div class='right expenses'>"+t.alterNum+"</div>",n+="</div>"):(n+="<div class='a_itg'>",n+="<div class='left'>",n+="<div class='top'>"+t.detail+"</div>",n+="<div class='bottom'>"+t.createTime+"</div>",n+="</div>",0==t.operate?n+="<div class='right income'>"+t.alterNum+"</div>":n+="<div class='right expenses'>"+t.alterNum+"</div>",n+="</div>"),n+="</div>"}),t<s&&1!=s&&(n+="<div class='loadMore'>点击加载更多</div>"),jm(".list").append(n),jm(".loadMore").on("click",function(){t<=s&&e(t+=1,i),jm(this).remove()})}}})}(0,r))});var r=0,s=0;jm(".all").click(),jm("#itgRuleForward").click(function(e,t){jm("#modifyIntegralRule").find(".title").html(i),jm("#modifyIntegral").hide(),jm("#modifyIntegralRule").show(),Mobi.changeBackgroundToWhite(),Mobi.cusHistory.add("itgRuleForward",t,1,"#itgRuleForward")}),Mobi.logDog(200751,10)}},Mobi.loadCutPriceListV3=function(e){if(!(e<=0)){jm.ajax({url:"ajax/cutPrice_h.jsp?cmd=getCutPriceByMid",data:"mid="+e,success:function(e){e=jm.parseJSON(e),function(e,o,n){"    <div class='cpPanelText'>","        <div class='cpPanelChoose' id='cpAllHeader'>全部</div>","        <div class='cpPanelChoose' id='cpOngoingHeader'>进行中</div>","        <div class='cpPanelChoose' id='cpEndedHeader'>已结束</div>","    </div>","    <div class='cpUnderline g_bgColor g_main_bgColor_v3 '></div>","</div>",t.append("<div class='cpPanelHeader'>    <div class='cpPanelText'>        <div class='cpPanelChoose' id='cpAllHeader'>全部</div>        <div class='cpPanelChoose' id='cpOngoingHeader'>进行中</div>        <div class='cpPanelChoose' id='cpEndedHeader'>已结束</div>    </div>    <div class='cpUnderline g_bgColor g_main_bgColor_v3 '></div></div>"),function(e,o,n){var a="<div class='cpListContent'>";if(a+="    <div class='cpList' id='cpAll' style='display: block;'><div class='cpEmpty'><div class='cpEmptyIcon'></div><div class='cpEmptyText'>你还没有砍价记录哦~</div></div></div>",a+="    <div class='cpList' id='cpOngoing' style='display: none;'><div class='cpEmpty'><div class='cpEmptyIcon'></div><div class='cpEmptyText'>你还没有砍价记录哦~</div></div></div>",a+="    <div class='cpList' id='cpEnded' style='display: none;'><div class='cpEmpty'><div class='cpEmptyIcon'></div><div class='cpEmptyText'>你还没有砍价记录哦~</div></div></div>",a+="</div>",t.append(a),0!=e.length){jm("#cpAll").empty();var a="";jm(e).each(function(){var e=i(this);a+=e}),jm("#cpAll").append(a)}if(0!=o.length){jm("#cpOngoing").empty();var a="";jm(o).each(function(){var e=i(this);a+=e}),jm("#cpOngoing").append(a)}if(0!=n.length){jm("#cpEnded").empty();var a="";jm(n).each(function(){var e=i(this);a+=e}),jm("#cpEnded").append(a)}}(e,o,n),jm("#cpAllHeader").click(function(){jm(".cpUnderline").css("left","1.55rem"),jm(".cpList").hide(),jm("#cpAll").show()}),jm("#cpOngoingHeader").click(function(){jm(".cpUnderline").css("left","6.8rem"),jm(".cpList").hide(),jm("#cpOngoing").show()}),jm("#cpEndedHeader").click(function(){jm(".cpUnderline").css("left","12.2rem"),jm(".cpList").hide(),jm("#cpEnded").show()})}(jm.parseJSON(e.all),jm.parseJSON(e.ongoing),jm.parseJSON(e.ended))}});var t=jm(".cutPriceListPanel")}function i(e){var t="<div class='cpRecord' onclick='Mobi.jumpToCutPriceDetail("+e.cutPriceId+", "+e.id+", "+e.pdChoice.pid+")'>";1==e.status?t+="   <div class='cpStatusIcon cpSucc'></div>":2==e.status&&(t+="   <div class='cpStatusIcon cpFail'></div>"),t+="    <div class='cpPdImg' style='background-image: url("+e.productInfo.picPath+"); background-size: cover; background-repeat: no-repeat;'></div>",t+="    <div class='cpDetail'>",t+="        <div class='cpPdName'>"+jm.encodeHtml(e.productInfo.name)+"</div>";var i=e.cutPriceInfo.pdList,o=0;jm(i).each(function(){this.i==e.pdChoice.pid&&(o=this.p)});var n=356*((o-e.currentPrice)/(o-e.cutPriceInfo.minPrice))/40;return t+="        <div class='cpPro'>",2==e.status?(t+="        <div class='cpRecProBar' style='background-color: #f2f2f2; opacity: 1;'></div>",t+="        <div class='cpActualRecProBar' style='width: "+n+"rem; background-color: #ddd; opacity: 1;'></div>"):(t+="        <div class='cpRecProBar g_bgColor g_main_bgColor_v3'></div>",t+="        <div class='cpActualRecProBar g_bgColor g_main_bgColor_v3' style='width: "+n+"rem;'></div>"),t+="        </div>",t+="        <div class='cpCurPrice'>已砍至"+Fai.top.choiceCurrencyVal+e.currentPrice.toFixed(2)+"</div>",t+="        <div class='cpPrice'>",t+="            <div class='cpMinPriceTxt'>底价：</div>",t+="            <div class='cpMinPriceVal g_mainColor g_main_color_v3'>"+Fai.top.choiceCurrencyVal+e.cutPriceInfo.minPrice.toFixed(2)+"</div>",t+="        </div>",t+="    </div>",t+="</div>"}},Mobi.jumpToCutPriceDetail=function(e,t,i){var o="cpDetail.jsp?cpId="+e+"&cpDetailId="+t+"&pdId="+i+"&isInit=true";location.href=o},Mobi.jumpToGroupBuyDetail=function(e,t){Mobi.logDog(200891,4);var i="gbDetail.jsp?gbId="+e+"&gbDetailId="+t;location.href=i},Mobi.initWithDrawBorder=function(){var e=jm(".withdrawPanel .withdrawBtn").css("color");Fai.top._openThemeV3?jm(".withdrawPanel .withdrawBtn").css("border-width","1px").css("border-style","solid").addClass("g_main_bdColor_v3"):jm(".withdrawPanel .withdrawBtn").css("border","1px solid "+e)},Mobi.bindPromoterAndInvite=function(){var e=window.location.href,t=Mobi.getUrlParam(e,"promoteMemberId"),i=0,o=0,n=!1;0!=(t=parseInt(t)||0)&&t!=Fai.top.sessionMemberId?(jm.cookie("promoteMemberId",t,{path:"/"}),jm.cookie("invitePromoterId",t,{path:"/"})):0==t&&(t=jm.getCookie("promoteMemberId")||0,i=1);var a=Mobi.getUrlParam(e,"invitePromoterId");0!=(a=parseInt(a)||0)?(jm.cookie("promoteMemberId",a,{path:"/"}),jm.cookie("invitePromoterId",a,{path:"/"})):(a=jm.getCookie("invitePromoterId")||0,o=1),0!=t?Mobi.bindPromoterWhenEnter(t,i,o,n):0!=a&&(n=!0,Mobi.bindPromoterWhenEnter(a,i,o,n))},Mobi.initPromoterWelcome=function(e){if(4==e&&!localStorage.getItem("isFirstEnterPromoter"))return e=0,void(location.href="promoterIndex.jsp");localStorage.removeItem("isFirstEnterPromoter"),1==e?Mobi.logDog(200808,7):2==e?Mobi.logDog(200808,8):3==e&&Mobi.logDog(200808,9),jm("#J_statusType"+e).show(),jm(".J_applyPromoter").bind("click",function(){jm.ajax({url:"ajax/promoter_h.jsp?cmd=applyToPromoter",success:function(e){if((e=jm.parseJSON(e)).success)localStorage.setItem("isFirstEnterPromoter",!0),jm(".J_statusTypeAll").hide(),jm("#J_statusType2").show();else{if(-23==e.rt)return void(location.href="login.jsp?returnUrl="+jm.encodeUrl(location.href));jm(".J_statusTypeAll").hide(),jm("#J_statusType3").show()}},fail:function(){jm(".J_statusTypeAll").hide(),jm("#J_statusType3").show()}})}),Fai.top._manageMode||jm(".J_goToPromoterIndex").bind("click",function(){var e=this;jm.ajax({url:"ajax/promoter_h.jsp?cmd=applyToPromoter",success:function(t){if((t=jm.parseJSON(t)).success){var i=jm(e).attr("ivmid")||0;location.href="promoterIndex.jsp?invitePromoterId="+i,Mobi.logDog(200578,0)}else if(-23==t.rt)return void(location.href="login.jsp?returnUrl="+jm.encodeUrl(location.href))}})})},Mobi.bindPromoterWhenEnter=function(e,t,i,o){jm.ajax({url:"ajax/promoter_h.jsp?cmd=bindPromoteMember",data:"promoteMemberId="+e+"&pmSource="+t+"&ivSource="+i+"&isInvite="+o,async:!1,success:function(e){e=jm.parseJSON(e)}})},Mobi.loadPromoterForInvite=function(e,t){var i=jm(".webContainerBox");(i=jm(".webContainerBox")).css("top","0"),i.empty(),jm("#g_web").css("background","#f7f7f7"),jm("#webBannerBox").remove(),jm("#webFooterBox").remove(),jm("#fixedAreaBox").remove(),jm("#mallThemeHeader").remove();var o="";o+="<div class='promPoster'></div>",o+="<div class='promWelcomeTxt'>",o+="    <span class='promHeader'>推广规则</span>",o+="    <span class='promDivider g_bgColor g_main_bgColor_v3'></span>",o+="    <span class='promgibberish'>"+e+"</span>",o+="</div>",o+="<div class='promBtnWrapper'><div class='promInterBtn g_bgColor g_main_bgColor_v3' onclick='Mobi.enterPromoterCenter(-1);'>进入"+t+"中心</div></div>",i.append(o)},Mobi.jumptoCusDetail=function(e){window.location.href="promoterCustomerDetail.jsp?memberInfo="+e},Mobi.loadPromoterCus=function(){var e=document.body.offsetHeight,t=jm(".customerPanel"),i=0,o=0,n=0,a=[];function r(e,i){jm.ajax({url:"ajax/promoter_h.jsp?cmd=getCustomerDataByPage",data:{pageNo:e,memberInPmterStatus:i},success:function(e){if((e=jm.parseJSON(e)).success){var i=e.customerList||[];a=a.concat(i),o=e.totalPage,jm(".aCus").remove();var n=function(e){var t="";if(!e||0==e.length)return t+="<div class='promoEmpty promoCustomerEmpty'>",t+="   <div class='promoEmptyIcon'></div>",t+="   <div class='promoEmptyTxt'>暂无客户</div>",t+="   <div class='promoEmptyTxt'>赶快邀请好友成为你的客户吧~</div>",t+="</div>";return jm.each(e,function(e,i){i.expired?t+="<div class='aCus expired' onclick='Mobi.jumptoCusDetail(\""+encodeURIComponent(JSON.stringify(i))+"\")'>":t+="<div class='aCus' onclick='Mobi.jumptoCusDetail(\""+encodeURIComponent(JSON.stringify(i))+"\")'>",t+="\t\t<div class='imgWrapper'>",t+="\t\t\t<img src='"+i.headPicUrl+"'/>",t+="\t\t</div>",t+="\t\t<div class='name'>"+i.name+"</div>",i.expired&&(t+="<div class='expiredBadge' style='color: #fff !important;'>已失效</div>"),t+="\t\t<div class='trophy'>",t+="\t\t\t<div class='orderSum'>订单数量：<div class='num'>"+i.totalOrders+"</div></div>",t+="\t\t\t<div class='moneySum'>成交金额：<div class='num'>￥"+i.totalRevenue.toFixed(2)+"</div></div>",t+="\t\t\t<div class='shipSum'>(含运费：<div class='num'>￥"+i.totalShippingFee.toFixed(2)+"</div>)</div>",t+="\t\t</div>",t+="\t</div>"}),t}(a);t.append(n)}},error:function(){Mobi.logMonitor(6292,!0)}})}r(i,n),document.body.onscroll=function(t){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?jm(".promoteCusSelect").css("top",0):jm(".promoteCusSelect").css("top","2.25rem"),(document.body.scrollTop+e>=document.body.scrollHeight||document.documentElement.scrollTop+e>=document.body.scrollHeight)&&i<o&&r(i+=1,n)},jm(".promoteCusSwitch .switches .allCus").off().on("click",function(){jm(this).addClass("highlight"),jm(this).siblings().removeClass("highlight"),jm(".promoteCusSwitch .switchUnderline").css("left","1.4rem"),n=0,i=0,a=[],t.empty(),r(0,n)}),jm(".promoteCusSwitch .switches .effectCus").off().on("click",function(){jm(this).addClass("highlight"),jm(this).siblings().removeClass("highlight"),jm(".promoteCusSwitch .switchUnderline").css("left","6.48rem"),n=2,i=0,a=[],t.empty(),r(0,n)}),jm(".promoteCusSwitch .switches .invalidCus").off().on("click",function(){jm(this).addClass("highlight"),jm(this).siblings().removeClass("highlight"),jm(".promoteCusSwitch .switchUnderline").css("left","11.53rem"),n=1,i=0,a=[],t.empty(),r(0,n)})},Mobi.loadPromoOrders=function(e){Mobi.logDog(200578,4);var t=null,i=null,o=jm(".promoteOrdersLocater"),n="";n+="<div class=promoOrdersPageWrapper>",e?(n+="<div class='promoOrdersSwitch'>",n+="    <div class='switches'>",n+="        <div class='myOrders highlight'>自助推广</div>",n+="        <div class='othersOrders'>好友推广</div>",n+="    </div>",n+="    <div class='switchUnderline g_bgColor g_main_bgColor_v3'></div>",n+="</div>",jm.ajax({url:"ajax/promoter_h.jsp?cmd=getOrderList",data:"isInvite=false",async:!1,success:function(e){e=jm.parseJSON(e),t=e.rtData.orderList,n+=Mobi.createPromoOrderList(t,!0),e.success||Mobi.logMonitor(6292,!0)},error:function(){Mobi.logMonitor(6292,!0)}}),jm.ajax({url:"ajax/promoter_h.jsp?cmd=getOrderList",data:"isInvite=true",async:!1,success:function(e){e=jm.parseJSON(e),i=e.rtData.orderList,n+=Mobi.createPromoOrderList(i,!1),e.success||Mobi.logMonitor(6292,!0)},error:function(){Mobi.logMonitor(6292,!0)}})):jm.ajax({url:"ajax/promoter_h.jsp?cmd=getOrderList",data:"isInvite=false",async:!1,success:function(e){e=jm.parseJSON(e),t=e.rtData.orderList,n+=Mobi.createPromoOrderList(t,!0),e.success||Mobi.logMonitor(6292,!0)},error:function(){Mobi.logMonitor(6292,!0)}}),n+="</div>",o.append(n),jm(".promoOrderListWrapper.isMine").show(),e&&(jm(".switches .myOrders").off().on("click",function(){jm(this).addClass("highlight"),jm(this).siblings().removeClass("highlight"),jm(".promoOrdersSwitch .switchUnderline").css("left","3.95rem"),jm(".promoOrderListWrapper").hide(),jm(".promoOrderListWrapper.isMine").show()}),jm(".switches .othersOrders").off().on("click",function(){jm(this).addClass("highlight"),jm(this).siblings().removeClass("highlight"),jm(".promoOrdersSwitch .switchUnderline").css("left","11.15rem"),jm(".promoOrderListWrapper").hide(),jm(".promoOrderListWrapper.isOthers").show()})),Mobi.expandPromoOrderList(t),Mobi.expandPromoOrderList(i)},Mobi.modifyPageHeader=function(e,t,i,o){null==o&&(o=1);var n=jm("#modifyPromoter .loginHeader .g_close"),a=jm("<span class='g_close icon-gClose newPromoJumpBack"+o+"'></span>"),r=jm("#modifyPromoter .loginHeader .pageTitle"),s=r.text();o>1&&(n=jm(".newPromoJumpBack"+(o-1))),r.text(e),jm(a).insertAfter(n),jm(n).hide(),jm(a).click(function(){r.text(s),jm(t).hide(),jm(i).show(),jm(a).remove(),jm(n).show()})},Mobi.createPromoOrderList=function(e,t){var i="";return null!=e&&e.length>0?(i+=t?"<div class='promoOrderListWrapper isMine'>":"<div class='promoOrderListWrapper isOthers'>",jm.each(e,function(e,t){i+="<div class='aPromoOrder' id='"+t.orderCode+"'>",i+="    <div class='promoOrderHeader'>",i+="        <div>",i+="        <span class='orderCode'>订单编号："+t.orderCode+"</span>",t.isOwnOrder&&(i+="    <div class='ownOrderIcon'>自购</div>"),i+="        </div>",20==t.status?i+="    <span class='orderStatus finished'>"+t.orderStatus+"</span>":i+="    <span class='orderStatus'>"+t.orderStatus+"</span>",i+="    </div>",i+="    <div class='promoOrderBody'>",t.itemList.length>3?jm.each(t.itemList,function(e,t){i+=e>2?"<div class='aItem toHidden'>":2==e?"<div class='aItem anchor'>":"<div class='aItem'>",i+="        <div class='itemWrapper'>",i+="            <div class='itemImg'><img src='"+t.img+"' /></div>",i+="            <div class='itemInfo'>",i+="                <div class='itemNameAndOptions'>",i+="                    <div class='itemName'>"+jm.encodeHtml(t.tmpProductName)+"</div>",i+="                    <div class='itemOptions'>"+t.chooseOption+"</div>",i+="                </div>",i+="                <div class='itemPriceAndAmount'>",i+="                    <div class='itemPrice'>"+Fai.top.choiceCurrencyVal+t.price.toFixed(2)+"</div>",i+="                    <div class='itemAmount'>x"+t.amount+"</div>",i+="                </div>",i+="            </div>",i+="        </div>",i+="    </div>",i+="    <div class='itemSeparateLine'></div>"}):jm.each(t.itemList,function(e,t){i+="<div class='aItem'>",i+="    <div class='itemWrapper'>",i+="        <div class='itemImg'><img src='"+t.img+"' /></div>",i+="        <div class='itemInfo'>",i+="            <div class='itemName'>"+jm.encodeHtml(t.tmpProductName)+"</div>",i+="            <div class='itemPriceAndAmount'>",i+="                <div class='itemPrice'>"+Fai.top.choiceCurrencyVal+t.price.toFixed(2)+"</div>",i+="                <div class='itemAmount'>x"+t.amount+"</div>",i+="            </div>",i+="        </div>",i+="    </div>",i+="</div>",i+="<div class='itemSeparateLine'></div>"}),i+="    </div>",i+="    <div class='promoOrderFooter'>",i+="        <div class='promoOrderTotalPrice'>",20==t.status?(i+="    <div class='totalPriceNum finished'>"+Fai.top.choiceCurrencyVal+t.price.toFixed(2),void 0!==t.shipPrice&&t.shipPrice>0&&(i+="    <span class='promoShipPrice'>（含运费"+Fai.top.choiceCurrencyVal+t.shipPrice+"）</span>"),i+="    </div>"):(i+="    <div class='totalPriceNum'>"+t.price.toFixed(2),void 0!==t.shipPrice&&t.shipPrice>0&&(i+="    <span class='promoShipPrice'>（含运费"+Fai.top.choiceCurrencyVal+t.shipPrice+"）</span>"),i+="    </div>"),i+="            <div class='totalPriceTxt'>实付金额</div>",i+="        </div>",i+="        <div class='promoOrderCommission'>",20==t.status?i+="            <div class='commissionNum finished'>"+Fai.top.choiceCurrencyVal+t.commission.toFixed(2)+"</div>":i+="            <div class='commissionNum'>"+t.commission.toFixed(2)+"</div>",i+="            <div class='commissionTxt'>成交预估收入</div>",i+="        </div>",i+="    </div>",i+="</div>"}),i+="</div>"):(i+=t?"<div class='promoOrderListWrapper isMine'>":"<div class='promoOrderListWrapper isOthers'>",i+="<div class='promoEmpty promoOrderListEmpty'>",i+="    <div class='promoEmptyIcon'></div>",i+="    <div class='promoEmptyTxt'>暂无推广订单</div>",i+="</div>",i+="</div>"),i},Mobi.expandPromoOrderList=function(e){jm.each(e,function(e,t){if(t.itemList.length>3){jm("#"+t.orderCode).find(".toHidden").hide(),jm("#"+t.orderCode).find(".toHidden ~ .itemSeparateLine").hide();var i="<div class='expandWrapper'><div class='expandPanel' onclick='Mobi.expandPromoItems("+t.orderCode+")'>还有"+(t.itemList.length-3)+"件<span class='expandArrow faisco-icons-S000112'></span></div></div>";jm("#"+t.orderCode).find(".anchor").append(i)}})},Mobi.expandPromoItems=function(e){jm("#"+e).find(".toHidden").show(),jm("#"+e).find(".toHidden ~ .itemSeparateLine").show(),jm("#"+e).find(".expandWrapper").remove()},Mobi.promoWithdraw=function(){Mobi.logDog(200578,3);var e=jm(".promoteWithdrawLocater"),t=null;if(html="",0!==jm(".withdraw").length&&jm(".withdraw").remove(),jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromoteWithdraw",async:!1,success:function(e){e=jm.parseJSON(e),t=e.rtData}}),null!==t){var i=t.settleData.t||0,o=(t.settleData.lma,t.modeParamList||[]),n=t.balance.toFixed(2),a=!1;html+="<div class='withdraw' id='withdraw'>",html+="<div class='withdrawForm'>",html+="    <div class='withdrawFormCtrl' id='acctChange' >",html+="       <div class='ctrlBadge'>提现至</div>",html+="       <div class='ctrlVal drawToOnlineAcct'>支付宝",(0==i||o.length>1)&&(html+="\t       <span class='drawToAcctSwitch faisco-icons-S000106'></span>",a=!0),html+="\t    </div>",html+="    </div>",html+="    <div class='alipayPanel'>",html+="   \t<div class='withdrawFormCtrl'>",html+="       \t<div class='ctrlBadge'>提现账户</div>",html+="       \t<div class='ctrlVal'><input placeholder='请输入提现账户' type='text' class='acctField'></div>",html+="   \t</div>",html+="   \t<div class='withdrawFormCtrl'>",html+="       \t<div class='ctrlBadge'>真实姓名</div>",html+="       \t<div class='ctrlVal'><input class='nameField' type='text'  placeholder='请输入真实姓名'></div>",html+="   \t</div>",html+="    </div>",html+="    <div class='wechatPanel'>",html+="   \t<div class='withdrawFormCtrl'>",html+="       \t<div class='ctrlBadge'>提现账户</div>",html+=0==i?"       \t<div class='ctrlVal'><input placeholder='请输入微信号' type='text' class='acctField'></div>":"       \t<div class='ctrlVal'>微信</div>",html+="   \t</div>",html+="       <input id='wechatWdOpenId' style='display: none;'>",html+="    </div>",html+="   <div class='cashContent'>",html+="   \t<div class='withdrawFormCtrl cashTitle'>",html+="   \t\t<div class='ctrlBadge'>提现金额</div>",html+="   \t</div>",html+="   \t<div class='withdrawFormCtrl'>",html+="   \t\t<div class='ctrlVal'><span class='cashRmb'>￥</span><input placeholder='可提现金额"+n+"元' type='text' class='amountField'></div>",html+="   \t</div>",html+="   </div>",html+="   <div class='withdrawFormCtrl remarkContent'>",html+="   \t<div class='ctrlVal'><input placeholder='添加备注(50字以内)' maxlength='50' type='text' class='remarkInput'><div class='icon-clearRemark clearRemark'></div></div>",html+="   </div>",html+="</div>",html+="<div class='withdrawBtn g_bgColor g_main_bgColor_v3' id='promoWithdrawBtn'>确认提现</div>",html+="<div class='withdrawFormFooter'>交易成功后即获得奖励，可发起提现申请</div>",html+="</div>",e.append(html),jm("#promoWithdrawBtn").css("opacity","0.5"),jm("#promoWithdrawBtn").off("click");var r=!1,s=!1,l=0;if(0==i)r=!0,s=!0,l=1;else{var c=!0,d=!1,m=void 0;try{for(var p,u=o[Symbol.iterator]();!(c=(p=u.next()).done);c=!0){var h=p.value.mode;0===h&&(r=!0,0==l&&(l=1)),1===h&&(s=!0,0==l&&(l=2))}}catch(e){d=!0,m=e}finally{try{c||null==u.return||u.return()}finally{if(d)throw m}}}if(Mobi.changePromoWithdrawMode(l,a),a){var f={triggerId:"acctChange",panelId:"pgListDiv",pageHtml:Mobi.printPromoWithdrawMode(i,r,s,a),callback:function(){!function(e,t){"editCusInfo"!=e&&"editAddrInfo"!=e||/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(jm("#"+e).find("input,select,textarea").bind("blur",function(){document.querySelector("body").scrollTop=0}),jm("#"+e).find("input,select,textarea").bind("focus",function(){jm("#"+e).attr("ontouchmove","return false;")}).bind("blur",function(){jm("#"+e).parent().css("position","fixed"),jm("#"+e).css("position",""),jm("#"+e).removeAttr("ontouchmove")}),jm("#areaBox").bind("touchmove",function(e){e.preventDefault()}),jm("#areaBox .J_areaHead").bind("touchmove",function(e){e.preventDefault()}),jm("#areaBox1").bind("touchmove",function(e){e.stopPropagation()}),jm("#areaBox2").bind("touchmove",function(e){e.stopPropagation()}));var i=Fai.top.document.querySelector("#"+e),o=Fai.top.document.querySelector("#webPagePanel"+t);window.ontouchmove=function(e){if(i.scrollHeight==i.offsetHeight&&"none"!=jm(o).css("display")){var t=e.target,n=jm(t).parents(".areaBox").length>0||jm(t).parents(".areaBox2").length>0;n||e.preventDefault()}};var n=1;requestAnimationFrame(function t(){i=Fai.top.document.querySelector("#"+e);var o=i.scrollHeight-i.clientHeight;o-0==n&&(n=.5);var a=i.scrollTop;0===a?i.scrollTop+=n:a===o&&(i.scrollTop-=n),requestAnimationFrame(t)})}("pgListDiv","acctChange")},closeWebPage:"#pgListDiv .g_close",direction:"bottom",pageBg:!0};Mobi.initWebPage(f)}}},Mobi.printPromoWithdrawMode=function(e,t,i,o){var n="";return n+="<div class='pgListDiv' id='pgListDiv' style='background-color: inherit;'>",n+="    <div class='g_close' style='width: 100%;height: 100%;'></div>",n+="    <div id='onlinePayType' class='pgDetail onlinePayType'>",n+="        <div id='pgBox' class='pgBox' style='position: fixed;bottom: 0;z-index: 100;'>",n+="\t        <div class='line'>",t&&(n+="\t            <div class='pgBoxItem' onclick='Mobi.changePromoWithdrawMode(1,"+o+")'>",n+="\t            <span class='icon-payMode payMode4'></span>",n+="\t                <a class='pgName payMode' _paymode='1'>支付宝</a>",n+="\t            \t<i class='faisco-icons-right g_color g_main_color_v3 J_selectPay' style='height: 2.5rem;line-height: 2.5rem;margin-left: 0.1rem;'></i>",n+="\t            </div>"),i&&(n+="\t            <div class='pgBoxItem' onclick='Mobi.changePromoWithdrawMode(2,"+o+")''>",n+="\t            <span class='icon-payMode wxPayIcon'></span>",n+="\t                <a class='pgName payMode' _paymode='2'>微信</a>",n+="\t\t            <i class='faisco-icons-shape11' style='font-size: 1rem;height: 2.5rem;line-height: 2.5rem;'></i>",n+="\t            </div>"),0==e&&(n+="\t            <div class='pgBoxItem' onclick='Mobi.changePromoWithdrawMode(3,"+o+")''>",n+="\t            <span class='icon-payMode otherPayIcon'></span>",n+="\t                <a class='pgName payMode' _paymode='3'>其它</a>",n+="\t\t            <i class='faisco-icons-shape11' style='font-size: 1rem;height: 2.5rem;line-height: 2.5rem;'></i>",n+="\t            </div>"),n+=" \t       </div>",n+="        </div>",n+="    </div>",n+="</div>"},Mobi.getPromoWechatOpenId=function(){-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger")?jm.ajax({url:"ajax/promoter_h.jsp?cmd=getWechatConfig",async:!1,success:function(e){e=jm.parseJSON(e)}}):Mobi.ing("需在微信端打开网站才可提现")},Mobi.wechatWithdrawSubmit=function(e){var t=-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger"),i=null;if(t){jm.ajax({url:"ajax/promoter_h.jsp?cmd=getWechatConfig",async:!1,success:function(e){e=jm.parseJSON(e),i=e.rtData.appId,e.rtData.appSecret}});var o=location.href;-1!=o.indexOf("?")?o+="&jumpToPromoWxWithdraw=true&withdrawAmount="+e:o+="?jumpToPromoWxWithdraw=true&withdrawAmount="+e,o=encodeURIComponent(o),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i+"&redirect_uri="+o+"&response_type=code&scope=snsapi_base&state=1#wechat_redirect"}else Mobi.ing("需在微信端打开网站才可提现")},Mobi.actualWechatWithdraw=function(e,t,i){e&&null!=_typeof(t)&&null!==t&&""!==t&&i>0?jm.ajax({url:"ajax/promoter_h.jsp?cmd=submitWithdraw",data:"amount="+i+"&wxOpenId="+t+"&settleType=1&selectedMode=2",success:function(e){(e=jm.parseJSON(e)).success?(Mobi.logDog(200579,1),Mobi.showWithdrawSuccPage(!0)):Mobi.showWithdrawSuccPage(!1)}}):Mobi.showWithdrawSuccPage(!1)},Mobi.changePromoWithdrawMode=function(e,t){var i="";t&&(i="<span class='drawToAcctSwitch faisco-icons-S000106'></span>"),1===e?(jm(".withdraw .wechatPanel").hide(),jm(".withdraw .alipayPanel").show(),jm(".withdraw .drawToOnlineAcct").html("支付宝"+i)):2===e?(jm(".withdraw .alipayPanel").hide(),jm(".withdraw .wechatPanel").show(),jm(".withdraw .drawToOnlineAcct").html("微信零钱"+i)):3===e&&(jm(".withdraw .alipayPanel").hide(),jm(".withdraw .wechatPanel").hide(),jm(".withdraw .drawToOnlineAcct").html("其它"+i)),jm("#pgListDiv .J_selectPay").removeAttr("style").attr("style","font-size:1rem;height:2.5rem;line-height:2.5rem;").removeAttr("class").attr("class","faisco-icons-shape11"),jm("#pgListDiv .payMode").each(function(t,i){jm(this).attr("_paymode")==e&&jm(this).parent().find(".faisco-icons-shape11").removeAttr("style").attr("style","margin-left:0.1rem;height:2.5rem;line-height:2.5rem;").removeAttr("class").attr("class","faisco-icons-right g_color g_main_color_v3 J_selectPay")}),jm("#pgListDiv .g_close").click(),Mobi.bindWithdrawFormCtl(e)},Mobi.bindWithdrawFormCtl=function(e){var t=null;jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromoteWithdraw",async:!1,success:function(e){e=jm.parseJSON(e),t=e.rtData}}),null!=t&&(settleType=t.settleData.t||0,minimumDraw=t.settleData.lma,balance=t.balance.toFixed(2),errMsg="请输入正确的提现信息",Mobi.checkWithDrawDataValid(e,settleType,minimumDraw,balance,!1),jm("#withdraw .acctField,#withdraw .nameField,#withdraw .amountField,#withdraw .remarkInput").off().on("input",function(){Mobi.checkWithDrawDataValid(e,settleType,minimumDraw,balance,!0),""==jm(".remarkInput").val()?jm(".clearRemark").hide():jm(".clearRemark").show()}),jm("#withdraw .amountField").on("keydown",function(e){var t=e.code;if(t.startsWith("Digit")||t.startsWith("Key")||t.startsWith("Numpad")){var i=this.value+e.key;return Mobi.matchDecimalPoint(i,2)}}),jm(".clearRemark").off().on("click",function(){jm(".remarkInput").val(""),jm(this).hide()}),jm("#promoWithdrawBtn").off().on("click",function(){var t=Mobi.checkWithDrawDataValid(e,settleType,minimumDraw,balance,!1);if(t.canWithdraw){var i=t.acctVal||"",o=t.nameVal||"",n=t.amountVal||"",a=t.remarkVal||"";1==settleType&&2==e?Mobi.wechatWithdrawSubmit(n):jm.ajax({url:"ajax/promoter_h.jsp?cmd=submitWithdraw",data:"acct="+i+"&name="+o+"&amount="+n+"&remark="+a+"&selectedMode="+e+"&settleType="+settleType,success:function(e){(e=jm.parseJSON(e)).success?(Mobi.logDog(200579,2),Mobi.showWithdrawSuccPage(!0)):Mobi.ing(e.msg)}})}else Mobi.ing(t.errMsg)}),jm("#withdraw .amountField").on("blur",function(){var e=!1,t=jm("#withdraw .amountField").val()||"";balance=parseFloat(balance)||0,t<minimumDraw?(errMsg="单笔提现金额须不少于"+minimumDraw+"元",e=!0):t>balance&&(errMsg="提现金额不得大于余额",e=!0),e&&Mobi.ing(errMsg)}))},Mobi.checkWithDrawDataValid=function(e,t,i,o,n){var a=!1,r=jm("#withdraw "+(1==e?".alipayPanel":".wechatPanel")+" .acctField"),s=jm("#withdraw .nameField"),l=jm("#withdraw .amountField"),c=jm("#withdraw .remarkInput"),d=r.val()||"",m=s.val()||"",p=l.val()||"",u=c.val()||"",h="请输入正确的提现信息";1==e?d&&""!=d?m&&""!=m?p&&""!=p?a=!0:h="提现金额不能为空":h="真实姓名不能为空":h="提现账户不能为空":2==e&&0==t?d&&""!=d?p&&""!=p?a=!0:h="提现金额不能为空":h="微信号不能为空":a=!0,a&&(p=parseFloat(p)||0,o=parseFloat(o)||0,p<i?(h="单笔提现金额须不少于"+i+"元",a=!1):p>o&&(h="提现金额不得大于余额",a=!1)),3==e&&(a&&(u&&""!=u||(h="请补充备注信息，以保证商家能够提现到正确的账户中",a=!1)),""!=u&&(a=!0)),a?jm("#promoWithdrawBtn").css("opacity",1):jm("#promoWithdrawBtn").css("opacity",.5);var f={};return f.acctVal=d,f.nameVal=m,f.amountVal=p,f.remarkVal=u,f.canWithdraw=a,f.errMsg=h,f},Mobi.matchDecimalPoint=function(e,t){"."==e.substring(e.length-1)&&(e+="0");var i=new RegExp("^\\s*-?(\\d+(\\.\\d{1,"+t+"})?|\\.\\d{1,"+t+"})\\s*$","g");return-1==t&&(i=new RegExp("^\\s*-?(\\d+(\\.\\d{1,25})?|\\.\\d{1,25})\\s*$","g")),i.test(e)},Mobi.showWithdrawSuccPage=function(e){var t=jm(".promoteWithdrawLocater"),i="",o="提现申请已提交，等待商家审核";e||(o="提现申请提交失败，请稍后重试"),t.empty(),0===jm(".withdrawSubmitSucc").length?(i+="<div class='withdrawSubmitSucc'>",i+="    <div class='withdrawSubMain'>",i+="        <div class='withdrawSubIcon'></div>",i+="        <div class='withdrawSubTxt'>"+o+"</div>",i+="    </div>",i+="    <div class='withdrawSubComplete g_bgColor g_main_bgColor_v3'>完成</div>",i+="</div>",t.append(i),jm("#webModuleContainer").find(".loginHeader").find(".g_close").off().on("click",function(){location.href="promoterIndex.jsp"}),jm(".withdrawSubmitSucc .withdrawSubComplete").off().on("click",function(){location.href="promoterIndex.jsp"})):jm(".withdrawSubmitSucc").show()},Mobi.loadPromoInvites=function(){Mobi.logDog(200578,5);var e=jm(".promoterPanel"),t=null,i="";if(e.find(".promoPageBg").hide(),0!==jm(".invitationWrapper").length)return jm(".invitationWrapper").show(),void Mobi.modifyPageHeader("我的邀请",".invitationWrapper",".promoPageBg");jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromoteInvite",async:!1,success:function(e){e=jm.parseJSON(e),t=e.promoterList}}),i+="<div class='invitationWrapper'>",null!=t&&t.length>0?jm.each(t,function(e,t){i+="<div class='aInvitee'>",i+="    <div class='leftPart'>",i+="        <span class='inviteeAvator'><img src='"+t.headPicUrl+"' /></span>",i+="        <span class='inviteeName'>"+t.memberName+"</span>",i+="    </div>",i+="    <div class='rightPart'>",i+="        <span class='inviteeJoinedDate'>加入时间："+t.createTimeStr.split(" ")[0]+"</span>",i+="    </div>",i+="</div>"}):(i+="<div class='promoEmpty promoInviteEmpty'>",i+="    <div class='promoEmptyIcon'></div>",i+="    <div class='promoEmptyTxt'>暂无邀请小伙伴</div>",i+="</div>"),i+="</div>",e.append(i),Mobi.modifyPageHeader("我的邀请",".invitationWrapper",".promoPageBg")},Mobi.loadPromoBalance=function(){Mobi.logDog(200578,6);var e=jm(".promoterPanel"),t=null,i="";if(e.find(".promoPageBg").hide(),0!==jm(".balanceDetailWrapper").length)return jm(".balanceDetailWrapper").show(),void Mobi.modifyPageHeader("收支明细",".balanceDetailWrapper",".promoPageBg");jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromoteFlow",async:!1,success:function(e){e=jm.parseJSON(e),t=e.flowList}}),i+="<div class='balanceDetailWrapper'>",null!=t&&t.length>0?jm.each(t,function(e,t){i+="<div class='aFlow'>",i+="    <div class='leftPart'>",i+="        <div class='flowTitle'>"+t.showName+"</div>",i+="        <div class='flowDate'>"+t.settleTimeStr.split(" ")[0]+"</div>",i+="    </div>",i+="    <div class='rightPart'>",2===t.type?i+="    <div class='flowAmount minus'>"+t.sign+t.amount.toFixed(2)+"</div>":i+="    <div class='flowAmount plus'>"+t.sign+t.amount.toFixed(2)+"</div>",i+="    </div>",i+="</div>"}):(i+="<div class='promoEmpty promoBalanceEmpty'>",i+="    <div class='promoEmptyIcon'></div>",i+="    <div class='promoEmptyTxt'>暂无收支明细</div>",i+="</div>"),i+="</div>",e.append(i),Mobi.modifyPageHeader("收支明细",".balanceDetailWrapper",".promoPageBg")},Mobi.createPromoPoster=function(){Mobi.logDog(200578,1);var e=jm(".webModuleContainer"),t=null,i="";if(e.find(".promoPageBg").hide(),0!==jm(".promoPosterWrapper").length)return jm(".promoPosterWrapper").show(),void Mobi.modifyPageHeader("推广二维码",".promoPosterWrapper",".promoPageBg");jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromoQRCode",async:!1,success:function(e){e=jm.parseJSON(e),t=e.rtData}});var o=Fai.top._openThemeV3,n=jm(".webHeaderBg").css("background-color").replace(")",", 0.2)").replace("rgb","rgba"),a=jm("html").css("font-size");i+="<div class='promoPosterWrapper'>",i+="    <div class='posterHeader'>",i+="        <div class='iconPart'>",i+="            <div class='iconIndicator g_mainColor g_main_color_v3"+(o?" g_main_bdColor_v3_a20":"' style='border-color: "+n)+"'>1</div>",i+="            <div class='iconSeparate'></div>",i+="            <div class='iconIndicator g_mainColor g_main_color_v3"+(o?" g_main_bdColor_v3_a20":"' style='border-color: "+n)+"'>2</div>",i+="            <div class='iconSeparate'></div>",i+="            <div class='iconIndicator g_mainColor g_main_color_v3"+(o?" g_main_bdColor_v3_a20":"' style='border-color: "+n)+"'>3</div>",i+="        </div>",i+="        <div class='txtPart'>",i+="            <div class='aPosterTxt'>分享商城给好友</div>",i+="            <div class='aPosterTxt'>好友下单</div>",i+="            <div class='aPosterTxt'>获得推广奖励</div>",i+="        </div>",i+="    </div>",i+="    <div class='posterBody'>",i+="        <canvas class='actualPoster promoPoster' id='promoPoster' width='"+13*(a=Number(a.substring(0,a.indexOf("p"))))+"px' height='"+23.12*a+"px'>",i+="        </canvas>",i+="        <div class='posterBodyBtn'>长按保存图片</div>",i+="    </div>",i+="</div>",e.append(i);var r=document.getElementById("promoPoster"),s=r.getContext("2d");Mobi.drawPromoteAndInviteCanvas(r,s,t,!1),jm("#webModuleContainer").find(".loginHeader").find(".g_close").off().on("click",function(){setTimeout(function(){location.href="promoterIndex.jsp"},0)})},Mobi.loadPromoterPdList=function(){var e=document.body.offsetHeight,t=jm(".promoterPdList"),i=0,o=0,n=!0,a=[],r={triggerId:"showPromoterPdSharePanel",pageBg:!0,pageHtml:"<div></div>",direction:"bottom",callback:function(){var e={triggerId:"graphicPosterItem",pageBg:!0,pageHtml:Mobi.createGraphicPosterPage(),direction:"bottom",closeWebPage:"#graphicPosterPanelBg",callback:function(){JSON.parse(Fai.top._shareDataProdectDetail.jsShareInfo).isEarnestSale?(Mobi.drawEarnestSaleCanvasSharePic(),Mobi.logDog(201083,2)):Mobi.drawCanvasSharePic()}};Mobi.initWebPage(e),jm("#graphicPosterItem").bind("click",function(e){jm("#webPagePanelshowPromoterPdSharePanel").hide()})},closeWebPage:"#shareListPanelBg"};function s(e,i){a.sort(function(t,o){return"commission"==e?i?o.commission-t.commission:t.commission-o.commission:"addedTime"==e?t.addedTime-o.addedTime:"mallPrice"==e?i?o.mallPrice-t.mallPrice:t.mallPrice-o.mallPrice:o.promotePdCount-t.promotePdCount}),jm(".promotePdItem").remove();var o=function(e){var t="";if(!e||0==e.length)return t;return jm.each(e,function(e,i){var o=(i.realPrice||"0.00").split(".");t+="<div class='promotePdItem' pid='"+i.pdId+"'>",t+="\t<div class='left'>",t+="\t\t<img src='"+i.picPath+"' class='promotePdPic'></img>",t+="\t</div>",t+="\t<div class='right'>",t+="\t<div class='pdName'>"+i.pdName+"</div>",t+="\t<div class='commissionTip g_mainColor g_bdColor g_main_color_v3'>"+i.awardTip+"</div>",t+="\t<div class='mallPrice'><span class='smallPrice'>￥</span>"+o[0]+"<span class='smallPrice'>."+o[1]+"</span></div>",t+="\t<svg fill='"+(Fai.top._openThemeV3?Fai.top._themeColor:Fai.top._colorFulThemeColor)+"' class='shareSvg' pid='"+i.pdId+"'><use xlink:href='#jzm-v20'/></svg>",t+="\t</div>",t+="</div>"}),t}(a);t.append(o),jm(".shareSvg").click(function(e){for(var t=parseInt(jm(this).attr("pid")||0),i=0;i<a.length;i++){var o=a[i];if(t==o.pdId){Fai.top._shareDataProdectDetail=o.shareDataProduct||{},r.pageHtml=Mobi.sharePage({shareLinkList:o.shareDataProduct.shareLinkList,productId:t});var n={triggerId:"graphicPosterItem",pageBg:!0,pageHtml:Mobi.createGraphicPosterPage(),direction:"bottom",closeWebPage:"#graphicPosterPanelBg",callback:function(){JSON.parse(Fai.top._shareDataProdectDetail.jsShareInfo).isEarnestSale?(Mobi.drawEarnestSaleCanvasSharePic(),Mobi.logDog(201083,2)):Mobi.drawCanvasSharePic()}};Mobi.initWebPage(r),Mobi.initWebPage(n)}}jm("#showPromoterPdSharePanel").click(),e.stopPropagation(),Mobi.logDog(200578,20)}),jm(".promotePdItem").click(function(e){var t=parseInt(jm(this).attr("pid")||0);window.location.href="pd.jsp?pid="+t})}function l(e){jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromotePdList",data:{pageNo:e,isFirstLoad:n},async:!1,success:function(e){if((e=jm.parseJSON(e)).success){var t=e.resultPromotePdList||[];a=a.concat(t),n&&(jm(".promoterPdLoading").remove(),jm(".promoterPdPage").css("background","white"),0==a.length&&(jm(".promoterPdEmpty").show(),jm(".promoterPdEmptyTip").show()));var i=jm(".promoterPdFilter .select").attr("sortKey"),r=!1;"commission"!=i&&"mallPrice"!=i||(r=jm(".promoterPdFilter .select").find(".descSelect").length>0),s(i,r),n&&jm(".promoterPdFilter .filterCommission").click(),o=e.totalPage,Fai.top._isPromoterPd=!0,n=!1}}})}jm(".promoterPdFilter .filterItem").click(function(){var e=jm(this).attr("sort"),t=jm(this).attr("sortKey");e="true"==e;var i=jm(this).find(".descSelect").length>0;jm(".promoterPdFilter .filterItem").removeClass("g_mainColor g_main_color_v3"),jm(".promoterPdFilter .filterItemAsce").removeClass("asceSelect g_mainColor g_bdColor g_main_color_v3 g_main_bdColor_v3"),jm(".promoterPdFilter .filterItemDesc").removeClass("descSelect g_mainColor g_bdColor g_main_color_v3 g_main_bdColor_v3"),jm(this).addClass("g_mainColor g_main_color_v3"),e&&(i?jm(this).find(".filterItemAsce").addClass("asceSelect g_mainColor g_bdColor g_main_color_v3 g_main_bdColor_v3"):jm(this).find(".filterItemDesc").addClass("descSelect g_mainColor g_bdColor g_main_color_v3 g_main_bdColor_v3")),s(t,!i),document.body.scrollTop=0,document.documentElement.scrollTop=0,"commission"==t?Mobi.logDog(200578,21):"addedTime"==t?Mobi.logDog(200578,22):"mallPrice"==t?Mobi.logDog(200578,24):Mobi.logDog(200578,23)}),Mobi.initWebPage(r),l(i),document.body.onscroll=function(t){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?jm(".promoterPdFilterContain").css("top",0):jm(".promoterPdFilterContain").css("top","2.25rem"),(document.body.scrollTop+e>=document.body.scrollHeight||document.documentElement.scrollTop+e>=document.body.scrollHeight)&&i<o&&l(i+=1)}},Mobi.memDeposit=function(){},function(e,t,i){function o(){e("body").css("background-color","#fff"),e(".g_web").css("background-color","#fff")}var n="";t.initIndex=function(t){o(),e(".deposit_index .deposit").text(t.toFixed(2))},t.initPwd=function(){o();var t=e(".deposit_pwd .pwd_wrapper .pwd_input"),i=e(".deposit_pwd .pwd_wrapper .pwd_input_lurker"),n=e(".deposit_pwd .re_pwd_wrapper .pwd_input"),a=e(".deposit_pwd .re_pwd_wrapper .pwd_input_lurker"),r=e(".deposit_pwd .btn"),s=[],l=[];t.on("click",function(){i[0].focus()}),i.on("input",function(i){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength));var o=this.value;s=o.split("");for(var n=0;n<6;n++){var a=t[n];null!=s[n]&&void 0!==s[n]?e(a).find(".psuedo_input").show():e(a).find(".psuedo_input").hide()}6==s.length?r.removeClass("btn_disabled"):r.addClass("btn_disabled")}),r.on("click",function(){Mobi.logDog(200983,19),r.hasClass("btn_disabled")||(6==s.length?(e(".re_pwd_panal").show(),e(".pwd_panal").hide()):Mobi.ing("请输入有效的6位密码"))}),n.on("click",function(){a[0].focus()}),a.on("input",function(t){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength));var o=this.value;l=o.split("");for(var r=0;r<6;r++){var s=n[r];null!=l[r]&&void 0!==l[r]?e(s).find(".psuedo_input").show():e(s).find(".psuedo_input").hide()}if(6==l.length){if(i.val()!==a.val())return e(".J_confirm_pwd_error").show(),l=[],a.val(""),void e(".psuedo_input").hide();e.ajax({url:"ajax/memDeposit_h.jsp?cmd=setDepositPwd",data:"pwd="+e.md5(i.val()),success:function(t){(t=e.parseJSON(t)).success?(Mobi.ing("密码设置成功",1),"交易密码"===e(".pageTitle")[0].innerText?Mobi.logDog(200983,33):"重置密码"===e(".pageTitle")[0].innerText&&Mobi.logDog(200983,34),setTimeout(function(){window.location.href=document.referrer},2e3)):Mobi.ing(t.msg)}})}})},t.initTopup=function(t,i){Mobi.logDog(200983,16),o(),1==(t=e.parseJSON(t)).length&&(n=t[0],e(".deposit_topup .confirm").removeClass("disabled"))},t.ruleSelect=function(t,i){t=e.parseJSON(t);e(".rule").removeClass("selected"),e(i).addClass("selected"),n=t,e(".deposit_topup .confirm").removeClass("disabled")},t.topup=function(){Mobi.logDog(200983,17),e(".deposit_topup .confirm").hasClass("disabled")||(""!==n?location.href="depositPayment.jsp?deposit=true&price="+e.encodeUrl(n.dm)+"&returnUrl="+e.encodeUrl(location.href):Mobi.ing("请先选择充值项"))},t.topupV2=function(){Mobi.logDog(200983,17),e(".deposit_topup .confirm").hasClass("disabled")||(""!==n?e.ajax({type:"post",url:"ajax/memDeposit_h.jsp?cmd=addDepositFlow",data:"v2=true&depositMoney="+n.dm,error:function(){Fai.ing("系统错误。"),Mobi.logMonitor(6124,!0)},success:function(t){var i=e.parseJSON(t)||{};if(i.success){var o=(i.rtData||{}).flowId;location.href="mallPayment.jsp?bssId="+o+"&bssType=2&returnUrl="+e.encodeUrl(location.href)}else Mobi.logMonitor(6124,!0),Mobi.ing(i.msg||"系统错误。")}}):Mobi.ing("请先选择充值项"))},t.checkDepositStatue=function(t){e.ajax({type:"post",url:"ajax/memDeposit_h.jsp?cmd=checkDepositStatue",data:"flowId="+t,error:function(){Fai.ing("系统错误。")},success:function(i){e.parseJSON(i).success&&(Fai.top.location.href="depositTopup.jsp?flowId="+t+"&suc=true")}})},t.showPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0;Mobi.logDog(200983,18);var r=0,s=!1,l=!1,c=!1;e>0&&(r++,s=!0),t>0&&o&&(r++,l=!0),i>0&&n&&(r++,c=!0);Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight;var d="";d+="<div class='deposit_popup deposit_popup"+r+"'>",d+="<img class='deposit_img deposit_img"+r+"' src='"+Fai.top._resImageRoot+"/image/memDeposit/"+r+".png'>",s&&(d+="<div class='money_title'>赠送金额</div>",d+="<div class='money_txt'><div class='money_num'>"+e+"<span class='unit'>元</span></div></div>"),l&&(!s&&c?(d+="<div class='integral_title integral_title"+r+"' style='top: 7.7rem;left: 3.2rem;'>赠送"+a+"</div>",d+="<div class='integral_txt integral_txt"+r+"' style='top: 7.3rem;left: 7.7rem;'><div class='integral_num integral_num"+r+"'>"+t+"<span class='unit' style='top: -.07rem;'></span></div></div>"):(d+="<div class='integral_title integral_title"+r+"'>赠送"+a+"</div>",d+="<div class='integral_txt integral_txt"+r+"'><div class='integral_num integral_num"+r+"'>"+t+"<span class='unit'></span></div></div>")),c&&(d+="<div class='coupon_title coupon_title"+r+"'>赠送优惠券</div>",d+="<div class='coupon_txt coupon_txt"+r+"'><div class='coupon_num coupon_num"+r+"'>"+i+"<span class='unit'>元</span></div></div>"),d+="</div>",d+="<div class='deposit_verbose deposit_verbose"+r+"'>已放至你的会员帐户</div>",d+="<div class='deposit_popup_close J-prompt-cancel'>",d+="<img src='"+Fai.top._resImageRoot+"/image/hdCouponClose.png'>",d+="</div>",Mobi.customPopup({content:d})},t.initTopupList=function(){Mobi.logDog(200983,14),o()},t.topupItemClick=function(t,i){var o=(t=e.parseJSON(t)).depositGiftFlow,n="";n+="<div style='display: flex;width: 13.8rem;height: auto;top: -8rem;left: 0rem;z-index: 9999;background: #fff;border-radius: .2rem;flex-direction: column;'>",n+="<div>",t.type==t.deductionType?n+="<div style='font-size: .75rem;color: rgba(53,53,53,1);font-weight: bold;margin-top: 1rem;height: 1.8rem;border-bottom: 1px solid rgba(238,238,238,1);'>调整详情</div>":n+="<div style='font-size: .75rem;color: rgba(53,53,53,1);font-weight: bold;margin-top: 1rem;height: 1.8rem;border-bottom: 1px solid rgba(238,238,238,1);'>充值详情</div>",n+="<div style='display: flex;width: 100%;align-items: center;justify-content: center;flex-direction: column;margin-top: .7rem;'>",t.type==t.deductionType?(n+="<div style='display: flex;width: 75%; line-height: 1.5rem;'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 4rem;flex-grow: 0; flex-shrink: 0; text-align: left;'>扣减金额:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>￥"+t.price.toFixed(2)+"</div></div>",n+="<div style='display: flex;width: 75%; line-height: 1.5rem;'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 4rem;flex-grow: 0; flex-shrink: 0; text-align: left;'>扣减方式:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>"+t.payModeName+"</div></div>",n+="<div style='display: flex;width: 75%; line-height: 1.5rem;'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 4rem;flex-grow: 0; flex-shrink: 0; text-align: left;'>备&emsp;&emsp;注:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>"+t.comments+"</div></div>"):(n+="<div style='display: flex;width: 75%; line-height: 1.5rem;'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 4rem;flex-grow: 0; flex-shrink: 0; text-align: left;'>充值金额:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>￥"+t.price.toFixed(2)+"</div></div>",n+="<div style='display: flex;width: 75%; line-height: 1.5rem;'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 4rem;flex-grow: 0; flex-shrink: 0; text-align: left;'>充值方式:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>"+t.payModeName+"</div></div>",o&&o.price>0&&(n+="<div style='display: flex;width: 75%; line-height: 1.5rem;'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 4rem;flex-grow: 0; flex-shrink: 0; text-align: left;'>赠送金额:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>￥"+o.price+"</div></div>"),t.integral>0&&(n+="<div style='display: flex;width: 75%; line-height: 1rem;margin-top: 0.2rem'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 2.5rem;flex-grow: 0; flex-shrink: 0; text-align: justify;margin-right: 1.4rem;'>赠送"+i+":</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>"+t.integral+"</div></div>"),t.couponNames&&(n+="<div style='display: flex;width: 75%; line-height: 1rem;margin-top: 0.2rem'><div style='font-size: .6rem;color: rgba(53,53,53,1); width: 2.5rem;flex-grow: 0; flex-shrink: 0; text-align: justify;margin-right: 1.4rem;'>赠送优惠券:</div><div style='font-size: .6rem;color: rgba(53,53,53,1);flex-grow: 1;margin-left: -1rem;text-align: justify;'>"+t.couponNames+"</div></div>")),n+="</div>",n+="</div>",n+="<div class='J-prompt-cancel' style='width: 6.5rem;height: 1.8rem;background: rgba(60,123,239,1);border-radius: 0.075rem;font-size: .7rem;color: #fff;display: flex;justify-content: center;align-items: center;bottom: 1rem;left: 3.6rem;margin: 0 auto;margin-top: 1.5rem;margin-bottom: 1rem;'>我知道了</div>",n+="</div>",Mobi.customPopup({content:n})},t.initConsumeList=function(){Mobi.logDog(200983,15),o()},t.initDepositInfo=function(){o()},t.consumeItemClick=function(e){0!=e&&(document.location.href="mdetail.jsp?id="+e)}}(jm,Mobi.memDeposit),Mobi.initPromoterIndexPage=function(){jm("#promo").on("click",function(e,t){Mobi.cusHistory.add("promo",t,1,"#promo")}),jm("#invite").on("click",function(e,t){Mobi.cusHistory.add("invite",t,1,"#invite")}),jm("#promoOnly").on("click",function(e,t){Mobi.cusHistory.add("promoOnly",t,1,"#promoOnly")}),Mobi.cusHistory.init()},Mobi.createInvitePoster=function(){Mobi.logDog(200578,2);var e=jm(".webModuleContainer"),t=null,i="";if(e.find(".promoPageBg").hide(),0!==jm(".invitePosterWrapper").length)return jm(".invitePosterWrapper").show(),void Mobi.modifyPageHeader("邀请二维码",".invitePosterWrapper",".promoPageBg");jm.ajax({url:"ajax/promoter_h.jsp?cmd=getInviteQRCode",async:!1,success:function(e){e=jm.parseJSON(e),t=e.rtData}});var o=Fai.top._openThemeV3,n=jm(".webHeaderBg").css("background-color").replace(")",", 0.2)").replace("rgb","rgba"),a=jm("html").css("font-size"),r=13*(a=Number(a.substring(0,a.indexOf("p")))),s=23.12*a;i+="<div class='invitePosterWrapper'>",i+="    <div class='posterHeader'>",i+="        <div class='iconPart'>",i+="            <div class='iconIndicator g_mainColor g_main_color_v3"+(o?" g_main_bdColor_v3_a20":"' style='border-color: "+n)+"'>1</div>",i+="            <div class='iconSeparate'></div>",i+="            <div class='iconIndicator g_mainColor g_main_color_v3"+(o?" g_main_bdColor_v3_a20":"' style='border-color: "+n)+"'>2</div>",i+="            <div class='iconSeparate'></div>",i+="            <div class='iconIndicator g_mainColor g_main_color_v3"+(o?" g_main_bdColor_v3_a20":"' style='border-color: "+n)+"'>3</div>",i+="        </div>",i+="        <div class='txtPart'>",i+="            <div class='aPosterTxt'>分享邀请码给好友</div>",i+="            <div class='aPosterTxt'>好友成为"+t.proSetName+"并带来订单</div>",i+="            <div class='aPosterTxt'>获得邀请奖励</div>",i+="        </div>",i+="    </div>",i+="    <div class='posterBody'>",i+="        <canvas class='actualPoster invitePoster' id='invitePoster' width='"+r+"px' height='"+s+"px'>",i+="        </canvas>",i+="        <div class='posterBodyBtn'>长按保存图片</div>",i+="    </div>",i+="</div>",e.append(i);var l=document.getElementById("invitePoster"),c=l.getContext("2d");Mobi.drawPromoteAndInviteCanvas(l,c,t,!0),jm("#webModuleContainer").find(".loginHeader").find(".g_close").off().on("click",function(){setTimeout(function(){location.href="promoterIndex.jsp"},0)})},Mobi.promoterIndexjumpBack=function(e){jm(".invitePosterWrapper").length<1&&jm(".promoPosterWrapper").length<1&&(location.href=e)},Mobi.drawPromoteAndInviteCanvas=function(e,t,i,o){var n=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);e.width=e.width*n,e.height=e.height*n;var a=i.posterData,r=i.isFirst||!1,s=a.mt,l=r||0==a.bgit,c=r||0==a.pmt,d=(r||0==a.am)&&!(o&&r),m=r,p=13,u=375,h=jm("html").css("font-size"),f=(h=Number(h.substring(0,h.indexOf("p")))*n)*p,g=23.12*h,v=0,b=0,j=0,_=0,M=!1,y=!1,S=!1,I=!1,w=!1,C=!1,P="";"undefined"!=typeof Fai&&void 0!==Fai.top._resRoot&&(P=Fai.top._resRoot);var x={},L={},k={},F={},T={},B="",A="";!function(e,t,i,n,a){if(o){if(e.posterImgSrc_bg1=P+"/image/promoter/poster/invitePoster1_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/invitePoster1_bg2.png",e.bg2Width=11.26*h,e.bg2Height=18.19*h,e.bg2Left=.88*h,e.bg2Top=2.5*h,t.avatarLeftFactor=4.75,t.avatarTopFactor=4.5,t.avatarWidthFactor=1.9,t.avatarHeightFactor=1.9,t.imgWidthFactor=1.73,t.imgHeightFactor=1.73,t.borderWidthFactor=.0866,t.avatarRadiusFactor=.173,t.imgRadiusFactor=.15,t.avatarStyle="#eee",n.textXFactor=1.837,n.textYFactor=9.1,n.text="和我一起，轻松推广赢奖励",n.color="#353535",n.size=.554*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=3.36,a.codeTopFactor=11.96,a.codeWidthFactor=6.34,a.codeHeightFactor=6.34,B=P+"/image/promoter/poster/invitePoster1_codeBg.png",a.codeInnerLeftFactor=.658,a.codeInnerTopFactor=.658,a.codeInnerWidthFactor=5.026,a.codeInnerHeightFactor=5.026,null!=s&&1!=s)switch(s){case 2:e.posterImgSrc_bg1=P+"/image/promoter/poster/invitePoster2_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/invitePoster2_bg2.png",e.bg2Width=11.96*h,e.bg2Height=16.813*h,e.bg2Left=.52*h,e.bg2Top=3.95*h,i.avatarRadiusFactor=1.265,i.imgRadiusFactor=1.178,i.avatarStyle="#fff",i.avatarCentreXFactor=6.465,i.avatarCentreYFactor=4.385,n.textXFactor=1.837,n.textYFactor=9.1,n.text="和我一起，轻松推广赢奖励",n.color="#353535",n.size=.69*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=3.36,a.codeTopFactor=11.09,a.codeWidthFactor=6.06,a.codeHeightFactor=6.06;break;case 3:e.posterImgSrc_bg1=P+"/image/promoter/poster/invitePoster3_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/invitePoster3_bg2.png",e.bg2Width=11.09*h,e.bg2Height=15.6*h,e.bg2Left=.984*h,e.bg2Top=3.56*h,t.avatarLeftFactor=3.57,t.avatarTopFactor=4.61,t.avatarWidthFactor=1.9,t.avatarHeightFactor=1.9,t.imgWidthFactor=1.7,t.imgHeightFactor=1.7,t.borderWidthFactor=.104,t.avatarRadiusFactor=.416,t.imgRadiusFactor=.416,t.avatarStyle="#ffefe4",n.textXFactor=1.837,n.textYFactor=8.23,n.text="和我一起，轻松推广赢奖励",n.color="#ff6732",n.size=.59*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=4.19,a.codeTopFactor=9.91,a.codeWidthFactor=4.732,a.codeHeightFactor=4.732,B=P+"/image/promoter/poster/invitePoster3_codeBg.png",a.codeInnerLeftFactor=.38,a.codeInnerTopFactor=.38,a.codeInnerWidthFactor=3.986,a.codeInnerHeightFactor=3.986;break;case 4:e.posterImgSrc_bg1=P+"/image/promoter/poster/invitePoster4_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/invitePoster4_bg2.png",e.bg2Width=13*h,e.bg2Height=12.13*h,e.bg2Left=0*h,e.bg2Top=8.78*h,i.avatarRadiusFactor=1.265,i.imgRadiusFactor=1.213,i.avatarStyle="#fff",i.avatarCentreXFactor=6.5,i.avatarCentreYFactor=3.165,i.nameStyle="#fff",A=P+"/image/promoter/poster/invitePoster4_nameBg.png",i.nameTopWitchAvatarFactor=.95,i.nameBgImgHalfWidthFactor=2,i.nameBgImgHalfHeightFactor=1.386,n.textXFactor=1.837,n.textYFactor=7.124,n.text="和我一起，轻松推广赢奖励",n.color="#fff",n.size=.76*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=3.29,a.codeTopFactor=11.44,a.codeWidthFactor=6.586,a.codeHeightFactor=6.586}}else if(e.posterImgSrc_bg1=P+"/image/promoter/poster/promotionPoster1_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/promotionPoster1_bg2.png",e.bg2Width=11.26*h,e.bg2Height=18.19*h,e.bg2Left=.88*h,e.bg2Top=2.5*h,t.avatarLeftFactor=2.496,t.avatarTopFactor=3.744,t.avatarWidthFactor=1.9,t.avatarHeightFactor=1.9,t.imgWidthFactor=1.73,t.imgHeightFactor=1.73,t.borderWidthFactor=.0866,t.avatarRadiusFactor=.173,t.imgRadiusFactor=.15,t.avatarStyle="#eee",n.textXFactor=1.84,n.textYFactor=8.58,n.text="惊喜好物，等你来发现",n.color="#ff5a34",n.size=.73*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=3.016,a.codeTopFactor=10.57,a.codeWidthFactor=6.93,a.codeHeightFactor=6.93,null!=s&&1!=s)switch(s){case 2:e.posterImgSrc_bg1=P+"/image/promoter/poster/promotionPoster2_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/promotionPoster2_bg2.png",e.bg2Width=11.78*h,e.bg2Height=16.98*h,e.bg2Left=.6*h,e.bg2Top=3.11*h,i.avatarRadiusFactor=1.3,i.imgRadiusFactor=1.196,i.avatarStyle="#fff",i.avatarCentreXFactor=6.5,i.avatarCentreYFactor=3.41,n.textXFactor=1.82,n.textYFactor=8.58,n.text="惊喜好物，等你来发现",n.color="#ff5e87",n.size=.73*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=3.64,a.codeTopFactor=10.7,a.codeWidthFactor=6.93,a.codeHeightFactor=6.93;break;case 3:e.posterImgSrc_bg1=P+"/image/promoter/poster/promotionPoster3_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/promotionPoster3_bg2.png",e.bg2Width=10.4*h,e.bg2Height=15.738*h,e.bg2Left=1.314*h,e.bg2Top=4.16*h,i.avatarRadiusFactor=1.075,i.imgRadiusFactor=1,i.avatarStyle="#fcdcc0",i.avatarCentreXFactor=6.375,i.avatarCentreYFactor=12.335,i.nameStyle="#993927",A=P+"/image/promoter/poster/promotionPoster3_nameBg.png",i.nameTopWitchAvatarFactor=.23,i.nameBgImgHalfWidthFactor=2,i.nameBgImgHalfHeightFactor=1.074,i.nameHeightOffsetFactor=.1,n.textXFactor=1.837,n.textYFactor=15.75,n.text="惊喜好物，等你来发现",n.color="#fff0de",n.size=.73*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=4.09,a.codeTopFactor=5.37,a.codeWidthFactor=5.38,a.codeHeightFactor=5.38,B=P+"/image/promoter/poster/promotionPoster3_codeBg.png",a.codeInnerLeftFactor=.693,a.codeInnerTopFactor=.693,a.codeInnerWidthFactor=3.98,a.codeInnerHeightFactor=3.98;break;case 4:e.posterImgSrc_bg1=P+"/image/promoter/poster/promotionPoster4_bg1.jpg",e.posterImgSrc_bg2=P+"/image/promoter/poster/promotionPoster4_bg2.png",e.bg2Width=13*h,e.bg2Height=13.346*h,e.bg2Left=0*h,e.bg2Top=7.58*h,i.avatarRadiusFactor=1.42,i.imgRadiusFactor=1.247,i.avatarStyle="#fff",i.globalAlpha=.5,i.avatarCentreXFactor=6.498,i.avatarCentreYFactor=3.518,i.nameStyle="#fff",A=P+"/image/promoter/poster/promotionPoster4_nameBg.png",i.nameTopWitchAvatarFactor=.95,i.nameBgImgHalfWidthFactor=2,i.nameBgImgHalfHeightFactor=1.386,n.textXFactor=1.837,n.textYFactor=10.74,n.text="惊喜好物，等你来发现",n.color="#fff0de",n.size=.73*h,n.font="arial",n.isBole=!1,n.isItalic=!1,n.isUnderLine=!1,a.codeLeftFactor=3.57,a.codeTopFactor=12.826,a.codeWidthFactor=5.72,a.codeHeightFactor=5.72}}(x,L,k,F,T);var D,O,E,N,J=jm("#_TOKEN").attr("value"),H=new Image,U=new Image;E=x.posterImgSrc_bg1,N=x.posterImgSrc_bg2,v=x.bg2Width,b=x.bg2Height,j=x.bg2Left,_=x.bg2Top,D=E,O=N,l||""==a.ppFileIdUrl||(D=a.ppFileIdUrl),H.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+J+"&imgUrl="+jm.encodeUrl(D),U.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+J+"&imgUrl="+jm.encodeUrl(O),H.onload=function(){M=!0,G()&&Y()},U.onload=function(){y=!0,G()&&Y()};var R=new Image,V=i.headPic.headPicUrl;R.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+J+"&imgUrl="+jm.encodeUrl(V),R.onload=function(){S=!0,G()&&Y()};var W=new Image;W.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+J+"&imgUrl="+jm.encodeUrl(i.qrCodeUrl),W.onload=function(){I=!0,G()&&Y()};var z=new Image;""!=B?(z.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+J+"&imgUrl="+jm.encodeUrl(B),z.onload=function(){w=!0,G()&&Y()}):(w=!0,G()&&Y());var q=new Image;function G(){return M&&y&&S&&I&&w&&C}function Y(){if(t.drawImage(H,0,0,f,g),t.drawImage(U,j,_,v,b),function(){var e=0,n=0,l={};if(r||!o&&1==s||o&&(1==s||3==s)){l=L;var c=L.avatarLeftFactor,f=L.avatarTopFactor,g=L.avatarWidthFactor,v=L.avatarHeightFactor,b=L.imgWidthFactor,j=L.imgHeightFactor,_=L.borderWidthFactor,M=L.avatarRadiusFactor,y=L.imgRadiusFactor,S=L.avatarStyle;m||(c=p/u*a.pp.al,f=p/u*a.pp.at),!d&&3.53>g&&(c+=(3.53-g)/2);var I=c*h,w=f*h,C=g*h,P=v*h,x=b*h,F=j*h,T=I+_*h,B=w+_*h;d?(n=c+g+.59,e=w+P/2):(n=c+g/2,e=w+P+.53*h);var D=$(I,w,C,P),O=$(T,B,x,F);if(K(D,M*h,S,!1),K(O,y*h,"#fff",!0),null==i.headPic.width||0==i.headPic.width)t.drawImage(R,T,B,x,F);else{var E=R.naturalWidth*i.headPic.width/i.headPic.imgW,N=E/i.headPic.width,J=i.headPic.left*N,H=i.headPic.top*N;t.drawImage(R,J,H,E,E,T,B,x,F)}t.closePath(),t.restore()}else{l=k;var U=k.avatarCentreXFactor,V=k.avatarCentreYFactor,M=k.avatarRadiusFactor,y=k.imgRadiusFactor,S=k.avatarStyle,W=k.globalAlpha||1;m||(U=p/u*a.pp.al+M,V=p/u*a.pp.at+M),!d&&3.53>2*M&&(U+=(3.53-2*M)/2);var z=h*U,G=h*V,Y=h*M,X=h*y;if(d)n=U+M+.59,e=G;else{var ee=k.nameTopWitchAvatarFactor||.53;n=U,e=G+Y+ee*h}var te=Z(z,G,Y),ie=Z(z,G,X);if(Q(te,S,W,!1),Q(ie,"#fff",1,!0),null==i.headPic.width||0==i.headPic.width)t.drawImage(R,z-X,G-X,2*X,2*X);else{var E=R.naturalWidth*i.headPic.width/i.headPic.imgW,N=E/i.headPic.width,J=i.headPic.left*N,H=i.headPic.top*N;t.drawImage(R,J,H,E,E,z-X,G-X,2*X,2*X)}t.closePath(),t.restore()}!function(e,o,n){var a=n.nameStyle||"#666",r=h*o,s=e,l=.486*h;t.font=l+"px arial",t.fillStyle=a,t.textAlign="left",t.textBaseline="middle";var c=i.memberName;c.length>12&&(c=i.memberName.substring(0,12)+"...");d||(t.textAlign="center");if(""!=A&&!d){var m=n.nameBgImgHalfWidthFactor*h||0,p=n.nameBgImgHalfHeightFactor*h||0,u=n.nameHeightOffsetFactor*h||0,f=t.measureText(c).width+2*m;t.drawImage(q,r-m-t.measureText(c).width/2,s-p/2+u,f,p)}t.fillText(c,r,s)}(e,n,l)}(),function(){if(2==a.pmt)return;var e=F.textXFactor||0,i=F.textYFactor||0,o=e*h,n=i*h,r=F.text||"",s=F.color||"",l=F.size||"",d=F.font||"arial",m=F.isBole?"bold ":"",f=F.isItalic?"italic ":"",g=F.isUnderLine||!1;c||(o=h*(p/u)*a.pp.pml,n=h*(p/u)*a.pp.pmt,r=a.pm.t||"",s=a.pm.c||"",l=h*(p/u)*parseInt(a.pm.s.split("px")[0])||"",d=a.pm.f||"arial",m=a.pm.ib?"bold ":"",f=a.pm.ii?"italic ":"",g=a.pm.iu||!1);t.font=f+m+l+"px "+d,t.fillStyle=s,t.textAlign="center",t.textBaseline="top";var v=10.2*h,b=0;o=o+v/2-.45*h;var j=0,_=!1,M=0,y=0;g&&(M=l/10,y=l/10);for(var S=0;S<r.length;S++)(b+=t.measureText(r[S]).width)>v&&(t.fillText(r.substring(j,S-1),o,n),g&&ee(o,n+M,b-2*t.measureText(r[S]).width,l,s,y),n+=1.3*l+M/2,b=S!=r.length-1?0:t.measureText(r[S]).width,j=S-1,S--,_=!0),S==r.length-1&&(_?(t.fillText(r.substring(j,S+1),o,n),g&&ee(o,n+M,b+t.measureText(r[S]).width,l,s,y)):(t.fillText(r.substring(j,S+1),o,n),g&&ee(o,n+M,b,l,s,y)))}(),function(){var e=T.codeLeftFactor,i=T.codeTopFactor,n=T.codeWidthFactor,r=T.codeHeightFactor;m||(e=p/u*a.pp.qcl,i=p/u*a.pp.qct);var l=h*e,c=h*i,d=h*n,f=h*r;if(t.save(),!o&&3==s||o&&(1==s||3==s)){var g=h*T.codeInnerLeftFactor+l,v=h*T.codeInnerTopFactor+c,b=h*T.codeInnerWidthFactor,j=h*T.codeInnerHeightFactor;t.drawImage(z,l,c,d,f),t.drawImage(W,g,v,b,j)}else t.drawImage(W,l,c,d,f);t.restore()}(),o){var e=document.getElementById("invitePoster").toDataURL("image/png");(n=new Image).src=e,n.setAttribute("class","actualPoster invitePoster"),n.setAttribute("style","width:13rem;"),jm(".invitePosterWrapper .posterBody").empty().append(n).append("<div class='posterBodyBtn'>长按保存图片</div>")}else{var n;e=document.getElementById("promoPoster").toDataURL("image/png");(n=new Image).src=e,n.setAttribute("class","actualPoster promoPoster"),n.setAttribute("style","width:13rem;"),jm(".promoPosterWrapper .posterBody").empty().append(n).append("<div class='posterBodyBtn'>长按保存图片</div>")}}function $(e,t,i,o){return{x:e,y:t,width:i,height:o}}function X(e,t){return{x:e,y:t}}function K(e,i,o,n){var a=X(e.x+i,e.y),r=X(e.x+e.width,e.y),s=X(e.x+e.width,e.y+e.height),l=X(e.x,e.y+e.height),c=X(e.x,e.y);t.save(),t.beginPath(),t.fillStyle=o,t.strokeStyle=o,t.moveTo(a.x,a.y),t.arcTo(r.x,r.y,s.x,s.y,i),t.arcTo(s.x,s.y,l.x,l.y,i),t.arcTo(l.x,l.y,c.x,c.y,i),t.arcTo(c.x,c.y,a.x,a.y,i),t.stroke(),t.fill(),n?t.clip():(t.closePath(),t.restore())}function Z(e,t,i){return{x:e,y:t,radius:i}}function Q(e,i,o,n){var a=e.x,r=e.y,s=e.radius;t.save(),t.beginPath(),t.moveTo(a,r),t.fillStyle=i,t.globalAlpha=o,t.arc(a,r,s,0,2*Math.PI,!0),t.fill(),n?t.clip():(t.closePath(),t.restore())}function ee(e,i,o,n,a,r){e-=o/2,i+=n+r,t.beginPath(),t.strokeStyle=a,t.lineWidth=r,t.moveTo(e,i),t.lineTo(e+o,i),t.stroke()}""!=A?(q.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+J+"&imgUrl="+jm.encodeUrl(A),q.onload=function(){C=!0,G()&&Y()}):(C=!0,G()&&Y())},Mobi.loadPromoNotify=function(){Mobi.logDog(200578,7);var e=jm(".promoterPanel"),t=null,i="";if(e.find(".promoPageBg").hide(),0!==jm(".promoNotifyWrapper").length)return jm(".promoNotifyWrapper").show(),void Mobi.modifyPageHeader("提现通知",".promoNotifyWrapper",".promoPageBg");jm.ajax({url:"ajax/promoter_h.jsp?cmd=getPromoteFlow",data:"isWithdraw=true",async:!1,success:function(e){e=jm.parseJSON(e),t=e.flowList}}),i+="<div class='promoNotifyWrapper'>",null!=t&&t.length>0?jm.each(t,function(e,t){i+="<div class='aWithdraw' onclick='Mobi.loadWithdrawDetail("+JSON.stringify(t)+")'>",i+="    <div class='leftPart'>",i+="        <div class='withdrawTitle'>"+t.showName+"</div>",t.iur&&(i+="        <div class='unreadSymbol'></div>"),i+="        <div class='withdrawDate'>"+t.settleTimeStr+"</div>",i+="    </div>",i+="    <div class='rightPart'>",101===t.status||103===t.status?i+="    <div class='withdrawAmount succ'>"+Fai.top.choiceCurrencyVal+t.amount.toFixed(2)+"</div>":102!==t.status&&104!==t.status||(i+="    <div class='withdrawAmount fail'>"+Fai.top.choiceCurrencyVal+t.amount.toFixed(2)+"</div>"),i+="    </div>",i+="</div>"}):(i+="<div class='promoEmpty promoWithdrawEmpty'>",i+="    <div class='promoEmptyIcon'></div>",i+="    <div class='promoEmptyTxt'>暂无提现信息</div>",i+="</div>"),i+="</div>",e.append(i),Mobi.modifyPageHeader("提现通知",".promoNotifyWrapper",".promoPageBg")},Mobi.promoShareIconClick=function(){Mobi.logDog(20578,8);var e=jm("#productDetailShare");Fai.top._openThemeV3&&jm("#webHeader_v3").hasClass("innerHeadStyle")&&(e=jm("#productDetailShare2"));var t=jm("#mallThemeProductDetailShare");e.click(),t.click()},Mobi.loadWithdrawDetail=function(e){jm.ajax({url:"ajax/promoter_h.jsp?cmd=setPromoteWithdrawAlreadyRead",data:"id="+e.id,success:function(e){e=jm.parseJSON(e)}});var t=jm(".promoterPanel"),i="";if(t.find(".promoNotifyWrapper").hide(),0!==jm("#withdrawDetail"+e.id).length)return jm("#withdrawDetail"+e.id).show(),void Mobi.modifyPageHeader("通知详情","#withdrawDetail"+e.id,".promoNotifyWrapper",2);var o="";101===e.status||103===e.status?o="商家已经通过你的提现申请，请查看你的提现账户是否到账。":102===e.status?o="商家拒绝了你的提现申请，拒绝原因："+jm.encodeHtml(e.other.rm)+"。":104===e.status&&(o="打款失败，请联系商家");var n=e.other.ac,a=e.other.wt;10==a||11==a||14==a?n+="（微信零钱）":12!=a&&13!=a||(n+="（支付宝）"),i+="<div class='withdrawDetail' id='withdrawDetail"+e.id+"'>",i+="    <div class='withdrawBg g_bgColor g_main_bgColor_v3'>",i+="        <div class='withdrawTitleWrapper'>",101===e.status||103===e.status?(i+="        <div class='withdrawIcon succ'></div>",i+="        <div class='withdrawTxt'>提现申请成功</div>"):102!==e.status&&104!==e.status||(i+="        <div class='withdrawIcon fail'></div>",i+="        <div class='withdrawTxt'>提现申请失败</div>"),i+="        </div>",i+="    </div>",i+="    <div class='withdrawInfo'>",i+="        <div class='withdrawInfoTitle'>"+o+"</div>",i+="        <div class='withdrawInfoBody'>",i+="            <div class='applyDate'>申请时间："+e.settleTimeStr+"</div>",i+="            <div class='applyAmount'>申请金额：",101===e.status||103===e.status?i+="            <span class='succ'>"+Fai.top.choiceCurrencyVal+e.amount.toFixed(2)+"</span>":102!==e.status&&104!==e.status||(i+="            <span class='fail'>"+Fai.top.choiceCurrencyVal+e.amount.toFixed(2)+"</span>"),i+="            </div>",i+="            <div class='withdrawAcct'>提现账户：",i+="                <span>"+jm.encodeHtml(n)+"</span>",i+="            </div>",i+="        </div>",i+="    </div>",i+="</div>",t.append(i),Mobi.modifyPageHeader("通知详情","#withdrawDetail"+e.id,".promoNotifyWrapper",2)},Mobi.loadCouponList=function(e){function t(e,t){this.mid=e,this.flag=t}var i,o=t.prototype,n=0,a=[1,1,1],r=10,s=[[],[],[]];function l(e){var t="fk-coupon-tab-active",i=jm(".coupon-tab");i.attr("style",""),i.find("em").attr("style",""),i.removeClass(t);var o=Fai.top._openThemeV3?"openThemeV3Tab ":"";i.addClass(o);var n=jm(".coupon-tab").eq(e),a=jm(".g_button").css("background-color");Fai.top._openThemeV3?(jm(".unusedTab").click(function(){jm(".cpUnderline").css("left","1.55rem")}),jm(".usedTab").click(function(){jm(".cpUnderline").css("left","6.8rem")}),jm(".uselessTab").click(function(){jm(".cpUnderline").css("left","12.2rem")})):n.css({background:a,color:"#fff",borderColor:a}),n.find("em").css({borderColor:a+" transparent transparent transparent"}),n.addClass(t)}function c(e){jm(".coupon-tab").eq(e).addClass("coupon-tab-selected").siblings(".coupon-tab").removeClass("coupon-tab-selected")}function d(){jm(".webHeaderBg").height()<=jm("body")[0].scrollTop&&(Fai.top._templateFrameId<2e3||Fai.top._templateFrameId>=3e3)&&!Fai.top._openThemeV3?(jm(".tabList").css({position:"fixed",width:jm(".couponListPanel").width()+"px"}),jm("#showCouponList").css("margin-top","1.7rem")):(jm(".tabList").css({position:"",width:""}),jm("#showCouponList").css("margin-top",""))}function m(){var e;a[n];e=s[n];var t=[];if(0==e.length){t.push("<div class='coupon-empty'>"),Fai.top._openThemeV3?t.push("<div class='hasNoCoupons'></div>"):t.push("<div class='icon-coupons1'></div>");var i="";0==n?i=jm.format(LS.notHasCoupon,LS.notUse):1==n?i=jm.format(LS.notHasCoupon,LS.used):2==n&&(i=jm.format(LS.notHasCoupon,LS.js_expired)),t.push("<div class='showMsg'>"+i+"</div>"),t.push("</div>")}else t.push("<div class='show-coupon-list'>"),jm.each(e,function(e,i){var o="g_mainColor g_main_color_v3",a="couponItemLeftConditBlack",r="couponDetailValidColor",s="",l="",c="";0!=n&&(o="",a="",s="coupon-words-invalid",r="couponDetailInvalidColor"),i.comments||(l="couponNameNoComm",c="couponValidityNoComm");var d="";0==e&&(d="margin-top:0.43rem;"),t.push("<div class ='couponItem' couponId='"+i.couponId+"' data_id='"+i.cdId+"' style='"+d+"'>"),t.push("<div class='circleLeft'></div>"),t.push("<div class='couponItem-left "+o+"'>"),t.push("<div class='couponItemLeftData'>"+Fai.top.choiceCurrencyVal+"</span><span style='font-size: 1.625rem;'>"+i.savePrice+"</span></div>"),t.push("<div class='couponItemLeftCondit "+a+"'>"+jm.format(LS.fullMinCanUse,i.orderMinPrice)+"</div>"),t.push("</div>"),t.push("<div class='couponItem-right'>"),2052==Fai.top._lcid||1028==Fai.top._lcid?1==n?t.push("<div class='couponState couponStateUsed'></div>"):2==n&&t.push("<div class='couponState couponStateExpired'></div>"):1==n?t.push("<div class='couponState couponStateUsedEn'></div>"):2==n&&t.push("<div class='couponState couponStateExpiredEn'></div>"),t.push("<div class='couponItemRightName "+l+" "+s+"'>"+jm.encodeHtml(i.couponName)+"</div>"),t.push("<div class='couponItemRightValidity "+c+"'>"+i.validity+"</div>"),null!=i.comments&&""!=i.comments&&(t.push("<div class='couponItemRightDetail'>展开详情"),t.push("<svg class='detailIcon'><use xlink:href='#jzm-vicon_arrow7' /></svg>"),t.push("</div>")),0==n&&t.push("<div class='toUseCoupon g_mainColor g_main_color_v3'>"+LS.toUseCoupon+"</div>"),t.push("</div>"),t.push("<div class='circleRight'></div>"),t.push("<div class='couponItem-bottom'>"),t.push("<div class='detailLine'></div>"),t.push("<div class='couponItemBottomContent "+r+"'>备注："+jm.encodeHtml(i.comments)+"</div>"),t.push("</div>"),t.push("</div>")}),t.push("</div>");return t.join("")}return o.init=function(){var e;e=i=this,jm.ajax({url:"ajax/mallCoupon_h.jsp?cmd=getCouponByMid",data:"mid="+e.mid,dataType:"json",success:function(e){var t,o,a;e.success&&(e.receiveList&&(s[0]=e.receiveList),e.usedList&&(s[1]=e.usedList),e.expireList&&(s[2]=e.expireList),t=i,o=jm(".couponListPanel"),(a=[]).push('<div class="tabList">'),a.push('<div class="unusedTab coupon-tab"><span><span class="">'+LS.notUse+'(</span><span class="coupon-amount">'+s[0].length+"</span><span>)</span></span><em></em></div>"),a.push('<div class="usedTab coupon-tab"><span><span>'+LS.used+'(</span><span class="coupon-amount">'+s[1].length+"</span><span>)</span></span><em></em></div>"),a.push('<div class="uselessTab coupon-tab"><span><span>'+LS.js_expired+'(</span><span class="coupon-amount">'+s[2].length+"</span><span>)</span></span><em></em></div>"),a.push("</div>"),a.push('    <div class="cpUnderline g_bgColor g_main_bgColor_v3"></div>'),a.push("<div id='showCouponList'>"),a.push(m()),a.push("</div>"),o.append(a.join("")),t.flag?c(n):l(n),jm("body").height())},error:function(){}}),function(){var e=i;Mobi.onTouchAndClickEvent(".coupon-tab",function(){jm(this).index()!=n&&(n=jm(this).index(),e.flag?c(n):l(n),jm(".show-coupon-list").remove(),jm(".coupon-empty").remove(),jm("#showCouponList").append(m()))}),document.addEventListener("touchstart",function(e){d()},!1),document.addEventListener("touchmove",function(e){d()},!1),document.addEventListener("touchend",function(e){d()},!1),document.addEventListener("scroll",function(){d()},!1),Mobi.onTouchAndClickEvent(".icon-delIcon",function(){var t=jm(this).parents(".coupon-warp"),i=t.attr("data_id"),o=LS.delCouponWillUnavail;0!=n&&(o=LS.confirmDelCoupon);var l={textClass:"confirm",content:o,callback:function(){s[n].splice((a[n]-1)*r,1),jm.ajax({url:"ajax/member_h.jsp?cmd=delCoupon",data:"mid="+e.mid+"&cdid="+i,dataType:"json",success:function(e){e.success&&(t.remove(),jm(".coupon-tab").eq(n).find(".coupon-amount").text(s[n].length))},error:function(){}}),jm("#mobiPrompt").remove(),jm("#mobiPrompt_Bg").remove()}};Mobi.prompt(l)}),Mobi.onTouchAndClickEvent(".toUseCoupon",function(){var e=jm(this).parents(".couponItem").attr("couponid");Fai.top.location.href="pr.jsp?couponId="+e}),Mobi.onTouchAndClickEvent(".couponItemRightDetail",function(){jm(this).parents(".couponItem").find(".couponItem-bottom").toggle();var e="none"!=jm(this).parents(".couponItem").find(".couponItem-bottom").css("display");e?jm(this).find(".detailIcon").css("transform","rotate(0deg)"):jm(this).find(".detailIcon").css("transform","rotate(180deg)")})}()},t}(jm),Mobi.memberHeadPic=function(e,t){this.sessionMid=e,this.headPicJson=t},function(e,t,i){var o,n,a,r,s,l,c,d=Mobi.memberHeadPic.prototype,m=e(".picArea .coverImg"),p=e(".picArea"),u=e("#headPic");function h(){e(".coverImg").css({width:c+"px",height:c+"px",top:s+"px",left:l+"px"}),e(".picArea .coverRing").css({width:c-2+"px",height:c-2+"px",top:s+"px",left:l+"px"}),e(".picArea .coverBox").css({width:c+"px",height:c+"px",top:s-1+"px",left:l-1+"px"}),e(".picArea .cover1").css({width:"100%",height:a+"px",top:0,left:0}),e(".picArea .cover2").css({width:l+"px",height:c+"px",top:s+"px",left:0}),e(".picArea .cover4").css({width:n-c-l+"px",height:c+"px",top:s+"px",left:c+l+"px"}),e(".picArea .cover5").css({width:"100%",height:o-c-s+"px",top:c+s+"px",left:0})}function f(){c<100?c=100:c>Math.min(u[0].height,u[0].width)&&(c=Math.min(u[0].height,u[0].width)),a<s?a=s:a>s+u[0].height-c&&(a=s+u[0].height-c),r<l?r=l:r>l+u[0].width-c&&(r=l+u[0].width-c),a>=s&&a<=s+u[0].height-c&&r>=l&&r<=l+u[0].width-c&&(m.css({width:c+"px",height:c+"px",top:a+"px",left:r+"px"}),e(".picArea .coverRing").css({width:c-2+"px",height:c-2+"px",top:a+"px",left:r+"px"}),e(".picArea .coverBox").css({width:c+"px",height:c+"px",top:a-1+"px",left:r-1+"px"}),e(".picArea .cover1").css({width:"100%",height:a+"px",top:0,left:0}),e(".picArea .cover2").css({width:r+"px",height:c+"px",top:a+"px",left:0}),e(".picArea .cover4").css({width:n-c-r+"px",height:c+"px",top:a+"px",left:c+r+"px"}),e(".picArea .cover5").css({width:"100%",height:o-c-a+"px",top:c+a+"px",left:0}))}function g(e){var t,i,o,n,a=0,r=0;if(t=e.touches[0].pageX,o=e.touches[1].pageX,i=e.touches[0].pageY-document.body.scrollTop,n=e.touches[1].pageY-document.body.scrollTop,t&&o)return a=t<=o?(o-t)/2+t:(t-o)/2+o,r=i<=n?(n-i)/2+i:(i-n)/2+n,{dist:Math.round(Math.sqrt(Math.pow(t-o,2)+Math.pow(i-n,2))),x:Math.round(a),y:Math.round(r)}}d.init=function(){this.initBind()},d.initBind=function(){var t,i,d,v,b,j,_,M,y=this;m=e(".picArea .coverImg"),p=e(".picArea"),(u=e("#headPic")).on({load:function(){s=e(this)[0].offsetTop,l=e(this)[0].offsetLeft,c=Math.min(e(this)[0].height,e(this)[0].width),a=s+e(this)[0].height/2-c/2,r=l+e(this)[0].width/2-c/2,u.css({top:s+"px",left:l+"px"}),f()}}),e("#memberHeadPic").click(function(t,i){var d=setInterval(function(){if(e("#headPic")[0].complete){if(e("#profile").hide(),e(".middleCenter").css("padding-bottom","0"),e("#editMemberHeadPic").css("height",e(window).height()+"px"),e("#editMemberHeadPic").show(),Mobi.deviceTypeIsMobi()&&e("#coverBox").remove(),p.css("height",e(window).height()-Math.floor(e(".loginHeader").height())-Math.floor(e(".editHeadPicFooter").height())+"px"),o=Number(p.height()),n=Number(p.width()),s=(o-u.height())/2,l=(n-u.width())/2,Fai.top._manageMode||p.css("pointer-events","none"),"{}"==e.toJSON(y.headPicJson)||""==y.headPicJson.thumbId)a=s,r=l,c=Number(u.width());else{var t=y.headPicJson.imgW/u.width();a=s+y.headPicJson.top/t,r=l+y.headPicJson.left/t,c=y.headPicJson.width/t}u.css({top:s+"px",left:l+"px"}),Math.min(u.width(),u.height()),h(),f(),clearInterval(d),Mobi.cusHistory.add("memberHeadPic",i,1,"#memberHeadPic")}},50)}),e(".J_memberHeadPicV3").click(function(t){var i=setInterval(function(){if(e("#headPic")[0].complete){if(e("#profile").hide(),e("#modifyPersInfo").hide(),e(".middleCenter").css("padding-bottom","0"),e("#editMemberHeadPic").css("height",e(window).height()+"px"),e("#editMemberHeadPic").show(),Mobi.deviceTypeIsMobi()&&e("#coverBox").remove(),p.css("height",e(window).height()-Math.floor(e(".loginHeader").height())-Math.floor(e(".editHeadPicFooter").height())+"px"),o=Number(p.height()),n=Number(p.width()),s=(o-u.height())/2,l=(n-u.width())/2,Fai.top._manageMode||p.css("pointer-events","none"),"{}"==e.toJSON(y.headPicJson)||""==y.headPicJson.thumbId)a=s,r=l,c=Number(u.width());else{var d=y.headPicJson.imgW/u.width();a=s+y.headPicJson.top/d,r=l+y.headPicJson.left/d,c=y.headPicJson.width/d}u.css({top:s+"px",left:l+"px"}),Math.min(u.width(),u.height()),h(),f(),clearInterval(i),Mobi.cusHistory.add("memberHeadPicV3",t,2,".J_memberHeadPicV3")}},50)}),e(".editHeadPicFooter .saveBtn").click(function(){var t=e(this).attr("mid"),i=e(this).attr("newimg"),o=e(this).attr("oldimgid"),n={};e(Fai.top.Mobi.getPreviewDocument()).find("body").hasClass("jz_themeV3");if(!Fai.top._openThemeV3){if(!i&&!o)return e("#editMemberHeadPic").hide(),void e("#profile").show();y.headPicJson.width=Math.round(c),y.headPicJson.top=Math.round(a-s),y.headPicJson.left=Math.round(r-l),y.headPicJson.imgH=Math.round(u[0].height),y.headPicJson.imgW=Math.round(u[0].width),null!=i?e.ajax({type:"post",url:"ajax/member_h.jsp?cmd=cimg",data:"oldImgId="+o+"&mid="+t+"&newImg="+e.encodeUrl(i),async:!1,error:function(){Mobi.ing(LS.memberPvrofileError)},success:function(e){(e=JSON.parse(e)).success&&(y.headPicJson.thumbId=e.fileId)}}):y.headPicJson.thumbId=o,n.headPic=y.headPicJson,e.ajax({type:"post",async:!1,url:"ajax/member_h.jsp?cmd=set",data:"id="+t+"&info="+e.encodeUrl(e.toJSON(n)),error:function(){Mobi.ing(LS.memberProfileError)},success:function(t){e.parseJSON(t).success?(y.headPicJson.path=u.attr("src"),Mobi.initMemberHeadPic(y.headPicJson),e("#editMemberHeadPic").hide(),e("#profile").show(),Mobi.ing(LS.saveMemHeadImgSuc,1)):Mobi.ing(LS.memberProfileError)}})}}),e(".editHeadPicFooterV3 .saveBtn").click(function(){var t=e(this).attr("mid"),i=e(this).attr("newimg"),o=e(this).attr("oldimgid"),n={};if(!i&&!o)return e("#editMemberHeadPic").hide(),void(Fai.top._openThemeV3?Fai.top._openThemeV3&&(e("#profile").hide(),e("#modifyPersInfo").show()):e("#profile").show());y.headPicJson.width=Math.round(c),y.headPicJson.top=Math.round(a-s),y.headPicJson.left=Math.round(r-l),y.headPicJson.imgH=Math.round(u[0].height),y.headPicJson.imgW=Math.round(u[0].width),!Fai.top._openThemeV3||Fai.top._profile?(null!=i?e.ajax({type:"post",url:"ajax/member_h.jsp?cmd=cimg",data:"oldImgId="+o+"&mid="+t+"&newImg="+e.encodeUrl(i),async:!1,error:function(){Mobi.ing(LS.memberProfileError)},success:function(e){(e=JSON.parse(e)).success&&(y.headPicJson.thumbId=e.fileId,e.fileId)}}):y.headPicJson.thumbId=o,n.headPic=y.headPicJson,e.ajax({type:"post",async:!1,url:"ajax/member_h.jsp?cmd=set",data:"id="+t+"&info="+e.encodeUrl(e.toJSON(n)),error:function(){Mobi.ing(LS.memberProfileError)},success:function(t){e.parseJSON(t).success?(y.headPicJson.path=u.attr("src"),Fai.top._profile?e("#modifyPersInfo").show():e("#profile").show(),Mobi.initMemberHeadPicV3(y.headPicJson),e("#editMemberHeadPic").hide(),Mobi.ing(LS.saveMemHeadImgSuc,1)):Mobi.ing(LS.memberProfileError)}}),Fai.top.msgHeadPic=y.headPicJson):(e("#profile").hide(),e("#editMemberHeadPic").hide(),e("#modifyPersInfo").show(),y.headPicJson.path=u.attr("src"),Mobi.initMemberMsgHeadPicV3(y.headPicJson),Fai.top.msgHeadPic=y.headPicJson)}),e(".picArea").on({touchstart:function(e){var o=e.touches.length;if(t=m[0].offsetTop,i=m[0].offsetLeft,c=m[0].width,1==o){e.preventDefault();var n=e.touches[0];b={x:n.pageX,y:n.pageY}}else d=g(e).dist,v=c},touchmove:function(e){var o=e.touches.length;if(Math.min(u.width(),u.height()),1==o){e.preventDefault();var n=e.touches[0];j={x:n.pageX,y:n.pageY},_=j.x-b.x,M=j.y-b.y,a=t+M,r=i+_,f()}else{var s=g(e).dist/d;c=Math.round(v*s),a=t+(v-c)/2,r=i+(v-c)/2,f()}}});var S=!1;function I(e){document.onmousemove=function(o){if(S){switch(j={x:o.pageX,y:o.pageY},_=j.x-b.x,M=j.y-b.y,e){case 0:c=v,a=t+M,r=i+_;break;case 1:c=v+Math.max(_,M),a=t,r=i;break;case 2:c=v-_,a=t,r=i+_;break;case 3:c=v+_,a=t-_,r=i;break;case 4:c=v-_,a=t+_,r=i+_}f()}}}e("body").on("mouseup",function(){S=!1}),e(".picArea").on({mousedown:function(e){t=m[0].offsetTop,i=m[0].offsetLeft,v=m[0].width,b={x:e.pageX,y:e.pageY},S=!0;var o=e.target.id;"coverBox"==o||"coverImg"==o?I(0):"dragBotCenter"==o||"dragRightCenter"==o||"dragRightBot"==o?I(1):"dragLeftCenter"==o||"dragLeftBot"==o?I(2):"dragTopCenter"==o||"dragRightTop"==o?I(3):"dragLeftTop"==o&&I(4)},mouseup:function(){S=!1}},"#coverBox,#coverImg")}}(jm),Mobi.deviceTypeIsMobi=function(){var e=navigator.userAgent.toLowerCase(),t="ipad"==e.match(/ipad/i),i="iphone os"==e.match(/iphone os/i),o="midp"==e.match(/midp/i),n="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),a="ucweb"==e.match(/ucweb/i),r="android"==e.match(/android/i),s="windows ce"==e.match(/windows ce/i),l="windows mobile"==e.match(/windows mobile/i);return!!(t||i||o||n||a||r||s||l)},Mobi.reloadMemberImg=function(e,t){var i=jm("#headPic"),o=jm(".picArea"),n=Number(o.height()),a=Number(o.width());if("new"==e){var r=new Image;r.src=t.smallPath,r.onload=function(){i.attr("src",t.smallPath),imgTop=(n-i.height())/2,imgLeft=(a-i.width())/2,i.css({top:imgTop+"px",left:imgLeft+"px"}),jm(".editHeadPicFooter .saveBtn").attr("newimg",jm.toJSON(t))}}},Mobi.initMemberUploadImg=function(e,t,i,o,n,a,r,s){var l=document.createElement("script");l.type="text/javascript",l.src=o,l.onload=function(){var i=document.createElement("script");i.src="true"==s?r:n,i.type="text/javascript",c.appendChild(i),i.onload=function(){"true"==s?Mobi.mobiMemberUploadImgSWF("file_upload",e,t,1,a):Mobi.mobiMemberUploadImgHtml("file_upload",e,t,a)}};var c=document.documentElement||document.body;c.appendChild(l);var d=jm("#headPic").attr("_src");(new Image).src=d,jm("#headPic").attr("src",d)},Mobi.mobiMemberUploadImgSWF=function(e,t,i,o,n){var a=i.split(","),r={file_post_name:"Filedata",upload_url:"ajax/memberHeadImgUp_h.jsp",button_placeholder_id:e,file_size_limit:t+"MB",button_image_type:3,file_queue_limit:1,button_cursor:SWFUpload.CURSOR.HAND,requeue_on_error:!1,post_params:{ctrl:"Filedata",app:21,type:0,fileUploadLimit:t},file_types:a.join(";"),file_dialog_complete_handler:function(e){this._allSuccess=!1,this.startUpload()},file_queue_error_handler:function(e,t,i){switch(t){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:Mobi.ing(LS.mobiFormSubmitCheckFileSizeErr,!0);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:Mobi.ing(LS.mobiFormSubmitFileUploadNotAllow,!0);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadOneTimeNum,"1"),!0);break;default:Mobi.ing(LS.mobiFormSubmitFileUploadReSelect,!0)}},upload_success_handler:function(e,t){var i=jm.parseJSON(t);this._allSuccess=i.success,this._sysResult=i.msg,i.success?(setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.reloadMemberImg("new",i)):Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg)},upload_error_handler:function(e,t,i){-280==t?Mobi.ing(LS.mobiFormSubmitFileUploadFileCancle,!1):-270==t?Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadFileExist,jm.encodeHtml(e.name)),!0):Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},upload_complete_handler:function(e){e.filestatus==SWFUpload.FILE_STATUS.COMPLETE?setTimeout(function(){swfObj.startUpload()},swfObj.upload_delay):e.filestatus==SWFUpload.FILE_STATUS.ERROR&&Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},upload_start_handler:function(e){Mobi.ing(LS.mobiFormSubmitFileUploadPrepare,!1)},view_progress:function(e,t,i,o){o=Math.ceil(t/i*100);isNaN(o)||(100==o?Mobi.ing(LS.mobiFormSubmitFileUploadIng+o+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+o+"%",!1))}};swfObj=SWFUploadCreator.create(r)},Mobi.mobiMemberUploadImgHtml=function(e,t,i,o){var n=i.split(","),a=jm("#_TOKEN").attr("value"),r={siteFree:!1,updateUrlViewRes:"",auto:!0,fileTypeExts:n.join(";"),multi:!1,fileSizeLimit:1024*t*1024,breakPoints:!0,saveInfoLocal:!1,showUploadedPercent:!0,removeTimeout:9999999,isDefinedButton:!0,getFileSizeUrlFlag:!0,post_params:{app:21,type:0,fileUploadLimit:t,isSiteForm:!0},isOrnotButton:!0,buttonText:"",uploader:"../ajax/memberHeadImgUp_h.jsp?cmd=mobiUpload&_TOKEN="+a,onUploadStart:function(e){jm("#progressBody_ "+e.id).remove(),jm("#progressWrap_"+e.id).remove()},onUploadSuccess:function(e,t){var i=jm.parseJSON(t);i.success?(setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.reloadMemberImg("new",i)):Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg)},onUploadError:function(e,t){jm("#progressWrap_"+e.id).remove(),Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},view_progress:function(e){e=Math.ceil(e);isNaN(e)||(100==e?Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!1))}};upload=jm("#"+e).uploadify(r),jm("#"+e).parent(".modifyBtn").on("click",function(){jm(this).find(".selectbtn")[0].click()});jm("#file_upload_1-button").attr("id","file_upload_pt_1"),jm("#select_btn_1").attr("id","select_btn_pt_1"),Fai.top._manageMode&&jm("#file_upload_pt_1").attr("disabled","true")},Mobi.hideHeader=function(){},Mobi.changeBackgroundToWhite=function(){jm(".jz_themeV3.mobiCol12 #g_web").css("background-color","#ffffff"),jm(".jz_themeV3.mobiCol12 .middleCenter").css("padding-bottom","0"),jm(".jz_themeV3.mobiCol12 .formMiddleContent").css("background-color","#ffffff")},Mobi.revertBackground=function(){jm(".jz_themeV3.mobiCol12 #g_web").css("background-color","#f7f7f7"),jm(".jz_themeV3.mobiCol12 .middleCenter").css("padding-bottom","0")},Mobi.initMemberHeadPic=function(e){var t=jm("#memberHeadPic"),i=jm(".icon-pnameIcon");if(null!=_typeof(e.path)&&t.attr("src",e.path),0!=e.width){var o=e.width/i.width(),n=-e.top/o+"px",a=-e.left/o+"px";t.css({width:e.imgW/o+"px",height:e.imgH/o+"px",marginTop:n,marginLeft:a}),e.imgW/o!=0&&e.imgH/o!=0||t.removeAttr("style")}},Mobi.initMemberHeadPicV3=function(e){var t=jm("#memberHeadPicV3,.memberMsgHeadPicV3"),i=jm(".icon-pnameIcon");if(null!=_typeof(e.path)&&t.attr("src",e.path),0!=e.width&&e.imgW>0&&e.imgH>0){var o=e.width/i.width(),n=-e.top/o+"px",a=-e.left/o+"px";t.css({width:e.imgW/o+"px",height:e.imgH/o+"px",marginTop:n,marginLeft:a}),e.imgW/o!=0&&e.imgH/o!=0||t.removeAttr("style")}},Mobi.initMemberMsgHeadPicV3=function(e){var t=jm(".memberMsgHeadPicV3"),i=jm(".icon-pnameIcon");if(null!=_typeof(e.path)&&t.attr("src",e.path),0!=e.width&&e.imgW>0&&e.imgH>0){var o=e.width/i.width(),n=-e.top/o+"px",a=-e.left/o+"px";t.css({width:e.imgW/o+"px",height:e.imgH/o+"px",marginTop:n,marginLeft:a}),e.imgW/o!=0&&e.imgH/o!=0||t.removeAttr("style")}},Mobi.memberProfileSubmit=function(e,t,i){var o={};if(t){if(i){var n=jm("#oldPsw").val();if(null==n||""==n)return Mobi.ing(LS.memberProfileOldPwdEmpty),void Mobi.getPreviewObject("oldPsw").focus();o.oldPwd=jm.md5(n)}var a=jm("#newPsw").val();if(null==a||""==a)return Mobi.ing(LS.memberProfilePwdEmpty),void Mobi.getPreviewObject("newPsw").focus();if(a.length<4)return Mobi.ing(LS.memberProfilePwdMinLength),void Mobi.getPreviewObject("newPsw").focus();if(a!=jm("#confirmPsw").val())return Mobi.ing(LS.memberProfilePwdNotMatch),void Mobi.getPreviewObject("confirmPsw").focus();o.pwd=jm.md5(a)}else{var r=jm("#profileValue").attr("maxlength"),s=jm("#profileValue").attr("name"),l=jm("#profileValue").val();if(o[s]=l,l.length>r)return Mobi.ing(jm.format(LS.memberProfileUserEditItemMaxLength,s,r)),Mobi.getPreviewObject("profileValue").focus(),!1;if("true"===jm("#profileValue").attr("ismust")){if(null==l||""==l)return jm(this).is("input")?Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty,jm("#modifyProfile").find(".title").html())):Mobi.ing(jm.format(LS.memberSignupUserAddItemIsEmpty2,jm("#modifyProfile").find(".title").html())),Mobi.getPreviewObject("profileValue").focus(),!1;if("email"===s&&l.length>0&&!jm.isEmail(l))return Mobi.ing(jm.format(LS.memberProfileItemCorrect,s)),Mobi.getPreviewObject("profileValue").focus(),!1}}Mobi.ing(LS.memberProfileSubmitting,-1),jm(".g_button").removeClass("sendIcon"),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set",data:"id="+e+"&info="+jm.encodeUrl(jm.toJSON(o)),error:function(){Mobi.ing(LS.memberProfileError)},success:function(e){var t=jm.parseJSON(e);t.success?(Mobi.ing(LS.memberProfileOK,1),document.location.reload()):(jm(".g_button").addClass("sendIcon"),jm(".loginIcon ").hide(),(t.rt=-3)?Mobi.ing(LS.memberProfileOldPwdIncorrectError):Mobi.ing(LS.memberProfileError))}})},Mobi.getMProtocol=function(e){jm("#mProPage .loginHeader").show(),jm("#webHeaderBox").hide(),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=getProContent",error:function(){Mobi.ing(LS.memberProfileError)},success:function(t){var i=jm.parseJSON(t);i.success?(jm("#mProPage").find(".title").html(i.proName),jm("#mProPage").find(".set-line").html(i.msg),window.scrollTo(0,0),jm("#signupPage").hide(),jm("#mProPage").show(),Mobi.cusHistory.add("signUpMProtocol",e,1,"#signUpMProtocol")):alert("服务器连接错误!")}})},Mobi.initSignUpPage=function(){jm("#signUpMProtocol").on("click",function(e,t){Mobi.getMProtocol(t)}),Mobi.cusHistory.init()},Mobi.selectAnimation=function(e){jm(e).siblings(".mobileCtIcon").hasClass("hadChangeClass")?jm(e).siblings(".mobileCtIcon").removeClass("hadChangeClass"):jm(e).siblings(".mobileCtIcon").hasClass("selectAnimationRemove")?(jm(e).siblings(".mobileCtIcon").addClass("selectAnimation"),jm(e).siblings(".mobileCtIcon").removeClass("selectAnimationRemove"),jm(e).siblings(".mobileCtIcon").find(".icon-downward").css({"-webkit-transform":"rotate(-180deg)","-ms-transform":"rotate(-180deg)","-moz-transform":"rotate(-180deg)","-o-transform":"rotate(-180deg)",transform:"rotate(-180deg)"})):jm(e).siblings(".mobileCtIcon").hasClass("selectAnimation")&&(jm(e).siblings(".mobileCtIcon").addClass("selectAnimationRemove"),jm(e).siblings(".mobileCtIcon").removeClass("selectAnimation"),jm(e).siblings(".mobileCtIcon").find(".icon-downward").css({"-webkit-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)","-moz-transform":"rotate(0deg)","-o-transform":"rotate(0deg)",transform:"rotate(0deg)"}))},Mobi.selectAnimationCtrl=function(e){jm(e).hasClass("selectOpen")?jm(e).blur():jm(e).addClass("selectOpen"),Mobi.selectAnimation(e),jm(e).removeClass("selectOpen")},Mobi.checkMustItem=function(e){jm(e).find(".mustItem").on("keyup focusout",function(){var t=!0;jm(e).find(".mustItem").each(function(){""!==jm(this).val().trim()||(t=!1)}),!0===t&&jm(".sendIcon").removeAttr("disabled")})},Mobi.checkLoginMustItem=function(e){jm(e).find(".loginMustItem").on("keyup focusout",function(){var t=!0;jm(e).find(".loginMustItem").each(function(){""!==jm(this).val().trim()||(t=!1)}),!0===t&&jm(".sendIcon").removeAttr("disabled")})},Mobi.checkAddDisabledInit=function(e){var t=!1;jm(e).find(".mustItem").each(function(){""!==jm(this).val().trim()||(t=!0)}),jm(e).find(".loginMustItem").bind("input propertychange",function(){jm(e).find(".loginMustItem").each(function(){""===jm(this).val().trim()&&(t=!0)}),!0===t?jm(".sendIcon").attr("disabled","disabled"):jm(".sendIcon").removeAttr("disabled")}),!0===t&&jm(".sendIcon").attr("disabled","disabled")},Mobi.setPersonalInfo=function(e){var t={},i="",o="",n="",a=0,r=!1,s=jm(".editHeadPicFooterV3 .saveBtn").attr("newimg"),l=jm(".editHeadPicFooterV3 .saveBtn").attr("oldimgid");jm(".infoItem").each(function(){if(i=jm(this).attr("name"),o=jm(this).val(),n=jm(this).attr("proptip"),r=!(jm(this).attr("class").indexOf("mustItem")<0),a||!r||null!=o&&""!=o||(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,n)),this.focus(),a=1),!a&&"email"==i&&o.length>0&&(jm.isEmail(o)||(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,n)),this.focus(),a=1)),!a&&"mobile"==i&&jm(this).parents("#editMobile").length>0&&o.length>0&&("disabled"!=jm(this).attr("disabled")&&"block"==jm("#editMobile").css("display")?jm.isNationMobile(o)||(Mobi.ing(LS.mobileNumRegular),this.focus(),a=1):o=""),"mobile"==i&&jm(this).parents("#editMobile").length<=0)return!1;t[i]=o,"mobile"==i&&o.length<=0&&(t.mobileCt="")}),""!=jm("#modifyPersInfo .acct").attr("disabled")&&(""==jm("#modifyPersInfo .acct").val()?a=1:t.acct=jm("#modifyPersInfo .acct").val()),Fai.top._openThemeV3&&(null!=s?jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=cimg",data:"oldImgId="+l+"&mid="+e+"&newImg="+jm.encodeUrl(s),async:!1,error:function(){Mobi.ing(LS.memberProfileError)},success:function(e){(e=JSON.parse(e)).success&&(Fai.top.msgHeadPic.thumbId=e.fileId,resultFileId=e.fileId)}}):Fai.top.msgHeadPic.thumbId=l,t.headPic=Fai.top.msgHeadPic),0===a&&jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set",data:"id="+e+"&info="+jm.encodeUrl(jm.toJSON(t)),error:function(){Mobi.ing(LS.memberProfileError)},success:function(e){var t=jm.parseJSON(e);t.success?(Mobi.ing(LS.memberProfileOK,1),document.location.reload()):-3==t.rt?Mobi.ing(LS.memberProfileOldPwdIncorrectError):-6==t.rt?Mobi.ing(LS.memberAcctExist):-8==t.rt?Mobi.ing(LS.emailPlural):-9==t.rt?Mobi.ing(LS.mobilePlural):t.mobileErr?Mobi.ing(LS.mobileNumRegular):Mobi.ing(LS.memberProfileError)}})},Mobi.setPersonalInfoForMallThemeV3=function(e,t,i){var o={},n=e.fieldKey,a=e.value,r=e.name||e.value,s=e.must,l=!1;"email"==n&&a.length>0?jm.isEmail(a)||(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,r)),l=!0):s&&!a&&(Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,r)),l=!0),"mobile"==n&&a.length>0&&(jm.isNationMobile(a)||(Mobi.ing(LS.mobileNumRegular),l=1)),l||(o[n]=a,jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set",data:"id="+t+"&info="+jm.encodeUrl(jm.toJSON(o)),error:function(){Mobi.ing(LS.memberProfileError)},success:function(t){var o=jm.parseJSON(t);o.success?(Mobi.ing(LS.memberProfileOK,1),i(e),Mobi.cusHistory.goBack()):-3==o.rt?Mobi.ing(LS.memberProfileOldPwdIncorrectError):-6==o.rt?Mobi.ing(LS.memberAcctExist):-8==o.rt?Mobi.ing(LS.emailPlural):-9==o.rt?Mobi.ing(LS.mobilePlural):o.mobileErr?Mobi.ing(LS.mobileNumRegular):Mobi.ing(LS.memberProfileError)}}))},Mobi.manageLogin=function(){var e=jm(".qqLgnPanel"),t=jm(".sinaLgnPanel"),i=jm(".wxLgnPanel");if(window.parent!=window){jm(".wxLgnPanel").show();var o=!1;2001!=Fai.top._templateFrameId&&2003!=Fai.top._templateFrameId&&2004!=Fai.top._templateFrameId||(o=!0),e.length>0&&t.length>0&&i.length>0?o?e.css("margin-left","0.5rem"):e.css("margin-left","1.8rem"):e.length>0&&0==t.length&&i.length>0?o?e.css("margin-left","2.4rem"):e.css("margin-left","3.6rem"):0==e.length&&t.length>0&&i.length>0?o?t.css("margin-left","2.4rem"):t.css("margin-left","3.6rem"):0==e.length&&t.length>0&&0==i.length?o?t.css("margin-left","4.7rem"):t.css("margin-left","6rem"):e.length>0&&0==t.length&&0==i.length?o?e.css("margin-left","4.7rem"):e.css("margin-left","6rem"):0==e.length&&0==t.length&&i.length>0?o?i.css("margin-left","4.7rem"):i.css("margin-left","6rem"):0==e.length&&t.length>0&&0==i.length?o?t.css("margin-left","4.7rem"):t.css("margin-left","6rem"):e.length>0&&0==t.length&&0==i.length&&(o?e.css("margin-left","4.7rem"):e.css("margin-left","6rem")),jm(".loginContent").find(".notice").length>0||(e.length>0&&e.find("#qqLgn").unbind().click(function(){Mobi.ing("第三方登录需要在手机上使用。请用手机扫一扫，再尝试该功能。",!0)}),t.length>0&&t.find("#sinaLgn").unbind().click(function(){Mobi.ing("第三方登录需要在手机上使用。请用手机扫一扫，再尝试该功能。",!0)}),i.length>0&&i.find("#wxLgn").unbind().click(function(){Mobi.ing("第三方登录需要在手机上使用。请用手机扫一扫，再尝试该功能。",!0)}))}else 2001!=Fai.top._templateFrameId&&2003!=Fai.top._templateFrameId&&2004!=Fai.top._templateFrameId||("none"==i.css("display")?0==e.length&&t.length>0&&0==i.length?t.css("margin-left","4.7rem"):e.length>0&&0==t.length&&0==i.length?e.css("margin-left","4.7rem"):0==e.length&&0==t.length&&i.length>0?i.css("margin-left","4.7rem"):0==e.length&&t.length>0&&i.length>0?t.css("margin-left","4.7rem"):e.length>0&&0==t.length&&i.length>0&&e.css("margin-left","4.7rem"):e.length>0&&t.length>0&&i.length>0?e.css("margin-left","0.5rem"):e.length>0&&0==t.length&&i.length>0?e.css("margin-left","2.4rem"):0==e.length&&t.length>0&&i.length>0?t.css("margin-left","2.4rem"):0==e.length&&0==t.length&&i.length>0&&i.css("margin-left","4.7rem"))},Mobi.manageLoginV3=function(){var e=jm(".qqLgnPanel"),t=jm(".sinaLgnPanel"),i=jm(".wxLgnPanel");window.parent!=window?(jm(".wxLgnPanel").css("display","flex"),e.length>0&&t.length>0&&i.length>0?e.css("margin-left","0rem"):e.length>0&&0==t.length&&i.length>0?e.css("margin-left","0rem"):0==e.length&&t.length>0&&i.length>0?t.css("margin-left","0rem"):0==e.length&&t.length>0&&0==i.length?t.css("margin-left","0rem"):e.length>0&&0==t.length&&0==i.length?e.css("margin-left","0rem"):0==e.length&&0==t.length&&i.length>0?i.css("margin-left","0rem"):0==e.length&&t.length>0&&0==i.length?t.css("margin-left","0rem"):e.length>0&&0==t.length&&0==i.length&&e.css("margin-left","0rem"),jm(".loginContent").find(".notice").length>0||(e.length>0&&e.find("#qqLgn").unbind().click(function(){Mobi.ing("第三方登录需要在手机上使用。请用手机扫一扫，再尝试该功能。",!0)}),t.length>0&&t.find("#sinaLgn").unbind().click(function(){Mobi.ing("第三方登录需要在手机上使用。请用手机扫一扫，再尝试该功能。",!0)}),i.length>0&&i.find("#wxLgn").unbind().click(function(){Mobi.ing("第三方登录需要在手机上使用。请用手机扫一扫，再尝试该功能。",!0)}))):"none"==i.css("display")?0==e.length&&t.length>0&&0==i.length?t.css("margin-left","0"):e.length>0&&0==t.length&&0==i.length?e.css("margin-left","0"):0==e.length&&0==t.length&&i.length>0?i.css("margin-left","0"):0==e.length&&t.length>0&&i.length>0?t.css("margin-left","0"):e.length>0&&0==t.length&&i.length>0&&e.css("margin-left","0"):e.length>0&&t.length>0&&i.length>0?e.css("margin-left","0"):e.length>0&&0==t.length&&i.length>0?e.css("margin-left","0"):0==e.length&&t.length>0&&i.length>0?t.css("margin-left","0"):0==e.length&&0==t.length&&i.length>0&&i.css("margin-left","0")},Mobi.hidePlaceholder=function(){Fai.top._openThemeV3&&(jm("#signupPage").parents(".g_web, .middleCenter").css("background","#ffffff"),jm("#mLogin").parents(".g_web, .middleCenter").css("background","#ffffff"));document.querySelectorAll(".mustItem");for(var e=document.querySelectorAll(".g_input"),t=document.querySelectorAll(".g_textArea"),i="",o=0;o<e.length;o++)e[o].onfocus=function(){i=this.placeholder,this.placeholder="",jm(this).removeClass("fk-inputFontColor")},e[o].onblur=function(){this.placeholder=i,jm(this).addClass("fk-inputFontColor")};for(o=0;o<t.length;o++)t[o].onfocus=function(){i=this.placeholder,this.placeholder=""},t[o].onblur=function(){this.placeholder=i}},Mobi.changeSelectDefaultColor=function(e,t,i){jm(i).css("color",e),jm(i).find("option").css("color",t),jm(i).change(function(){jm(this).val()==jm(this).find("option:first").val()?jm(this).css("color",e):jm(this).css("color",t)})},Mobi.initPersInfo=function(){jm("#modifyPersInfo .member_msg_head_pic_v3").css("border","none")},Mobi.checkLabel=function(e){var t=jm(e).find("span").attr("class");"icon-checkIcon g_mainColor"===t?(t="icon-uncheckIcon g_mainColor",jm(e).parent().find("input").attr("checked",""),jm(e).find("span").attr("class",t)):"icon-uncheckIcon g_mainColor"===t?(t="icon-checkIcon g_mainColor",jm(e).parent().find("input").removeAttr("checked"),jm(e).find("span").attr("class",t)):"icon-checkIcon g_main_color_v3"===t?(t="icon-uncheckIcon",jm(e).parent().find("input").attr("checked",""),jm(e).find("span").attr("class",t)):"icon-uncheckIcon"===t&&(jm(e).parent().find("input").removeAttr("checked"),t="icon-checkIcon g_main_color_v3",jm(e).find("span").attr("class",t))},Mobi.selectOverflow=function(e){e=JSON.parse(e);for(var t="",i="",o=0;o<e.length;o++)if(t=e[o].id,i=e[o].value,jm("#"+t).siblings(".selectCover").val(i),null==i||""==i){var n=jm("#"+t).siblings(".customIcon").text().trim();jm("#"+t).siblings(".selectCover").attr("placeholder",LS.memberOtherLgnPleaseInput+n)}jm(".profile_content_v3 select").each(function(){"mobileCt"!=jm(this).attr("name")&&jm(".selectCover + select").change(function(){var e=jm(this)[0].value;if(jm(this).siblings(".selectCover").val(e),null==e||""==e){var t=jm(this).siblings(".customIcon").text().trim();jm(this).siblings(".selectCover").attr("placeholder",LS.memberOtherLgnPleaseInput+t)}})})},Mobi.selectValueChange=function(e){jm(e+" select").each(function(){if("mobileCt"!=jm(this).attr("name")){var e=jm(this).siblings(".customIcon").text().trim();jm(this).siblings(".selectCover").attr("placeholder",LS.memberOtherLgnPleaseInput+e),jm(".selectCover + select").change(function(){var e=jm(this)[0].value;if(jm(this).siblings(".selectCover").val(e),null==e||""==e){var t=jm(this).siblings(".customIcon").text().trim();jm(this).siblings(".selectCover").attr("placeholder",LS.memberOtherLgnPleaseInput+t)}})}})},Mobi.isEmail=function(e){return/^[a-zA-Z0-9][a-zA-Z0-9_=\&\-\.\+]*[a-zA-Z0-9]*@[a-zA-Z0-9][a-zA-Z0-9_\-\.]+[a-zA-Z0-9]$/.test(e)},Mobi.isNull=function(e){return void 0===e||null==e||!e},Mobi.acquireCode=function(e,t){var i=jm("#acquirerInput").val();if(Mobi.isNull(i)||!i)return Fai.top._openThemeV3&&Mobi.ing("输入的邮箱或手机不能为空！"),!1;t&&Mobi.isEmail(i)?jm.ajax({type:"post",url:"ajax/mail_h.jsp?cmd=sendMemberPwdEmail",data:"memName="+jm.encodeUrl(i)+"&new=true",error:function(){Mobi.ing(LS.js_systemError)},success:function(i){(i=jm.parseJSON(i)).success?(jm("#memCodeSign").val(i.emailCodeSign),Mobi.acquireCodeCountdown(60,e,t)):i.notFound?Mobi.ing(LS.memberDialogNotFound,!0):Mobi.ing(LS.js_argsError,!0)}}):e&&jm.isMobile(i)?jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=sendMemberPwdMobileCode",data:"memName="+jm.encodeUrl(i)+"&new=true",error:function(){Mobi.ing(LS.js_systemError)},success:function(i){(i=jm.parseJSON(i)).success?(jm("#memCodeSign").val(i.mobileCodeSign),Mobi.acquireCodeCountdown(60,e,t)):i.argErr?Mobi.ing(LS.memberDialogSendMobileClose):i.apiKeyNotFound?Mobi.ing(LS.memberDialogYunPianErr):i.tplNotFound?Mobi.ing(LS.memberDialogMobileTplErr):i.notFound?Mobi.ing(LS.memberDialogNotFound):i.limitOne?Mobi.ing(LS.getMobileOneMin):i.limitTwo?Mobi.ing(LS.getMobileHalfHour):i.noMoney?Mobi.ing(LS.memberDialogMobileMoneyErr):i.mobileErr?Mobi.ing(LS.memberDialogSendMobileCodeErr):i.sendLimit?Mobi.ing(LS.memberDialogSendMobileCodeLimit):i.mobileSysErr?Mobi.ing(LS.memberDialogSendMobileSysErr):i.tplNationErr?Mobi.ing(LS.mobileNationTplErr):i.systemErr?Mobi.ing(LS.js_systemError):-301==i.rt?Mobi.ing(LS.smsRanout):Mobi.ing(LS.js_argsError)}}):jm.isMobile(i)?Mobi.ing(LS.memberDialogPlzEnterMail):Mobi.isEmail(i)?Mobi.ing(LS.memberDialogPlzEnterMobile):Mobi.ing(LS.memberDialogPlzEnterBoth)},Mobi.acquireCodeCountdown=function(e,t,i){jm(".acquireCode").attr("onclick","");var o=setInterval(function(){jm(".acquireCode").attr("onclick",""),jm(".acquireCode").text(e+"秒后重发"),e<0&&(clearInterval(o),jm(".acquireCode").text(LS.memberDialogAcquireCode),jm(".acquireCode").attr("onclick","Mobi.acquireCode("+t+", "+i+");return false;")),e--},1e3)},Mobi.memberNewFdPwdStepTwo=function(){var e=jm("#memCodeSign").val();if(!Mobi.isNull(e)&&e){var t=jm("#memCodeInput").val();if(!Mobi.isNull(t)&&t){var i="",o=jm("#acquirerInput").val();if(Mobi.isNull(o)||!o)return!1;if(Mobi.isEmail(o))i="mail";else{if(!jm.isMobile(o))return!1;i="mobile"}var n="memCode="+jm.encodeUrl(t)+"&memCodeSign="+jm.encodeUrl(e)+"&acquirer="+jm.encodeUrl(o)+"&mode="+jm.encodeUrl(i),a=Fai.top._openThemeV3?LS.memberOtherLgnSureV3:LS.memberOtherLgnSure;jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=checkMobileCodeGeneral",data:n,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){if((e=jm.parseJSON(e)).success){jm(".loginContent").html("");var t=["<div>","<input type='password' class='findpswInput itemEdit g_input mustItem' style='padding-left: 0rem; margin-bottom: 0.025rem;' id='newPwInput' placeholder='"+LS.memberDialogNewPwd+"' style='margin-left: 0;'>","<input type='password' class='findpswInput itemEdit g_input mustItem' style='padding-left: 0rem;' id='assureNewPwInput' placeholder='"+LS.memberDialogAssurePwd+"' style='margin-left: 0;'>","<div class='g_globalLine J_memberFdPwdBtn  '>","<input type='button' class='g_button sendIcon fpw_btn g_main_bgColor_v3 ' value='"+a+"' onclick='Mobi.memberNewFdPwdLastStep("+e.memId+")'/>","</div>","</div>"],i=["<div>","<div class='g_globalLine'>","<input type='password' class='findpswInput itemEdit g_input mustItem' style='margin-bottom: 0.025rem;' id='newPwInput' placeholder='"+LS.memberDialogNewPwd+"' style='margin-left: 0;'>","<span class='input_pre_text'>"+LS.memberDialogNewPwd+"</span>","</div>","<div class='g_globalLine'>","<input type='password' class='findpswInput itemEdit g_input mustItem' id='assureNewPwInput' placeholder='"+LS.memberDialogAssurePwd+"' style='margin-left: 0;'>","<span class='input_pre_text'>"+LS.memberDialogNewPwd+"</span>","</div>","<div class='g_globalLine J_memberFdPwdBtn  '>","<input type='button' class='g_button sendIcon fpw_btn g_main_bgColor_v3 ' value='"+a+"' onclick='Mobi.memberNewFdPwdLastStep("+e.memId+")'/>","</div>","</div>"];Fai.top._openThemeV3?(i=i.join(""),jm(".loginContent").html(i)):(t=t.join(""),jm(".loginContent").html(t))}else e.notFound?Mobi.ing(LS.memberDialogNotFound,!0):1==e.rt&&Mobi.ing(LS.memberSignupRegisterCaptchaNotMatch)}})}else Mobi.ing(LS.memberInputCaptcha)}else Mobi.ing(LS.memberDialogGetCodeFirst)},Mobi.memberNewFdPwdLastStep=function(e){var t=jm("#newPwInput").val();if(!Mobi.isNull(t)&&t){var i=jm("#assureNewPwInput").val();if(!Mobi.isNull(i)&&i)if(t===i)if(t.length<4||t.length>20)Mobi.ing(jm.format(LS.memberDialogPwdLimit,4,20));else{var o="newPw="+jm.md5(t)+"&memId="+jm.encodeUrl(e);jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=setMemberPwdGeneral",data:o,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){if((e=jm.parseJSON(e)).success){jm(".loginContent").html("");var t=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepLast">','<div class="loginContent">','<div class="g_globalLine" style="text-align: center;">','<div class="g_circle" style="margin: 1rem auto 1.5rem">','<span class="icon-lockstarIcon g_mainColor "></span>',"</div>",'<span class="title">',LS.memberDialogPwdforced,"</span>","</div>",'<div class="g_globalLine" style="margin-top:1.5rem;">','<input type="button" class="g_button sendIcon" onclick="document.location.href=\'login.jsp\'" value="',LS.memberDialogLoginInstantly,'"/>',"</div> ","</div>","</div>"],i=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepLast">','<div class="loginContent">','<div class="g_globalLine" style="text-align: center;">','<div class="g_circle " style="margin: 1rem auto 1.5rem">','<span class="icon-lockstarIcon g_mainColor  g_main_color_v3 "></span>',"</div>",'<span class="title">',LS.memberDialogPwdforcedV3,"</span>","</div>",'<div class="g_globalLine" style="margin-top:1.5rem;">','<input type="button" class="g_button sendIcon g_main_bgColor_v3  fpw_btn " onclick="document.location.href=\'login.jsp\'" value="',LS.memberDialogLoginInstantly,'"/>',"</div> ","</div>","</div>"];t=Fai.top._openThemeV3?i.join(""):t.join(""),jm(".loginContent").html(t)}else e.notFound?Mobi.ing(LS.memberDialogNotFound,!0):Mobi.ing(LS.js_argsError,!0)}})}else Mobi.ing(LS.memberDialogPwdDifToPwd2);else Mobi.ing(LS.memberDialogPleaseEnterPwd2)}else Mobi.ing(LS.memberDialogPleaseEnterPwd)},Mobi.memberFdPwd=function(e,t){jm(".J_showFindPwWay").html("");var i=jm.trim(jm("#macct").val());if(""==i)return Mobi.ing(LS.memberInputAcct,!0),void Mobi.getPreviewObject("macct").focus();function o(e,t,i){var o,n=Fai.top.jm;if("array"!==n.type(t)||"string"!==n.type(e))return"";for(o=t.length;o;)o--,"string"===n.type(t[o])&&(t[o]=[i,t[o],i].join(""));return e+"("+t.join(",")+")"}jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=getMAcctMail",data:"mAcct="+jm.encodeUrl(i),error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(n){if((n=jm.parseJSON(n)).success){if(!n.findPwByMobileOpen&&n.noMail)return void Mobi.ing(LS.memberDialogNoEmailMsg);if(!n.findPwByMailOpen&&(null==n.mobile||"null"==n.mobile||""==n.mobile))return void Mobi.ing(LS.memberDialogNoMobile);if(n.noMail&&("null"==n.mobile||""==n.mobile))return void Mobi.ing(LS.memberDialogNoMailMobile);Fai.top._openThemeV3&&jm(".two_way_change_wrap").hide(),jm(".J_memberFdPwdBtn").remove();var a=[];a.push('<div class="fk-mem-findPwStepOneFindWay"style="">'),a.push(LS.memberFdPwdWay+":"),a.push("</div>"),n.findPwByMailOpen&&(n.noMail?a.push('<div class="fk-mem-findPwStepOne" onclick="Mobi.findPwByMailShowNoMail()">'):a.push('<div class="fk-mem-findPwStepOne stepOneByEmail" onclick="'+o("Mobi.findPwByMailStepTwo",[i,e,t,n.mail],"'")+'">'),a.push('<span class="content">'),a.push(LS.memberFdPwdWayByMail),a.push("</span>"),Fai.top._openThemeV3||(a.push('<span class="icon-gGoforward">'),a.push("</span>")),a.push("</div>")),n.findPwByMobileOpen&&("null"==n.mobile||""==n.mobile?a.push('<div class="fk-mem-findPwStepOne" onclick="Mobi.findPwByMobileShowNoMb()">'):a.push('<div class="fk-mem-findPwStepOne" onclick="'+o("Mobi.sendFindPwMobileCode",[i,!0,e,t,n.mobile],"'")+'">'),a.push('<span class="content">'),a.push(LS.memberFdPwdWayByMobile),a.push("</span>"),Fai.top._openThemeV3||(a.push('<span class="icon-gGoforward">'),a.push("</span>")),a.push("</div>")),a=a.join(""),jm(".J_showFindPwWay").append(a)}else n.notFound?Mobi.ing(LS.memberDialogNotFound,!0):Mobi.ing(LS.js_argsError,!0)}})},Mobi.findPwByMailShowNoMail=function(){Mobi.ing(LS.memberShowNoMail)},Mobi.findPwByMobileShowNoMb=function(){Mobi.ing(LS.memberShowNoMobile)},Mobi.findPwByMailStepTwo=function(e,t,i,o){var n=Fai.top._openThemeV3?"profileLoginHeader":"",a=Fai.top._openThemeV3?"emailFindTipHide":"";jm("#memberFdPwdStepOne").parent(".moduleContent").hide();var r=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepTwo">','<div class="loginHeader webHeaderBg J_cusBack '+n+'">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title pageTitle">',LS.memberDialogFwdStepOneTitle,"</span>","</div>",'<div class="g_globalLine fk-mem-findPw-showMsg"><div class="showMsg">',"",LS.memberDialogSendedMsg,"&nbsp",o,"&nbsp",LS.memberDialogViewMail,"","</div></div>",'<div class="loginContent findEmailContent">','<div class="g_globalLine">','<input type="text" maxlength="4"  id="memEmailCode" class="emailStepTwoCode itemEdit g_input mustItem " placeholder="',LS.memberDialogPleaseEnterCode,'"/>','<input style="display:none;" type="text" id="memMailCodeSign" disabled/>','<span class="icon-pswIcon icon-codeIcon g_mainColor g_main_color_v3 '+a+'"></span>',"</div>",'<div class="g_globalLine">','<input type="button" id="sendEmailCode" style="width:49%;float:left;" class="g_button sendIcon" onclick="Mobi.sendMemberEmailPwdCode(\''+e+'\');" value="',LS.memberDialogReSendMsg,'(60)" disabled/>','<input type="button" style="width:49%;float:left;margin-left:2%;" class="g_button sendIcon " onclick="Mobi.memberFdPwdStepThree(\''+e+"','"+t+"','"+i+'\');" value="',LS.memberDialogNextStep,'"/>',"</div>","</div>","</div>"],s=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepTwo">','<div class="J_cusBack loginHeader webHeaderBg '+n+'">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title pageTitle">',LS.memberDialogFwdStepOneTitle,"</span>","</div>",'<div class="g_globalLine fk-mem-findPw-showMsg"><div class="showMsg">',"",LS.memberDialogSendedMsg,"&nbsp",o,"&nbsp",LS.memberDialogViewMail,"","</div></div>",'<div class="loginContent findEmailContent">','<div class="g_globalLine" style="position: relative;">','<input type="text" maxlength="4"  id="memEmailCode" class="emailStepTwoCode itemEdit g_input mustItem " placeholder="',LS.memberDialogPleaseEnterCode,'"/>','<input style="display:none;" type="text" id="memMailCodeSign" disabled/>','<span class="icon-pswIcon icon-codeIcon g_mainColor g_main_color_v3 '+a+'"></span>','<input type="button" id="sendEmailCode" class="g_button sendIcon emailStepTwoSendCode" onclick="Mobi.sendMemberEmailPwdCode(\''+e+'\');" value="',LS.memberDialogReSendMsg,'(60)" disabled/>',"</div>",'<div class="g_globalLine">','<input type="button" class="g_button sendIcon g_main_bgColor_v3 fpw_btn " onclick="Mobi.memberFdPwdStepThree(\''+e+"','"+t+"','"+i+'\');" value="',LS.memberDialogNextStep,'"/>',"</div>","</div>","</div>"];r=Fai.top._openThemeV3?s.join(""):r.join(""),jm(".middleCenter").append(r),Mobi.sendMemberEmailCodeImgFix("#memEmailCode",t),Mobi.sendMemberEmailPwdCode(e)},Mobi.findPwByMobileStepTwo=function(e,t,i,o,n){if(Fai.top._openThemeV3)Mobi.findPwByMobileStepTwoV3(e,t,i,o,n);else{jm("#memberFdPwdStepOne").hide(),jm("#memberFdPwdStepTwo").remove();var a=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepTwo">','<div class="J_cusBack loginHeader webHeaderBg">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title pageTitle">',LS.memberDialogFwdStepOneTitle,"</span>","</div>",'<div class="g_globalLine fk-mem-findPw-showMsg"><div class="showMsg">',"",LS.fdPwdHasSendMobileCode,"&nbsp",o,"&nbsp",LS.pleaseCheckMobileCode,"","</div></div>",'<div class="loginContent">','<div class="g_globalLine fk-findPwByMobile">','<input type="text" maxlength="6"  id="memEmailCode" class="itemEdit g_input mustItem" placeholder="',LS.inputMobileCode,'"/>','<input style="display:none;" type="text" id="memMailCodeSign" value="'+n+'" disabled/>','<span class="icon-pswIcon icon-codeIcon g_mainColor g_main_color_v3 456"></span>',"</div>",'<div class="g_globalLine">','<input type="button" id="sendEmailCode" style="width:49%;float:left;" class="g_button sendIcon" onclick="Mobi.sendFindPwMobileCode(\''+e+"','"+!0+"','"+t+"','"+i+"','"+o+'\')" value="',LS.memberDialogReSendMsg,'(60)" disabled/>','<input type="button" style="width:49%;float:left;margin-left:2%;" class="g_button sendIcon" onclick="Mobi.memberFdPwdByMobileStepThree(\''+e+"','"+t+"','"+i+'\')" value="',LS.memberDialogNextStep,'"/>',"</div>","</div>","</div>"];a=a.join(""),jm(".middleCenter").append(a),Mobi.sendMemberEmailCodeImgFix("#memEmailCode",t);var r=jm("#sendEmailCode");Mobi.codeTimeCountDown(r)}},Mobi.findPwByMobileStepTwoV3=function(e,t,i,o,n){jm("#memberFdPwdStepOne").parent(".moduleContent").hide(),jm("#memberFdPwdStepTwo").remove();var a=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepTwo">','<div class="J_cusBack loginHeader webHeaderBg profileLoginHeader">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title pageTitle">',LS.memberDialogFwdStepOneTitle,"</span>","</div>",'<div class="g_globalLine fk-mem-findPw-showMsg"><div class="showMsg">',"",LS.fdPwdHasSendMobileCode,"&nbsp",o,"&nbsp",LS.pleaseCheckMobileCode,"","</div></div>",'<div class="loginContent findEmailContent">','<div class="g_globalLine fk-findPwByMobile">','<input type="text" maxlength="6"  id="memEmailCode" class="itemEdit g_input mustItem emailStepTwoCode" placeholder="',LS.inputMobileCode,'"/>','<input style="display:none;" type="text" id="memMailCodeSign" value="'+n+'" disabled/>','<input type="button" id="sendEmailCode" class="g_button sendIcon emailStepTwoSendCode" onclick="Mobi.sendFindPwMobileCode(\''+e+"','"+!0+"','"+t+"','"+i+"','"+o+'\')" value="',LS.memberDialogReSendMsg,'(60)" disabled/>',"</div>",'<div class="g_globalLine">','<input type="button" class="g_button sendIcon fpw_btn g_main_bgColor_v3" onclick="Mobi.memberFdPwdByMobileStepThree(\''+e+"','"+t+"','"+i+'\')" value="',LS.memberDialogNextStep,'"/>',"</div>","</div>","</div>"];a=a.join(""),jm(".middleCenter").append(a),Mobi.sendMemberEmailCodeImgFix("#memEmailCode",t);var r=jm("#sendEmailCode");Mobi.codeTimeCountDown(r)},Mobi.sendFindPwMobileCode=function(e,t,i,o,n){jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=sendMemberPwdMobileCode",data:"memName="+jm.encodeUrl(e),error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(a){(a=jm.parseJSON(a)).success?t&&Mobi.findPwByMobileStepTwo(e,i,o,n,a.mobileCodeSign):a.argErr?Mobi.ing(LS.memberDialogSendMobileClose):a.apiKeyNotFound?Mobi.ing(LS.memberDialogYunPianErr):a.tplNotFound?Mobi.ing(LS.memberDialogMobileTplErr):a.notFound?Mobi.ing(LS.memberDialogNotFound):a.limitOne?Mobi.ing(LS.getMobileOneMin):a.limitTwo?Mobi.ing(LS.getMobileHalfHour):a.noMoney?Mobi.ing(LS.memberDialogMobileMoneyErr):a.mobileErr?Mobi.ing(LS.memberDialogSendMobileCodeErr):a.sendLimit?Mobi.ing(LS.memberDialogSendMobileCodeLimit):a.mobileSysErr?Mobi.ing(LS.memberDialogSendMobileSysErr):a.systemErr?Mobi.ing(LS.js_systemError):a.tplNationErr?Mobi.ing(LS.mobileNationTplErr):-301==a.rt?Mobi.ing(LS.smsRanout):Mobi.ing(LS.js_argsError)}})},Mobi.sendMemberEmailCodeImgFix=function(e,t){Fai.top._openThemeV3||(2052==t?jm(e).css("padding-left","3.5rem"):jm(e).css("padding-left","2rem"))},Mobi.sendMemberEmailPwdCode=function(e){var t=jm("#sendEmailCode");Mobi.codeTimeCountDown(t),jm.ajax({type:"post",url:"ajax/mail_h.jsp?cmd=sendMemberPwdEmail",data:"memName="+jm.encodeUrl(e),error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(e){(e=jm.parseJSON(e)).success?jm("#memMailCodeSign").val(e.emailCodeSign):e.notFound?Mobi.ing(LS.memberDialogNotFound,!0):(Mobi.ing(LS.js_argsError,!0),t.val(LS.memberDialogReSendMsg))}})},Mobi.codeTimeCountDown=function(e){var t=60;!function e(i){if(0==t)return i.removeAttr("disabled"),void i.val(LS.memberDialogReSendMsg);i.attr("disabled",!0),Fai.top._openThemeV3?i.val(""+t+LS.memberDialogReSendMsgV3):i.val(LS.memberDialogReSendMsg+"("+t+")"),t--;setTimeout(function(){e(i)},1e3)}(e)},Mobi.memberFdPwdByMobileStepThree=function(e,t,i){var o=jm("#memEmailCode").val();if(!o||o.length<0)Mobi.ing(LS.inputMobileCode);else{var n=jm("#memMailCodeSign").val(),a="memMobileCode="+jm.encodeUrl(o)+"&memMobileCodeSign="+jm.encodeUrl(n)+"&memName="+jm.encodeUrl(e);jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=checkFindPwdByMobileCode",data:a,error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(o){(o=jm.parseJSON(o)).success?Mobi.memberFdPwdStepThreeSd(e,t,i):o.argErr?Mobi.ing(LS.js_argsError,!0):o.notFound?Mobi.ing(LS.memberDialogNotFound,!0):Mobi.ing(LS.reGetMobileCode,!0)}})}},Mobi.memberFdPwdStepThree=function(e,t,i){var o=jm("#memEmailCode").val();if(!o||o.length<0)Mobi.ing(LS.memberDialogPleaseEnterCode);else{var n=jm("#memMailCodeSign").val(),a="memEmailCode="+jm.encodeUrl(o)+"&memMailCodeSign="+jm.encodeUrl(n)+"&memName="+jm.encodeUrl(e);jm.ajax({type:"post",url:"ajax/mail_h.jsp?cmd=checkPwdEmailCode",data:a,error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(o){(o=jm.parseJSON(o)).success?Mobi.memberFdPwdStepThreeSd(e,t,i):Mobi.ing(LS.memberDialogCodeMailFailure,!0)}})}},Mobi.memberFdPwdStepThreeSd=function(e,t,i){var o=Fai.top._openThemeV3?"profileLoginHeader":"",n=Fai.top._openThemeV3?"inputV3":"",a=Fai.top._openThemeV3?"globalLineRelative":"",r=Fai.top._openThemeV3?" g_main_bgColor_v3 fpw_btn ":"",s=Fai.top._openThemeV3?" resetpswV3 ":"";jm("#memberFdPwdStepTwo").hide();var l=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepThree">','<div class="J_cusBack loginHeader webHeaderBg '+o+'">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title  pageTitle">',LS.memberDialogResetPwd,"</span>","</div>",'<div class="loginContent '+s+'">','<div class="g_globalLine '+a+'">','<input type="password" id="memPwd" class="itemEdit g_input mustItem '+n+'" placeholder="',LS.memberDialogPleaseEnterPwd,'"/>','<span class="icon-pswIcon icon-npwdIcon g_mainColor g_main_color_v3"></span>',"</div>",'<div class="g_globalLine">','<input type="password" id="memPwd2" class="itemEdit g_input mustItem '+n+'" placeholder="',LS.memberDialogPleaseEnterPwd2,'"/>','<span class="icon-pswIcon icon-npwdIcon g_mainColor g_main_color_v3"></span>',"</div>",'<div class="g_globalLine '+a+'">','<input type="button" class="g_button sendIcon '+r+'" onclick="Mobi.memberFdPwdStepLast(\''+e+"','"+i+'\');" value="',LS.memberDialogConfirm,'"/>',"</div> ","</div>","</div>"],c=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepThree">','<div class="J_cusBack loginHeader webHeaderBg '+o+'">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title  pageTitle">',LS.memberDialogFwdStepOneTitle,"</span>","</div>",'<div class="loginContent '+s+'">','<div class="g_globalLine '+a+'">','<input type="password" id="memPwd" class="itemEdit g_input mustItem '+n+'" placeholder="',LS.memberDialogPleaseEnterPwd,'"/>','<span class="icon-pswIcon icon-npwdIcon g_mainColor g_main_color_v3"></span>',"</div>",'<div class="g_globalLine">','<input type="password" id="memPwd2" class="itemEdit g_input mustItem '+n+'" placeholder="',LS.memberDialogPleaseEnterPwd2,'"/>','<span class="icon-pswIcon icon-npwdIcon g_mainColor g_main_color_v3"></span>',"</div>",'<div class="g_globalLine '+a+'">','<input type="button" class="g_button sendIcon '+r+'" onclick="Mobi.memberFdPwdStepLast(\''+e+"','"+i+'\');" value="',LS.memberDialogConfirm,'"/>',"</div> ","</div>","</div>"];l=Fai.top._openThemeV3?c.join(""):l.join(""),jm(".middleCenter").append(l),Mobi.sendMemberEmailCodeImgFix("#memPwd",t),Mobi.sendMemberEmailCodeImgFix("#memPwd2",t)},Mobi.memberFdPwdStepLast=function(e,t){var i=Fai.top._openThemeV3?"profileLoginHeader":"",o=jm("#memPwd").val(),n=jm("#memPwd2").val();if(o)if(n)if(o==n)if(o.length<4||o.length>20)Mobi.ing(jm.format(LS.memberDialogPwdLimit,4,20));else{var a="&memPwd="+jm.md5(o)+"&memName="+jm.encodeUrl(e);jm.ajax({type:"post",url:"ajax/mail_h.jsp?cmd=setMemberPwd",data:a,error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(e){if((e=jm.parseJSON(e)).success){jm("#memberFdPwdStepThree").hide();var o=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepLast">','<div class="loginContent">','<div class="g_globalLine" style="text-align: center;">','<div class="g_circle">','<span class="icon-lockstarIcon g_mainColor "></span>',"</div>",'<span class="title">',LS.memberDialogPwdforced,"</span>","</div>",'<div class="g_globalLine" style="margin-top:1.5rem;">','<input type="button" class="g_button sendIcon" onclick="document.location.href=\''+t+'\'" value="',LS.memberDialogHome,'"/>',"</div> ","</div>","</div>"],n=['<div class="formMiddleContent moduleContent" id="memberFdPwdStepLast">','<div class="J_cusBack loginHeader webHeaderBg '+i+'">','<a onclick="history.go(0);" class="g_close icon-gClose"></a>','<span class="title pageTitle">',LS.memberDialogFwdStepOneTitle,"</span>","</div>",'<div class="loginContent">','<div class="g_globalLine" style="text-align: center;">','<div class="g_circle g_main_bdColor_v3">','<span class="icon-lockstarIcon g_mainColor g_main_color_v3"></span>',"</div>",'<span class="title">',LS.memberDialogPwdforcedV3,"</span>","</div>",'<div class="g_globalLine" style="margin-top:1.5rem;">','<input type="button" class="g_button sendIcon  g_main_bgColor_v3 fpw_btn" onclick="document.location.href=\'login.jsp\'" value="',LS.memberDialogLoginInstantly,'"/>',"</div> ","</div>","</div>"];o=Fai.top._openThemeV3?n.join(""):o.join(""),jm(".middleCenter").append(o)}else e.notFound?Mobi.ing(LS.memberDialogNotFound,!0):Mobi.ing(LS.js_argsError,!0)}})}else Mobi.ing(LS.memberDialogPwdDifToPwd2,!0);else Mobi.ing(LS.memberDialogPleaseEnterPwd2,!0);else Mobi.ing(LS.memberDialogPleaseEnterPwd,!0)},Mobi.memberModuleReturnUrlInit=function(e,t){t||(t=e),jm("#profile").find(".loginHeader .g_close").attr("href",t)},Mobi.fixMyMallOrderDiviceLine=function(){jm(".mallDiviceLine20 .mallOrderDiviceItem").css("width","16%"),Fai.top._openThemeV3||jm(".mallDiviceLine20 .diviceOrderNum").css("right","0.32rem")},function(){var e={level:0},t=!1;function i(){var e;return jm(".J_cusBack").each(function(t,i){if("block"===jm(this).css("display"))return e=this,!1}),e}Mobi.cusHistory={init:function(){jm(window).off("popstate.h").on("popstate.h",function(i){if(12==Fai.top._pageId||34==Fai.top._pageId||11==Fai.top._pageId){if(t)return t=!1,void(e=history.state||{});i.state&&i.state.level>e.level?Mobi.cusHistory.goForward(i):Mobi.cusHistory.goBack(i),e=i.state||{level:0}}})},add:function(o,n,a,r){if(window.history&&window.history.pushState&&"false"!==n){var s=i(),l={pageId:o,level:a,selector:r};window.history.pushState(l,null,location.href),e=l,s&&jm(s).find(".g_close").off("click.h").on("click.h",function(e,i){"true"!==i&&(history.back(),t=!0)})}},goForward:function(e){jm(e.state.selector).each(function(e,t){jm(t).trigger("click","false")})},goBack:function(e){var t=i();t&&jm(t).find(".g_close").trigger("click","true")}}}(),Mobi.addRefreshListen=function(){Fai.top._isPageHide=!1,window.addEventListener("pageshow",function(){Fai.top._isPageHide&&window.location.reload()}),window.addEventListener("pagehide",function(){Fai.top._isPageHide=!0})},Mobi.loadFormList=function(e){jm("#myForm").attr("_isopenformremark");var t,i=jm("#formList"),o=i.find(".area");jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=getSubmitList",error:function(){Mobi.ing(LS.js_systemError)},success:function(n){var a=jm.parseJSON(n),r=Fai.top._openThemeV3?"g_main_color_v3":" g_mainColor";if(a.success){t=a.pageParam.siteFormSubmitList;var s="",l="",c=a.pageParam.statusUpId;if(jm("#formList").attr("_statusUpId",c),t.forEach(function(e){var t=e.name,i=e.createTime,o=e.id,n=e.haveRead,a=e.showRemark,c=e.formStatusName,d=e.showFormStatus;d=d,i=timestamp2FormatDate(i),l='\n\t\t\t\t\t\t\t\t<li class="item" _id = '.concat(o," _showRemark = ").concat(a,'>\n\t\t\t\t\t\t\t\t\t<div class="form_name">\n\t\t\t\t\t\t\t\t\t\t').concat(t,"\n\t\t\t\t\t\t\t\t\t\t").concat(a&&!n?"<div class='remind'></div>":"",'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form_date">').concat(i," ").concat(d?"<sapn class='".concat(r,"'>").concat(c,"</span>"):"","</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t"),s+=l}),0===t.length){var d=jm("#myForm").attr("_noFormRecord");s='\n\t\t\t\t\t<div class="empty_tips">\n\t\t\t\t\t\t<div class="img"></div>\n\t\t\t\t\t\t<div class="text">'.concat(d,"</div>\t\n\t\t\t\t\t</div>\n\t\t\t\t\t")}o.empty(),o.append(s),jm("#formList").find(".title").html(e),jm("#profile").hide(),Mobi.changeBackgroundToWhite(),i.show()}}})},Mobi.initFormItemEvent=function(e,t,i){var o={17:{payType:"微信支付",payIcon:"#jzm-vicon_wechat_pay",payClass:"wxpay_icon"},19:{payType:"支付宝",payIcon:"#jzm-vicon_alipay",payClass:"alipay_icon"},20:{payType:"支付宝",payIcon:"#jzm-vicon_alipay",payClass:"alipay_icon"}};jm("#formList .area").on("click",".item",function(n){Mobi.logDog(201296,6);var a=Fai.top._openThemeV3?"g_main_color_v3":" g_mainColor",r="true"===jm(this).attr("_showRemark"),s=jm(this),l="id="+s.attr("_id")+"&callBackData=true";r&&(l+="&haveRead=true"),jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=changeReadStatus",data:l,error:function(){Mobi.ing(LS.js_systemError)},success:function(n){var l=jm.parseJSON(n),c=jm("#formDetail"),d=c.find(".profileContent");if(l.success){var m=function(e){if("number"!=typeof e)throw new Error("请传入数字类型参数");for(var t=_slicedToArray(e.toString().split("."),2),i=t[0],o=t[1],n=void 0===o?"":o,a=2-n.length;a--;)n+="0";return[i,n]},p=l.siteFormInfo.contentList,u=l.submitInfo.submitContentList,h="",f=l.siteFormInfo.showFormStatus,g=l.submitInfo.formStatusName;if(f){var v="".concat(i,"："),b='\n\t\t\t\t\t\t\t\t\t\t<div class="item  curStatus">\n\t\t\t\t\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t\t\t\t'.concat(v,"\n\t\t\t\t\t\t\t\t\t\t\t\t<span class='").concat(a,"'>").concat(g,"</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t");h+=b}if(r){var j=l.submitInfo.remark,_=""===j;_&&(j=t);var M=_?"empty_remark_tips":"",y='\n\t\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t\t<div class="name">\n\t\t\t\t\t\t\t\t\t'.concat(e,'：\n\t\t\t\t\t\t\t\t\t<div class="remind"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="data ').concat(M,'">').concat(j,"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t");h+=y}var S="",I=l.siteFormInfo.other.rules,w=[],C={},P=[];I.forEach(function(e){-1==P.indexOf(e.contentId)&&P.push(e.contentId),e.showList.forEach(function(e){-1==w.indexOf(e.key)&&w.push(e.key)})}),p.forEach(function(e){-1==w.indexOf(e.id)?C[e.id]=!0:C[e.id]=!1}),u.forEach(function(e){var t=p.find(function(t){return t.id==e.id})||{};if((2==t.type||3==t.type||4==t.type)&&-1!=P.indexOf(t.id)){var i=t.input.split("\n").indexOf(e.val),o=t.id,n=I.find(function(e){return e.contentId==o&&e.selected==i});null!=n&&n.showList.forEach(function(e){C[e.key]=!0})}});for(var x=function(e){var t=p[e],i=t.name,o=t.type,n=t.id,a=void 0;if(!C[t.id])return"continue";5===o?(i=t.headline,a=t.input):a=void 0===(a=u.find(function(e){return e.id===n}))?"":a.val,S='\n\t\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t\t<div class="name">\n\t\t\t\t\t\t\t\t\t'.concat(i,'\n\t\t\t\t\t\t\t\t\t<div class="remind"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="data">').concat(a,"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"),h+=S},L=0;L<p.length;L++)x(L);var k=l.payInfo,F=k.payDescText,T=k.payMoney,B=k.isPay,A=k.openOnlinePay,D=l.submitInfo.payMode,O=o[D]||o[17],E=B?"已支付":"未支付";if(!Fai.top._isMall&&A){var N='\n\t\t\t\t\t\t<div class="pay_wrap" >\n\t\t\t\t\t\t\t<span style="font-size: 0.6rem;margin-right: 0.24rem;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;display: inline-block;">'.concat(F,':</span>\n\t\t\t\t\t\t\t<div style="flex-shrink: 0;font-size: 0;">\n\t\t\t\t\t\t\t\t<span class="').concat(a,'" style="font-size: 0.5rem;font-weight: bold;">￥</span>\n\t\t\t\t\t\t\t\t<span class="').concat(a,'" style="font-size: 0.65rem;font-weight: bold;">').concat(m(T)[0],'.</span>\n\t\t\t\t\t\t\t\t<span class="').concat(a,'" style="font-size: 0.5rem;font-weight: bold;">').concat(m(T)[1],'</span>\n\t\t\t\t\t\t\t\t<span style="margin-right: 0.24rem;font-size: 0.65rem;">(').concat(E,')</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pay_type_wrap">\n\t\t\t\t\t\t\t\t<svg class=').concat(O.payClass,">  \n\t\t\t\t\t\t\t\t\t<use xlink:href=").concat(O.payIcon,' />\n\t\t\t\t\t\t\t\t</svg class="wx_pay_text">\n\t\t\t\t\t\t\t\t<span style="font-size: 0.6rem;">').concat(O.payType,"</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t");h+=N}var J=s.find(".remind");J&&J.remove();var H=l.siteFormInfo.name;jm("#formDetail").find(".title").text(H),jm("#formList").hide(),d.empty(),d.append(h),c.show()}}}),Mobi.changeBackgroundToWhite()})},Mobi.setMyFormTipState=function(e,t){var i=jm("#formList").find(".area li .remind"),o=jm("#myForm .itemName .remind"),n=jm("#myForm .clickIcon .update_tips"),a=e;0===i.length?(o.hide(),n.hide()):(o.css("display","inline-block"),n.text(a),n.show())},Mobi.showItgRewardPop=function(e,t,i,o){var n="注册成功";1==t?n="登录成功":2==t?n="评价成功":3==t&&(n="已确认收货"),0==t?Mobi.logDog(201094,5):1==t?Mobi.logDog(201094,7):2==t?Mobi.logDog(201094,9):3==t&&Mobi.logDog(201094,15);var a=[];a.push("<div class='itgRewardPopContain'>"),a.push("\t<div class='popTop'>"),a.push("\t\t<img class='itgRewardPopTitleBg' src='"+Fai.top._resImageRoot+"/image/v2/getItgHead.png'>"),a.push("\t\t<div class='topTitle'>"+n+"</div>"),a.push("\t</div>"),a.push("\t<div class='popMiddle'>"),a.push("\t\t<div class='middleRewardTip'>恭喜获得"+e+"</div>"),a.push("\t\t<div class='middleRewardNum'>+"+i+"</div>"),a.push("\t</div>"),a.push("\t<div class='popBottom'>"),a.push("\t\t<div class='forwardContain'>查看我的"+e+"<span class='icon-itgForward'></span></div>"),a.push("\t</div>"),a.push("  <div class='itgRewardPopClose J-prompt-cancel'>"),a.push("  \t<img style='width:1.5rem;' src='"+Fai.top._resImageRoot+"/image/hdCouponClose.png'>"),a.push("  </div>"),a.push("</div>");var r={content:a.join(""),cancelCallback:function(){0==t&&jm.ajax({type:"post",url:"/ajax/member_h.jsp?cmd=closeRegistMemberItg",error:function(){Mobi.ing(LS.js_systemError)},success:function(e){}}),o&&"function"==typeof o&&o()}};Mobi.customPopup(r),jm(".forwardContain").click(function(){jm.setCookie("showIntegral",!0),window.location.href="/profile.jsp"})},Mobi.memberShipCard={},function(e){function t(e,t){t||(t="memberShipCardList"),window.location.href="memberShipCardDetail.jsp?id="+e+"&returnUrl="+t}function i(e){var t=jm("#buyRecordBtn"+e),i="";return i+="<div id='recordBoxPanel"+e+"'><div class='p_recordBox'><div class='title'>购卡记录</div><div class='content'><div class='line'><div class='left'>购卡时间：</div><div class='right'>"+t.attr("createTime")+"</div></div><div class='line'><div class='left'>实付金额：</div><div class='right'>"+t.attr("price")+"</div></div><div class='line'><div class='left'>有效期：</div><div class='right'>"+t.attr("validity")+"</div></div><div class='btn J_closeRecordBtn"+e+"'>我知道了</div></div></div></div>"}function o(e,t){var i="";return i+="<div id='couponTipsBox"+t+"' class='p_couponTipsBox'><div class='tips1'>开卡后,</div><div class='tips2'>即可领取优惠券！</div><div class='btn J_buyCardTap"+t+"'>立即开卡</div><div class='close icon-closeCircle J_closeCouponBtn"+t+"'></div></div>"}function n(e,t){var i;1==t?Mobi.logDog(201154,8):2==t&&Mobi.logDog(201154,9),jm.ajax({url:"ajax/memberShipCard_h.jsp?cmd=addRecordBeforePay&cardId="+e+"&isWeixin="+(i=navigator.userAgent.toLowerCase(),"micromessenger"==i.match(/MicroMessenger/i)),type:"get",error:function(){Mobi.ing("服务繁忙，请稍候重试",!1),Mobi.logMonitor(6132,!0)},success:function(t){if((t=JSON.parse(t)).success){var i=t.recordId;if(t.noNeedPay||!1)window.location.href="memberShipCardDetail.jsp?id="+e+"&returnPay=true&returnUrl=memberShipCardList";else{var o=jm.encodeUrl(window.location.hostname+"/memberShipCardDetail.jsp?id="+e+"&returnUrl=memberShipCardList");window.location.href="mallPayment.jsp?bssId="+i+"&bssType=3&returnUrl="+o}}else Mobi.logMonitor(6132,!0),Mobi.ing(t.msg,!1)}})}e.initCardList=function(e){for(var t=e.length-1;t>=0;t--){var o=e[t],n={triggerId:"buyRecordBtn"+o,pageBg:!0,pageHtml:i(o),direction:"bottom",callbackAlways:!0,callback:function(){this.event.stopImmediatePropagation()},closeWebPage:".J_closeRecordBtn"+o};Mobi.initWebPage(n)}},e.initCardDetail=function(e,t,a){a&&(Mobi.logDog(201154,10),jm(".J_memberShipCardDetail").hide(),jm(".J_paySucPage").show());var r={triggerId:"buyRecordBtn"+e,pageBg:!0,pageHtml:i(e),direction:"bottom",callbackAlways:!0,callback:function(){this.event.stopImmediatePropagation()},closeWebPage:".J_closeRecordBtn"+e};Mobi.initWebPage(r);for(var s=t.length-1;s>=0;s--){var l=t[s],c={triggerId:"getCouponBox"+l,pageBg:!0,pageHtml:o(e,l),direction:"bottom",callbackAlways:!0,callback:function(){this.event.stopImmediatePropagation();var t=this.event.target.getAttribute("couponId");jm(".J_buyCardTap"+t).unbind("click").click(function(){jm(".J_closeCouponBtn"+t).click(),n(e)})},closeWebPage:".J_closeCouponBtn"+l};Mobi.initWebPage(c)}},e.toMemberShipCardList=function(){window.location.href="memberShipCardList.jsp"},e.toMemberShipCardDetail=t,e.toExplanation=function(e){window.location.href="richPage.jsp?type=memberShipCardExplanation&title=权益说明&id="+e+"&returnStr=memberShipCardDetail"},e.toUseCoupon=function(e){window.location.href="pr.jsp?couponId="+e},e.buyCardTap=n,e.showCardDetail=function(e){t(e)}}(Mobi.memberShipCard),Mobi.loadKnowPayList=function(){var e=jm("#knowPayList .profileContent"),t=[];t.push("cmd=getKnowProductOrderList4member"),t.push("&pageNo=1"),t.push("&pageSize=30"),e.empty(),jm.ajax({type:"post",url:"/ajax/product_h.jsp",data:t.join(""),success:function(t){var i=function(e){var t="";null==e&&(e=[]);var i=e.length;if(i>0)t+='<ul class="productList">',e.forEach(function(e,o){var n=o==i-1,a=n?"rightContent":"rightContent sliderLine",r=function(e,t){var i,o={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var n in o)(i=new RegExp("("+n+")").exec(e))&&(e=e.replace(i[1],1==i[1].length?o[n]:o[n].padStart(i[1].length,"0")));return e}("YYYY-mm-dd HH:MM",new Date(e.createTime)),s='\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="'.concat(e.jumpUrl,'">\n\t\t\t\t\t\t\t<div style="position: relative;border: solid 1px #eee;">\n\t\t\t\t\t\t\t\t<div class="leftContent" style="background-image: url(').concat(e.picPath,')"></div>\n\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\t\tfont-size: 0.4rem;\n\t\t\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\t\t\tbackground-color:rgba(0,0,0,0.5);\n\t\t\t\t\t\t\t\t\tborder-radius: 0.1rem;\n\t\t\t\t\t\t\t\t\tpadding: 0.1rem 0.2rem;\n\t\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\t\tbottom: 0.2rem;\n\t\t\t\t\t\t\t\t\tright: 0.2rem;"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t').concat(e.labelText,'\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="').concat(a,'">\n\t\t\t\t\t\t\t\t<div class="knowPaytitle">').concat(e.productName,'</div>\n\t\t\t\t\t\t\t\t<div class="knowPayTime">购买时间：<span>').concat(r,"</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t");t+=s}),t+="</ul>";else{t+='\n\t\t\t\t<div class="empty_tips">\n\t\t\t\t\t<div class="img"></div>\n\t\t\t\t\t<div class="text">无购买记录</div>\n\t\t\t\t</div>\n\t\t\t'}return t}(jm.parseJSON(t).list);e.append(i)},error:function(e){console.log(e)}})},Mobi.activateProfilePanel=function(){Fai.top.Designer.profilePanel||Vue.set(Fai.top.Designer,"profilePanel",{collapsePanelActivate:""})},Mobi.editHandlerFactory=function(e,t,i,o){var n=Mobi.getPreviewDocument().getElementById(e);$(n).click(function(){Fai.top.Mobi.openDesigner(t),Fai.top.Designer.profilePanel.collapsePanelActivate=i}),$(n).mousemove(function(){Mobi.addModuleLayer(e,o)}).mouseleave(function(){Mobi.removeModuleLayer(e)})},Mobi.isRetreatPromoter=function(){jm.ajax({type:"post",url:"ajax/promoter_h.jsp?cmd=getRetreatPromoter",success:function(e){var t=!1;if((e=jm.parseJSON(e)).success&&(t=e.isRetreat),t){var i={textClass:"promRetreat",content:"当前帐号已被清退",callback:function(){window.location.href="promoterWelcome.jsp"}};Mobi.prompt(i)}else window.location.href="promoterWelcome.jsp"}})},Mobi.editMemberInfo=function(e){var t=Mobi.getPreviewDocument().getElementById("modifyPersInfo");$(t).click(function(){Fai.top.Mobi.openDesigner("memberInfo")}),$(t).mousemove(function(){Mobi.addModuleLayer("modifyPersInfo",e)}).mouseleave(function(){Mobi.removeModuleLayer("modifyPersInfo")})},Mobi.getUrlKey=function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},Mobi.promoteCusDetail=function(){new Vue({el:"#promoteCusDetail",data:{themeId:1,memberId:0,headPicUrl:"",name:"",mobile:"",vipPic:"",totalOrders:0,totalShopNum:0,totalRevenueNoShipping:0,cusUntilPrice:0,lastCreatOrderTime:"-",lastLoginTime:"",expired:!1,relVal1:"",relVal2:"",relVal3:"",setGray:!1,mobileCtCode:"",memberLevelIconCusType:0,memberLevel:"",memberLevelPath:"",memberLevelName:"",showExpTip:!1},created:function(){var e=jm.parseJSON(Mobi.getUrlKey("memberInfo"))||{};this.memberId=e.id,this.headPicUrl=e.headPicUrl,this.name=e.name,this.mobile=e.mobile,this.totalOrders=e.totalOrders,this.totalRevenueNoShipping=e.totalRevenueNoShipping,this.cusUntilPrice=e.cusUntilPrice,this.lastLoginTime=e.lastLoginTime,this.relVal1=e.remainTime,this.relVal2=e.bindTime,this.mobileCtCode=e.mobileCtCode,e.expired&&(this.setGray=!0,this.expired=e.expired,this.relVal1=e.invalidReason,this.relVal2=e.invalidTime,this.relVal3=e.oldbindTime),this.getOtherData()},methods:{outbtn:function(){this.showExpTip=!1},showExpireTip:function(){this.showExpTip?this.showExpTip=!1:this.showExpTip=!0},getOtherData:function(){var e=this;jm.ajax({type:"post",url:"ajax/promoter_h.jsp?cmd=getCustomerDetail",data:"memberId="+e.memberId,success:function(t){var i=jm.parseJSON(t);i.success&&(e.totalShopNum=i.totalShopNum,e.lastCreatOrderTime=i.lastCreatOrderTime,e.memberLevelIconCusType=i.iconCusType,e.memberLevel=i.memberLevel,e.memberLevelName=i.memberLevelName,e.memberLevelPath=i.imagePath)}})},callPoup:function(){var e=this.mobileCtCode+""+this.mobile,t={textClass:"confirm",content:"确定要拨打电话"+this.mobileCtCode+" "+this.mobile,callback:function(){window.location.href="tel://"+e}};Mobi.prompt(t)}},computed:{iconMemberLev:function(){return"icon-memberLev"+this.memberLevel},callMobileHref:function(){return"tel:"+this.mobile}},template:'<div class=\'promoteCusDetail\' id=\'promoteCusDetail\'><div class="container" @click="outbtn">\t\n\t\t\t\t\t  <div class="g_main_bgColor_v3 g_bgColor gradualBg"  ></div>\n\t\t\t\t\t  <div class="memberMsg">\n\t\t\t\t\t\t<div class="headPic">\n\t\t\t\t\t\t  <img class="himg" :src="headPicUrl"></img>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="msg" v-bind:class="{\'expSty\' : expired }">\n\t\t\t\t\t\t  <div class="name">\n\t\t\t\t\t\t  \t<span class="nameVal">{{name}}</span>\n\t\t\t\t\t\t  \t<span class="memberLv">[{{memberLevelName}}]</span>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="mobile" v-if="!expired">\n\t\t\t\t\t\t\t<span>手机号：{{mobile!=\'-\' ? mobileCtCode : \'\'}} {{mobile}}</span> \n\t\t\t\t\t\t\t<a @click="callPoup"><svg v-if="mobile!=\'-\'" class="selfTaking-icon"><use xlink:href="#jzm-vicon_phone"></use></svg></a>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </div>\n\t\t\t\t\t  <div class="infoBox">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t  <div class="littleBox borRig borBot">\n\t\t\t\t\t\t\t  <div class="innerBox">\n\t\t\t\t\t\t\t\t<div class="detailFont">订单数量</div>\n\t\t\t\t\t\t\t\t<div class="detailVal1">{{totalOrders}}</div>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="littleBox borBot">\n\t\t\t\t\t\t  \t  <div class="innerBox">\n\t\t\t\t\t\t\t\t<div class="detailFont">购买商品数量</div>\n\t\t\t\t\t\t\t\t<div class="detailVal1">{{totalShopNum}}</div>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="littleBox borRig borBot">\n\t\t\t\t\t\t  \t  <div class="innerBox" v-bind:class="{\'grayStyle\' : setGray}">\n\t\t\t\t\t\t\t\t<div class="detailFont">成交金额（不含运费）</div>\n\t\t\t\t\t\t\t\t<div class="detailVal2">￥{{totalRevenueNoShipping}}</div>\n\t\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="littleBox borBot">\n\t\t\t\t\t\t  \t<div class="innerBox" v-bind:class="{\'grayStyle\' : setGray}">\n\t\t\t\t\t\t\t\t<div class="detailFont">客单价</div>\n\t\t\t\t\t\t\t\t<div class="detailVal2">￥{{cusUntilPrice}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="littleBox borRig">\n\t\t\t\t\t\t  \t<div class="innerBox">\n\t\t\t\t\t\t\t\t<div class="detailFont">上次下单时间</div>\n\t\t\t\t\t\t\t\t<div class="detailVal1">{{lastCreatOrderTime}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="littleBox">\n\t\t\t\t\t\t  \t<div class="innerBox">\n\t\t\t\t\t\t\t\t<div class="detailFont">上次访问时间</div>\n\t\t\t\t\t\t\t\t<div class="detailVal1">{{lastLoginTime}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </div>\n\t\t\t\t\t  <div class="relInfo">\n\t\t\t\t\t\t<div class="title">\n\t\t\t\t\t\t  <div class="bgkTitle g_main_bgColor_v3 g_bgColor" v-bind:class="{\'grayStyle\' : setGray}"></div>\n\t\t\t\t\t\t  客户关系\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="remainMsg">\n\t\t\t\t\t\t  <div class="remainTime">\n\t\t\t\t\t\t  \t<div class="msgTip">{{expired? \'失效原因\' : \'剩余保护期\' }}</div>\n\t\t\t\t\t\t  \t<div v-if="!expired" class="icon" @click.stop="showExpireTip">\n\t\t\t\t\t\t\t\t<svg role="img" class="jzm-vicon_warning">\n\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-vicon_warning"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="floatTip" v-bind:class="{\'showExpTip\' : showExpTip}">保护期内，该客户不会被其他推广员抢走</div>\n\t\t\t\t\t\t  </div>\n\t\t\t\t\t\t  <div class="remainVal">{{relVal1}}{{expired? \'\' : \'天\'}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bindMsg">\n\t\t\t\t\t\t  <div class="bindTime">{{expired? \'失效时间\' : \'绑定时间\' }}</div>\n\t\t\t\t\t\t  <div class="bindVal">{{relVal2}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bindMsg" v-if="expired">\n\t\t\t\t\t\t  <div class="bindTime">绑定时间</div>\n\t\t\t\t\t\t  <div class="bindVal">{{relVal3}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </div>\n\t\t\t\t\t</div></div>'})},Mobi.initModulePhotoList=function(e,t,i){if(e&&i){var o=Mobi.getPreviewObject("photoListDetailShow"+e);o&&o.parentNode.removeChild(o),module="module"+e;document.getElementById(module);var n=document.getElementById("webFooterBox"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");l.className="photoDetailClose",a.appendChild(l),r.className="webPhotoListDetail",r.id="webPhotoListDetail"+e;for(var c=0;c<i.length;c++){var d=document.createElement("div");d.className="photoDetail";var m=document.createElement("img"),p=document.createElement("span");p.className="imageSpan",m.setAttribute("vwidth",i[c].width),m.setAttribute("vheight",i[c].height),d.appendChild(p),d.appendChild(m),r.appendChild(d)}a.appendChild(r),s.className="photoDetailDescription descriptionClose",s.id="photoDetailDescription"+e;var u=document.createElement("div");u.className="handleDiv";var h=document.createElement("div");h.className="drawer_handle";var f=document.createElement("div");f.className="handleIcon handleUp",u.appendChild(h),u.appendChild(f),s.appendChild(u);var g=document.createElement("div");g.className="descriptionFilter",s.appendChild(g);var v=document.createElement("div");v.className="descriptionDom",v.id="descriptionDom"+e,s.appendChild(v),a.appendChild(s),a.className="photoListDetailShow",a.id="photoListDetailShow"+e,n.appendChild(a);var b=jm(r).carousel({carouselIndex:3,photoAllJson:i,preventDefaults:!1,photoListDetailShowDom:a,moduleId:e});jm("#webModuleContainer").on("click","#"+module+" .photoModule img",function(){if(1==this.getAttribute("linkType")){Mobi.getPreviewObject("photoListDetailShow"+e).style.top="0px";var t=parseInt(this.getAttribute("photoIndex"));b.onMoveIndex(t,"1ms",i[t]),b.photoDetailAjax(i[t])}}),jm(r).bind("click",function(e){var t=e.target||e.srcElement;if("prevPhoto"!=t.className&&"nextPhoto"!=t.className){var i=this.querySelector(".prevPhoto"),o=this.querySelector(".nextPhoto");"true"==this.getAttribute("full")?(this.setAttribute("full",!1),l.style.opacity=1,s.style.opacity=1,o.style.opacity=1,i.style.opacity=1,s.style.visibility="visible",l.style.visibility="visible",o.style.visibility="visible",i.style.visibility="visible",-1===s.className.indexOf("descriptionClose")&&(r.className="webPhotoListDetail photoFilter")):(this.setAttribute("full",!0),l.style.opacity=0,s.style.opacity=0,o.style.opacity=0,i.style.opacity=0,s.style.visibility="hidden",l.style.visibility="hidden",o.style.visibility="hidden",i.style.visibility="hidden",r.className="webPhotoListDetail")}}),jm(s).bind("click",function(e){var t=this.querySelector(".handleIcon");if(-1===this.className.indexOf("descriptionOpen")){var i=v.offsetHeight,o=Mobi.getPreviewWindow().innerHeight;jm.os.android&&(o=Mobi.getPreviewWindow().screen.height/Mobi.getPreviewWindow().devicePixelRatio-Mobi.getPreviewWindow().screenTop),o>i?v.innerHTML&&(this.style.bottom="0px",r.className="webPhotoListDetail photoFilter"):(this.style.bottom=.8*o-i+"px",r.className="webPhotoListDetail photoFilter"),this.className="photoDetailDescription descriptionOpen",v.innerHTML&&(t.className="handleIcon handleDown")}else v.innerHTML&&(this.style.bottom=-(v.offsetHeight-h.offsetHeight)+"px"),this.className="photoDetailDescription descriptionClose",r.className="webPhotoListDetail",v.innerHTML&&(t.className="handleIcon handleUp")}),jm(l).bind("click",function(){a.style.top="150%",r.className="webPhotoListDetail"})}},Mobi.clickPhoto=function(e,t){Mobi.getPreviewWindow;Fai.top.document.getElementById("mobiReviewPageFrame")&&(Fai.top.document.getElementById("mobiReviewPageFrame").scrolling="no"),jm(".imgDetailDiv").show(),Mobi.getPhotoDetail(e,t)},Mobi.exitPhotoDetail=function(){Fai.top.document.getElementById("mobiReviewPageFrame")&&(Fai.top.document.getElementById("mobiReviewPageFrame").scrolling="yes"),jm(".imgDetailDiv").hide()},Mobi.getPhotoDetail=function(e,t){jm.ajax({type:"post",url:"ajax/photo_h.jsp",data:"cmd=get&id="+jm.encodeUrl(t)+"&groupId="+jm.encodeUrl(e),error:function(){},success:function(e){e=jm.parseJSON(e),jm(".showImg").attr("src",e.picPath);var t=-1!==parseInt(e.nextId);-1!==parseInt(e.prevId)?(jm(".prevPhoto").show(),jm(".prevPhoto").attr("onclick","Mobi.getPhotoDetail('"+e.groupId+"','"+e.prevId+"')")):jm(".prevPhoto").hide(),t?(jm(".nextPhoto").show(),jm(".nextPhoto").attr("onclick","Mobi.getPhotoDetail('"+e.groupId+"','"+e.nextId+"')")):jm(".nextPhoto").hide(),jm(".imgDesc").html(e.basic),jm(".imgName").html(e.name),jm(".imgDetailArea").html(e.detail)}})},Mobi.toNextPhoto=function(e){var t=jm(Mobi.getPreviewObject("module"+e)).find(".photoBox"),i=parseInt(jm(t).css("width"))-300,o=parseInt(jm(t).css("left").split("px")[0]),n=Math.abs(o/300)+2,a=jm(t).find("li:nth-child("+n+") img").attr("lazysrc");if(a&&jm(t).find("li:nth-child("+n+") img").attr("src",a),o<=-i)jm(t).hasClass("moving")||(jm(t).addClass("moving"),jm(t).css("left",o-50+"px"),setTimeout(function(){jm(t).css("left",o+"px"),jm(t).removeClass("moving")},600));else{var r=o-300;jm(t).css("left",r+"px")}},Mobi.toPrevPhoto=function(e){var t=jm(Mobi.getPreviewObject("module"+e)).find(".photoBox"),i=(parseInt(jm(t).css("width")),parseInt(jm(t).css("left").split("px")[0]));if(0!=i){var o=i+300;jm(t).css("left",o+"px")}else jm(t).hasClass("moving")||(jm(t).addClass("moving"),jm(t).css("left",i+50+"px"),setTimeout(function(){jm(t).css("left",i+"px"),jm(t).removeClass("moving")},600))},Mobi.handEvent=function(e){var t=jm(Mobi.getPreviewObject("module"+e)).find(".photoModule");jm(t).bind("swipeLeft",function(){return Mobi.toNextPhoto(e),!1}),jm(t).bind("swipeRight",function(){return Mobi.toPrevPhoto(e),!1})},Mobi.autoSetPhotoHeight=function(e){Mobi.unifiedAttrVal(jm(Mobi.getPreviewObject("module"+e)),".photoModule .photoDiv","height")},Mobi.initPhotoSwipe=function(e,t,i,o,n){var a=Mobi.getPreviewObject("imgName"+e);jm(a).html(t[0]);Mobi.getPreviewObject(e);var r=Mobi.getJQMobi(),s=Mobi.getPreviewObject("photoSwipe"+e);if(s&&(1==n?Mobi.initScaleImage(s):2==n?Mobi.initDefScaleImage(s):Mobi.noScaleImage(s),r("#photoSwipe"+e).swipehandle(s,{auto:i,speed:o,continuous:!0,bulletsClick:!0,callback:function(e){for(var i=l.length;i--;)l[i].className=" ";l[e]?(l[e].className="on",jm(a).html(t[e])):(l[e-l.length].className="on",jm(a).html(t[e-l.length]))}}),r("#photoSwipe"+e).find(".imageDiv").show(),s.querySelector("#bullets"+e)))var l=s.querySelector("#bullets"+e).getElementsByTagName("li")},Mobi.initScaleImage=function(e){if(e){var t=e.querySelectorAll("img"),i=e.clientWidth,o=0;if(t){for(var n=0;n<t.length;n++){var a=parseInt(t[n].getAttribute("vwidth")?t[n].getAttribute("vwidth"):1),r=parseInt(t[n].getAttribute("vheight")?t[n].getAttribute("vheight"):1)/a;NaN!==r&&(t[n].style.width=i+"px",t[n].style.height="100%",r>o&&(o=r))}if(i*o!=0&&(e.style.height=Math.floor(i*o)+"px"),"proImgSwipe"==e.className){var s=e.querySelector(".proDetailImg");s&&(e.style.height=s.clientHeight+"px")}}}},Mobi.noScaleImage=function(e){if(e){var t=e.querySelectorAll("img"),i=e.clientWidth,o=0;if(t){for(var n=0;n<t.length;n++){var a=parseInt(t[n].getAttribute("vwidth")?t[n].getAttribute("vwidth"):1),r=parseInt(t[n].getAttribute("vheight")?t[n].getAttribute("vheight"):1)/a;NaN!==r&&(t[n].style.width=i+"px",t[n].style.height=Math.floor(i*r)+"px",r>o&&(o=r))}if(i*o!=0&&(e.style.height=Math.floor(i*o)+"px"),"proImgSwipe"==e.className){var s=e.querySelector(".proDetailImg");s&&(e.style.height=s.clientHeight+"px")}}}},Mobi.initDefScaleImage=function(e){if(e){var t=e.querySelectorAll("img"),i=e.clientWidth,o=(e.querySelectorAll(".photoImageItem"),e.querySelectorAll(".imageMiddleSpan"));if(t){for(var n=0;n<t.length;n++){var a=parseInt(t[n].getAttribute("vwidth")?t[n].getAttribute("vwidth"):1),r=parseInt(t[n].getAttribute("vheight")?t[n].getAttribute("vheight"):1);if(NaN!==r/a){var s=a/r;i/417<=s?(jm(t[n]).css({width:417*s+"px",height:"417px",maxWidth:"inherit",marginLeft:(i-417*s)/2+"px"}),jm(o[n]).css("display","none")):(jm(t[n]).css({height:i/s+"px",width:i+"px",marginTop:(417-i/s)/2+"px"}),jm(o[n]).css("display","none"))}}0*i!=0&&(e.style.height=Math.floor(0*i)+"px")}}},Mobi.initPhotoImageSwipe=function(e,t){var i=Mobi.getJQMobi(),o=Mobi.getPreviewObject(e);if(o){var n=o.querySelector(".imgName");1==t&&Mobi.initScaleImage(o),2==t&&Mobi.initDefScaleImage(o),i("#"+e).swipehandle(o,{isOpenNextAndPrevious:!0,callback:function(e,t){var i=t.querySelector("img"),o=i.getAttribute("lazysrc");if(o&&!i.src&&(i.src=o,i.onload=function(){}),i.alt&&n)n.innerHTML=i.alt;else try{n.innerHTML=""}catch(e){}setTimeout(function(){jm(i).trigger("clickPic")},300)}})}},Mobi.initModulePhotoSwipe=function(e,t){var i;if(!((i="rich"===t?document.querySelectorAll("."+e+" img"):document.querySelectorAll("#"+e+" img")).length<1)){var o={imageScaleMethod:"fitNoUpscale",getImageCaption:function(e,t){var i,o;return i=e+"/"+t,(o=document.createElement("div")).appendChild(document.createTextNode(i)),o},getToolbar:function(){return'<div class="ps-toolbar-close"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-previous"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-next"><div class="ps-toolbar-content"></div></div>'}},n=window.Code.PhotoSwipe;"rich"!==t&&(o.triggerEventType="click");n.attach(i,o)}},Mobi.initModulePhotoGroupManage=function(e){e&&e.moduleId&&jm("#"+e.photoParent).find(">."+e.photo).each(function(){var t=jm(this),i=t.find("."+e.photoChild).eq(0);e.fromMobi2,e.moduleId;t.mouseover(function(){var o,n=t.attr("id").replace(/[^0-9]/gi,""),a=t.attr("class"),r=t.find(".photoGroup-title").text();o=[{operationText:"编辑图册",className:"edit",evalScript:"Mobi.logDog(100048, 0);top.Mobi.popupWindow({title:'编辑图册', frameSrcUrl:'"+e.frameSrcUrl+"&id="+n+"&_mobi=1', width:860, height:682, version: 2 })"},{operationText:"删除图册",className:"close",evalScript:"Mobi.deletePhotoGroupManage('"+n+"', '"+Fai.top.Fai.encodeHtmlJs(r)+"', '', 0)"}];/photoGroupStyle1/.test(a)?Mobi.addEditLayer(i,o,6,e):Mobi.addEditLayer(i,o,106,e)}).mouseleave(function(){var e=t.attr("class");/photoGroupStyle1/.test(e)?Mobi.removeEditLayer(i):Mobi.removeEditLayer(i,null,106)})})},Mobi.deletePhotoGroupManage=function(e,t,i,o,n){Mobi.removeAllEditLayer(),Fai.top.Mobi.checkSaveBar()||(t.length>15&&(t=t.slice(0,15)+"..."),t=jm.encodeHtml(t),(new Fai.top.Vue).$createDialog({confirmButton:{text:"确 定"},cancelButton:{text:"取 消"},content:"确定将该图册放入回收站吗？",onConfirm:function(){var t=this.delImgs;top.Fai.ing("正在处理中，请稍候...",!1),jm.ajax({type:"post",url:Mobi.genAjaxUrl("photoGroup_h.jsp"),data:"cmd=del&id="+e+"&delImgs="+t,error:function(){top.Fai.ing(LS.js_systemError,!1)},success:function(t){top.Fai.successHandle(t,"删除成功","",i,o,1),null!=n&&""!=n?function(e,t){var i=Fai.top._rootStore.getters.getModuleById(e);null!=i&&(i.allGroupList=i.allGroupList.filter(function(e){return e.id!=t}),i.content.groupIdList=i.content.groupIdList.filter(function(e){return e!=t}))}(n,e):Mobi.jumpUrlMobi(Mobi.getPreviewDocument().location.href)}})},data:{delImgs:!1}},function(e){var t=this;return e("div",{slot:"description",style:"height: 26px;text-align: left;"},[e("checkbox-component",{props:{value:this.delImgs,trueValue:!0,falseValue:!1},on:{input:function(e){t.delImgs=e}}},"包括图册图片")])}))},Mobi.initModulePhotoDetailSwipe=function(e,t,i,o){if(!(t.length<1)){var n=[];n=i?document.querySelectorAll("#"+e+" .photoGroup-img"):document.querySelectorAll("#"+e+" img");for(var a=[],r=0,s=0;s<n.length;s++)jm(n[s]).is(".garbage")||(a[r]=n[s],r++);if(!((n=a).length<1)){if(i||o){var l=[],c=Math.min(t.length,n.length);for(s=0;s<c;s++)"DIV"===n[s].nodeName&&(n[s].src=n[s].getAttribute("datasrc")||""),l.push(n[s]);for(var d=c,m=t.length;d<m;d++){var p=new Image;d<3&&(p.src=t[d].picPath),p.style.display="none",jm("body").append(p),l.push(p)}n=l}var u={imageScaleMethod:"fitNoUpscale",enableMouseWheel:!1,resetToolbarPosition:!0,loop:!1,photoJson:t,captionAndToolbarAutoHideDelay:0,getImageCaption:function(e,t){var i,o;return i=e+" / "+t,(o=document.createElement("div")).className="ps-page",o.appendChild(document.createTextNode(i)),o},getToolbar:function(){return'<div class="ps-toolbar-close ps-toolbar-close-style icon-toolbar-close-style"></div><div class="ps-toolbar-base"><div class="ps-toolbar-base-title" id="wrapperTitle"></div><div class="ps-toolbar-base-detail icon-toolbar-base-detail" id="wrapperTitleDetail"></div></div><div class="ps-toolbar-base-describe" id="wrapperBasic"><div id="scrollerBasic"></div></div>'},uiDetailCallBack:function(e,i,o){var n=this;jm(e).html("");var a=t[f.currentIndex],r=a.groupId,s=a.id,l=a.name;jm(o).html(l),jm(i).addClass(h.Carousel.CssClasses.itemLoading),jm.ajax({type:"post",url:"ajax/photo_h.jsp",data:"cmd=getInfo&id="+jm.encodeUrl(s)+"&groupId="+jm.encodeUrl(r),error:function(){Mobi.ing(LS.js_systemError)},success:function(t){jm(e).html(t);var o=e.querySelectorAll("img");if(0===o.length)n.detailScroll&&n.detailScroll.destroy(),n.detailScroll=null,n.destroyScroll=new iScroll(i),jm(i).removeClass(h.Carousel.CssClasses.itemLoading);else for(var a=0;a<o.length;a++){var r=new Image;r.src=o[a].src,r.onload=function(){a===o.length&&(n.detailScroll&&n.detailScroll.destroy(),n.detailScroll=null,n.destroyScroll=new iScroll(i),jm(i).removeClass(h.Carousel.CssClasses.itemLoading))}}}})}},h=window.Code.PhotoSwipe,f=h.attach(n,u);f&&f.addEventHandler(h.EventTypes.onCaptionAndToolbarShow,function(e){this.scroll&&this.scroll.destroy(),this.scroll=new iScroll("wrapperBasic")}),(i||o)&&f.addEventHandler(h.EventTypes.onDisplayImage,function(e){var o=e.target.currentIndex;if(o>1){var n,a=t[o+1],r=e.target.cache.images[e.target.currentIndex+1];r&&((n=r.imageEl).src=a.picPath,function(e,t){if(!e)return;Mobi.recoverPhotoSwipeImgSize(t)}(i,n))}}),navigator.userAgent.indexOf("baidubrowser")&&jm("body").off("touchstart.photoSwipe").on("touchstart.photoSwipe",function(e){})}}},Mobi.initPictureSlidesV4=function(e,t,i,o){o=o||!1;if(!(t.length<1)){for(var n=[],a=("ontouchstart"in window||window.DocumentTouch&&(document,DocumentTouch),0);a<t.length;a++)n.push({src:t[a].src,w:t[a].width,h:t[a].height,title:t[a].title,description:void 0===t[a].desc?"":t[a].desc,detail:t[a].detail});Mobi.bindTapEvent(e,"tap",function(e){for(var a={index:0,fromCurentInx:!1,captionDetailClass:"",addCaptionDetailHTMLFn:r,captionDetailCloseCallBackFn:s},l=jm.extend({},a,i),c=jm("#jz_photoSwipeV4"),d=jm(this).attr("data-picId"),m=0,p=jm("body"),u=0;u<t.length;u++)if(t[u].id===d){m=u;break}if(o||!t[m].openLink){l.fromCurentInx&&(l.index=m),c.length>0?p.append(c):(p.append('<div id="jz_photoSwipeV4" class="pswp" tabindex="-1" role="dialog" aria-hidden="true">    <div class="pswp__bg"></div>    <div class="pswp__scroll-wrap">        <div class="pswp__container">            <div class="pswp__item"></div>            <div class="pswp__item"></div>            <div class="pswp__item"></div>        </div>        <div class="pswp__ui pswp__ui--hidden">            <div class="pswp__top-bar">                <div class="pswp__counter"></div>                <button class="icon- pswp__button pswp__button--close" title="Close (Esc)"></button>                <button class="pswp__button pswp__button--share" title="Share"></button>                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>                <div class="pswp__preloader">                    <div class="pswp__preloader__icn">                      <div class="pswp__preloader__cut">                        <div class="pswp__preloader__donut"></div>                      </div>                    </div>                </div>            </div>            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">                <div class="pswp__share-tooltip"></div>             </div>            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">            </button>            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">            </button>            <div class="pswp__caption">                <div class="pswp__caption__center"></div>                <div class="pswp__caption__control"></div>            </div>        </div>    </div></div>'),c=jm("#jz_photoSwipeV4"));var h=new PhotoSwipeV4(c[0],PhotoSwipeUI_Default,n,l);h.init(),setTimeout(function(){h.updateSize(!0)},100),Fai.top._manageMode&&(Fai.top.Fai.isIE11()||window.navigator.userAgent.indexOf("Firefox")>0)&&Fai.top.Fai.ing("浏览器版本不支持幻灯片滑动效果")}})}function r(e,i,o){var n=t[o],a=n.groupId,r=n.pid;jm.ajax({type:"post",url:"ajax/photo_h.jsp",data:"cmd=getInfo&id="+jm.encodeUrl(r)+"&groupId="+jm.encodeUrl(a),error:function(){Mobi.ing(LS.js_systemError)},success:function(t){var o="";o+='<div class="content_wrap">',o+='<div class="title">'+e.title+"</div>",o+='<div class="J_scrollContainer u_scrollContainer"><div class="content">'+t+"</div></div>",o+="</div>",jm(i).html(o);var n=i.querySelector(".J_scrollContainer"),a=i.querySelectorAll("img"),r=a.length;if(0===a.length)e.detailScroll&&e.detailScroll.destroy(),e.detailScroll=null,e.destroyScroll=new iScroll(n);else for(var s=0;s<r;s++){var l=new Image;l.src=a[s].src,l.onload=function(){--r||(e.detailScroll&&e.detailScroll.destroy(),e.detailScroll=null,e.destroyScroll=new iScroll(n))}}}})}function s(e,t,i){e.detailScroll&&e.detailScroll.destroy(),e.detailScroll=null}},Mobi.initPictureSlidesV4ByDom=function(e){var t,i={fromCurentInx:!0};function o(){var t=[];return jm(e).forEach(function(e,i){var o=!1,n=jm(e),a=n.closest("a");a.length>0&&""!==a.attr("href")&&(o=!0),imageId="photoswipe_"+i,t.push({src:n.attr("src-original")||e.src,width:n.attr("vwidth")||e.naturalWidth,height:n.attr("vheight")||e.naturalHeight,title:"",description:"",detail:!1,id:imageId,openLink:o}),e.setAttribute("data-picId",imageId)}),t}Fai.top._windowLoaded?(t=o(),Mobi.initPictureSlidesV4(e,t,i)):jm(window).on("load",function(){t=o(),Mobi.initPictureSlidesV4(e,t,i)})},Mobi.recoverPhotoSwipeImgSize=function(e){var t=jm(e),i=!1,o=e.complete;function n(e){var t=document.body.clientWidth,i=document.body.clientHeight,o=e.width(),n=e.height();e.css({height:n+"px",width:o+"px",left:(t-o)/2+"px",top:(i-n)/2+"px"})}"0px"===e.style.width&&(i=!0,t.css("width","")),"0px"===e.style.height&&(i=!0,t.css("height","")),i&&(o?n(t):(t.hide(),t.parent().addClass("ps-carousel-item-loading"),t.one("load.adjust",function(e){var t=jm(this);t.parent().removeClass("ps-carousel-item-loading"),t.show(),n(t)})))},Mobi.copyModulePhotoDetailSwipe=function(e,t){var i=null==t?".style2Img.photoListImg":t,o=e.substring(e.lastIndexOf("e")+1),n=jm("#"+e).find(".J_contentPanelCopy"+o).find(i),a=jm("#"+e).find("#photoSlideList"+o).find(i);jm(n).each(function(e,t){jm(t).on("click",function(){jm(a[e]).trigger("click")})})},Mobi.PhotoDetailSwipeForJumpCtrl=function(e){var t=[];jm.ajax({type:"get",url:"ajax/getPhotoData_h.jsp?groupId="+e+"&cmd=getPhotoData",success:function(e){(e=jm.parseJSON(e))&&e.success&&null!=e.info&&(t=e.info);for(var i,o=[],n=0,a=t.length;n<a;n++)i=new Image,n<3&&(i.src=t[n].picPath),o.push(i);if(!(o.length<1)){var r={imageScaleMethod:"fitNoUpscale",jQueryMobile:!0,enableMouseWheel:!1,resetToolbarPosition:!0,loop:!1,photoJson:t,triggerEventType:"click",captionAndToolbarAutoHideDelay:0,getImageCaption:function(e,t){var i,o;return i=e+" / "+t,(o=document.createElement("div")).className="ps-page",o.appendChild(document.createTextNode(i)),o},getToolbar:function(){return'<div class="ps-toolbar-close ps-toolbar-close-style icon-toolbar-close-style"></div><div class="ps-toolbar-base"><div class="ps-toolbar-base-title" id="wrapperTitle"></div><div class="ps-toolbar-base-detail icon-toolbar-base-detail" id="wrapperTitleDetail"></div></div><div class="ps-toolbar-base-describe" id="wrapperBasic"><div id="scrollerBasic"></div></div>'},uiDetailCallBack:function(e,i,o){var n=this;jm(e).html("");var a=t[l.currentIndex],r=a.groupId,c=a.id,d=a.name;jm(o).html(d),jm(i).addClass(s.Carousel.CssClasses.itemLoading),jm.ajax({type:"post",url:"ajax/photo_h.jsp",data:"cmd=getInfo&id="+jm.encodeUrl(c)+"&groupId="+jm.encodeUrl(r),error:function(){Mobi.ing(LS.js_systemError)},success:function(t){jm(e).html(t);var o=e.querySelectorAll("img");if(0===o.length)n.detailScroll&&n.detailScroll.destroy(),n.detailScroll=null,n.destroyScroll=new iScroll(i),jm(i).removeClass(s.Carousel.CssClasses.itemLoading);else for(var a=0;a<o.length;a++){var r=new Image;r.src=o[a].src,r.onload=function(){a===o.length&&(n.detailScroll&&n.detailScroll.destroy(),n.detailScroll=null,n.destroyScroll=new iScroll(i),jm(i).removeClass(s.Carousel.CssClasses.itemLoading))}}}})}},s=window.Code.PhotoSwipe,l=s.attach(o,r);l&&l.addEventHandler(s.EventTypes.onCaptionAndToolbarShow,function(e){this.scroll&&this.scroll.destroy(),this.scroll=new iScroll("wrapperBasic")}),jm(o[0]).trigger("click"),l.addEventHandler(s.EventTypes.onDisplayImage,function(e){var i,o,n,a=e.target.currentIndex;a>1&&(o=t[a+1],(i=e.target.cache.images[e.target.currentIndex+1])&&((n=i.imageEl).src=o.picPath,Mobi.recoverPhotoSwipeImgSize(n)))})}}})},Mobi.photoCrossedSlideSecSwipe=function(e,t,i,o,n){var a,r,s=Mobi.getPreviewObject(t),l=Mobi.getPreviewObject(i),c=s,d=parseInt(l.offsetWidth),m=0,p=jm(null==o?".photoCrossedSlideSec":o,l);if(p.length>0&&(a=jm(p[0]),r=0,-1!=a.width().indexOf("rem")?r+=a[0].offsetWidth:r+=parseFloat(a.width()),r+=parseFloat(a.css("padding-left"))+parseFloat(a.css("padding-right")),r+=parseFloat(a.css("border-left-width"))+parseFloat(a.css("border-right-width")),m=(r+=parseFloat(a.css("margin-left"))+parseFloat(a.css("margin-right")))*p.length,".newPhotoCrossedSlideSec"==o)){var u=11;null!=n&&1==n.intervalOptions.type&&(u=n.intervalOptions.horizontal),m+=u*(p.length-1)}if(m>d&&(navigator.appVersion.match(/MSIE [\d.]+/)&&10===parseInt(navigator.appVersion.match(/MSIE ([\d.]+)/)[1])&&(m+=2*p.length),m+=10,jm(c).css("width",m+"px"),jm.os.supportsTouch)){var h,f,g,v,b,j=function(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];v=t.pageX,b=t.pageY;Math.abs(v-f),Math.abs(b-g);void 0===h&&void 0!==f&&void 0!==g&&(!1===(h=M(f,g,v,b))&&e.preventDefault(),y.off("touchmove.prod")),f=v,g=b},_=function e(t){h=f=g=v=b=void 0,y.off("touchmove.photoCross",j),y.off("touchend.photoCross",e)},M=function(e,t,i,o){var n=Math.abs(e-i),a=Math.abs(t-o);return(0!==n||0!==a)&&(0===n&&a>0||!(0===a&&n>0)&&a/n>1)},y=(new iScroll(l,{scrollX:!0,scrollY:!1,vScroll:!1,mouseWheel:!0,remarkXCoordinate:!0,onBeforeScrollStart:function(e){}}),jm("#"+i)),S=jm("#"+t);y.off("touchstart.photoCross").on("touchstart.photoCross",function(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];f=t.pageX,g=t.pageY,y.off("touchmove.photoCross").on("touchmove.photoCross",j),y.off("touchend.photoCross").on("touchend.photoCross",_)}),S.children().off("touchmove.banIScroll").on("touchmove.banIScroll",function(e){!0===h&&e.stopPropagation()})}p.show()},Mobi.initModuleMultiPhotoListItemManage=function(e){if(e&&e.moduleId){$("#module"+e.moduleId).data("options",e);var t=e.content;jm.each(t.picList,function(t,i){var o=i.id;i.desc,i.ide,i.openLink;$("#module"+e.moduleId).find(".style2Img.photoListImg.stretchImg").parent().mouseover(function(){var t=[{operationText:"编辑图片",className:"edit",evalScript:"top.Mobi.popupWindow({title:'编辑图片', frameSrcUrl:'mobiPhotoEdit.jsp?moduleId="+e.moduleId+"&id="+o+"&linkType="+e.linkType+"', width:580, height:420, closeFunc: closeMobiPhotoEdit, saveBeforePopup: true });"},{operationText:"删除图片",className:"close",evalScript:"Mobi.deleteMultiPhotoItem('"+o+"', "+e.moduleId+");"}];1===e.type?layer=Mobi.addEditLayer($(this),t,106):layer=Mobi.addEditLayer($(this),t,6)}).mouseleave(function(){1===e.type?Mobi.removeEditLayer($(this),null,106):Mobi.removeEditLayer($(this))})})}},Mobi.initModuleMultiPhotoCarouselItemManage=function(e){if(e&&e.moduleId){$("#module"+e.moduleId).data("options",e);var t=e.content.picList;jm.each(t,function(t,i){var o=i.id;i.desc,i.ide,i.openLink;$("#module"+e.moduleId).find("img[id="+o+"]").each(function(t,i){$(i).mouseover(function(){var t=[{operationText:"编辑图片",className:"edit",evalScript:"top.Mobi.popupWindow({title:'编辑图片', frameSrcUrl:'mobiPhotoEdit.jsp?moduleId="+e.moduleId+"&id="+o+"&linkType="+e.linkType+"', width:580, height:420, closeFunc: closeMobiPhotoEdit, saveBeforePopup: true});"},{operationText:"删除图片",className:"close",evalScript:"Mobi.deleteMultiPhotoItem('"+o+"', "+e.moduleId+");"}];Mobi.addEditLayer($(i),t,1)}).mouseleave(function(){Mobi.removeEditLayer($(i),null,1)})})})}},Mobi.deleteMultiPhotoItem=function(e,t){var i,o=jm("#module"+t);if(options=o.data("options"),content=options.content,picList=content.picList,jm.each(picList,function(t,o){o.id==e&&(i=t)}),confirm("确定删除图片？")&&void 0!==i){picList.splice(i,1);var n=new Array,a="ajax/mobimodule_h.jsp?cmd=setBack&id="+t+"&colId="+Fai.top._colId+"&style="+options.style+"&extId="+Fai.top._extId;n.push("&content="+jm.encodeUrl(jm.toJSON(content))),jm.ajax({type:"post",url:a,data:n.join(""),error:function(){Mobi.ing("服务繁忙，请稍后重试。",!0)},success:function(e){var t=jm.parseJSON(e);t.success?(Mobi.ing("保存成功。",!0),Mobi.jumpUrlMobi(Mobi.getPreviewDocument().location.href)):Mobi.ing(t.msg,!1)}})}},Mobi.initPhotoDetailManage=function(e,t){var i=Mobi.getPreviewDocument().getElementById("photoGroupDetailPanel"+e);$(i).mousemove(function(){Mobi.addModuleLayer("photoGroupDetailPanel"+e,t)}).mouseleave(function(){Mobi.removeModuleLayer("photoGroupDetailPanel"+e)})},Mobi.photoGroupContentInit=function(e){var t=jm("#photoGroupDetailPanel"+e),i=t.find(".photoGroupDetail").width(),o=t.find(".photoGroupPic"),n=t.find(".icon-gClose");jm("#photoGroupPicList"+e).width(i*o.length+"px"),o.width(i+"px");var a={triggerId:"newsDetailShare",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareDataPhotoGroup),direction:"bottom",callback:function(){Mobi.showCommSharePanel("shareListShowSwipe","photo")},closeWebPage:".shareListPanelBg"};Mobi.initWebPage(a),jm(n).bind("click",function(){return window.history.length<=1?window.location.href="index.jsp":history.back(),!1}),Mobi.scrollFadeIn("photoGroupDetailHeader"+e,"photoGroupPicPanel"+e,1)},Mobi.photoGroupContentInitV3=function(e){var t=jm("#photoGroupDetailPanel"+e),i=(t.find(".photoGroupDetail").width(),t.find(".photoGroupPic"),t.find(".icon-gClose")),o={triggerId:"newsDetailShare",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareDataPhotoGroup),direction:"bottom",callback:function(){Mobi.showCommSharePanel("shareListShowSwipe","photo")},closeWebPage:".shareListPanelBg"};Mobi.initWebPage(o),jm(i).bind("click",function(){return window.history.length<=1?window.location.href="index.jsp":history.back(),!1}),Mobi.scrollFadeIn("photoGroupDetailHeader"+e,"photoGroupPicPanel"+e,1)},Mobi.initPhotoGroupSwipe=function(e){var t=Mobi.getJQMobi(),i=Mobi.getPreviewObject(e),o=jm(i);if(i&&(Mobi.initScaleImage(i),i.querySelector(".bullets"))){var n,a,r,s=i.querySelector(".bullets").getElementsByTagName("li");a=parseInt(o.find(".J_maxNum").text()),n=t("#"+e).swipehandle(i,{continuous:!0,bulletsClick:!0,callback:function(e){for(var t,i=s.length;i--;)s[i].className=" ";s[e]?s[e].className="on":s[e-s.length].className="on",0==(t=(e+1)%a)&&(t=a),o.find(".J_curPhotoNumber").text(t)}}),/(iPhone|iPad|iPod|Android)/i.test(navigator.userAgent)||(r=o.find(".J_btn"),o.on("mouseover",function(){r.show()}).on("mouseleave",function(){r.hide()}),o.find(".J_preBtn").on("click",function(){n.prev()}),o.find(".J_nextBtn").on("click",function(){n.next()}))}},Mobi.getPhotoListInfo=function(e){var t=new Array,i=$("#module"+e),o={};if(i.data("options")){var n=i.data("options").content.picList;for(index in n)o={id:n[index].id,desc:n[index].desc,openLink:n[index].openLink,ide:n[index].ide},t.push(o)}return t},Mobi.photoCardInit=function(e){var t,i,o,n,a,r,s,l,c,d,m=jm("#module"+e),p=m.find(".J_photoListCard"),u=p.find(".J_cardContainer"),h=p.find("li"),f=h.length,g=0,v=0;if(f>1&&f<=3){u.append(h.clone(!0,!0)),h=p.find("li");for(var b=(f=h.length)/2;b<f;b++)jm(p.find("img").get(b)).addClass("garbage")}r=jm(h.get(0)).find(".J_imgContainer"),l=r.width(),c=r.height(),h.each(function(e,t){v=jm(t).height(),g=g<v?v:g}),h.each(function(e,r){if(o=jm(r),n=o.find("img"),a=parseInt(n.attr("faiWidth")),s=parseInt(n.attr("faiHeight")),d=function(e,t,i,o){var n={width:e,height:t},a=i/o,r=e/t;if(r<a){var s=e/i;n.width=i,n.height=t/s}else if(r>a){var l=t/o;n.width=e/l,n.height=o}return n}(a,s,l,c),n.css({height:d.height+"px",width:d.width+"px",marginTop:-parseFloat(d.height/2)+"px",marginLeft:-parseFloat(d.width/2)+"px",position:"absolute"}),o.height(g+"px"),f<=1)return!1;switch(o.on("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(e){m.data("animated","running")}).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){jm(this).removeClass("f-cardAnimation_right f-cardAnimation_left").addClass("f-showPic_0"),m.data("animated",""),i=jm(this).find("a"),(t=i.data("href"))&&i.attr("href",t)}),e){case 0:jm(r).addClass("f-showPic_1");break;case 1:jm(r).removeClass("f-showPic_1 f-showPic_2 f-showPic_3").addClass("f-showPic_2");break;case 2:jm(r).removeClass("f-showPic_1 f-showPic_2 f-showPic_3").addClass("f-showPic_3");break;default:jm(r).removeClass("f-showPic_1 f-showPic_2 f-showPic_3").addClass("f-showPic_0")}}),u.height(parseInt(g)+40+"px"),Mobi.bindTouchEvent(h,null,{callBack:function(e,t,i){if(Fai.top._manageMode&&(Fai.top.Fai.isIE10()||Fai.top.Fai.isSafari()))return void Fai.top.Fai.ing("当下浏览器不支持查看效果，请在手机上查看，或更换最新浏览器",!0);var o,n,a,r=jm(this),s=e.length,l=[];if(!i.touchMove)return void r.find("img").trigger("click");if(!i.toRight&&!i.toLeft&&"running"!=t.data("animated"))return;if(s<=1)return!1;(n=r.find("a").attr("href"))&&r.find("a").data("href",n).attr("href","javascript:void(0);");for(a=i.toRight?"f-cardAnimation_right":"f-cardAnimation_left",r.addClass(a),e.each(function(e,t){jm(t).removeClass("f-showPic_0 f-showPic_1 f-showPic_2 f-showPic_3")}),l[0]=r.index(),o=1;o<=3;o++)l[o]=o<=s?(l[0]+o)%s:-1;e.each(function(e,t){jm(t).find("img");switch(e){case l[1]:jm(t).addClass("f-showPic_1");break;case l[2]:jm(t).addClass("f-showPic_2");break;case l[3]:jm(t).addClass("f-showPic_3");break;case l[0]:break;default:jm(t).addClass("f-showPic_0")}})},args:[h,m],stopPropagation:!Fai.top._manageMode})},Mobi.newSearchResultSlide=function(e,t){if(null!=t&&0!=t.length){var i,o={fromCurentInx:!0},n="#module"+e+" img";Fai.top._windowLoaded?(i=a(),Mobi.initPictureSlidesV4(n,i,o)):jm(window).on("load",function(){i=a(),Mobi.initPictureSlidesV4(n,i,o)})}function a(){var e=[];return jm(n).forEach(function(i,o){var n=!1;"A"===i.parentNode.tagName&&""!==i.parentNode.href&&(n=!0),imageId="photoswipe_"+o,e.push({src:t[o].src,width:t[o].width,height:t[o].height,title:t[o].title||"",desc:"",detail:!1,id:imageId,openLink:n}),i.setAttribute("data-picId",imageId)}),e}},Mobi.updateProductDetailSwipe=function(e){var t={fromCurentInx:!0},i=[],o=jm(e).length;jm(e).forEach(function(n,a){var r=new Image;r.src=n.src,r.onload=function(){var r=!1;"A"===n.parentNode.tagName&&""!==n.parentNode.href&&(r=!0),imageId="photoswipe_"+a;var s=jm(n);i.push({src:s.attr("src-original")||n.src,width:s.attr("vwidth")||n.naturalWidth,height:s.attr("vheight")||n.naturalHeight,title:"",description:"",detail:!1,id:imageId,openLink:r,index:a}),n.setAttribute("data-picId",imageId),i.length==o&&Mobi.initPictureSlidesV4(e,i,t)}})},function(e,t,i){function o(e){var t,i;0!==e.length&&((i=e.find(".J_photoGroupAll")).hasClass("J_photoGroupAll4")&&(t=4),i.hasClass("J_photoGroupAll5")&&(t=5),a(t).create(e),function(e){n(e)}(e))}function n(i,o){!function(e,t){if(!Fai.top._manageMode)return;var i=e.find(".J_photoGroupAll");if(i.off("mousedown.photoGroup").off("mouseup.photoGroup"),!1===t)return;i.on("mousedown.photoGroup",function(){$("#webModuleContainer").sortable("disable")}).on("mouseup.photoGroup",function(e){$("#webModuleContainer").sortable("enable")})}(i,o),function(e,i){var o,n,a=e.find(".J_photoGroupAll");if(!a.hasClass("J_photoGroupAll4")&&!a.hasClass("J_photoGroupAll5"))return;if((o=a.find(".J_photoGroup-img-mask")).off("mousedown.photoGroupScan mouseup.photoGroupScan"),o.remove(),!1===i)return;if(!Mobi.isPC())return;n={startX:0,startY:0,endX:0,endY:0,time:0},a.find(".f-photoGroup-a").each(function(e,i){var o,n=t(i),a=n.find(".f-photoGroup-img"),r=a.height()/window._htmlFontSize+"rem";0===n.find(".J_photoGroup-img-mask").length&&((o=t("<div class='f-photoGroup-img-mask J_photoGroup-img-mask'></div>")).height(r),n.append(o))}),a.find(".J_photoGroup-img-mask").off("mousedown.photoGroupScan mouseup.photoGroupScan").on("mousedown.photoGroupScan",function(e){n.time=new Date,n.startX=e.pageX,n.startY=e.pageY}).on("mouseup.photoGroupScan",function(e){var i=t(e.target),o=new Date-n.time;if(n.endX=e.pageX,n.endY=e.pageY,o>200)return;if(n.startX!==n.endX||n.startY!==n.endY)return;i.parent().find(".f-photoGroup-img").click()})}(i,o),function(t,i){var o,n=(a={downLink:"touchstart.ctrlLink",clickLink:"click.ctrlLink"},r={downLink:"mousedown.ctrlLink",clickLink:"click.ctrlLink"},Mobi.isPC()?r:a);var a,r;if(t.off(n.downLink).off(n.clickLink),!1===i)return;o={startX:0,startY:0,endX:0,endY:0,time:null},t.on(n.downLink,".J_photoGroup-a",function(t){var i=e.photoGroup.utils.getPosByEvent(t);o.startX=parseInt(i.pageX),o.startY=parseInt(i.pageY),o.time=new Date}).on(n.clickLink,".J_photoGroup-a",function(t){var i=e.photoGroup.utils.getPosByEvent(t),n=new Date,a=!1;o.endX=parseInt(i.pageX),o.endY=parseInt(i.pageY),Math.abs(o.endX-o.startX)>1&&(a=!0);Math.abs(o.endY-o.startY)>1&&(a=!0);(n-o.time>200||a)&&t.preventDefault()})}(i,o),function(i,o){var n=e.photoGroup;if(!Fai.top._manageMode)return;t.isFunction(n.bindWithEditLayer)&&n.bindWithEditLayer(i,o)}(i,o)}function a(t){var i={4:e.photoGroup.zoomSlider,5:e.photoGroup.pokerSlider},o=function(){};return t?i[t]:{create:o,destory:o}}e.photoGroup=t.extend({},e.photoGroup,{bindInteractive:o,unBindInteractive:function(e){var t,i;if(0===e.length)return;(i=e.find(".J_photoGroupAll")).hasClass("J_photoGroupAll4")&&(t=4);i.hasClass("J_photoGroupAll5")&&(t=5);a(t).destory(e),function(e){n(e,!1)}(e)}}),t(function(){t(".formStyle34").each(function(e,i){var n=t(i);o(n)})})}(Mobi,jm),function(e,t,i){var o={getImgByCard:function(e){var i=t(e),o=t(e).find(".J_photoGroup-img-mask");if(o.length>0)return o;return i.find(".J_photoGroup-img")},getSliderDir:function(e,t,i,o){var n=Math.abs(e-i),a=Math.abs(t-o);if(0===a&&0===a)return;if(n>0&&0===a)return!0;if(0===n&&a>0)return!1;return n/a>1},getPosByEvent:function(e){var t=e.pageX||n(e).pageX,i=e.pageY||n(e).pageY;return{pageX:t,pageY:i}},getStyleType:function(e){var t,i=e.find(".J_photoGroupAll");i.hasClass("J_photoGroupAll1")?t=1:i.hasClass("J_photoGroupAll2")?t=2:i.hasClass("J_photoGroupAll3")?t=3:i.hasClass("J_photoGroupAll4")?t=4:i.hasClass("J_photoGroupAll5")&&(t=5);return t},isInDom:function(e,i,o){var n=t(e)[0].getBoundingClientRect(),a=!1,r=!1;i>=n.left&&i<=n.right&&(a=!0);o>=n.top&&o<=n.bottom&&(r=!0);return a&&r}};function n(e){return e.touches||e.changedTouches?e.touches[0]||e.changedTouches[0]:{}}e.photoGroup=t.extend({},e.photoGroup,{utils:o})}(Mobi,jm),function(e,t,i,o){var n=function(e){var t={};return{add:function(t,a){var r,s=n(t),l=s.attr("id");if(!Fai.top._manageMode)return;if(!e.isFunction(Mobi.addEditLayer))return;if(!1===i(a))return;r=function(t){var i,n,a=e(t).parent().find(".J_photoGroup-img"),r=a.attr("_groupid"),s=e("#photoGroup"+r).find(".J_photoGroup-title").text(),l=a.attr("fromMobi2"),c=a.attr("id").split("module")[1];"true"==l?(i="Fai.top.Mobi.popupWindow({title:'编辑图册', frameSrcUrl:'"+o(r)+"&fromMobi2=true&_pmid="+c+"', width:860, height:682, version:2});",n="Mobi.deletePhotoGroupManage('"+r+"', '"+Fai.top.Fai.encodeHtmlJs(s)+"', '', 0 ,"+c+")"):(i="Fai.top.Mobi.popupWindow({title:'编辑图册', frameSrcUrl:'"+o(r)+"', width:860, height:682, version:2});",n="Mobi.deletePhotoGroupManage('"+r+"', '"+Fai.top.Fai.encodeHtmlJs(s)+"', '', 0)");return[{operationText:"编辑图册",className:"edit_2",evalScript:i},{operationText:"删除图册",className:"close_2",evalScript:n}]}(s),function(e,t){var i=t.offset(),o=e[0].getBoundingClientRect();e.css({left:i.right-o.width,top:i.bottom-o.height})}(Mobi.addEditLayer(l,r,6,{extCls:"editLayer_2"}),s)},remove:function(t,o){if(!Fai.top._manageMode)return;if(!1===i(o))return;if(!e.isFunction(Mobi.removeEditLayer))return;var a=n(t).attr("id");a&&Mobi.removeEditLayer(a)},ctrl:function(e,i){var o=e.attr("id"),n=t[o];if(!1===i)return void(t[o]=!1);void 0!==n&&(t[o]=void 0,delete t[o])}};function i(e){var i=e.attr("id");return t[i]}function o(e){var t=Fai.top.location,i=(t.origin,t.pathname),o=i.split("/");return o.pop(),o.pop(),o.push("manage_v2"),o.push("photoGroupEdit.jsp"),Fai.top._siteDomain+o.join("/")+"?fromManage=true&mobiSettingState=3&id="+e}function n(t){var i=e(t);return i.hasClass("J_photoGroup-img")||(i=i.parent().find(".J_photoGroup-img")),i}}(t),a={moveX:0,moveY:0};function r(t,i){var o={moduleMouseEnter:"mouseenter.bindEidtLayer",moduleMouseLeave:"mouseleave.bindEditLayer",imgMouseEnter:"mouseenter.eidtLayer",imgMouseLeave:"mouseleave.eidtLayer",imgDwon:"mousedown.editLayer",imgUp:"mouseup.editLayer",wrapMousemove:"mousemove.editLayer",transBefore:"transitionBefore",transAfter:"transitionAfter"},r=(t.find(".J_photoGroupAll5"),e.photoGroup.utils.getStyleType(t));t.off(o.moduleMouseLeave).off(o.moduleMouseEnter),!1!==i&&(t.on(o.moduleMouseEnter,function(e){s(t)}).on(o.moduleMouseLeave,function(e){s(t,!1)}),[4,5].indexOf(r)>-1&&function(t,i){t.find(".J_photoGroupAll-wrap");var o={moduleMouseEnter:"mouseenter.bindEidtLayer",moduleMouseLeave:"mouseleave.bindEditLayer",imgMouseEnter:"mouseenter.eidtLayer",imgMouseLeave:"mouseleave.eidtLayer",imgDwon:"mousedown.editLayer",imgUp:"mouseup.editLayer",wrapMousemove:"mousemove.editLayer",transBefore:"transitionBefore",transAfter:"transitionAfter"};if(t.off(o.transBefore).off(o.transAfter),!1===i)return;t.on(o.transBefore,function(i){!function(t){var i=l(t),o=(i.active,i.all);c(t,a),o.each(function(i,o){var a=e.photoGroup.utils.getImgByCard(o);n.remove(a,t)}),n.ctrl(t,!1)}(t)}).on(o.transAfter,function(i){!function(t){var i=e.photoGroup.utils,o=l(t).active,r=i.getImgByCard(o);if(c(t,a,!1),!i.isInDom(o,a.moveX,a.moveY))return;n.ctrl(t),n.add(r,t)}(t)})}(t,i))}function s(i,o){i.find(".J_photoGroupAll-wrap");var a=i.find(".J_photoGroupStyle"),r={moduleMouseEnter:"mouseenter.bindEidtLayer",moduleMouseLeave:"mouseleave.bindEditLayer",imgMouseEnter:"mouseenter.eidtLayer",imgMouseLeave:"mouseleave.eidtLayer",imgDwon:"mousedown.editLayer",imgUp:"mouseup.editLayer",wrapMousemove:"mousemove.editLayer",transBefore:"transitionBefore",transAfter:"transitionAfter"};e.photoGroup.utils;a.off(r.imgMouseLeave).off(r.imgMouseEnter),!1!==o&&a.on(r.imgMouseEnter,function(o){var a=t(this),r=e.photoGroup.utils,s=r.getImgByCard(a),l=r.getStyleType(i),c=a.data("fk-is-enter");(4!==l||a.hasClass("f-active"))&&(5===l&&0!==a.index()||"true"!==c&&(n.add(s,i),a.data("fk-is-enter","true")))}).on(r.imgMouseLeave,function(o){var a=t(this);$img=e.photoGroup.utils.getImgByCard(a),flag=a.data("fk-is-enter"),"true"===flag&&(n.remove($img,i),a.data("fk-is-enter","false"))})}function l(t){var i,o=e.photoGroup.utils.getStyleType(t),n=t.find(".J_photoGroupStyle");return 4===o&&(i=t.find(".f-active")),5===o&&(i=n.eq(0)),{all:n,active:i}}function c(e,t,i){var o=e.find(".J_photoGroupAll-wrap"),n={moduleMouseEnter:"mouseenter.bindEidtLayer",moduleMouseLeave:"mouseleave.bindEditLayer",imgMouseEnter:"mouseenter.eidtLayer",imgMouseLeave:"mouseleave.eidtLayer",imgDwon:"mousedown.editLayer",imgUp:"mouseup.editLayer",wrapMousemove:"mousemove.editLayer",transBefore:"transitionBefore",transAfter:"transitionAfter"};o.off(n.wrapMousemove),!1!==i&&o.on(n.wrapMousemove,function(e){t.moveX=e.clientX,t.moveY=e.clientY})}t(window).load(function(e){if(!Fai.top._manageMode)return;t(".formStyle34").forEach(function(e,i){r(t(e))})}),e.photoGroup=t.extend({},e.photoGroup,{bindWithEditLayer:r})}(Mobi,jm),function(e,t,i){var o={create:function(e){(function(e){var i=e.find(".J_photoGroupAll-wrap"),o=e.find(".J_photoGroupStyle"),a=0,r=o.eq(0);o.addClass(n.small),r.length>0&&r.addClass(n.active);o.each(function(e,i){var o=t(i);a+=parseFloat(o.width()),a+=parseFloat(o.css("margin-left")),a+=parseFloat(o.css("margin-right"))}),i.width(a+"px")})(e),function(e){var i=e.find(".J_photoGroupAll-wrap"),o=r(),s={currIndex:0,oldIndex:0,isStart:!1,isXMove:!1,isMove:!1,isTrans:!1,startX:0,startY:0,moveX:0,moveY:0,endX:0,endY:0,time:0,disLeft:0};function l(e){e.preventDefault()}function c(e){var t,i=a.getSliderDir(s.startX,s.startY,s.moveX,s.moveY);if(s.isStart&&(t=a.getPosByEvent(e),s.moveX=t.pageX,s.moveY=t.pageY,!s.isMove)){if(s.isMove=!0,void 0===i)return;!0===i?(s.isXMove=!0,Mobi.lockDocScroll()):Mobi.openDocScroll()}}function d(o){var l=a.getPosByEvent(o),c=l.pageX-s.startX,d=r(),m=s.isStart&&s.isMove&&!s.isTrans;Mobi.openDocScroll(),i.off(d.dragMove).off(d.dragEnd),m&&s.isXMove&&(c<0?s.currIndex++:c>0&&s.currIndex--,function(e,i,o,a){var s,l=e.find(".J_photoGroupStyle"),c=r();i.currIndex<0?(i.currIndex=0,!1):i.currIndex>=l.length&&(i.currIndex=l.length-1,!1);if(l.eq(i.oldIndex).find(".J_photoGroup-img"),i.oldIndex===i.currIndex)return;s=l.eq(i.currIndex),l.eq(i.oldIndex).removeClass(n.active),s.addClass(n.active),i.isTrans=!0,s.off(c.transEnd).on(c.transEnd,function(e){t(e.target).find(".J_photoGroup-img-mask");i.isTrans=!1,s.off(c.transEnd),i.oldIndex=i.currIndex,o.trigger("transitionAfter",[e])}),i.disLeft-=(d=s,m=t("#g_web").offset(),p=d.offset(),u=m.left+m.width/2,p.left+p.width/2-u),o.trigger("transitionBefore",[a]),t(["-ms-","","moz","-webkit-"]).each(function(t,o){var n=o+"transform",a="translate("+i.disLeft+"px,0)";e.css(n,a)});var d,m,p,u}(i,s,e,o)),s.isXMove=s.isStart=s.isMove=void 0}i.off(o.dragStart).off(o.selectStart).off(o.dragOriginStart).on(o.dragStart,function(e){var t=a.getPosByEvent(e),o=r();s.isStart=!0,s.startX=t.pageX,s.startY=t.pageY,i.off(o.dragMove).on(o.dragMove,c).off(o.dragEnd).on(o.dragEnd,d)}).on(o.selectStart,l).on(o.dragOriginStart,l)}(e)},destory:function(e){var t=e.find(".J_photoGroupAll-wrap"),i=r();t.off(i.dragStart).off(i.selectStart).off(i.dragOriginStart)}},n={small:"f-small",active:"f-active"},a=e.photoGroup.utils;function r(){var e,t;return t={dragStart:"mousedown.photoStyle4",dragMove:"mousemove.photoStyle4",dragEnd:"mouseup.photoStyle4",transEnd:"transitionend.photoStyle4",selectStart:"selectstart.photoStyle4",dragOriginStart:"dragstart.photoStyle4"},e={dragStart:"touchstart.photoStyle4",dragMove:"touchmove.photoStyle4",dragEnd:"touchend.photoStyle4",transEnd:"transitionend.photoStyle4",selectStart:"selectstart.photoStyle4",dragOriginStart:"dragstart.photoStyle4"},Fai.top._manageMode?t:Mobi.isPC()?t:e}e.photoGroup=t.extend({},e.photoGroup,{zoomSlider:o})}(Mobi,jm),function(e,t,i){var o={create:function(e){(function(e){var t=e.find(".J_photoGroupAll-wrap"),i=t.find(".J_photoGroupStyle").find(".J_photoGroup-a"),o=i.height()+"px";0===i.find(".J_photoGroup-detail").length&&t.css({height:o,transform:"translateY(0.725rem)"})})(e),function(e){var t=e.find(".J_photoGroupAll"),i=a(),o={startX:0,startY:0,endX:0,endY:0,isStart:!1,isMove:!1,isXMove:!1,isAnimate:!1};if(t.find(".J_photoGroupStyle").length<=1)return;function r(e){e.preventDefault()}function s(e){var t;n.getPosByEvent(e);if(o.isStart&&!o.isMove){if(o.isMove=!0,void 0===(t=n.getSliderDir(o.startX,o.startY,o.endX,o.endY)))return;!0===t?(o.isXMove=!0,Mobi.lockDocScroll()):Mobi.openDocScroll()}}function l(r){var s=n.getPosByEvent(r),l=o.isStart,c=o.isMove;o.isXMove;Mobi.openDocScroll(),o.endX=s.pageX,o.endY=s.pageY,t.off(i.dragMove).off(i.dragEnd),l&&c&&o.isXMove&&function(e,t,i){var o,n=e.find(".J_photoGroupStyle"),r=n.eq(0),s=n.eq(1),l=n.eq(2),c=n.eq(3),d=a(),m=i.endX-i.startX,p=!1;if(i.isAnimate)return;if(0===m)return;m<0&&(p=!0);o={dir:p?"f-toLeft":"f-toRight",toOne:"f-toOne",toTwo:"f-toTwo",toThree:"f-toThree"},r.length>0&&(i.isAnimate=!0,r.on(d.transEnd,function(e){var n=a(),s=r.parent(),l=r.siblings();r.off(n.transEnd),r.parent()[0].removeChild(r[0]),l.removeClass(o.toOne).removeClass(o.toTwo).removeClass(o.toThree),r.removeClass(o.dir),s.append(r),i.isAnimate=!1,t.trigger("transitionAfter")}),t.trigger("transitionBefore"),r.addClass(o.dir));s.length>0&&s.addClass(o.toOne);l.length>0&&l.addClass(o.toTwo);c.length>0&&c.addClass(o.toThree)}(t,e,o),o.isStart=o.isMove=o.isXMove=void 0}t.off(i.dragStart).off(i.selectStart).off(i.dragOrginStart).on(i.dragStart,function(e){var a=n.getPosByEvent(e);o.startX=a.pageX,o.startY=a.pageY,o.isStart=!0,t.off(i.dragMove).off(i.dragEnd).on(i.dragMove,".J_photoGroupStyle",s).on(i.dragEnd,".J_photoGroupStyle",l)}).on(i.dragOrginStart,".J_photoGroup-a",r).on(i.selectStart,r)}(e)},destory:function(e){var t=e.find(".J_photoGroupAll"),i=a();t.off(i.dragStart).off(i.selectStart).off(i.dragOrginStart)}},n=e.photoGroup.utils;function a(){var e,t;return e={dragStart:"mousedown.photoGroup5",dragMove:"mousemove.photoGroup5",dragEnd:"mouseup.photoGroup5",selectStart:"selectstart.photoGroup5",transEnd:"transitionend.photoGroup5",dragOrginStart:"dragstart.photoGroup5"},t={dragStart:"touchstart.photoGroup",dragMove:"touchmove.photoGroup",dragEnd:"touchend.photoGroup",selectStart:"selectstart.photoGroup5",transEnd:"transitionend.photoGroup5",dragOrginStart:"dragstart.photoGroup5"},Fai.top._manageMode?e:Mobi.isPC()?e:t}e.photoGroup=t.extend({},e.photoGroup,{pokerSlider:o})}(Mobi,jm),function(e,t,i){function o(i,o){var n=i.find(".f-photoGroupItem");n.off("mouseenter.editLayer mouseleave.editLayer"),!1!==o&&n.on("mouseenter.editLayer",function(){var i,o=t(this),n=o.find(".f-photoGroupR-title").text().trim(),a=o.attr("id").replace("photoGroupR",""),r=[{operationText:"编辑图册",className:"edit_2",evalScript:"Fai.top.Mobi.popupWindow({title:'编辑图册', frameSrcUrl:'"+function(e){var t=Fai.top.location,i=(t.origin,t.pathname.split("/"));return i.pop(),i.pop(),i.push("manage_v2"),i.push("photoGroupEdit.jsp"),Fai.top._siteDomain+i.join("/")+"?fromManage=true&mobiSettingState=3&id="+e}(a)+"', width:860, height:682, version:2});"},{operationText:"删除图册",className:"close_2",evalScript:"Mobi.deletePhotoGroupManage('"+a+"', '"+Fai.top.Fai.encodeHtmlJs(n)+"', '', 0)"}];(i=e.addEditLayer(o,r,6)).css({left:o.offset().right-i.width()-2,top:o.offset().bottom-i.height()-2})}).on("mouseleave.editLayer",function(){var i=t(this);e.removeEditLayer(i)})}t(function(){if(!Fai.top._manageMode)return;t(".formStyle48").each(function(e,i){t(i).on("mouseenter.bindEditLayer",function(){o(t(this))}).on("mouseleave.bindEditLayer",function(){o(t(this),!1)})})})}(Mobi,jm),Mobi.updatePhotoGroupDataByFrame=function(e){var t=Fai.top._rootStore.getters.getModuleById(e.moduleId);if(null!=t){var i={groupIdList:JSON.stringify(0==t.content.photoGroupCatalog?t.content.groupIdList:t.content.groupSortIdList),pageno:1,size:0==t.content.pageDisplayType?t.content.photoGroupCount:t.content.pagePhotoSize,catalog:t.content.photoGroupCatalog,isPageDisplay:t.content.pageDisplayType,moduleStyle:t.content.style,isManageMode:!0};Fai.top.$.ajax({type:"post",url:"../ajax/module_h.jsp?cmd=getPhotoGroupListData",data:i,error:function(){Fai.top.Fai.ing("系统繁忙，请稍后重试",!1)},success:function(e){var i=jm.parseJSON(e);i.success?(t.totalSize=i.totalSize,t.photoGroupCount=i.photoGroupCount,t.pageno=1,t.photoGroupList=i.groupList,t.photoGroupSortList=i.photoGroupSortList):Fai.top.Fai.ing("系统繁忙，请稍后重试",!1)}})}},Mobi.initMbPdCollection=function(e,t,i,o){this.sessionMid=e,this.collectionList=t,this.pid=i,this._manageMode=o};var cookieCollectIDTimes=0;function arrHasSameBegin(e,t){for(var i=!0,o=0;o<t.length;o++)t[o]!=e[o]&&(i=!1);return i}function refreshFooterBg(e){var t=e.fb.r,i="";i+=e.fb.c;var o=e.fb.p;if(o&&-1!=t){var n="";0!=t&&6!=t&&7!=t&&8!=t&&9!=t&&13!=t&&14!=t&&15!=t&&16!=t||(n="no-repeat"),1!=t&&11!=t&&12!=t||(n="repeat-x"),2!=t&&21!=t&&22!=t||(n="repeat-y"),3==t&&(n="repeat"),4!=t&&5!=t||(n="repeat");var a="center";9!=t&&12!=t||(a="bottom"),6!=t&&21!=t||(a="left"),7!=t&&22!=t||(a="right"),4!=t&&5!=t&&8!=t&&11!=t||(a="top"),13==t&&(a="left top"),14==t&&(a="right top"),15==t&&(a="left bottom"),16==t&&(a="right bottom"),i+=" url("+o+") "+n+" "+a}Mobi.setFooterBg(i,e)}!function(e,t,i){var o,n,a,r;function s(t){e.ajax({url:"ajax/member_h.jsp?cmd=setMemberCollection",data:"mid="+o+"&pid="+a+"&collection="+t,type:"POST",dataType:"json",success:function(e){e.success&&(t?Mobi.ing(LS.sucCollection,1):Mobi.ing(LS.cancelledCollection,2))}})}Mobi.initMbPdCollection.prototype.init=function(){o=this.sessionMid,n=this.collectionList,a=this.pid,r=this._manageMode,Mobi.bindTouchAndClickEvent(e(".shareBlock"),function(t){0==o?r?Mobi.ing(LS.isManageFailCollection):(window.location.href="login.jsp?returnUrl="+e.encodeUrl(window.location.href),e.setCookie("m_collectID",a)):-1==n.indexOf(a)?(n.push(a),e(".shareBlock .icon-collection").addClass("icon-collectSelect g_main_color_v3"),s(!0)):-1!=n.indexOf(a)&&(n.splice(n.indexOf(a),1),e(".shareBlock .icon-collection").removeClass("icon-collectSelect g_main_color_v3"),s(!1))}),0!=o&&-1!=n.indexOf(a)&&e(".shareBlock .icon-collection").addClass("icon-collectSelect g_main_color_v3"),0==e("#_TOKEN").length||r||e.getCookie("m_collectID")!=a+""||e(".shareBlock .icon-collection ").hasClass("icon-collectSelect g_main_color_v3")||-1==n.indexOf(a)&&(n.push(a),e(".shareBlock .icon-collection").addClass("icon-collectSelect g_main_color_v3"),s(!0),cookieCollectIDTimes++),1===cookieCollectIDTimes&&(e(".shareBlock .icon-collection").addClass("icon-collectSelect g_main_color_v3"),-1==n.indexOf(a)&&n.push(a)),e.setCookie("m_collectID","",-1)}}(jm),Mobi.initProductEvent=function(e){Mobi.initProductSwipe(e)},Mobi.initRepPropValueOfURL=function(){var e=new RegExp("https?|ftp|file://");jm(".paramCollection .propVal").each(function(t,i){var o=jm(this).text();e.test(o)&&jm(this).html(o.replace(/((https?|ftp|file):\/\/[-a-zA-Z0-9+&@#\/%?=~_|!:,.;]*)/g,'<a href="$1" target="_blank" style="text-decoration:underline">$1</a>'))})},Mobi.initProductRestrict=function(e,t,i,o,n,a){if(e){var r=n?"#productMallOptionPanel"+a:"",s=0;null!=o.count&&(s=o.count);var l=i-s;jm.fkEval(l)<0&&(l=-1);var c=1,d=-1;t>1&&0!=i?(jm(r+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(r+" #limitAmountDiv").text("( "+LS.minAmount+" : "+t+" ; "+LS.maxAmount+" : "+l+" )"),c=t,d=l):1==t&&0!=i?(jm(r+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(r+" #limitAmountDiv").text("( "+LS.maxAmount+" : "+l+" )"),d=l):t>1&&0==i&&(jm(r+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(r+" #limitAmountDiv").text("( "+LS.minAmount+" : "+t+" )"),c=t),jm(r+" #productNum").val(c).unbind("change").change(function(){var e=m();e<c||e==c?(e=c,jm("#g_decrease").addClass("g_opacity50"),jm("#g_increase").removeClass("g_opacity50"),(d<c||d==c)&&jm("#g_increase").addClass("g_opacity50")):-1!=d&&(e>d||e==d)?(e=d,jm("#g_decrease").removeClass("g_opacity50"),jm("#g_increase").addClass("g_opacity50")):e>9999998?(e=9999999,jm("#g_decrease").removeClass("g_opacity50"),jm("#g_increase").addClass("g_opacity50")):jm("#g_decrease, #g_increase").removeClass("g_opacity50"),jm(this).val(e)}).change(),jm(r+" #g_decrease").click(function(){m()<c+1&&jm(r+" #productNum").val(c),jm(r+" #productNum").change()}),jm(r+" #g_increase").click(function(){m()>d-1&&-1!=d&&jm(r+" #productNum").val(d>c?d:c),jm(r+" #productNum").change()})}function m(){var e=jm(r+" #productNum").val(),t=1;return jm.isInteger(e)&&(t=parseInt(e)),t}},Mobi.initProductRestrict_pt=function(e){if((e=e||{}).isPtLimitBuy){var t=e.entry?"#productMallOptionPanel"+e.productId:"",i=0;null!=e.productRestrictInfo.count&&(i=e.productRestrictInfo.count);var o=e.pt_maxAmount-i;jm.fkEval(o)<0&&(o=-1);var n;jm(t+" #limitAmountDiv_pt").parent().attr("style","line-height:1.5rem;"),jm(t+" #limitAmountDiv_pt").text("拼团每人限购"+e.pt_maxAmount+"件"+(i>0?"，还可购买"+o+"件":"")),n=o,jm(t+" #productNum_pt").val(1).unbind("change").change(function(){var e=a();e<1||1==e?(e=1,jm("#g_decrease_pt").addClass("g_opacity50"),jm("#g_increase_pt").removeClass("g_opacity50"),(n<1||1==n)&&jm("#g_increase_pt").addClass("g_opacity50")):-1!=n&&(e>n||e==n)?(e=n,jm("#g_decrease_pt").removeClass("g_opacity50"),jm("#g_increase_pt").addClass("g_opacity50")):e>9999998?(e=9999999,jm("#g_decrease_pt").removeClass("g_opacity50"),jm("#g_increase_pt").addClass("g_opacity50")):jm("#g_decrease_pt, #g_increase_pt").removeClass("g_opacity50"),jm(this).val(e)}).change(),jm(t+" #g_decrease_pt").click(function(){a()<2&&jm(t+" #productNum_pt").val(1),jm(t+" #productNum_pt").change()}),jm(t+" #g_increase_pt").click(function(){a()>n-1&&-1!=n&&jm(t+" #productNum_pt").val(n>1?n:1),jm(t+" #productNum_pt").change()})}function a(){var e=jm(t+" #productNum_pt").val(),i=1;return jm.isInteger(e)&&(i=parseInt(e)),i}},Mobi.initProductRestrict_im=function(e){if((e=e||{}).isImLimitBuy){var t=e.entry?"#productMallOptionPanel"+e.productId:"",i=0;null!=e.productRestrictInfo.count&&(i=e.productRestrictInfo.count);var o=e.im_maxAmount-i;jm.fkEval(o)<0&&(o=-1);var n;jm(t+" #limitAmountDiv_im").parent().attr("style","line-height:1.5rem;"),jm(t+" #limitAmountDiv_im").text("每人限购"+e.im_maxAmount+"件"+(i>0?"，还可购买"+o+"件":"")),n=o,jm(t+" #productNum_im").val(1).unbind("change").change(function(){var e=a();e<1||1==e?(e=1,jm("#g_decrease_im").addClass("g_opacity50"),jm("#g_increase_im").removeClass("g_opacity50"),(n<1||1==n)&&jm("#g_increase_im").addClass("g_opacity50")):-1!=n&&(e>n||e==n)?(e=n,jm("#g_decrease_im").removeClass("g_opacity50"),jm("#g_increase_im").addClass("g_opacity50")):e>9999998?(e=9999999,jm("#g_decrease_im").removeClass("g_opacity50"),jm("#g_increase_im").addClass("g_opacity50")):jm("#g_decrease_im, #g_increase_im").removeClass("g_opacity50"),jm(this).val(e)}).change(),jm(t+" #g_decrease_im").click(function(){a()<2&&jm(t+" #productNum_im").val(1),jm(t+" #productNum_im").change()}),jm(t+" #g_increase_im").click(function(){a()>n-1&&-1!=n&&jm(t+" #productNum_im").val(n>1?n:1),jm(t+" #productNum_im").change()})}function a(){var e=jm(t+" #productNum_im").val(),i=1;return jm.isInteger(e)&&(i=parseInt(e)),i}},Mobi.initProductRestrict_es=function(e){e.isEarnestSale&&jm(".J_productImmeEarnestSale").parents(".productMallOptionContent").find(".productName").hide()},Mobi.initPriceCalendar=function(e){var t=(e=e||{}).optionsAmountList,i=e.isRelateAmount,o=e.realMallPrice,n=e.limitAmount_options,a=e.productRestrictInfo,r=e.choiceCurrencyVal,s=e.entry,l=e.productId,c=(e.moduleId,e.weightTypeStr),d=e.isGroupBuy,m=e.groupPrice,p=e.isCutPrice,u=e.cpMinPrice,h=e.isSecKill,f=e.secKillPrice,g=e.isIntegralMall,v=e.integtalMallType,b=e.imMinPrice,j=e.isEarnestSale,_=e.earnestSalePrice;Fai.top._openThemeV3;jm.each(t,function(e,t){if(null==t.t)return!0,!1}),null==c&&(c="kg");var M=jm(".J-op-box"),y=(jm(".mallOptionImg"),M.find(".J-op")),S="";1==s&&(M=jm("#productMallOptionPanel"+l+" .J-op-box"),jm("#productMallOptionPanel"+l+" .mallOptionImg"),y=M.find(".J-op"),S="#productMallOptionPanel"+l);var I=!1;y.each(function(e,t){"true"===jm(t).attr("isTime")&&(I=!0)});var w=[],C=jm("#mallPrice").html(),P=(jm("#mallAmount").html(),jm("#mallWeight").html(),C),x=!1;d?(P=m,x=!0,jm(".J_productImmediatelyBug").on("click",function(){Mobi.priceCalendar=epctrl.init("Calendar",{el:"#priceCalendar",priceCalendar:!0,openAmount:L,mallOptions:e,mkPrice:P,useMk:!1}),k(Mobi.priceCalendar)}),jm(".J_groupBuyBtn").on("click",function(){Mobi.priceCalendar=epctrl.init("Calendar",{el:"#priceCalendar",priceCalendar:!0,openAmount:L,mallOptions:e,mkPrice:P,useMk:!0}),k(Mobi.priceCalendar)})):p?(P=u,x=!0):h?(P=f,x=!0):g?(P=0==v?b.minPrice:0,x=!0,jm(".J_productImmediatelyBug").on("click",function(){Mobi.priceCalendar=epctrl.init("Calendar",{el:"#priceCalendar",priceCalendar:!0,openAmount:L,mallOptions:e,mkPrice:P,useMk:!1}),k(Mobi.priceCalendar)}),jm(".J_integralMallBtn").on("click",function(){Mobi.priceCalendar=epctrl.init("Calendar",{el:"#priceCalendar",priceCalendar:!0,openAmount:L,mallOptions:e,mkPrice:P,useMk:!0}),k(Mobi.priceCalendar)})):j&&(P=_,x=!0);var L=jm("#mallAmount").length>0;function k(e){e.on("dayClick",function(e){if($selected=jm(e.tdEl),!$selected.hasClass("ep-calendar-disabled")){var d=e.date;if(i){var m="",g=0;y.each(function(e,t){jm(y[e]).find(".optionSelected").length<=0?m+="x_":m+=jm(y[e]).find(".optionSelected").attr("data")+"_"}),m+=d,jm.each(t,function(e,t){(function(e,t){if(""==e)return!1;var i=!0,o=e.split("_"),n=t.split("_");return o.length==n.length&&(jm.each(o,function(e,t){"x"!=o[e]&&o[e]!=n[e]&&(i=!1)}),i)})(m,t.t2)&&(0==t.flag||isNaN(t.oAmount)||(g+=t.oAmount))}),jm(S+" #mallAmount").text(g)}var v=M.find(".optionSelected"),b=!1;if(I?y.length-1==v.length&&(b=!0):y.length==v.length&&(b=!0),b){var j,_,C,P,x,L="";if(jm(v).each(function(e){L+=jm(this).attr("data")+"_"}),L+=d,jm.each(t,function(e,t){var i=t.t2;t.t==L?(j=t.oPrice,_=t.oAmount,C=t.minAmount,P=t.maxAmount,x=t.w):i==L&&(j=t.oPrice,_=t.oAmount,C=t.minAmount,P=t.maxAmount,x=t.w)}),n){jm(S+" #limitAmountDiv").text("");var k=0,B=a.optionsCount;if(null!=B&&null!=B.d)for(var A=0;A<B.d.length;A++)B.d[A].t+"_"==L&&(k=B.d[A].c);var D=0;D=P-k,jm.fkEval(D)<0&&(D=-1);var O=1,E=-1;C>1&&0!=P?(jm(S+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(S+" #limitAmountDiv").text("( "+LS.minAmount+" : "+C+" ; "+LS.maxAmount+" : "+D+" )"),O=C,E=D):1==C&&0!=P?(jm(S+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(S+" #limitAmountDiv").text("( "+LS.maxAmount+" : "+D+" )"),E=D):C>1&&0==P&&(jm(S+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(S+" #limitAmountDiv").text("( "+LS.minAmount+" : "+C+" )"),O=C),jm(S+" #productNum").val(O),jm(S+" #productNum").unbind("change"),jm(S+" #productNum").bind("change",function(){var e=jm(S+" #productNum").val(),t=1;jm.isInteger(e)&&(t=parseInt(e)),t<O||t==O?(t=O,jm(S+" #g_decrease , .g_decrease").addClass("g_opacity50"),jm(S+" #g_increase , .g_increase").removeClass("g_opacity50")):-1!=E&&(t>E||t==E)?(t=E,jm(S+" #g_decrease , .g_decrease").removeClass("g_opacity50"),jm(S+" #g_increase , .g_increase").addClass("g_opacity50")):t>9999998?(t=9999999,jm(S+" #g_decrease , .g_decrease").removeClass("g_opacity50"),jm(S+" #g_increase , .g_increase").addClass("g_opacity50")):(jm(S+" #g_decrease , .g_decrease").removeClass("g_opacity50"),jm(S+" #g_increase , .g_increase").removeClass("g_opacity50")),jm(S+" #productNum").val(t)}),jm(S+" #productNum").change(),jm(S+" #g_decrease , .g_decrease").unbind("click.dc2"),jm(S+" #g_increase , .g_increase").unbind("click.ic2"),jm(S+" #g_decrease , .g_decrease").bind("click.dc2",function(){var e=jm(S+" #productNum").val(),t=1;jm.isInteger(e)&&(t=parseInt(e)),t<O+1&&jm(S+" #productNum").val(O),jm(S+" #productNum").change()}),jm(S+" #g_increase , .g_increase").bind("click.ic2",function(){var e=jm(S+" #productNum").val(),t=1;jm.isInteger(e)&&(t=parseInt(e)),t>E-1&&-1!=E&&(E>O?jm(S+" #productNum").val(E):jm(S+" #productNum").val(O)),jm(S+" #productNum").change()})}i&&jm(S+" #mallAmount").text(_),null==j?Mobi.onlyChangeSalePrice(o,r,s,l):Mobi.onlyChangeSalePrice(j,r,s,l),null!=x&&jm(S+" #mallWeight").text(x+c)}if(y.length!=v.length&&1!=y.length&&(jm(".J-op-box label").css("border-style","").css("color",""),jm(".J-op-box label").attr("isEmptyAmount",""),jm(".J-op-box input[type='radio']").removeAttr("disabled")),y.length-1<=v.length&&1!=y.length){var N="";y.each(function(e,t){jm(y[e]).find(".isSelected").length<=0?N+="x_":N+=jm(y[e]).find(".isSelected").attr("data")+"_"}),""!=N&&(N=N.substring(0,N.length-1));var J="";if(y.each(function(e,t){jm(y[e]).find(".isSelected").length<=0&&(J=jm(y[e]))}),""!=J){var H=J.find("label");H.each(function(e,t){var i=N.replace("x",jm(H[e]).attr("data"));jm.inArray(i,w)>=0?(F(H[e]),jm(H[e]).attr("isEmptyAmount","1")):T(H[e])})}else y.each(function(e,t){var i=jm(y[e]).find("label");i.each(function(t,o){if(!jm(i[t]).hasClass("isSelected")){var n=N.split("_");n[e]=jm(i[t]).attr("data");var a=n.join("_");jm.inArray(a,w)>=0?(F(i[t]),jm(i[t]).attr("isEmptyAmount","1")):T(i[t])}})})}var U=[];for(A=0;A<y.length;A++){var R=y.eq(""+A);if(!(R.find(".optionSelected").length>0))break;U.push(R.find(".optionSelected").attr("data"))}p?jm("#mallPrice").html(u):h&&jm("#mallPrice").html(f),null!=Mobi.productNewDetailIScrollObj&&Mobi.productNewDetailIScrollObj.refresh()}})}function F(e){jm(e).css("border-style","dashed").css("color","#CDCDCD"),jm("#"+jm(e).attr("for")).attr("disabled",!0)}function T(e){jm(e).css("border-style","").css("color",""),jm(e).attr("isEmptyAmount",""),jm("#"+jm(e).attr("for")).removeAttr("disabled")}Mobi.priceCalendar=epctrl.init("Calendar",{el:"#priceCalendar",priceCalendar:!0,openAmount:L,mallOptions:e,mkPrice:P,useMk:x}),k(Mobi.priceCalendar)},Mobi.initProductOptions=function(e){var t=(e=e||{}).optionsAmountList,i=e.mkt_optionsAmountList,o=e.mkt_defaultPrice,n=e.isRelateAmount,a=(e.realMallPrice,e.limitAmount_options),r=e.productRestrictInfo,s=e.choiceCurrencyVal,l=e.entry,c=e.productId,d=(e.moduleId,e.weightTypeStr),m=(e.isGroupBuy,e.groupPrice,e.isCutPrice),p=e.cpMinPrice,u=e.isSecKill,h=e.secKillPrice,f=e.isIntegralMall,g=e.imMinPrice,v=(e.isEarnestSale,e.earnestSalePrice,e.isCombinedPurchase),b=e.openPriceCalendar,j=Fai.top._openThemeV3,_=!1;jm.each(t,function(e,t){if(null==t.t)return _=!0,!1}),null==d&&(d="kg");var M=jm(".J-op-box"),y=jm(".mallOptionImg"),S=M.find(".J-op"),I="";1==l&&(M=jm("#productMallOptionPanel"+c+" .J-op-box"),y=jm("#productMallOptionPanel"+c+" .mallOptionImg"),S=M.find(".J-op"),I="#productMallOptionPanel"+c);var w=[],C=jm("#mallPrice").html(),P=jm("#mallAmount").html(),x=jm("#mallWeight").html(),L="",k="";if(y.length>0){var F=y.css("background-image").lastIndexOf('"');L=y.attr("src")||y.css("background-image").substring(5,F)||"",k=y.attr("picid")||""}b||(P<=0?(B(S.find("label")),S.find("label").attr("isEmptyAmount","1")):jm.each(t,function(e,t){if(t.oAmount<=0&&S.length<=1){var i=S.find("label[data='"+t.t2+"']");B(i),jm(i).attr("isEmptyAmount","1")}else t.oAmount<=0&&w.push(t.t2)}));var T=[];function B(e){jm(e).css("border-style","dashed").css("color","#CDCDCD"),jm("#"+jm(e).attr("for")).attr("disabled",!0)}function A(e){jm(e).css("border-style","").css("color",""),jm(e).attr("isEmptyAmount",""),jm("#"+jm(e).attr("for")).removeAttr("disabled")}jm(S).each(function(e){var F=jm(this),D=j?"optionSelected isSelected g_main_bgColor_v3":"optionSelected isSelected";F.find("label").click(function(){if("1"!=jm(this).attr("isEmptyAmount")){var e=[];e=Mobi.isMarketingBtn&&i.length>0?i:t;var j=jm(this),O=j.parent().parent().attr("data");if(j.hasClass("isSelected"))j.parent().find(".optionSelected").removeClass(D),jm("#"+j.attr("for")).prop("checked",!1),j.parents(".J-op").removeAttr("option_data"),Mobi.isMarketingBtn&&i.length>0?(jm("#mallPrice").html(o),f&&(jm("#integral").html(g.minIntegral),jm("#mallPrice").html(parseFloat(g.minPrice).toFixed(2)))):jm("#mallPrice").html(C),jm("#mallAmount").html(P),jm("#mallWeight").html(x),a&&(jm("#g_increase").removeClass("g_opacity50"),jm("#limitAmountDiv").text(""),jm("#limitAmountDiv").parent().css("line-height",""),jm("#g_increase").unbind("click.ic2"),jm("#g_decrease").unbind("click.dc2"));else{j.parent().find(".optionSelected").length>0&&j.parent().find(".optionSelected").removeClass(D),j.addClass(D);var E=j.attr("data");F.attr("option_data",E)}if(S.length>1&&n){var N="",J=0;S.each(function(e,t){jm(S[e]).find(".optionSelected").length<=0?N+="x_":N+=jm(S[e]).find(".optionSelected").attr("data")+"_"}),N=N.substring(0,N.length-1),jm.each(e,function(e,t){(function(e,t){if(""==e)return!1;var i=!0,o=e.split("_"),n=t.split("_");return o.length==n.length&&(jm.each(o,function(e,t){"x"!=o[e]&&o[e]!=n[e]&&(i=!1)}),i)})(N,t.t2)&&(0==t.flag||isNaN(t.oAmount)||(J+=t.oAmount))}),jm(I+" #mallAmount").text(J)}var H=M.find(".optionSelected");if(y.length>0){var U=j.attr("_indeptPic"),R=j.attr("picid");if(null==U){if(T.length>0)for(var V=0;V<T.length;V++)U=T[T.length-1].path,T[V].itemId==O&&(T.pop(),T.length>0&&(U=T[T.length-1].path));else U=L;R=k}else T.push({itemId:O,path:U});Fai.top._openThemeV3?y.css("background-image","url("+U+")"):y.attr("src",U),jm(".J_mallOptionImg").attr("picid",R).attr("src",U).attr("isOptImg",!0)}if(S.length==H.length){var W,z,q,G,Y,$,X="";if(jm(H).each(function(e){X+=_?jm(this).attr("data")+"_":jm(this).attr("data")}),jm.each(e,function(e,t){var i=t.t2;t.t==X?(W=t.oPrice,z=t.oIntegral,q=t.oAmount,G=t.minAmount,Y=t.maxAmount,$=t.w):i+"_"==X&&(0==t.flag?jm("#mallPrice").html(C):W=t.oPrice,z=t.oIntegral,q=t.oAmount,G=t.minAmount,Y=t.maxAmount,$=t.w)}),a){jm(I+" #limitAmountDiv").text("");var K=0,Z=r.optionsCount;if(null!=Z&&null!=Z.d)for(var Q=0;Q<Z.d.length;Q++)Z.d[Q].t+"_"==X&&(K=Z.d[Q].c);var ee=0;ee=Y-K,jm.fkEval(ee)<0&&(ee=-1);var te=1,ie=-1;G>1&&0!=Y?(jm(I+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(I+" #limitAmountDiv").text("( "+LS.minAmount+" : "+G+" ; "+LS.maxAmount+" : "+ee+" )"),te=G,ie=ee):1==G&&0!=Y?(jm(I+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(I+" #limitAmountDiv").text("( "+LS.maxAmount+" : "+ee+" )"),ie=ee):G>1&&0==Y&&(jm(I+" #limitAmountDiv").parent().attr("style","line-height:1.5rem;"),jm(I+" #limitAmountDiv").text("( "+LS.minAmount+" : "+G+" )"),te=G),jm(I+" #productNum").val(te),jm(I+" #productNum").unbind("change"),jm(I+" #productNum").bind("change",function(){var e=jm(I+" #productNum").val(),t=1;jm.isInteger(e)&&(t=parseInt(e)),t<te||t==te?(t=te,jm(I+" #g_decrease , .g_decrease").addClass("g_opacity50"),jm(I+" #g_increase , .g_increase").removeClass("g_opacity50")):-1!=ie&&(t>ie||t==ie)?(t=ie,jm(I+" #g_decrease , .g_decrease").removeClass("g_opacity50"),jm(I+" #g_increase , .g_increase").addClass("g_opacity50")):t>9999998?(t=9999999,jm(I+" #g_decrease , .g_decrease").removeClass("g_opacity50"),jm(I+" #g_increase , .g_increase").addClass("g_opacity50")):(jm(I+" #g_decrease , .g_decrease").removeClass("g_opacity50"),jm(I+" #g_increase , .g_increase").removeClass("g_opacity50")),jm(I+" #productNum").val(t)}),jm(I+" #productNum").change(),jm(I+" #g_decrease , .g_decrease").unbind("click.dc2"),jm(I+" #g_increase , .g_increase").unbind("click.ic2"),jm(I+" #g_decrease , .g_decrease").bind("click.dc2",function(){var e=jm(I+" #productNum").val(),t=1;jm.isInteger(e)&&(t=parseInt(e)),t<te+1&&jm(I+" #productNum").val(te),jm(I+" #productNum").change()}),jm(I+" #g_increase , .g_increase").bind("click.ic2",function(){var e=jm(I+" #productNum").val(),t=1;jm.isInteger(e)&&(t=parseInt(e)),t>ie-1&&-1!=ie&&(ie>te?jm(I+" #productNum").val(ie):jm(I+" #productNum").val(te)),jm(I+" #productNum").change()})}n&&jm(I+" #mallAmount").text(q),Mobi.onlyChangeSalePrice(W,s,l,c),f&&jm("#integral").html(z),null!=$&&jm(I+" #mallWeight").text($+d)}S.length!=H.length&&1!=S.length&&(jm(".J-op-box label").css("border-style","").css("color",""),jm(".J-op-box label").attr("isEmptyAmount",""),jm(".J-op-box input[type='radio']").removeAttr("disabled"));if(S.length-1<=H.length&&1!=S.length||v){var oe="";S.each(function(e,t){jm(S[e]).find(".isSelected").length<=0?oe+="x_":oe+=jm(S[e]).find(".isSelected").attr("data")+"_"}),""!=oe&&(oe=oe.substring(0,oe.length-1));var ne="";if(S.each(function(e,t){jm(S[e]).find(".isSelected").length<=0&&(ne=jm(S[e]))}),""!=ne){var ae=ne.find("label");ae.each(function(e,t){var i=oe.replace("x",jm(ae[e]).attr("data"));jm.inArray(i,w)>=0?(B(ae[e]),jm(ae[e]).attr("isEmptyAmount","1")):A(ae[e])})}else S.each(function(e,t){var i=jm(S[e]).find("label");i.each(function(t,o){if(!jm(i[t]).hasClass("isSelected")){var n=oe.split("_");n[e]=jm(i[t]).attr("data");var a=n.join("_");jm.inArray(a,w)>=0?(B(i[t]),jm(i[t]).attr("isEmptyAmount","1")):A(i[t])}})});oe}if(0==H.length){U=L,R=k;Fai.top._openThemeV3?y.css("background-image","url("+U+")"):y.attr("src",U),jm(".J_mallOptionImg").attr("picid",R).attr("src",U).attr("isOptImg",!0)}var re=[];for(Q=0;Q<S.length;Q++){var se=S.eq(""+Q);if(!(se.find(".optionSelected").length>0))break;re.push(se.find(".optionSelected").attr("data"))}var le=!1;if(re.length<=S.length&&re.length>1&&!b){var ce=re.length;for(Q=0;Q<ce&&(jm.each(e,function(e,t){var i=t.t2.split("_");if(null==t.flag&&(t.flag=1),1==t.flag&&arrHasSameBegin(i,re))return le=!0,!1}),!le);Q++){var de=S.eq(re.length-1).find("label");S.eq(re.length-1).removeAttr("option_data"),de.removeClass(D);var me=re.pop();de.each(function(){jm(this).attr("data")==me&&jm(this).hide()})}}var pe=S.index(F);if(!b)for(V=pe;V<re.length;V++){var ue=re.slice(0,V+1);le=!1;for(Q=ue.length;Q<S.length;Q++){S.eq(""+Q).find("label").each(function(){var t=jm(this).attr("data");le=!1,jm.each(e,function(e,i){var o=i.t2.split("_");if(null==i.flag&&(i.flag=1),t==o[Q]&&1==i.flag&&arrHasSameBegin(o,ue))return le=!0,!1}),le?jm(this).show():jm(this).hide()})}}if(m)jm("#mallPrice").html(p);else if(u)jm("#mallPrice").html(h);else if(v&&(Mobi.cpPdOtionSelectType["pid"+c]=oe,oe&&!oe.includes("x"))){var he=(Mobi.cachePdOptionInfo["optionsAmountInfo"+c]||{}).d||[];jm.each(he,function(e,t){t.t2==oe&&(jm("#targetAmount"+c).html(t.oAmount||0),jm("#productOriginalPrice"+c).html("原价"+Fai.top.choiceCurrencyVal+parseFloat(t.oPrice).toFixed(2)))})}null!=Mobi.productNewDetailIScrollObj&&Mobi.productNewDetailIScrollObj.refresh()}})})},Mobi.onlyChangeSalePrice=function(e,t,i,o){if(e=parseFloat(e),!isNaN(e)){var n=jm("#mallPrice");1==i&&(n=jm("#productMallOptionPanel"+o+" #mallPrice"));var a=Mobi.salePromotionDetail.salePromotionParam;if(void 0!==a&&null!=a&&""!=a)if("1"!=Mobi.salePromotionDetail.showType)if("1"==a.saleType){var r=parseFloat(a.other.ruleData.d[0].m),s=0;(s="1"==a.other.ruleData.s?e*(r/10):e-r)<0&&(s=0),0==jm(".J_saleProductNew").css("width").length&&1!=i&&void 0!==i?(n.html(e.toFixed(2)),jm(".J_salePriceSet").html(t+s.toFixed(2))):(n.html(s.toFixed(2)),jm(".J_salePriceSet").html(t+s.toFixed(2)))}else n.html(e.toFixed(2));else n.html(e.toFixed(2));else n.html(e.toFixed(2))}},Mobi.autoSetProductHeight=function(e){Mobi.unifiedAttrVal(jm(Mobi.getPreviewObject("module"+e)),".styleForm1 .mProductTileForm","height")},Mobi.initProductSwipe=function(e){var t=Mobi.getJQMobi(),i=Mobi.getPreviewObject(e);if(i){jm("#graphicPosterItem").bind("click",function(e){jm("#webPagePanelmallThemeProductDetailShare").hide(),jm("#webPagePanelshowPromoterPdSharePanel").hide()});var o={triggerId:"graphicPosterItem",pageBg:!0,pageHtml:Mobi.createGraphicPosterPage(),direction:"bottom",closeWebPage:"#graphicPosterPanelBg",callback:function(){Fai.top._isMall?jm(".J_earnestPriceContain").length>0?(Mobi.drawEarnestSaleCanvasSharePic(),Mobi.logDog(201083,2)):Mobi.drawCanvasSharePic():Mobi.drawCommCanvasSharePicture(Mobi.commShareTemplateData("product"))}};if(Mobi.initWebPage(o),Mobi.initScaleImage(i),t("#"+e).swipehandle(i,{continuous:!0,bulletsClick:!0,callback:function(e){for(var t=n.length;t--;)n[t].className=" ";n[e]?n[e].className="on":n[e-n.length].className="on",1==jm(".mobiProductVideoDialog").length&&Mobi.videoQuit()}}),jm(".shareListSwipe").bind("click",function(e){Mobi.logDog(201083,1)}),i.querySelector(".bullets"))var n=i.querySelector(".bullets").getElementsByTagName("li")}},Mobi.pdCommentAddCom=function(){var e=jm.trim(jm("#productCommentCreator").val()),t=(jm("#productCommentCreator").attr("minlength"),jm("#productCommentInput").val()),i=jm("#productCommentInput").attr("minlength"),o=jm("#validateCodeInput").val(),n=jm("#productCommentInput").attr("productId");if("string"==typeof e)if("string"==typeof t&&""!=t)if(t.length<i)Mobi.ing(jm.format(LS.commentLenTips,jm.encodeHtml(i)));else if("string"==typeof o&&""!=o){var a=jm(".J_productCommImg").find("img"),r=[];if(null!=a&&void 0!==a){var s=a.length;if(s>0)for(var l=0;l<s;l++){var c=a.eq(l);if(null!=c&&"undefined"!=c){var d={},m=c.attr("_id"),p=c.attr("_name"),u=c.attr("_file_size"),h=c.attr("_file_id"),f=Number(c.attr("_fileWidth")||0),g=Number(c.attr("_fileHeight")||0),v=Number(c.attr("_fileType")||0);d.imgId=m,d.imgName=p,d.imgSize=u,d.tempFileId=h,d.imgWidth=f,d.imgHeight=g,d.imgType=v,r.push(d)}}}var b={validateCode:o,commentsObjId:n,creator:e,commImgList:JSON.stringify(r),comment:t};Mobi.ing(LS.siteFormSubmitIng),jm.ajax({type:"POST",url:"ajax/productComment_h.jsp?cmd=submitPC",data:b,error:function(){Mobi.ing(LS.js_systemError),jm("#captchaChange").click(),Mobi.logMonitor(5933,!0)},success:function(e){var t=jm.parseJSON(e);if(t&&t.success||jm("#captchaChange").click(),t.hasFW)Mobi.ing(t.msg);else switch(t.logMonitor&&Mobi.logMonitor(5933,!0),t.msg){case 1:Mobi.ing(LS.js_captchaError);break;case 2:Mobi.ing(LS.creatorError);break;case 3:Mobi.ing(LS.commentError);break;case 4:Mobi.getCommentDiv("product",n),jm(".comm-find-tb-remove").remove(),t.autoOpenComm||null==t.autoOpenComm?Mobi.ing(LS.commentSuccess,1):Mobi.ing(LS.commentSuccessNeedReview,1);break;case 5:Mobi.ing(LS.paramError);break;case 6:var i=jm.encodeUrl(window.location.href);window.location.href="login.jsp?returnUrl="+i+"&errno=11";break;case 7:Mobi.ing(LS.commentClosed);break;case 8:Mobi.ing(LS.commentSubmitError);break;case 9:Mobi.ing(LS.commentCountLimit)}}})}else Mobi.ing(LS.memberInputCaptcha);else Mobi.ing(LS.commentNotEmpty);else Mobi.ing(LS.creatorTips)},Mobi.waterFall=function(e,t,i,o,n,a,r,s,l){var c=jm("#"+t),d=Mobi.isModuleV2(3),m=c.parents(".J_formTabContent").length>0;m&&c.parents(".J_formTabContent").addClass("showTabContent"),jm("#"+t+" .productWaterFall").css("display","block");var p=parseInt(jm("#"+t+" .productWaterFall .style8Img").width()),u=_htmlFontSize,h=p*a/(n*u);h=parseFloat(h.toFixed(4));var f=p*o/(i*u);f=parseFloat(f.toFixed(4));var g=jm("#"+t+" .paramPadding .paramName").css("font-size");if("object"!=_typeof(g)){var v=g.substring(0,g.indexOf("p"))/u;v=parseFloat(v)+.2,l||jm("#"+t+" .productWaterFall .paramPadding .paramName").css("line-height",v+"rem"),v=2*parseFloat(v.toFixed(4))}else v=0;if("paramWrap"==r?Mobi.getBrowserType()==Mobi.BrowserType.FIREFOX?jm("#"+t+" .productWaterFall .paramPadding .paramName").height(v+"rem"):jm("#"+t+" .productWaterFall .paramPadding .paramName").height(v-.08+"rem"):jm("#"+t+" .productWaterFall .paramPadding .paramName").height(v/2+"rem"),1==e.length)jm("#"+t+" .productWaterFall .style8Img").height(h+"rem"),jm("#"+t+" .productWaterFall").eq(b).css({"vertical-align":"top"}),jm("#"+t+" .productWaterFall").eq(b).css({top:"unset"}),jm("#"+t+" .productWaterFall").eq(b).css({position:"static"});else if(2==e.length){for(var b=0;b<e.length;b++)if(b%2==0)jm("#"+t+" .productWaterFall .style8Img").eq(b).height(h+"rem"),jm("#"+t+" .productWaterFall").eq(b).css({"vertical-align":"top"}),jm("#"+t+" .productWaterFall").eq(b).css({top:"unset"}),jm("#"+t+" .productWaterFall").eq(b).css({position:"static"});else if(b%2==1){jm("#"+t+" .productWaterFall .style8Img").eq(b).height(f+"rem"),jm("#"+t+" .productWaterFall").eq(b).css({position:"absolute",top:"0rem"}),d?(M=jm("#"+t+" .productWaterFall .commonProRight").closest(".productWaterFall"),y=jm("#"+t+" .productWaterFall .firstLastPro").closest(".productWaterFall")):(M=jm("#"+t+" .productWaterFall .commonProRight").parent().parent().parent(),y=jm("#"+t+" .productWaterFall .firstLastPro").parent().parent().parent());var j=parseFloat(M.height()),_=parseFloat(y.height());if((_/=u)<(j/=u))j+=10/u,(d?jm("#"+t+" .productWaterFall .firstLastPro").closest(".mProductList"):jm("#"+t+" .productWaterFall .firstLastPro").parent().parent().parent().parent()).height(j+"rem")}}else for(b=0;b<e.length;b++){var M,y,S=b;if(M=d?jm("#"+t+" .productWaterFall .commonProRight").closest(".productWaterFall"):jm("#"+t+" .productWaterFall .commonProRight").parent().parent().parent(),0==b)jm("#"+t+" .productWaterFall .style8Img").eq(b).height(h+"rem"),jm("#"+t+" .productWaterFall").eq(b).css({"vertical-align":"top"}),jm("#"+t+" .productWaterFall").eq(b).css({top:"unset"}),jm("#"+t+" .productWaterFall").eq(b).css({position:"static"});else if(S+1==e.length){if(jm("#"+t+" .productWaterFall .style8Img").eq(b).height(h+"rem"),e.length%2==1)jm("#"+t+" .productWaterFall").eq(b).css({"vertical-align":"top"}),jm("#"+t+" .productWaterFall").eq(b).css({top:"unset"}),jm("#"+t+" .productWaterFall").eq(b).css({position:"static"});else if(e.length%2==0){var I=parseFloat(M.height()),w=((I/=u)+.5)*((b+1)/2-1);jm("#"+t+" .productWaterFall").eq(b).css({position:"absolute",top:w+"rem"})}}else{jm("#"+t+" .productWaterFall .style8Img").eq(b).height(f+"rem");I=parseFloat(M.height()),parseFloat(M.width());if(I/=u,b%2==0)jm("#"+t+" .productWaterFall").eq(b).css({"vertical-align":"top"}),jm("#"+t+" .productWaterFall").eq(b).css({top:"unset"}),jm("#"+t+" .productWaterFall").eq(b).css({position:"static"});else if(b%2==1){var C=(I+.5)*((b+1)/2-1);jm("#"+t+" .productWaterFall").eq(b).css({position:"absolute",top:C+"rem"})}}}if(Fai.top._manageMode){var P,x,L=$("#"+t),k=L.find(".productWaterFall"),F="true"==L.attr("_productselect");k.each(function(e,t){P=$(t),x="off"==P.attr("topswitch"),waterFallImg=P.find(".waterFallImg"),waterFallImg.wrap("<div class='J_productListImgWrap fk-productListImgWrap'></div>"),x&&!F&&P.find(".J_productListImgWrap").append("<div class='f-productListTopFlag' >置顶</div>")})}jm("#"+t+" .productWaterFall").each(function(e,t){var i=jm(t),o=i.attr("productId");if(s[o]){var n=s[o];n.salePromotionOpen&&i.find(".waterFallImg").append("<div class='g_bgColor g_main_bgColor_v3 f-productListTopPromotion'>"+n.saleFlagName+"</div>\n")}}),m&&c.parents(".J_formTabContent").removeClass("showTabContent")},Mobi.initProductSwipe1=function(e,t){var i=Mobi.getJQMobi(),o=Mobi.getPreviewObject(e),n=i("#"+e).find(".productSwipeItem");if(o&&(i("#"+e).swipehandle(o,{auto:!1,continuous:!1,bulletsClick:!0,callback:function(e){for(var i=a.length;i--;)a[i].className=" ";if(a[e]){if(a[e].className="on",t){for(o=0;o<a.length;o++)a[o].style.backgroundColor="#d9d9d9";a[e].style.backgroundColor=Fai.top._themeColor}}else if(a[e-a.length].className="on",t){for(var o=0;o<a.length;o++)a[o].style.backgroundColor="#d9d9d9";a[e-a.length].style.backgroundColor=Fai.top._themeColor}setTimeout(function(){n.eq(e).find("div.style7Img").trigger("slidePic")},300)}}),o.querySelector(".bullets")))var a=o.querySelector(".bullets").getElementsByTagName("li")},Mobi.productCrossedSlide=function(e,t,i,o,n){var a=jm("#"+e+" .productCrossedSlide .style7Img").width(),r=_htmlFontSize,s=a*i/(t*r);s=parseFloat(s.toFixed(4));var l=jm("#"+e+" .paramPadding .paramName").css("font-size");if("object"!=_typeof(l)){var c=l.substring(0,l.indexOf("p"))/r+.2;n||jm("#"+e+" .productCrossedSlide .paramPadding .paramName").css("line-height",c+"rem"),c=2*parseFloat(c.toFixed(4))}else c=0;"paramWrap"==o?Mobi.getBrowserType()==Mobi.BrowserType.FIREFOX?jm("#"+e+" .productCrossedSlide .paramPadding .paramName").height(c+"rem"):jm("#"+e+" .productCrossedSlide .paramPadding .paramName").height(c-.08+"rem"):jm("#"+e+" .productWaterFall .paramPadding .paramName").height(c/2-.1+"rem"),jm("#"+e+" .productCrossedSlide .style7Img").height(s+"rem")},Mobi.productCrossedSlideSec=function(e,t,i,o,n){var a,r=jm("#"+e+" .productCrossedSlideSec .style9Img").width(),s=_htmlFontSize,l=Fai.top._openThemeV3,c=!1,d=r*i/(t*s);d=parseFloat(d.toFixed(4));var m=jm("#"+e+" .paramPadding .paramName").css("font-size");if(l&&jm("#"+e+" .paramPadding .paramName").each(function(){var e=parseInt(jm(this).height());null==a?a=e:a!=e&&(c=!0)}),"object"!=_typeof(m)){var p=m.substring(0,m.indexOf("p"))/s+.2;n||jm("#"+e+" .productCrossedSlideSec .paramPadding .paramName").css("line-height",p+"rem"),p=!c&&l?1*parseFloat(p.toFixed(4)):2*parseFloat(p.toFixed(4))}else p=0;n||("paramWrap"==o?Mobi.getBrowserType()==Mobi.BrowserType.FIREFOX?jm("#"+e+" .productCrossedSlideSec .paramPadding .paramName").height(p+"rem"):jm("#"+e+" .productCrossedSlideSec .paramPadding .paramName").height(p-.08+"rem"):jm("#"+e+" .productWaterFall .paramPadding .paramName").height(p/2-.1+"rem")),jm("#"+e+" .productCrossedSlideSec .style9Img").height(d+"rem")},Mobi.productCrossedSlideSecSwipe=function(e,t,i,o){var n=Mobi.getPreviewObject(e),a=Mobi.getPreviewObject(t);if(a){var r,s,l,c,d,m=n,p=parseInt(jm(a).width()),u=0,h=a.querySelectorAll(".productCrossedSlideSec"),f=_htmlFontSize,g=o?h.length*parseInt(jm(h[0]).css("margin-left")):.5*h.length*f,v=jm(a),b=jm("#"+e),j=!1,_=!0,M=(jm("#webModuleContainer"),void 0),y=null,S=0,I=jm("<div></div>");if("productList"!==i&&v.css("margin-top","30px"),h.length>0&&(u=h[0].offsetWidth*h.length),(u+=g)>p){navigator.appVersion.match(/MSIE [\d.]+/)&&10===parseInt(navigator.appVersion.match(/MSIE ([\d.]+)/)[1])&&(u+=2*h.length),u+=10,jm(m).css("width",u+"px");var w=jm.getCookie("startX")?parseInt(jm.getCookie("startX")):0;if(Mobi.isPC())v.css({position:"relative",height:parseInt(b.height())+"px"}),b.css({position:"absolute",left:0,top:0}),v.off("mousedown.prod").on("mousedown.prod",function(e){b.find("div.style9Img").trigger("horizonScroll"),b.append(I),s=c=e.pageX,l=d=e.pageY,v.off("mousemove.prod").on("mousemove.prod",k),v.off("mouseup.prod").on("mouseup.prod",F),v.off("mouseout.prod").on("mouseout.prod",L),e.preventDefault(),e.stopPropagation()}),v.off("mousedown.prodItem").on("mousedown.prodItem",".J_prodItem",function(){y=jm(".editLayer"),r=b.offset().left}),v.off("click.checkMove").on("click.checkMove",function(){_=!j,j=!1}),v.off("click.prodLink").on("click.prodLink",".J_prodItem-a",function(e){return _});else{var C,P=function(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];c=t.pageX,d=t.pageY,void 0===C&&void 0!==s&&void 0!==l&&(!1===(C=T(s,l,c,d))&&e.preventDefault(),v.off("touchmove.prod")),s=c,l=d},x=function e(t){C=s=l=c=d=void 0,v.off("touchmove.proCross",P),v.off("touchend.proCross",e)};new iScroll(a,{x:w,scrollX:!0,scrollY:!1,mouseWheel:!0,remarkXCoordinate:!0,onBeforeScrollStart:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:function(){b.find("div.style9Img").trigger("horizonScroll")}}),v.off("touchstart.prod").on("touchstart.prod",function(e){b.find("div.style9Img").trigger("horizonScroll");var t=B(e);s=c=t.pageX,l=d=t.pageY,v.off("touchmove.prod").on("touchmove.prod",A),v.off("touchend.prod").on("touchend.prod",D),b.append(I)}),v.off("touchstart.proCross").on("touchstart.proCross",function(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];s=t.pageX,l=t.pageY,v.off("touchmove.proCross").on("touchmove.proCross",P),v.off("touchend.proCross").on("touchend.proCross",x)}),I.css({width:"100%",height:"100%",position:"absolute",opacity:0,left:0,top:0,zIndex:-1}),b.children().off("touchmove.banIScroll").on("touchmove.banIScroll",function(e){!0===M&&e.stopPropagation()})}}b.find(".productCrossedSlideSec").show()}function L(e){v.off("mouseup.prod"),v.off("mousemove.prod"),v.off("mouseout.prod")}function k(e){var t=v.width()-b.width(),i=parseInt(b.css("left"));j=!0,c=e.pageX,d=e.pageY,(i+=c-s)>0&&(i=0),i<t&&(i=t),b.css("left",i+"px"),s=c,l=d,y&&y.length&&y.hide(),e.stopPropagation()}function F(e){var t,i=0;v.off("mouseup.prod"),v.off("mousemove.prod"),v.off("mouseout.prod"),S=b.offset().left,y&&y.length&&(i=S-r,t=parseFloat(y.css("left")),y.css("left",t+i+"px"),y.show()),y=null}function T(e,t,i,o){var n=Math.abs(e-i),a=Math.abs(t-o);if(0!==n||0!==a)return 0===n&&a>0||!(0===a&&n>0)&&a/n>1}function B(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];return{pageX:t.pageX,pageY:t.pageY}}function A(e){var t=B(e);c=t.pageX,d=t.pageY,void 0===M&&void 0!==s&&void 0!==l&&(M=T(s,l,c,d),b.off("touchmove.prod")),s=c,l=d}function D(e){I.remove(),M=s=l=c=d=void 0,v.off("touchmove.prod",A),v.off("touchend.prod",D)}},Mobi.secKillPdSwipe=function(e,t,i){var o=0,n=Mobi.getPreviewObject(e),a=Mobi.getPreviewObject(t),r=n,s=parseInt(jm(a).width()),l=a.querySelectorAll(".J_prodItem"),c=_htmlFontSize,d=.4*l.length*c+.7*c,m=jm(a),p=jm("#"+e),u=jm("<div></div>"),h=0,f=0,g=0,v=0,b=void 0,j=null,_=0,M=0;if(l.length>0&&(o=l[0].offsetWidth*l.length,o+=d),o>s)jm(r).css("width",o+"px"),Mobi.isPC()?(m.css({position:"relative",height:parseInt(p.height())+"px"}),p.css({position:"absolute",left:0,top:"0rem"}),m.off("mousedown.prod").on("mousedown.prod",function(e){p.find("div.J_pdImg").trigger("horizonScroll"),p.append(u),h=g=e.pageX,f=v=e.pageY,m.off("mousemove.prod").on("mousemove.prod",I),m.off("mouseup.prod").on("mouseup.prod",w),m.off("mouseout.prod").on("mouseout.prod",S),e.preventDefault(),e.stopPropagation()}),m.off("mousedown.prodItem").on("mousedown.prodItem",".J_prodItem",function(){j=jm(".editLayer"),_=p.offset().left}),m.off("click.checkMove").on("click.checkMove",function(){isMove?canClickA=!1:canClickA=!0,isMove=!1}),m.off("click.prodLink").on("click.prodLink",".J_prodItem-a",function(e){return canClickA})):(new iScroll(a,{x:0,scrollX:!0,scrollY:!1,mouseWheel:!0,remarkXCoordinate:!0,onBeforeScrollStart:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:function(){p.find("div.J_pdImg").trigger("horizonScroll")}}),m.off("touchstart.prod").on("touchstart.prod",function(e){p.find("div.J_pdImg").trigger("horizonScroll");var t=C(e);h=g=t.pageX,f=v=t.pageY,m.off("touchmove.prod").on("touchmove.prod",P),m.off("touchend.prod").on("touchend.prod",x),p.append(u)}),u.css({width:"100%",height:"100%",position:"absolute",opacity:0,left:0,top:0,zIndex:-1}),p.children().off("touchmove.banIScroll").on("touchmove.banIScroll",function(e){!0===b&&e.stopPropagation()}));else if(i){var y=o/c;jm(r).css("width",y+"rem")}else i||jm(r).css("width","unset");function S(e){m.off("mouseup.prod"),m.off("mousemove.prod"),m.off("mouseout.prod")}function I(e){var t=m.width()-p.width(),i=parseInt(p.css("left"));isMove=!0,g=e.pageX,v=e.pageY,(i+=g-h)>0&&(i=0),i<t&&(i=t),p.css("left",i+"px"),h=g,f=v,j&&j.length&&j.hide(),e.stopPropagation()}function w(e){var t,i=0;m.off("mouseup.prod"),m.off("mousemove.prod"),m.off("mouseout.prod"),M=p.offset().left,j&&j.length&&(i=M-_,t=parseFloat(j.css("left")),j.css("left",t+i+"px"),j.show()),j=null}function C(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];return{pageX:t.pageX,pageY:t.pageY}}function P(e){var t=C(e);g=t.pageX,v=t.pageY,void 0===b&&void 0!==h&&void 0!==f&&(b=function(e,t,i,o){var n=Math.abs(e-i),a=Math.abs(t-o);if(0!==n||0!==a)return 0===n&&a>0||!(0===a&&n>0)&&a/n>1}(h,f,g,v),p.off("touchmove.prod")),h=g,f=v}function x(e){u.remove(),b=h=f=g=v=void 0,m.off("touchmove.prod",P),m.off("touchend.prod",x)}},Mobi.integralMallPdSwipe=function(e,t){var i=0,o=Mobi.getPreviewObject(e),n=Mobi.getPreviewObject(t),a=o,r=parseInt(jm(n).width()),s=n.querySelectorAll(".J_prodItem"),l=_htmlFontSize,c=.4*s.length*l+.7*l,d=jm(n),m=jm("#"+e),p=jm("<div></div>"),u=0,h=0,f=0,g=0,v=void 0,b=null,j=0,_=0;function M(e){d.off("mouseup.prod"),d.off("mousemove.prod"),d.off("mouseout.prod")}function y(e){var t=d.width()-m.width(),i=parseInt(m.css("left"));isMove=!0,f=e.pageX,g=e.pageY,(i+=f-u)>0&&(i=0),i<t&&(i=t),m.css("left",i+"px"),u=f,h=g,b&&b.length&&b.hide(),e.stopPropagation()}function S(e){var t,i=0;d.off("mouseup.prod"),d.off("mousemove.prod"),d.off("mouseout.prod"),_=m.offset().left,b&&b.length&&(i=_-j,t=parseFloat(b.css("left")),b.css("left",t+i+"px"),b.show()),b=null}function I(e){var t=e.touches.length>0?e.touches[0]:e.chengedTouches[0];return{pageX:t.pageX,pageY:t.pageY}}function w(e){var t=I(e);f=t.pageX,g=t.pageY,void 0===v&&void 0!==u&&void 0!==h&&(v=function(e,t,i,o){var n=Math.abs(e-i),a=Math.abs(t-o);if(0!==n||0!==a)return 0===n&&a>0||!(0===a&&n>0)&&a/n>1}(u,h,f,g),m.off("touchmove.prod")),u=f,h=g}function C(e){p.remove(),v=u=h=f=g=void 0,d.off("touchmove.prod",w),d.off("touchend.prod",C)}s.length>0&&(i=s[0].offsetWidth*s.length,i+=c),i>r&&(jm(a).css("width",i+"px"),Mobi.isPC()?(d.css({position:"relative",height:parseInt(m.height())+"px"}),m.css({position:"absolute",left:0,top:"0.6rem"}),d.off("mousedown.prod").on("mousedown.prod",function(e){m.find("div.J_pdImg").trigger("horizonScroll"),m.append(p),u=f=e.pageX,h=g=e.pageY,d.off("mousemove.prod").on("mousemove.prod",y),d.off("mouseup.prod").on("mouseup.prod",S),d.off("mouseout.prod").on("mouseout.prod",M),e.preventDefault(),e.stopPropagation()}),d.off("mousedown.prodItem").on("mousedown.prodItem",".J_prodItem",function(){b=jm(".editLayer"),j=m.offset().left}),d.off("click.checkMove").on("click.checkMove",function(){isMove?canClickA=!1:canClickA=!0,isMove=!1}),d.off("click.prodLink").on("click.prodLink",".J_prodItem-a",function(e){return canClickA})):(new iScroll(n,{x:0,scrollX:!0,scrollY:!1,mouseWheel:!0,remarkXCoordinate:!0,onBeforeScrollStart:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:function(){m.find("div.J_pdImg").trigger("horizonScroll")}}),d.off("touchstart.prod").on("touchstart.prod",function(e){m.find("div.J_pdImg").trigger("horizonScroll");var t=I(e);u=f=t.pageX,h=g=t.pageY,d.off("touchmove.prod").on("touchmove.prod",w),d.off("touchend.prod").on("touchend.prod",C),m.append(p)}),jm("body").off("touchmove.prod").on("touchmove.prod",function(e){!1===v&&e.preventDefault()}),p.css({width:"100%",height:"100%",position:"absolute",opacity:0,left:0,top:0,zIndex:-1}),m.children().off("touchmove.banIScroll").on("touchmove.banIScroll",function(e){!0===v&&e.stopPropagation()})))},Mobi.videoShoppingDetail=function(e,t){0==e.length&&jm(".rightCon"+t).css("bottom","-.5rem");document.getElementById("carouselCon"+t);var i=!0,o=!1;1==e.length&&jm("#carouselCon"+t).css("width","7.675rem"),e.length<=2&&(i=!1,o=!0);new Swiper("#carouselCon"+t,{autoplay:!0,speed:6e3,noSwiping:o,loop:i,slidesPerView:2})},Mobi.videoShoppingSetStyle=function(e,t){window.innerHeight;var i=window.innerWidth;document.getElementsByClassName("videoShoppingStyleSet");0==e?jm(".videoShoppingStyleSet").css({width:"100%",height:"100%",objectFit:"fill","z-index":"1"}):1==e?jm(".videoShoppingStyleSet").css({width:"100%",height:"100%",objectFit:"contain"}):2==e&&(0==t?jm(".videoShoppingStyleSet").css({width:i+"px",height:3*i/4+"px",objectFit:"fill"}):1==t?jm(".videoShoppingStyleSet").css({width:i+"px",height:4*i/5+"px",objectFit:"fill"}):2==t?jm(".videoShoppingStyleSet").css({width:i+"px",height:9*i/16+"px",objectFit:"fill"}):3==t&&jm(".videoShoppingStyleSet").css({width:i+"px",height:i+"px",objectFit:"fill"}))},Mobi.initVideoShoppingSwiper=function(e,t){jm(".u_area_box_wrap").css("display","none"),jm("#mallThemeTopBar").css("height","0"),jm("#webFooter").css("display","none");var i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;Fai.top._isShowFkAuthTips&&(i-=30),jm(".videoShoppingDetailContent").css("height",i+"px");var o=i-((document.getElementById("productCarousel")||{}).offsetHeight||0)-26;jm(".videoBox").css("height",o+"px");var n=0;for(var a in t)t[a].id==e&&(n=a);var r=0,s=0;t[n].other&&(r=t[n].other.widthHeightType,s=t[n].other.cusWidthHeight),0==n?(Mobi.initVideoShoppingDom(n,t),Mobi.videoShoppingSetStyle(r,s)):Fai.top.videoShoppingItem="";new Swiper(".videoShoppingDetailContent",{initialSlide:n,direction:"vertical",mousewheelControl:!1,resistance:"100%",freeMode:!1,freeModeSticky:!0,speed:400,grabCursor:!0,onSlideChangeStart:function(e){var i=e.activeIndex;Mobi.initVideoShoppingDom(i,t)}})},Fai.top.videoShoppingItem="",Mobi.initVideoShoppingDom=function(e,t){if(jm(".shareListContent").css("display","none"),jm(".VideoShoppingbgMask").css("display","none"),void 0!==Fai.top.videoShoppingItem&&null!=Fai.top.videoShoppingItem&&""!=Fai.top.videoShoppingItem){var i=document.getElementById(Fai.top.videoShoppingItem);i.pause(),i.removeAttribute("src"),i.load()}var o="",n=0,a=0;if(t[e].other){if(o=t[e].other.showVideoUrl,t[e].other.isDeleteVideo)return;t[e].other.showHeadPicUrl,n=t[e].other.widthHeightType,a=t[e].other.cusWidthHeight}document.getElementsByClassName("videoShoppingDetailItem ")[e];var r=document.createElement("video"),s="videoItem"+e;r.setAttribute("id",s),r.setAttribute("class","videoItem"+e+" video-js vjs-default-skin vjs-big-play-centered");var l=document.createElement("source");l.setAttribute("src",o),l.setAttribute("type","video/mp4"),r.appendChild(l),Fai.top.videoShoppingItem=s,Mobi.videoShoppingSetStyle(n,a),0==t[e].productList.length?jm(".rightBox").css("bottom","-.5rem"):jm(".rightBox").css("bottom","3.25rem");var c=document.getElementById("videoItem"+e);c.paused?(c.play(),jm(".icon_pause").css("display","none")):(c.pause(),jm(".icon_pause").css("display","flex")),c.paused&&jm(".icon_pause").css("display","flex"),c.ontimeupdate=function(){var t=c.currentTime/c.duration*100+"%";jm(".item"+e)[0].lastChild.children[0].style.width=t},c.onclick=function(){c.paused?(c.play(),jm(".icon_pause").css("display","none")):(c.pause(),jm(".icon_pause").css("display","flex"))};var d=document.getElementById("icon_pause"+e);d&&(d.onclick=function(){c.paused&&(c.play(),jm(".item"+e+" .icon_pause").css("display","none"))}),window.localStorage.getItem("videoShopping"+t[e].id)?jm(".item"+e).find(".agreeIcon").css("fill","#FF6C00"):jm(".item"+e).find(".agreeIcon").css("fill","#fff")},Mobi.agreeEvent=function(e,t,i){var o="ajax/videoShopping_h.jsp?cmd=agree&id="+e,n=window.localStorage.getItem("videoShopping"+e);(n||i)&&(o="ajax/videoShopping_h.jsp?cmd=disAgree&id="+e),jm.ajax({type:"post",url:o,data:"",success:function(i){if(jm.parseJSON(i).success){var o=parseInt(jm(".item"+t).find(".agreeNum").html());n?(jm(".item"+t).find(".agreeIcon").css("fill","#fff"),jm(".item"+t).find(".agreeNum").html(o-1),window.localStorage.removeItem("videoShopping"+e)):(jm(".item"+t).find(".agreeIcon").css("fill","#FF6C00"),jm(".item"+t).find(".agreeNum").html(o+1),window.localStorage.setItem("videoShopping"+e,!0))}}})},Fai.top.videoShoppingShareNum=0,Mobi.videoShoppingShare=function(e){jm(".shareListContent").css("display","block"),jm(".VideoShoppingbgMask").css("display","block");var t=JSON.parse(JSON.stringify(Fai.top._shareDataProdectDetail)),i=t.shareUrl.split("?")[0],o="";t.shareUrl.split("&")[1]&&(o=t.shareUrl.split("&")[1].split("=")[1]);var n=i+"?id="+e+"&svIds="+o;t.shareUrl=n,0==Fai.top.videoShoppingShareNum&&jm(".videoShoppingDetailContent").append("<div style='display:block;'>"+Mobi.sharePage(t)+"</div>"),Fai.top.videoShoppingShareNum=1,Mobi.initShare("shareLinkWeixin","","shareLinkQQ"),jm("#shareLinkQQ").bind("click",function(){jm(".shareListContent").css("display","none"),jm(".VideoShoppingbgMask").css("display","none")}),jm("#copy_url").bind("click",function(){var e=new ClipboardJS("#copy_url");e.on("success",function(t){Mobi.ing("复制成功",1),e.destroy(),t.clearSelection()}),e.on("error",function(t){navigator.userAgent.indexOf("UCBrowser")>-1?Mobi.ing("复制成功",1):Mobi.ingTigs("该浏览器不支持复制链接的功能，请手动复制"),e.destroy()})}),jm.ajax({type:"post",url:"ajax/videoShopping_h.jsp?cmd=incShareNum&id="+e,data:"",success:function(e){jm.parseJSON(e).success}})},Fai.top.videoShoppingClickNum=0,Mobi.videoShoppingFold=function(){Fai.top.videoShoppingClickNum+=1,Fai.top.videoShoppingClickNum%2==0?(jm(".triangle").css("display","block"),jm(".productCarousel").css("display","flex"),jm(".rightBox").css("bottom","3.25rem")):(jm(".triangle").css("display","none"),jm(".productCarousel").css("display","none"),jm(".rightBox").css("bottom","-.5rem"))},Mobi.videoshoppingTopdDetail=function(e){window.location.href="/pd.jsp?id="+e},Mobi.videoShoppingHidebgMask=function(){jm(".shareListContent").css("display","none"),jm(".VideoShoppingbgMask").css("display","none")},Mobi.hideProductItemContainer=function(e){jm(Mobi.getPreviewObject(e)).removeAttr("style"),jm(Mobi.getPreviewObject("productSlide")).find(".productLeft").hide(),jm(Mobi.getPreviewObject("productSlide")).find(".productRight").hide()},Mobi.hideParamPadding=function(e){0===jm("#"+e+" .paramCollection").children("p").length&&jm("#"+e+" .paramCollection").removeClass("paramPadding")},Mobi.removeMarginBottom=function(e,t){if("styleNine"==t)var i=jm("#"+e+" .productCrossedSlideSec");else if("styleEight"==t)i=jm("#"+e+" .productWaterFall");else if("styleSeven"==t)i=jm("#"+e+" .productCrossedSlide");var o=i.eq(0).find(".paramCollection").children("p").length,n=i.eq(0).find(".paramCollection").children(".paramName").length;1===o&&1===n&&jm("#"+e+" .paramCollection .paramName").css("marginBottom",0);var a=i.eq(0).find(".paramCollection").children(".paramPrice").length;2===o&&1===a&&i.find(".paramCollection").children(".paramLine").remove()},Mobi.productGuaranteeEventInit=function(){Mobi.initWebPage({triggerId:"guaranteeContent",panelId:"productGuaranteePanel",pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#guaranteeBtn,#closeProductGuarantee,#closePdGuaranteeIcon"})},Mobi.integralMallDeductionEventInit=function(){Mobi.initWebPage({triggerId:"integralMallDeduction",panelId:"imPanelBox",pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#closeImPanelBox,#confirmBtn"})},Mobi.initMallCartProductNum=function(e,t){if(!(Fai.top._getMallProductNum||t&&0==jm(".J_isfixedAreaCart").length)){if(e&&!Fai.top._logined)return jm(".j_mallCartProductNum").hide(),void jm("#mallCartProductNumParent").hide();Fai.top._getMallProductNum=!0,jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getMallCartProductNum",data:"",success:function(e){var t=jm.parseJSON(e);if(t.success){if(1==t.rt){var i=jm.trim(t.productAmount);i>0?(i=i>99?"99+":i,jm(".j_mallCartProductNum").text(i),jm("#mallCartProductNumParent").css("display","-webkit-inline-box"),jm(".j_mallCartProductNum").show()):(jm(".j_mallCartProductNum").hide(),jm("#mallCartProductNumParent").hide())}}else jm(".j_mallCartProductNum").hide(),jm("#mallCartProductNumParent").hide()}})}},Mobi.initMallCartProductNumV3=function(e,t){var i=jm(".J_mall_cart_nav");Fai.top._getMallProductNum||t&&0==i.length||(!e||Fai.top._logined?(Fai.top._getMallProductNumV3=!0,jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getMallCartProductNum",data:"",success:function(e){var t=jm.parseJSON(e);if(t.success){if(1==t.rt){var o=jm.trim(t.productAmount);if(o>0){o=o>99?"99+":o;var n="none"!=jm(".J_nav_icon_wrap").css("display");i.each(function(){n?jm(this).find(".J_nav_icon_wrap").append("<span class='u_nav_mall_cart_icon g_main_bgColor_v3 J_mall_cart_icon'>"+o+"</span>"):jm(this).find(".J_text_wrap").append("<span class='g_main_color_v3 J_mall_cart_icon u_nav_mall_cart_text'>("+o+")</span>"),jm(".j_mallCartProductNum").text(o),jm(".j_mallCartProductNum").show()})}else jm(".J_mall_cart_icon").hide()}}else jm(".J_mall_cart_icon").hide()}})):jm(".J_mall_cart_icon").hide())},Mobi.initMemberCenterIconV3=function(e,t){Mobi.isGiveCoupon=e;var i=jm(".J_member_center_nav");if((!t||0!=i.length)&&e){Mobi.logDog(201475,1);var o="none"!=jm(".J_nav_icon_wrap").css("display");i.each(function(){o?jm(this).find(".J_nav_icon_wrap").append("<span class='u_nav_member_center_icon g_main_bgColor_v3'></span>"):jm(this).find(".J_text_wrap").append("<span class='u_nav_member_center_text g_main_bgColor_v3'></span>"),jm(this).on("click",function(){Mobi.logDog(201475,2)})})}},Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!1,Mobi.productNewDetailIScrollObj=null,Mobi.productNewDetailEventInit=function(e){if(e){var t=e.moduleId,i=e.productId,o=e.mallOptionsOpen;pageStyle=e.pageStyle,returnUrl=e.returnUrl||"",isGroupBuy=e.isGroupBuy||!1,groupBuyId=e.groupBuyId||0,groupBuyDetailId=e.groupBuyDetailId||0,groupPriceStr=e.groupPriceStr||"",isCutPrice=e.isCutPrice||!1,cutPriceId=e.cutPriceId||0,cutPriceDetailId=e.cutPriceDetailId||0,cpPriceStr=e.cpPriceStr||"",isSecKill=e.isSecKill||!1,secKillId=e.secKillId||0,isPtLimitBuy=e.isPtLimitBuy||0,isIntegralMall=e.isIntegralMall||!1,integralMallId=e.integralMallId||0,integtalMallType=e.integtalMallType||0,imMinPrice=e.imMinPrice||{},isImLimitBuy=e.isImLimitBuy||0,isEarnestSale=e.isEarnestSale||!1,earnestSaleId=e.earnestSaleId||0,pt_productRestrictInfo=e.pt_productRestrictInfo||0,pd_optionsAmountInfo=e.pd_optionsAmountInfo||{},pd_showOptionList=e.pd_showOptionList||[],mkt_optionsAmountInfo=e.mkt_optionsAmountInfo||{},mkt_showOptionList=e.mkt_showOptionList||[],openPriceCalendar=e.openPriceCalendar,themeV3=e.themeV3||!1,isUseSwipe=e.isUseSwipe,"undefined"==typeof isUseSwipe&&(isUseSwipe=!0);var n=groupBuyDetailId;themeV3?Mobi.scrollFadeInV3("productDetailHeader"+t,"productNewDetailSwipe"+t,pageStyle):Mobi.scrollFadeIn("productDetailHeader"+t,"productNewDetailSwipe"+t,pageStyle),Mobi.initAjaxTab({pid:i,moduleId:t,themeV3:themeV3,isUseSwipe:isUseSwipe});var a=document.getElementById("productDetailHeader"+t),r=document.getElementById("productNewDetailPanel"+t),s=(r.querySelector(".productNewDetail .productInfoSize"),a.querySelector(".icon-gClose.proBack")),l=(a.querySelector(".icon-noProduct.proShopping"),a.querySelector(".tabBody .userCommentInfo"),a.querySelector(".icon-gOther.proOther")),c=(a.querySelector(".icon-share.proShare"),a.querySelector(".proOtherPanel")),d=r.querySelector(".J_productImmediatelyBug"),m=r.querySelector(".J_groupBuyBtn"),p=r.querySelector(".J_cpButton"),u=r.querySelector(".J_integralMallBtn"),h=r.querySelector(".J_earnestSaleBtn"),f=(r.querySelector(".productMallBuy"),r.querySelector(".productMallShop"),r.querySelector("#productTabUl"),document.getElementById("productNewDetailSwipe"+t)),g=jm("#productDetailV3_title"+t),v=!1;if(window.sessionStorage){v=Mobi.checkWindowSeStgValue(window.sessionStorage._isJumpFromMlist);try{window.sessionStorage._isJumpFromMlist=!1}catch(e){}}var b;if(b=jm.getCookie("_fromCollect"),jm.setCookie("_fromCollect","",-1),jm(s).bind("click",function(){if(window.sessionStorage){if(v)window.sessionStorage._jumpMlistUrl.indexOf("?")<=-1?window.location.href=window.sessionStorage._jumpMlistUrl+"?commHideFlag=true":window.sessionStorage._jumpMlistUrl.indexOf("commHideFlag")<=-1?window.location.href=window.sessionStorage._jumpMlistUrl+"&commHideFlag=true":window.location.href=window.sessionStorage._jumpMlistUrl,window.sessionStorage._backFromProDetail=!0;else if(b)jm.setCookie("_openCollect",!0),window.location.href="profile.jsp";else if(window.history.length<=1)window.location.href="index.jsp";else if(returnUrl.length>0)window.location.href=returnUrl;else if(Fai.top._manageMode)sessionStorage.getItem("historyList")?jm(Fai.top.document.getElementById("jz_designerOperate").querySelector(".j_designerBack")).click():window.location.href="index.jsp";else{if(navigator.userAgent.toLocaleLowerCase().includes("ucbrowser")&&history.length<=2)return void(window.location.href="/");history.back()}return!1}return window.history.length<=1?window.location.href="index.jsp":(window.location.href=document.referrer,setTimeout(function(){window.location.href=document.referrer;setTimeout(function(){window.location.href="index.jsp",null},500)},300)),!1}),jm(r).bind("click",function(){jm(c).hasClass("proOtherPanelOpen")&&jm(c).removeClass("proOtherPanelOpen")}),jm(l).bind("click",function(e){jm(c).hasClass("proOtherPanelOpen")?jm(c).removeClass("proOtherPanelOpen"):jm(c).addClass("proOtherPanelOpen"),e.stopPropagation()}),g){var j=function(){document.body.scrollTop>f.clientHeight||document.documentElement.scrollTop>f.clientHeight?g.show():g.hide()};document.addEventListener("touchmove",j),document.addEventListener("scroll",j)}var _=jm(".productMallShop").html(),M=jm(".productMallBuyPanel").html(),y=Mobi.initWebPage({triggerId:"productInfoSize",panelId:"productMallOptionPanel",callback:function(){Mobi.deviceTypeIsMobi()&&jm("#mallOptionAndNumContainer").length>0&&(Mobi.productNewDetailIScrollObj=new iScroll("mallOptionAndNumContainer",{onBeforeScrollStart:function(e){for(var t=e.target;1!=t.nodeType;)t=t.parentNode;"INPUT"!=t.tagName&&e.preventDefault()}}));I||(e=document.getElementById("productMallOptionPanel"),document.getElementById("g_body").clientHeight,e.querySelector(".productMallOptionContentPanel"),e.querySelector(".productMallOptionContent"),e.querySelector(".productMallOptionMargin"),e.querySelectorAll(".productMallOptionContent>div"));var e;return!1},pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#productMallOptionPanel .productDetailClose.icon-Off",closeCallBack:function(){jm(".productMallOptionPanel .productMallOptionContentPanel").removeClass("mallThemeProductContentPanel"),Fai.top._templateFrameId>=2002&&Fai.top._templateFrameId<=2004&&jm(".productMallBuyPanel").css("display","block"),jm("video").css("display","block")}});jm("#productInfoSize").bind("click",function(){if(null!=_&&""!=_){var e=jm(".productMallBuyPanel");e.html(_);var t=Fai.top._templateFrameId,o=jm(".productMallBuyPanel .productAddMall"),n=t>=1015&&t<2e3;(t<2e3||t>=3e3)&&(o.css("margin-left","0.45rem"),1014==t&&o.css("margin-left","0.85rem")),t>=2002&&t<=2004&&e.css("display","flex"),n&&(o.css({"margin-left":"","margin-top":""}),e.find(".mallThemeAddCartBtn").css("margin-left","")),jm(".productMallBuyPanel .productAddMall").css("color",jm(".productNewDetailPanel .productAddMall").css("color")).css("border-color",jm(".productNewDetailPanel .productAddMall").css("border-left-color")),jm(".productMallBuyPanel .productImmediatelyBug").css("background-color",jm(".productNewDetailPanel .productImmediatelyBug").css("background-color")).css("border-color",jm(".productNewDetailPanel .productImmediatelyBug").css("border-left-color")),n||jm(".productMallBuyPanel div").css("margin-top","0"),jm(".productMallOptionPanel .productMallOptionContentPanel").css("overflow","hidden").addClass("mallThemeProductContentPanel"),jm(".productMallBuyPanel .J_productAddMall").bind("click",function(){Mobi.mallBuy(i,0)}),jm(".productMallBuyPanel .J_productImmediatelyBug").unbind("click").bind("click",function(){isSecKill?Mobi.mallBuy(i,1,null,null,null,null,{isSecKill:isSecKill,secKillId:secKillId}):Mobi.mallBuy(i,1)}),jm(".productMallBuyPanel .J_groupBuyBtn").unbind("click").bind("click",function(){Mobi.mallBuy(i,1,null,null,null,null,{isGroupBuy:isGroupBuy,groupBuyId:groupBuyId,groupBuyDetailId:groupBuyDetailId})}),jm(".productMallBuyPanel .J_cpButton").unbind("click").bind("click",function(){Mobi.logDog(200535,0),Mobi.cutPrice(cutPriceId,i)}),jm(".productMallBuyPanel .serviceBtn").off("click.pp").on("click.pp",function(){Mobi.createMallServicePanel()}),jm(".productMallBuyPanel .J_integralMallBtn").unbind("click").bind("click",function(){Mobi.mallBuy(i,1,null,null,null,null,{isIntegralMall:isIntegralMall,integralMallId:integralMallId})}),jm(".productMallBuyPanel .J_earnestSaleBtn").unbind("click").bind("click",function(){Mobi.mallBuy(i,1,null,null,null,null,{isEarnestSale:isEarnestSale,earnestSaleId:earnestSaleId})})}});var S,I=!1;jm("#productNewDetailPanel"+t+" .J_productAddMall").bind("click",function(){jm(".productMallBuyPanel").html(M),S=0,Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!1,y()}),jm(".J_pdJoinGroupBuyBtn").bind("click",function(){if(0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(Fai.top.location.href)),groupBuyDetailId=jm(this).attr("_groupBuyDetailId"),"true"===jm(this).attr("_oldMemberBlock")){var e="";return e+="<div style='width: 11.9rem; height: 10.476rem; background: rgba(255,255,255,1); border-radius: .357rem; margin: 0 auto; position: relative; top: -3rem; display: flex; flex-direction: column; align-items: center; padding: 1.05rem; box-sizing: border-box;'>",e+="<div style='width: 8.12rem; height: 4.69rem; overflow: hidden; margin-bottom: .84rem;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/gbNewMemOnly.png' style='width: 8.12rem; height: 4.69rem;'>",e+="</div>",e+="<div style='font-size: .62rem; color:rgba(0,0,0,1); margin-bottom: .857rem;'>仅限新客参团，老客可以开团</div>",e+="<div class='J-prompt-callback' style='width: 5.714rem; height: 1.43rem; background: rgba(242,48,48,1); border-radius: .1429rem; color: #fff; margin: 0 auto; font-size: .62rem; display: flex; align-items: center; justify-content: center; cursor: pointer;'>去开新团</div>",e+="</div>",e+="<div class='J-prompt-cancel' style='display: inline-block; width: 1.67rem; height: 1.67rem; z-index: 9999; margin: 0 auto; cursor: pointer;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/hdCouponClose.png'>",e+="</div>",void Mobi.customPopup({content:e,callback:function(){Mobi.logDog(200890,4),isGroupBuy&&jm("#mallPrice").html(groupPriceStr),jm(".productMallBuyPanel").html(M),S=2,groupBuyDetailId=0,Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0,y()}})}S=2,y(),L(),jm("#mallPrice").html(groupPriceStr),Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0}),jm(".productMallBuyPanel").delegate(".productMallBuy","click",function(){1==S?isSecKill?Mobi.mallBuy(i,1,null,null,null,null,{isSecKill:isSecKill,secKillId:secKillId}):Mobi.mallBuy(i,S):2==S?Mobi.mallBuy(i,1,null,null,null,null,{isGroupBuy:isGroupBuy,groupBuyId:groupBuyId,groupBuyDetailId:groupBuyDetailId}):3==S?Mobi.cutPrice(cutPriceId,i):4==S?(0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(Fai.top.location.href)),Mobi.mallBuy(i,1,null,null,null,null,{isIntegralMall:isIntegralMall,integralMallId:integralMallId})):5==S?Mobi.mallBuy(i,1,null,null,null,null,{isEarnestSale:isEarnestSale,earnestSaleId:earnestSaleId}):Mobi.mallBuy(i,S)});var w=jm("#mallPrice").html()||"";jm(d).bind("click",function(){jm(".productMallBuyPanel").html(M),S=1,Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isEsBtn=!1,Mobi.isMarketingBtn=!1,y(),L(),k(),F(),T(),isGroupBuy&&(jm("#mallPrice").html(w),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click()),isIntegralMall&&(jm("#mallPrice").html(w),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click(),jm("#integral").hide(),jm("#itgName").hide(),jm("#plus").hide()),isEarnestSale&&(jm("#mallPrice").html(w),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click())}),jm(m).bind("click",function(){if(0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(Fai.top.location.href)),jm(this).find("._oldMemberBlock").length>0){var e="";return e+="<div style='width: 11.9rem; height: 10.476rem; background: rgba(255,255,255,1); border-radius: .357rem; margin: 0 auto; position: relative; top: -3rem; display: flex; flex-direction: column; align-items: center; padding: 1.05rem; box-sizing: border-box;'>",e+="<div style='width: 8.12rem; height: 4.69rem; overflow: hidden; margin-bottom: .84rem;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/gbNewMemOnly.png' style='width: 8.12rem; height: 4.69rem;'>",e+="</div>",e+="<div style='font-size: .62rem; color:rgba(0,0,0,1); margin-bottom: .857rem;'>仅限新客参团，老客可以开团</div>",e+="<div class='J-prompt-callback' style='width: 5.714rem; height: 1.43rem; background: rgba(242,48,48,1); border-radius: .1429rem; color: #fff; margin: 0 auto; font-size: .62rem; display: flex; align-items: center; justify-content: center; cursor: pointer;'>去开新团</div>",e+="</div>",e+="<div class='J-prompt-cancel' style='display: inline-block; width: 1.67rem; height: 1.67rem; z-index: 9999; margin: 0 auto; cursor: pointer;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/hdCouponClose.png'>",e+="</div>",void Mobi.customPopup({content:e,callback:function(){Mobi.logDog(200890,4),isGroupBuy&&jm("#mallPrice").html(groupPriceStr),jm(".productMallBuyPanel").html(M),S=2,groupBuyDetailId=0,Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0,y()}})}isGroupBuy&&jm("#mallPrice").html(groupPriceStr),jm(".productMallBuyPanel").html(M),S=2,groupBuyDetailId=n,Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0,y(),L(),T()}),jm(p).bind("click",function(){o?(isCutPrice&&jm("#mallPrice").html(cpPriceStr),jm(".productMallBuyPanel").html(M),S=3,Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!1,y()):Mobi.cutPrice(cutPriceId,i)}),jm(u).bind("click",function(){if(jm(".productMallBuyPanel").html(M),S=4,Mobi.isImBtn=!0,Mobi.isPtBtn=!1,Mobi.isMarketingBtn=!0,y(),k(),T(),isIntegralMall){var e=jm(".J-op-box").find(".J-op"),t=jm(".J-op-box").find(".optionSelected");(0==e.length||e.length>0&&t.length<e.length)&&(jm("#integral").html(imMinPrice.minIntegral),jm("#mallPrice").html(parseFloat(imMinPrice.minPrice).toFixed(2))),1==integtalMallType&&(jm("#choiceCurrencyVal").hide(),jm("#mallPrice").hide()),jm("#integral").show(),jm("#itgName").show(),jm("#plus").show(),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click()}}),jm(h).bind("click",function(){jm(".productMallBuyPanel").html(M),S=5,Mobi.isImBtn=!1,Mobi.isPtBtn=!1,Mobi.isEsBtn=!0,Mobi.isMarketingBtn=!0,y(),F(),isEarnestSale});var C=JSON.parse(JSON.stringify(Fai.top._shareDataProdectDetail));jm.parseJSON(C.shareLinkList);if(C.shareLinkList='[{"url":"?","icon":"Weixin"}]',Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3){var P={triggerId:"mallThemeProductDetailShare",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareDataProdectDetail),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P);P={triggerId:"promoShareIconForNotOpenShare",pageBg:!0,pageHtml:Mobi.sharePage(C),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P)}else{P={triggerId:"productDetailShare",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareDataProdectDetail),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P);P={triggerId:"promoShareIconForNotOpenShare",pageBg:!0,pageHtml:Mobi.sharePage(C),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P)}var x={triggerId:"showCouponList",pageBg:!0,pageHtml:Mobi.couponPage(Fai.top._couponInfo),direction:"bottom",closeWebPage:"#contentBottomPanel",callback:function(){jm("#couponListBottomPanel").bind("click mousedown touchstart",function(e){e.stopPropagation()}),jm("#contentBottomPanel").show(),jm(".toUseCoupon").bind("click",function(e){var t=jm(this).parents(".couponItem").attr("couponid");Fai.top.location.href="pr.jsp?couponId="+t,e.stopPropagation()})}};Mobi.initWebPage(x),Mobi.hidePlaceholder()}function L(){isPtLimitBuy&&(Mobi.isPtBtn?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_pt").show(),jm(".J_productNumberContent_pt").show()):(jm("#limitAmountDiv_pt").hide(),jm(".J_productNumberContent_pt").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()))}function k(){isImLimitBuy&&(Mobi.isImBtn?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_im").show(),jm(".J_productNumberContent_im").show()):(jm("#limitAmountDiv_im").hide(),jm(".J_productNumberContent_im").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()))}function F(){Mobi.isEsBtn&&jm(".productName").hide()}function T(){var e={},t=[];if(Mobi.isMarketingBtn?(e=mkt_optionsAmountInfo,t=mkt_showOptionList):(e=pd_optionsAmountInfo,t=pd_showOptionList),!(t.length<=0))for(var i=(e.t||"").split("_"),o=e.d||[],n=0,a=0;a<t.length;a++){for(var r=t[a],s=r.items||[],l=r.fieldKey||"",c=0;c<i.length;c++)l==i[c]&&(n=c);4==r.type&&(l="opIndept"+l),s.length>0&&!openPriceCalendar&&(jm.each(s,function(e,t){var i=t.i,a=!1;jm.each(o,function(e,t){var o=t.t2,r=null===t.flag?1:t.flag,s=o.split("_");if(1==r&&n<s.length&&parseInt(s[n])==i)return a=!0,!1}),a?jm(".g_mallLabel[for='"+l+i+"']").show():jm(".g_mallLabel[for='"+l+i+"']").hide()}),n++)}}},Mobi.initEarnestSalePdDetail=function(e){jm("#g_body").append(jm("<div id='temBox' class='g_color g_main_color_v3'></div>"));var t="<div class='expandPriceTip'><div class='expandPrice' style='background-color:"+("rgba("+jm("#temBox").css("color").split(/[()]/)[1]+", 0.15)")+";'>可抵"+e+"</div></div>";jm(".J_earnestPriceContain").append(t)},Mobi.runGroupBuyCountDown=function(){var e=[];function t(e){return e<0?"00":e<10?"0"+e:e}jm.ajax({url:"ajax/mall_h.jsp?cmd=getSystemTime",success:function(i){if((i=jm.parseJSON(i)).success){var o=(i.now||0)-(new Date).getTime();jm(".fk_otherGroupBuy .J_gbItem, .fk-groupBuyDetail .J_gbItem, .fk-groupBuyDetail .J_contentBox").each(function(i,n){var a=jm(n).attr("_groupCreateTime"),r=jm(n).attr("_groupEndTime");if(a=a.replace(/-/g,"/"),r=r.replace(/-/g,"/"),a&&r&&"null"!=a){var s=!0;jm(n).hasClass("J_contentBox")&&(s=!1);new Date(a);var l=new Date(r);jm(n).find(".J_gbCountDown");e[i]=setInterval(function(){!function(i,o,n,a,r){var s=new Date((new Date).getTime()+r),l=i.getTime()-s.getTime(),c=parseInt(l/1e3/60/60/24,10),d=parseInt(l/1e3/60/60%24,10)+24*c,m=parseInt(l/1e3/60%60,10),p=parseInt(l/1e3%60,10);(c>=0||d>=0||m>=0||p>=0)&&n.find(".J_gbCountDown").html(t(d)+":"+t(m)+":"+t(p));c<=0&&d<=0&&m<=0&&p<=0&&(clearInterval(e[o]),e[o]=null,a&&n.remove())}(l,i,jm(n),s,o)},1e3)}})}}})},Mobi.initGroupBuyDetail=function(){var e={triggerId:"gbSharetoFriend",pageBg:!0,pageHtml:Mobi.initgroupBuySharePage(),direction:"bottom",callback:function(){jm("#graphicPosterItem").bind("click",function(e){jm("#webPagePanelmallThemeProductDetailShare").hide()});var e={triggerId:"graphicPosterItem",pageBg:!0,pageHtml:Mobi.createGroupBuyGraphicPosterPage(),direction:"bottom",closeWebPage:"#gbCloseIcon,#gbGraphicPosterPanelBg",callback:function(){Mobi.drawGroupBuyCanvasSharePic()}};Mobi.initWebPage(e)},closeWebPage:"#cancelBtn,#gbSharePanelBg"};Mobi.initWebPage(e),jm("#gbDetailShare").click(function(){Mobi.logDog(200478,1),jm("#shareLinkWeixin").click()}),jm(".icon-groupBuyToIndex").click(function(){Fai.top.document.location.href="/"}),jm("#J_moreItem").click(function(){jm(".fk-groupBuyDetail").hide(),jm(".fk-groupBuyMember").show(),jm(".webHeader_v3").hide(),Mobi.logDog(200750,1)}),jm(".J_groupBuyMemberClose").click(function(){jm(".fk-groupBuyMember").hide(),jm(".fk-groupBuyDetail").show(),jm(".webHeader_v3").show()})},Mobi.initCutPriceDetail=function(){jm("#g_web").append("<div style='display:none;'>"+Mobi.sharePage(Fai.top._shareDataCutPriceDetail)+"</div>"),Mobi.initShare("shareLinkWeixin","",""),jm(".J_cpInvite").click(function(){Mobi.logDog(200535,1),jm("#shareLinkWeixin").click()})},Mobi.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null},Mobi.initCommentUserTab=function(e){if(3===e){var t={triggerId:"userCommentId",panelId:"userCommentPanel",callback:function(){Mobi.postUserComment("ajax/productComment_h.jsp?cmd=submitPC&newComment=true",0)},closeWebPage:"#userCommentPanel .userCommentGoBack"};Mobi.initWebPage(t),jm("#userCommentId").one("click",function(){jm("#loginCaptchaImg").attr({src:"validateCode.jsp?v=610"})})}},Mobi.initStarList=function(e){jm(".J-star-list").eq(e).attr("_star",5),jm(".J-star-list").eq(e).html('<li class="faisco-icons-star3"></li><li class="faisco-icons-star3"></li><li class="faisco-icons-star3"></li><li class="faisco-icons-star3"></li><li class="faisco-icons-star3"></li><li class="score-tip"></li>')},Mobi.setStarSelect=function(){Mobi.onTouchAndClickEvent(".J-star-list li",function(){var e=jm(".userCommentPanel").css("background-color");"string"!=typeof e&&(e="#FFF");var t=jm(this).index();if(t>=5)return!0;var i=jm(this).parent();i.attr("_star",t+1);for(var o=0;o<5;o++){var n=i.find("li").eq(o);o<t+1?t<2?(n.removeClass("select_more"),n.addClass("select_less")):(n.removeClass("select_less"),n.addClass("select_more")):(n.removeClass("select_more"),n.removeClass("select_less"))}i.find("li.score-tip").show();var a="",r="";0==t?(a=LS.badComment,r="#b7b6b6"):1==t?(a=LS.moderateComment,r="#b7b6b6"):2==t?(a=LS.moderateComment,r="#ffb600"):(a=LS.js_highComment,r="#ffb600"),i.find("li.score-tip").html("<em></em><span></span>"+(t+1)+LS.score+a),i.find("li.score-tip").css({"border-color":r,color:r,display:"inline-block","max-width":"6.6rem"}),i.find("li.score-tip em").css({borderColor:"transparent "+r+" transparent transparent"}),i.find("li.score-tip span").css({borderColor:"transparent "+e+" transparent transparent"})})},Mobi.couponPage=function(e){if(null==e)return"";var t=[],o="",n="max-height: 10rem;";for(i=0;i<e.length;i++){t.push("<div class ='couponItem' couponid = "+e[i].id+" bgid= 0 onclick='Mobi.clickCoupon(this);' >");t.push("<div class='couponItem-left g_bgColor g_main_bgColor_v3'>"),t.push("<div class='couponItemLeftBackground'></div>"),t.push("<div class='couponItemLeftData'><span style='font-size: 0.75rem;'>"+Fai.top.choiceCurrencyVal+"</span><span style='font-size: 1.625rem;'>"+e[i].savePrice+"</span></div>"),t.push("<div class='couponItemLeftCondit'>满"+e[i].orderMinPrice+"可用</div>"),t.push("</div>"),t.push("<div class='couponItem-right'>"),e[i].isRecieve&&t.push("<div class='toUseCoupon g_mainColor g_main_color_v3'>"+LS.toUseCoupon+"</div>"),t.push("<div class='couponItemRightName '>"+e[i].couponName+"</div>"),t.push("<div class='couponItemRightValidity couponItemRightValidity'>"+e[i].validity+"</div>"),t.push("</div>"),t.push("</div>")}return Fai.top._openThemeV3&&(o="<div id='closeCouponListBottomPanel' class='productDetailClose icon-Off g_iconMiddle icon-defaultColor'></div>",n="max-height: 19.2rem;"),"<div style='display:none; width:100%;' id ='contentBottomPanel'><div class='couponListBottomPanel' id ='couponListBottomPanel'><div class='couponListTitle'>优惠券</div><div id='slideCouponPanel' style='"+n+"overflow: auto;'><div class='couponListContainer'>"+t.join("")+"</div></div>"+o+"</div></div>"},Mobi.sharePage=function(e){if(e){var t=jm.parseJSON(e.shareLinkList),i=(e.shareUrl,e.browserTitle,window.location.href,e.fromOks||!1),o="",n=[];if(Fai.top._manageMode){(l=(l=(l=Mobi.getPreviewDocument().URL).replace("http://"+Fai.top._userHostName,"")).replace("https://"+Fai.top._userHostName,"")).indexOf("_safeMode=false&")>-1?l=l.replace("_safeMode=false&",""):l.indexOf("?_safeMode=false")>-1?l=l.replace("?_safeMode=false",""):l.indexOf("&_safeMode=false")>-1&&(l=l.replace("&_safeMode=false",""));Fai.top._visitorHostName}else window.location.href;var a=!1,r=null;for(var s in Fai.top._isPromoter&&Fai.top._isPromoterPd&&jm.ajax({url:"ajax/promoter_h.jsp?cmd=getInfo&productId="+e.productId,async:!1,success:function(e){(e=jm.parseJSON(e)).success&&(r=e.info.config,e.info.isPromoter&&e.info.isPromotePd&&(a=!0))}}),t){var l=t[s].url,c=t[s].icon;if("baidu_tieba"==c&&Fai.top._isFaiHost)o+="<a hidefocus='true' class='shareLink' href='javascript:;' onclick='Mobi.ing(\""+LS.shareNot+"\");'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>";else if("graphic_poster"==c){var d=e.graphicPosterFunc||"";Fai.top._isMall?o+="<a id='graphicPosterItem' hidefocus='true' class='shareLink' href='javascript:;' onclick='"+d+"'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>":o+="<a id='graphicPosterItem' hidefocus='true' class='shareLink jzGrapicShare' href='javascript:;' onclick='"+d+"'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>"}else"Weixin"==c?(shareIcon=!0,o+="<a hidefocus='true' class='shareLink' id='shareLinkWeixin' href='javascript:;'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>"):"qq_share"==c?(shareIcon=!0,o+="<a hidefocus='true' class='shareLink' id='shareLinkQQ' href='javascript:;'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>"):o+="copy_url"==c?"<a hidefocus='true' class='shareLink' id='copy_url' data-clipboard-text='"+l+"' href='javascript:;' style='outline:none;'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>":"<a hidefocus='true' class='shareLink' href='javascript:;' onclick='window.open(\""+l+"\")'><div class='shareNewIcon g_iconMiddle icon-"+c+"'></div><div class='shareText icon-"+c+"-text'></div></a>";(parseInt(s)+1)%8==0&&(n.push("<div class='swipImgBox'>"+o+"</div>"),o="")}o&&n.push("<div class='swipImgBox'>"+o+"</div>");var m="";t.length<=4&&(m="style='height:5rem';");var p="<div class='shareListPanel' id='shareListPanel"+(i?"2":"")+"'><div class='shareListPanelBg' id='shareListPanelBg"+(i?"2":"")+"'></div><div class='shareListContent'>";return a?(p+="<div class='shareTitle' style='color: #333; margin-top: .5rem;'>分享后可赚"+r.promoteAward+"%的推广奖励</div>",p+="<div class='promoterPdShare'>他人通过你的分享进商城购买后，你可获得推广奖励，奖励金额将根据买家的实付金额进行计算。</div>"):p+="<div class='shareTitle'>"+LS.shareIt+"</div>",p+="<div class='shareListShow' id='shareListShowSwipe"+(i?"2":"")+"' "+m+"><div class='shareListSwipe'>"+n.join("")+"</div>",t.length>8&&(p+='<div class="shareBullet"><ul id="bullets" class="bullets"><li class="on"></li><li></li></ul></div>'),p}},Mobi.showPbSingalInstCommImg=function(){var e=jm(".J_productCommImg").eq(0)[0].querySelectorAll("img");void 0!==e&&null!=e&&e.length>0&&Mobi.bindCommImgShow(e,!0,0)},Mobi.setMemberPriceLabelColot2ThemeBackgroundColor=function(){var e=jm(".productImmediatelyBug").css("background");jm(".memberPrice").css("background",e)},Mobi.initPbCommUploadImgParam=function(e,t,i,o,n,a,r,s){_pbCommUploadImgParam={upImgMaxSize:e,imgType:t,upImgMaxNum:i,jsJquery:o,jsUpload:n,swfUpload:r,isIE:s,siteMainDomain:a};var l=document.body;if(p(o))d();else{var c=document.createElement("script");c.type="text/javascript",c.src=o,c.onload=function(){d()},l.appendChild(c)}function d(){var e,t=n;"true"==s&&(t=r),p(t)?m():((e=document.createElement("script")).src=t,e.type="text/javascript",l.appendChild(e),e.onload=function(){m()})}function m(){"true"==s?Mobi.mobiPbCommUploadImgSWF("comm-img-swfu-placeholder",e,t,i):Mobi.mobiPbCommUploadImgHtml("comm-img-swfu-placeholder",e,t,a)}function p(e){for(var t=document.getElementsByTagName("script"),i=!1,o=0,n=t.length;o<n;o++)if((t[o].getAttribute&&t[o].getAttribute("src")||"")==e){i=!0;break}return i}},Mobi.mobiPbCommUploadImgSWF=function(e,t,i,o){var n=i.split(","),a={file_post_name:"Filedata",upload_url:"/ajax/commUpsiteimg_h.jsp",button_placeholder_id:e,file_size_limit:t+"MB",button_image_type:3,file_queue_limit:1,button_width:"50px",button_height:"50px",button_cursor:SWFUpload.CURSOR.HAND,button_image_url:_resRoot+"/image/mobi/msgUpImg/upload.png",requeue_on_error:!1,post_params:{ctrl:"Filedata",app:21,type:0,fileUploadLimit:o},file_types:n.join(";"),file_dialog_complete_handler:function(e){this._allSuccess=!1,this.startUpload()},file_queue_error_handler:function(e,t,i){switch(t){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:Mobi.ing(LS.mobiFormSubmitCheckFileSizeErr,!0);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:Mobi.ing(LS.mobiFormSubmitFileUploadNotAllow,!0);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadOneTimeNum,"1"),!0);break;default:Mobi.ing(LS.mobiFormSubmitFileUploadReSelect,!0)}},upload_success_handler:function(e,t){var i=jQuery.parseJSON(t);this._allSuccess=i.success,this._sysResult=i.msg,i.success?(setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.onPbCommFileUploadEvent("upload",i)):Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg)},upload_error_handler:function(e,t,i){-280==t?Mobi.ing(LS.mobiFormSubmitFileUploadFileCancle,!1):-270==t?Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadFileExist,jm.encodeHtml(e.name)),!0):Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},upload_complete_handler:function(e){e.filestatus==SWFUpload.FILE_STATUS.COMPLETE?setTimeout(function(){swfObj.startUpload()},swfObj.upload_delay):e.filestatus==SWFUpload.FILE_STATUS.ERROR&&Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},upload_start_handler:function(e){Mobi.ing(LS.mobiFormSubmitFileUploadPrepare,!1)},view_progress:function(e,t,i,o){o=Math.ceil(t/i*100);isNaN(o)||(100==o?Mobi.ing(LS.mobiFormSubmitFileUploadIng+o+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+o+"%",!1))}};swfObj=SWFUploadCreator.create(a)},Mobi.mobiPbCommUploadImgHtml=function(e,t,i,o){var n={siteFree:!1,updateUrlViewRes:"",auto:!0,fileTypeExts:i.split(",").join(";"),multi:!1,fileSizeLimit:1024*t*1024,breakPoints:!0,saveInfoLocal:!1,showUploadedPercent:!0,removeTimeout:9999999,getFileSizeUrlFlag:!0,post_params:{app:21,type:0,fileUploadLimit:t,isSiteForm:!0,_TOKEN:jm("#_TOKEN").attr("value")},buttonText:"",uploader:'/ajax/commUpsiteimg_h.jsp?cmd="mobiUpload"',onUploadStart:function(e){_uTime=(new Date).getTime()},onUploadSuccess:function(e,t){var i=jm.parseJSON(t);i.success?(a({status:"end",id:e.id,title:"上传成功。"}),setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.onPbCommFileUploadEvent("upload",i)):(a({status:"end",id:e.id,title:i.msg}),Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg))},onUploadError:function(e,t){jm("#progressBody_ "+e.id).remove(),jm("#progressWrap_"+e.id).remove(),Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name))),_uTime=(new Date).getTime()-_uTime},onSelect:function(){return n.post_params._TOKEN=jm("#_TOKEN").attr("value"),!0},view_progress:function(e){e=Math.ceil(e);isNaN(e)||(100==e?Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!1))}};function a(e){if(!isNaN(Math.round(e.percent)))if("start"==e.status){var t=['<div id="progressBody_'+e.id+'" class="bodyDisable"></div>','<div id="progressWrap_'+e.id+'" class="bodyProgressWrap">','<div class="progressCenter"></div>','<div class="progressIngBody">','<div id="progressTitle'+e.id+'" class="progressIngTitle">'+e.title+"</div>",'<div class="progressIngMission">','<div class="mission"><div id="progress'+e.id+'" class="progress" style="width:1%;"></div></div>','<div id="progressNum'+e.id+'" class="progressNum">0%</div>',"</div>",'<div class="progressInfo"><span id="progressTips'+e.id+'" class="progressFileSize"></span><a class="progressCancel" href="javascript:uploadCancel(\''+e.id+"');\">取消</a></div>","</div>","</div>"];jm("body").append(t.join(""))}else"ing"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progress"+e.id).css("width",Math.round(e.percent)+"%"),jm("#progressNum"+e.id).html(Math.round(e.percent)+"%")):"end"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progressBody_"+e.id).remove(),jm("#progressWrap_"+e.id).remove()):"error"==e.status&&jm("#progress"+e.id).addClass("progressError")}upload=jm("#"+e).uploadify(n);jm("#file_upload_1-button").attr("id","file_upload_pt_1"),jm("#select_btn_1").attr("id","select_btn_pt_1"),Fai.top._manageMode&&(jQuery("#select_btn_pt_1").attr("disabled","true"),jQuery("#file_upload_pt_1").attr("disabled","true").off("click").on("click",function(e){return Mobi.ing("管理状态下，不能上传图片。"),!1}))},Mobi.onPbCommFileUploadEvent=function(e,t){if("upload"==e){var i=t.id,o=t.name,n=t.size,a=t.path,r=(t.pathSmall,t.fileId),s=(t.width,t.height,t.type||0),l=t.width||0,c=t.height||0;Mobi.pbCommImgTableCtrl(a,o,i,n,r,s,l,c)}},Mobi.pbCommImgTableCtrl=function(e,t,i,o,n,a,r,s){var l=jm("#pt_add_img_tb").eq(0),c=l.find(".comm-find-tb").length,d=l.find(".comm-find-tb").eq(c-1),m=d.attr("maxNum");if(!(parseInt(c-1)>=m)){var p=[];p.push("<table style='width:100%; height:100%; table-layout:fixed;'  cellpadding='0'  cellspacing='0'>"),p.push(" <tr>"),p.push("    <td valign='middle'   align='center' class='comm-show-td-bd'>"),p.push("      <img src='"+e+"' alt='' onclick='Mobi.pbRemoveBodyStyle()'  _name='"+t+"' _id='"+i+"' _file_size='"+o+"' _file_id='"+n+"'  _fileWidth='"+r+"'  _fileHeight='"+s+"'  _fileType='"+a+"' class='comm-up-set'>"),p.push("     </td>"),p.push(" </tr>"),p.push("</table>"),p.push("<div class='comm-up-div'>"),p.push("  <span onclick=Mobi.pbCommTableImgDelete(this) class='comm-up-div-set'/>"),p.push("</div>");var u=jm(document.createElement("td"));u.addClass("comm-find-tb comm-find-tb-remove"),u.append(jm(p.join(""))),u.insertBefore(d),c=l.find(".comm-find-tb").length,parseInt(c-1)>=m&&d.css("display","none"),Mobi.showPbSingalInstCommImg()}},Mobi.pbCommTableImgDelete=function(e){for(var t=jm("#pt_add_img_tb").eq(0),i=t.find(".comm-find-tb").length,o=0;o<i;o++)if(t.find(".comm-find-tb").eq(o).find(".comm-up-div-set")[0]===e){t.find(".comm-find-tb").eq(o).remove();break}i=t.find(".comm-find-tb").length;var n=t.find(".comm-find-tb").eq(i-1);i<=n.attr("maxNum")&&n.css("display","block"),Mobi.showPbSingalInstCommImg()},Mobi.postUserComment=function(e,t){var i=document.getElementById("userCommentPanel"),o=i.querySelector(".tabUl"),n=(i.querySelector(".tabLi"),i.querySelector(".tabUserPanel"),0===t?"ALrd86EDCAEQARoEWzE3XSIJ5ZSQ5LiW5rCR":"ANKUjxIIARABGgRbMTZdIgnllJDkuJbmsJE"),a=function(e){if(e){var t=e.getAttribute("data"),o=i.querySelector(".tabActive").getAttribute("data"),n=document.getElementById("tabUserPanel"+t);jm(i.querySelector(".tabActive")).removeClass("tabActive g_main_color_v3 g_main_bdColor_v3"),jm(i.querySelector(".tabPanelAtive")).removeClass("tabPanelAtive"),jm("#userCommentRemarkPanel"+t).append(jm("#userCommentRemarkPanel"+o+" .g_globalLine")),jm(n).append(jm("#userCommentRemarkPanel")),jm("#tabUserLi"+t).addClass("tabActive g_main_color_v3 g_main_bdColor_v3"),jm(n).addClass("tabPanelAtive")}},r=function t(i,o){var r,s=jm("#postCommentId").val(),l=jm("#userCommentRemark").val(),c=jm("#userCommentRemark").attr("minlength");if("string"==typeof l&&""!=l)if(l.length<c)Mobi.ing(jm.format(LS.commentLenTips,jm.encodeHtml(c)));else{if(i)r=jm.trim(jm("#user").val());else if("string"!=typeof(r=jm.trim(jm("#anonymityCommentUser").val())))return void Mobi.ing(LS.creatorTips);var d=jm(".J_productCommImg").find("img"),m=[];if(null!=d&&void 0!==d){var p=d.length;if(p>0)for(var u=0;u<p;u++){var h=d.eq(u);if(null!=h&&"undefined"!=h){var f={},g=h.attr("_id"),v=h.attr("_name"),b=h.attr("_file_size"),j=h.attr("_file_id"),_=Number(h.attr("_fileWidth")||0),M=Number(h.attr("_fileHeight")||0),y=Number(h.attr("_fileType")||0);f.imgId=g,f.imgName=v,f.imgSize=b,f.tempFileId=j,f.imgWidth=_,f.imgHeight=M,f.imgType=y,m.push(f)}}}var S,I={commentsObjId:s,creator:r,commImgList:JSON.stringify(m),comment:l,anonymity:!i};o&&(I.fromLogin=!0),(S=i?jm(".J-star-list").eq(0).attr("_star"):jm(".J-star-list").eq(1).attr("_star"))&&(I.star=S),Mobi.ing(LS.siteFormSubmitIng);var w=function(r){r&&(I.checkSign=r,I.bssKey=n),jm.ajax({type:"POST",url:e,data:I,error:function(){Mobi.ing(LS.js_systemError),Mobi.logMonitor(5933,!0)},success:function(e){var n=jm.parseJSON(e);if(n&&n.success?Mobi._needFaitest=!1:n.captcha&&(Mobi._needFaitest=!0,t(i,o)),n.hasFW)Mobi.ing(n.msg);else switch(n.logMonitor&&Mobi.logMonitor(5933,!0),n.msg){case 1:Mobi.showMemberLoginMsg(-301,n.captcha),Mobi.ing(LS.js_captchaError),jm("#loginCaptchaImg").click(),jm("#loginCaptcha").val("");break;case 2:Mobi.ing(LS.creatorError);break;case 3:Mobi.ing(LS.commentError);break;case 4:S&&(n.comment.star=S),Fai.top._openThemeV3?Mobi.addTheNewCommentV3(n.comment):Mobi.addTheNewComment(n.comment),n.autoOpenComm||null==n.autoOpenComm?Mobi.ing(LS.commentSuccess,1):Mobi.ing(LS.commentSuccessNeedReview,1),jm("#userCommentRemark").val(""),jm("#loginCaptchaImg").click(),jm("#loginCaptcha").val(""),jm(".comm-find-tb-remove").remove(),i?Mobi.initStarList(0):Mobi.initStarList(1);break;case 5:Mobi.ing(LS.paramError);break;case 6:Mobi.ing(LS.OnlyMembersCanComment),a(jm("#tabUserLi1")[0]);break;case 7:Mobi.ing(LS.commentClosed);break;case 8:Mobi.ing(LS.commentSubmitError);break;case 9:Mobi.ing(LS.commentCountLimit);break;case 10:Mobi.ing(LS.msgBoardInputValidateCode),n.needCode&&jm(".J_newsCommentCaptcha").removeClass("captchaHide")}}})};Mobi._needFaitest&&!o?initFaitest({bss:1,bssKey:n},function(e){w(e)}):w()}else Mobi.ing(LS.commentNotEmpty)};Mobi.bindTouchAndClickEvent(jm(o),function(e){var t=e.target;a(t)}),Mobi.bindTouchAndClickEvent(jm("#userCommentLoginAndComform"),function(e){if(!Fai.top._manageMode)return Fai.top.sessionMemberId>0?r(!0):function e(){var t=jm("#user").val(),i=jm("#password").val();if(null!=t&&""!=t)if(null!=i&&""!=i){i=jm.md5(i);var o="AKWWpqEHCAEQARoDWzFdIgnllJDkuJbmsJE",n=function(n){var a="cmd=loginMember&acct="+jm.encodeUrl(t)+"&pwd="+jm.encodeUrl(i);n&&(a+="&bssKey=".concat(o,"&checkSign=").concat(n)),jm.ajax({type:"post",url:"ajax/login_h.jsp",data:a,error:function(){loginBtn.removeAttr("disabled"),Mobi.showMemberLoginMsg(-1)},success:function(t){if((t=jm.parseJSON(t)).success)return Fai.top.sessionMemberId=t.sessionMemberId,Mobi._needFaitest=!1,jm("#_TOKEN").remove(),jm("head").append(t._HEADTOKEN),void r(!0,!!n);t.active?Mobi.ing(LS.memberLoginMailActivation):(Mobi.showMemberLoginMsg(t.rt,t.captcha),t.captcha&&(Mobi._needFaitest=!0,e()))}})};Mobi._needFaitest?initFaitest({bss:1,bssKey:o},function(e){n(e)}):n()}else Mobi.ing(LS.memberInputPwd);else Mobi.ing(LS.memberInputAcct)}(),e.stopPropagation(),!1;Mobi.ing("您目前处于网站管理状态，请先退出再登录")}),Mobi.bindTouchAndClickEvent(jm("#anonymityCommentComform"),function(e){if(!Fai.top._manageMode)return r(!1),e.stopPropagation(),!1;Mobi.ing("您目前处于网站管理状态，请先退出再登录")})},Mobi.addTheNewComment=function(e){var t=[],i="VIP";if(null!=e.newsId){0==e.memberId&&(i=LS.Incognito);var o=new Date(e.createTime);o=Mobi.formatDate(o),t.push("<div class='msgArea'>"),t.push("  <div class='msgTitle'>"),t.push("  <div class='msgUser'><span class='g_mainColor g_main_color_v3'>["+i+"]</span>"+e.creator+"</div>"),t.push("  <div class='msgTime'>"+o+"</div>"),t.push("  </div>"),t.push("  <div class='msgContent'>"+e.comment+"</div>"),t.push("</div>"),0!=jm(".nnewsComHeader").length?jm(t.join("")).insertAfter(jm(".nnewsComHeader")):location.reload()}else{i=0==e.memberId?LS.Incognito:e.level;o=new Date(e.createTime);o=Mobi.formatDate(o);var n=jm("html").css("font-size");n=n.substring(0,n.length-2);var a=e.headPic;if(t.push("<div class='msgArea ct-panel productCommentPanel'>"),t.push("<div class='pdMsgTitle'>"),t.push('<div class="msgUserHeacPic"><img src="'+a.path+'" '),a.thumbId){var r=a.width,s=a.left,l=a.top,c=a.imgW,d=a.imgH,m=r/(1.8*n);t.push('style="top:'+-l/m+"px; left:"+-s/m+"px; width:"+c/m+"px; height:"+d/m+'px"')}else t.push('style="height:'+1.8*n+'px"');if(t.push(" /></div>"),t.push("<div class='msgUser g_mirrorColor'>&nbsp;"+e.creator+"</div>"),t.push("<span class='msgLevalUser'></span>"),t.push("<div class='msgTime g_mirrorColor'>"+o+"</div>"),t.push("</div>"),"star"in e){t.push("<div class='fk-star-list'>");for(var p=Number(e.star),u=0;u<5;u++)u<p?t.push("<li class='faisco-icons-star3 select_more'></li>"):t.push("<li class='faisco-icons-star3 select_less'></li>");if(t.push("</div>"),1==p){var h=Number(jm(".fk-right-statisBox .badComm").text());jm(".fk-right-statisBox .badComm").text(h+1)}else if(p>3){h=Number(jm(".fk-right-statisBox .hignComm").text());jm(".fk-right-statisBox .hignComm").text(h+1)}else{h=Number(jm(".fk-right-statisBox .middComm").text());jm(".fk-right-statisBox .middComm").text(h+1)}var f=jm(".fk-comm-avgScore"),g=Number(f.attr("_tc"))+p,v=Number(f.attr("_ts"))+1,b=g/v;f.text(b.toFixed(1)),f.attr("_tc",g),f.attr("_ts",v)}if(t.push("<div class='msgContent g_defaultColor'>"+e.comment+"</div>"),void 0!==e.commImgList&&"null"!=e.commImgList){var j=jm.parseJSON(e.commImgList);if(null!=j&&j.length>0){t.push("<div class='ct-s-content-m' style='padding:0;'>"),t.push("<table>"),t.push("<tr>");for(u=0;u<j.length;u++)t.push("<td class='s-img-f-tb'>"),t.push("<table class='s-img-tb' cellpadding='0' cellspacing='0'>"),t.push("<tr>"),t.push("<td class='s-img-bd' valign='middle'   align='center'>"),t.push("<img src='"+j[u].path+"' alt='' class='s-img-set'>"),t.push("</td>"),t.push("</tr>"),t.push("</table>"),t.push("</td>");t.push("</tr>"),t.push("</table>"),t.push("</div>")}}t.push("</div>"),null!=jm("#tabPanel3 .msgArea")[0]?(jm(t.join("")).insertBefore(jm("#tabPanel3 .msgArea")[0]),Mobi.setNewCommImgBindShow(),jm("#tabPanel3 .noCommentListDescribe").length&&jm("#tabPanel3 .noCommentListDescribe").parent().remove()):location.reload()}jm("#userCommentPanel .userCommentGoBack").click()},Mobi.setNewCommImgBindShow=function(){setTimeout(function(){var e=jm("#tabPanel3 .msgArea").eq(0).find(".ct-s-content-m").eq(0)[0];if(void 0!==e&&"null"!=e){var t=e.querySelectorAll("img");void 0!==t&&null!=t&&t.length>0&&Mobi.bindCommImgShow(t,!1,0)}},500)},Mobi.formatDate=function(e){new Date(e);var t=e.getFullYear(),i=parseInt(e.getMonth()+1)>9?parseInt(e.getMonth()+1):"0"+parseInt(e.getMonth()+1),o=e.getDate()>9?e.getDate():"0"+e.getDate();e.getHours(),e.getHours(),e.getMinutes(),e.getMinutes(),e.getSeconds(),e.getSeconds();return t+"-"+i+"-"+o},Mobi.initAjaxTab=function(e){if(e){var t=e.pid,i=e.moduleId,o=document.querySelector("#productDetailTabPanel"+i+" .tabUl"),n=document.querySelector("#productDetailTabPanel"+i+" .tabBody"),a=document.getElementById("productNewDetailPanel"+i),r=e.themeV3||!1,s=e.isUseSwipe;void 0===s&&(s=!0),getTabContent=function(e){if(e){var o=parseInt(e.getAttribute("data")),l=document.getElementById("tabPanel"+o),c=document.getElementById("tabLi"+o),d=a.querySelector(".tabLi.tabActive"),m=a.querySelector(".tabPanel.tabPanelAtive");if(l){r?(jm(d).removeClass("tabActive g_main_color_v3 g_main_bdColor_v3"),jm(c).addClass("tabActive g_main_color_v3 g_main_bdColor_v3")):(jm(d).removeClass("tabActive"),jm(c).addClass("tabActive")),jm(m).removeClass("tabPanelAtive"),jm(l).addClass("tabPanelAtive"),setTimeout(function(){Fai.top._openThemeV3||Mobi.productTabUlScroll()},0);var p=jm("html").css("font-size");if(p=p.substring(0,p.length-2),""==l.innerHTML){jm(n).append("<div id='tabPanelLoading' class='tabPanelLoading'></div>");var u="pid="+t+"&type="+o+"&moduleId="+i+"&rem="+p+"&loadingPath="+Fai.top._loadingPath+"&columnProductId="+t;jm.ajax({type:"post",url:"ajax/product_h.jsp?cmd=getProductDetailInfo",data:u,error:function(){Mobi.ing(LS.js_systemError),3==o&&Mobi.logMonitor(5932,!0)},success:function(e){var t=jm.parseJSON(e);if(t.html||(jm("#tabPanelLoading").remove(),t.html=""),3==o)l.innerHTML=t.html,Mobi.initCommentUserTab(3),Mobi.setCommImgBindShow(),setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel"+o)},100),t.success||Mobi.logMonitor(5932,!0);else if(1===o){if(t.html="<div class='richContent productDetailInfoPanel g_defaultColor'>"+t.html+"</div>",!Fai.top._productRecommentData)return l.innerHTML=t.html,jm("#tabPanelLoading").remove(),Mobi.switchJump(),Mobi.addParentDivToTable(),s&&Mobi.updateProductDetailSwipe("#productDetailTabPanel"+i+" #tabPanel"+o+" img"),void setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel"+o)},100);l.innerHTML=t.html+Fai.top._productRecommentData,Mobi.productCrossedSlideSec("mProductList"+i,1,1,"paramWrap"),Mobi.productCrossedSlideSecSwipe("productSlideList"+i,"productSlide"+i),Mobi.switchJump(),Mobi.addParentDivToTable(),s&&Mobi.updateProductDetailSwipe("#productDetailTabPanel"+i+" #tabPanel"+o+" img"),setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel"+o)},100)}else 2===o?(l.innerHTML=t.html,setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel"+o)},100)):(t.html="<div class='richContent productDetailInfoPanel g_defaultColor'>"+t.html+"</div>",l.innerHTML=t.html,Mobi.switchJump(),Mobi.updateProductDetailSwipe("#productDetailTabPanel"+i+" #tabPanel"+o+" img"),setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel"+o)},100));jm("#tabPanelLoading").remove()}})}Fai.top._manageMode&&""!=l.innerHTML&&Mobi.updateProductDetailSwipe("#productDetailTabPanel"+i+" #tabPanel"+o+" img"),1==o&&"string"==typeof Fai.top._productRecommentData&&""!=Fai.top._productRecommentData&&jm("#productSlide"+i).length<1&&(jm(l).append(Fai.top._productRecommentData),Mobi.productCrossedSlideSec("mProductList"+i,1,1,"paramWrap"),Mobi.productCrossedSlideSecSwipe("productSlideList"+i,"productSlide"+i),Mobi.bindImgLazyLoad("productSlideList"+i))}}},callBack=function(e){var t=e.target;if(t)return getTabContent(t),!1},Fai.top._openThemeV3||jm(a).css("min-height",jm(window).height()+"px"),o.querySelector(".tabActive")&&(jm(o).bind("click",callBack),getTabContent(o.querySelector(".tabActive")),Mobi.initCommentUserTab(parseInt(o.querySelector(".tabActive").getAttribute("data"))))}},Mobi.getCommentAjaxPagenation=function(e,t){if(e){var i=jm("html").css("font-size"),o="pid="+e+"&pageno="+t+"&ajaxPage="+!0+"&rem="+(i=i.substring(0,i.length-2))+"&loadingPath="+Fai.top._loadingPath;jm.ajax({type:"post",url:"ajax/product_h.jsp?cmd=getProductInfoComment",data:o,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);t.html||(t.html=""),jm("#tabPanel3 .commentBoxPanel").remove(),document.getElementById("tabPanel3").insertBefore(jm(t.html)[0],jm("#tabPanel3 .userComment")[0]),setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel3")},0),Mobi.setCommImgBindShow()}})}},Mobi.setCommImgBindShow=function(){setTimeout(function(){var e=jm(".ct-s-content-m");if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++){var i=e.eq(t)[0].querySelectorAll("img");void 0!==i&&null!=i&&i.length>0&&Mobi.bindCommImgShow(i,!1,0)}},500)},Mobi.pbSaveBodyStyle=function(){"undefined"!=typeof g_saveBodyIdStyle&&null!=g_saveBodyIdStyle&&(jm("#g_body").attr("style",g_saveBodyIdStyle),g_saveBodyIdStyle=null)},Mobi.pbRemoveBodyStyle=function(){g_saveBodyIdStyle=jm("#g_body").attr("style"),jm("#g_body").attr("style","")},Mobi.bindCommImgShow=function(e,t,i){var o={imageScaleMethod:"fitNoUpscale",enableMouseWheel:!1,resetToolbarPosition:!0,loop:!1,captionAndToolbarAutoHideDelay:0,showCountTextLeft:!0,getImageCaption:function(e,t){var i,o;return i=e+" / "+t,(o=document.createElement("div")).className="ps-comm-page",o.appendChild(document.createTextNode(i)),o},getToolbar:function(){return'<div onclick="Mobi.pbSaveBodyStyle()" class="ps-toolbar-close   ps-toolbar-close-style icon-toolbar-close-style"></div>'}},n=window.Code.PhotoSwipe;if(null!=t&&t&&"false"!=t)"undefined"!=typeof g_showCommImgInstance&&"null"!=g_showCommImgInstance?void 0!==g_showCommImgInstance[i]&&"null"!=g_showCommImgInstance[i]?(n.detatch(g_showCommImgInstance[i]),g_showCommImgInstance[i]=null):g_showCommImgInstance[i]={}:(g_showCommImgInstance=[],g_showCommImgInstance[i]={}),setTimeout(function(){g_showCommImgInstance[i]=n.attach(e,o)},1e3);else n.attach(e,o)},Mobi.scrollFadeIn=function(e,t,i){t=document.getElementById(t),e=document.getElementById(e);var o=document.getElementById("g_body"),n=e.clientHeight,a=t&&t.clientHeight,r=!1,s=!1,l=jm(e).parent().hasClass("productDetail_v3");function c(){var t=u();if(1!=i){if(t<a+1){var o=1*t/a;e.style.background="rgba(255,255,255,"+o+")",e.style.borderBottom="",s=!0}t>a&&s&&(e.style.background="rgba(255,255,255,0.99)",e.style.borderBottom="1px solid #ddd",s=!1)}}if(document.addEventListener("touchstart",function(e){c(),p()},!1),document.addEventListener("touchmove",function(e){c(),p()},!1),document.addEventListener("touchend",function(e){c(),p()},!1),document.addEventListener("touchcancel",function(e){c(),p()},!1),document.addEventListener("scroll",function(){c(),p()},!1),c(),productTabUl=document.getElementById("productTabUl"),null!=productTabUl&&null!=productTabUl){var d=productTabUl.clientHeight,m=productTabUl.offsetTop;Mobi.productTabUlScroll=p}function p(){var t=u();t>m-n&&!r&&(jm(productTabUl).addClass("tabUl_fix"),r=!0,l&&(e.style.borderBottom=""),0!=jm(".productVideoMask").length&&Mobi.videoQuit()),t+d<m&&r&&(jm(productTabUl).removeClass("tabUl_fix"),r=!1,l&&(e.style.borderBottom="1px solid #ddd"))}function u(){var e=o;return document.documentElement&&document.documentElement.scrollTop>0&&(e=document.documentElement),e.scrollTop}},Mobi.salePromotionDetail={salePromotionParam:"",showType:"2",styleType:"1",saleCountTimeInterval:{},showSaleTime:!1,showSaleDlMore:!1,saleReSalePriceHtml:""},Mobi.getSalePdIdList=function(e){if(null!=e){var t=e.id||0;jm.ajax({url:"ajax/product_h.jsp?cmd=getSalePdIdList&saleId="+t,success:function(e){var t=jm.parseJSON(e);t.success&&(Mobi.isFinishGetPdIdList=!0,t.pdIdList&&(Mobi.salePdIdList=t.pdIdList))}})}},Mobi.initSalePromotion=function(e,t,i){Mobi.salePromotionDetail.salePromotionParam=e,Mobi.salePromotionDetail.styleType=t,Mobi.salePromotionDetail.saleReSalePriceHtml=i;var o={triggerId:"J_salePromotion",pageBg:!0,pageHtml:Mobi.salePromotionDetailHtml(e),direction:"bottom",closeWebPage:"#salePromotionPanel,#closesalePromotionPanel",callback:function(){jm(".saleContainer").bind("click mousedown touchstart",function(e){e.stopPropagation()}),jm(".toCombine").bind("click",function(e){window.location.href="pr.jsp?salePdIdList="+jm.toJSON(Mobi.salePdIdList),e.stopPropagation()})}};Mobi.initWebPage(o),Mobi.salePdIdList=[],Mobi.getSalePdIdList(e),Mobi.isFinishGetPdIdList=!1},Mobi.salePromotionDetailHtml=function(e){var t="",i="",o=e.other.ruleData||{},n=e.saleType,a=o.d,r=o.s,s=!1,l=[];if(2==n){1==r?(t="单品满减",i="单独购满{0}减{1}"):(s=!0,t="组合满减",i="组合购满{0}减{1}"),l.push("<div id='salePromotionPanel' class='salePromotionPanel'>"),l.push("<div class='saleContainer'>"),l.push("\t<div class='saleTitle'>促销</div>");for(var c=0;c<a.length;c++){l.push("\t<div class='saleContentItem'>"),l.push("\t<div class='saleInfo'><span class='saleInfoBg g_bgColor g_main_bgColor_v3'></span><span class='saleInfoTip g_mainColor g_main_color_v3'>"+t+"</span></div>");var d=jm.format(i,a[c].m,a[c].n);l.push("\t<span class='productParamterWords'>"+d),s&&l.push("，<span class='toCombine g_mainColor g_main_color_v3'>去凑单</span></span>"),l.push("\t</div>")}Fai.top._openThemeV3&&l.push("<div id='closesalePromotionPanel' class='productDetailClose icon-Off g_iconMiddle icon-defaultColor'></div>"),l.push("</div>"),l.push("</div>")}return l.join("")},Mobi.oldShowSalePromotionDl=function(e,t,i){if(void 0!==e&&null!=e&&""!=e){Mobi.salePromotionDetail.salePromotionParam=e;var o=[];if("1"==e.saleType){var n="";if(void 0===e.other.ruleData.d.length)return;var a=parseFloat(e.other.ruleData.d[0].m);"1"==e.other.ruleData.s?(n=2052==Fai.top._lcid||1028==Fai.top._lcid?jm.format(LS.js_salePromotionDisCount,a):jm.format(LS.js_salePromotionDisCount,10*(10-a)),t=parseFloat(t)*a/10):(n=jm.format(LS.salePromotionLapse,a),t=parseFloat(t)-a),t<0&&(t=0),o.push("<table cellpadding='0' cellspacing='0'>"),o.push("<tr>"),o.push("<td>"+LS.js_promotionPrice+LS.colon+"</td>"),o.push("</td>"),o.push("<td class='J_salePriceSet'>"+i+t.toFixed(2)+"</td>"),o.push("</td>"),o.push("<td class='oldTbTd1'>"),o.push("<div class='trangle'>"),o.push("</div>"),o.push("</td>"),o.push("<td class='oldTbTD2'>"),o.push("<div class='rect'>"),o.push(n),o.push("</div>"),o.push("</td>"),o.push("</tr>"),o.push("</table>")}else{if(void 0===e.other.ruleData.d.length)return;var r=e.other.ruleData.d,s=r.length;o.push("<table cellpadding='0' cellspacing='0'>");for(var l=0;l<s;l++)o.push("<tr>"),0==l?o.push("<td>"+LS.salePromotionName+LS.colon+"</td>"):o.push("<td></td>"),o.push("<td>"),o.push("<div class='oldSaleTypeBg'>"),o.push(LS.salePromotionOnlyFullReduce),o.push("</div>"),o.push("</td>"),o.push("<td>"),o.push("<div class='oldShowDelColor'>"),o.push("&nbsp;&nbsp;"+jm.format(LS.js_salePromotionFullReduce,r[l].m,r[l].n)),o.push("</div>"),o.push("</td>"),o.push("</tr>");o.push("</table>")}jm(".J_showSaleDetail").html(o.join(""))}},Mobi.showNewMarketPrice=function(e){1==e&&(jm(".marketPriceNew").css("display","block"),jm(".marketMemberPrice").css("display","none"))},Mobi.fixMallThemePtInfo=function(){(Fai.top._templateFrameId>=2e3||Fai.top._templateFrameId<3e3)&&jm(".proCommProperty.productPrice").css("min-height","1.6rem")},Mobi.showSalePromotionDl=function(e,t,i){var o="position:relative;";if(1==Mobi.salePromotionDetail.showSaleTime&&(o+="margin-top:0.4rem;"),"2"==Mobi.salePromotionDetail.showType&&void 0!==e&&null!=e&&""!=e){var n=jm(".J_saleMallPrice").css("color");void 0!==n&&null!=n&&""!=n||(n="#FC4643");var a=[];if("1"==e.saleType){null!=i&&""!=i&&jm(".J_saleMallPrice").html(i);var r="";jm(".productNewDetailPanel").hasClass("newCountDownProductName")||(jm(".J_salePrePrice").css("display","inline-block"),jm(".marketPriceNew").css("display","none"));var s=e.other.ruleData.d[0].m;r="1"==e.other.ruleData.s?2052==Fai.top._lcid||1028==Fai.top._lcid?jm.format(LS.js_salePromotionDisCount,s):jm.format(LS.js_salePromotionDisCount,10*(10-s)):jm.format(LS.salePromotionLapse,s),a.push("<div class='J_salePromotionRemove saleProDetail' style='"+o+"'><table cellpadding='0' cellspacing='0'>"),a.push("<tr>"),a.push("<td style='color:#323232;'>"),a.push(LS.salePromotionName+LS.colon),a.push("</td>"),a.push("<td>"),a.push("<div  style='border:1px solid;' class='saleTypeBg g_mainColor g_main_color_v3'>"),a.push(LS.salePromotionReduce),a.push("</div>"),a.push("</td>"),a.push("<td class='g_mainColor g_main_color_v3'"),a.push("&nbsp;&nbsp;"+r),a.push("</td>"),a.push("</tr>"),a.push("</table><div>"),jm(".J_saleInfoDl").html(a.join(""))}else{if(void 0===e.other.ruleData.d.length)return;var l=e.other.ruleData.d,c=l.length;r="";if(c>1?a.push("<div  onclick='Mobi.showSaleDlMore("+c+")' class='J_salePromotionRemove saleProDetail' style='"+o+"'>"):a.push("<div class='J_salePromotionRemove saleProDetail' style='"+o+"'>"),a.push("<table cellpadding='0' cellspacing='0'><tr>"),a.push("<td style='color:#323232;'>"),a.push(LS.salePromotionName+LS.colon),a.push("</td>"),a.push("<td>"),a.push("<div class='J_saleFullBgShow saleTypeBg g_mainColor g_main_color_v3' >"),a.push(LS.salePromotionOnlyFullReduce),a.push("</div>"),a.push("</td>"),a.push("<td class='g_mainColor g_main_color_v3'>"),1==c&&(r=jm.format(LS.js_salePromotionFullReduce,l[0].m,l[0].n),a.push("&nbsp;&nbsp;"+r)),a.push("</td>"),a.push("</tr></table>"),c>1){a.push("<div class='saleProShowMore'><span class='J_saleShowMoreIcon faisco-icons-downward1'></span></div>");for(var d=0;d<c;d++)a.push("<div class='J_saleFullProDetail saleProDetail' style='display:none;'>"),a.push("<table cellpadding='0' cellspacing='0'><tr>"),a.push("<td>"),a.push("<div class='J_saleFullBgShow saleTypeBg g_mainColor g_main_color_v3' >"),a.push(LS.salePromotionOnlyFullReduce),a.push("</div>"),a.push("</td>"),a.push("<td class='g_mainColor g_main_color_v3'>"),a.push("&nbsp;&nbsp;"+jm.format(LS.js_salePromotionFullReduce,l[d].m,l[d].n)),a.push("</td>"),a.push("</tr></table>"),a.push("</div>")}a.push("</div>"),jm(".J_saleInfoDl").html(a.join(""))}}},Mobi.showSaleDlMore=function(e){void 0!==e&&(1==Mobi.salePromotionDetail.showSaleDlMore?(Mobi.salePromotionDetail.showSaleDlMore=!1,jm(".J_saleShowMoreIcon").addClass("faisco-icons-downward1"),jm(".J_saleShowMoreIcon").removeClass("faisco-icons-upward1"),jm(".J_saleFullProDetail").css("display","none")):(Mobi.salePromotionDetail.showSaleDlMore=!0,jm(".J_saleShowMoreIcon").addClass("faisco-icons-upward1"),jm(".J_saleShowMoreIcon").removeClass("faisco-icons-downward1"),jm(".J_saleFullProDetail").css("display","block")))},Mobi.setPdMallPriceHeight=function(e){var t=jm(".J_saleMallPrice").css("height");t=t.indexOf("rem")<0?t.indexOf("px")<0?parseFloat(t)/_htmlFontSize:parseFloat(t.substring(0,t.length-2))/_htmlFontSize:parseFloat(t.substring(0,t.length-3)),t+=2.3*parseFloat(e),jm(".J_salePrePrice").css("height",t+"rem"),jm(".J_salePrePrice").css("line-height",t+"rem")},Mobi.showSaleTimeType=function(e,t,i,o){if(i){if(1014<Fai.top._templateFrameId&&Fai.top._templateFrameId<2e3&&jm(".collectText").length>0&&0==jm(".J_showCountDownClass").length&&jm(".pd3ProductNameContent").css("padding-bottom","0.7rem"),t||1==o)return jm(".isShowOldSaleCountDown").show(),void jm(".isShowNewSaleCountDown").hide();e?(jm(".isShowOldSaleCountDown").hide(),jm(".isShowNewSaleCountDown").show()):(jm(".isShowOldSaleCountDown").show(),jm(".isShowNewSaleCountDown").hide())}},Mobi.showSaleTimeCountDown=function(e,t,i,o,n,a,r){jm.ajax({url:"ajax/mall_h.jsp?cmd=getSystemTime",success:function(n){if((n=jm.parseJSON(n)).success){var s=n.now||0,l=0,c=0,d=0;e-(s/=1e3)>0?(l=e-s,c=t-e,d=1):t-s>0&&(l=e-s,c=t-s,d=2);var m="",p=LS.salePromotionBegin,u=LS.salePromotionEnd,h=0;Mobi.salePromotionDetail.showType=d,Mobi.salePromotionDetail.showSaleTime=!0,1==d?(m=p,h=l,jm(".J_salePromotionNewMessage").html("距活动开始仅剩")):(m=u,h=c,jm(".J_salePromotionNewMessage").html(LS.salePromotionNewEndMessage)),(a||Fai.top._manageMode)&&1!=r&&(jm(".J_salePromotionDay").html(LS.salePromotionDay),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html("")),window.onload=function(){jm(".showSaleTimeImg").css("display","block")},clearInterval(Mobi.salePromotionDetail.saleCountTimeInterval),Mobi.salePromotionDetail.saleCountTimeInterval=setInterval(function(){var e=parseInt(h/86400),t=parseInt(h/3600)-24*e,n=parseInt(h/60)-24*e*60-60*t,s=parseInt(h%60);if(2052!=Fai.top._lcid&&1028!=Fai.top._lcid&&(t<10&&(t="0"+t),n<10&&(n="0"+n),s<10&&(s="0"+s)),--h<=0&&Fai.top.location.reload(),1==d&&(a||Fai.top._manageMode)&&1!=r&&jm(".J_showCountDownClass").html("&nbsp;&nbsp;"+jm.format(m,e,t,n,s)),1!=i||a&&!Fai.top._manageMode&&1!=r||jm(".showSaleTimeClass").html("&nbsp;&nbsp;"+jm.format(m,e,t,n,s)),1==i&&(a||Fai.top._manageMode)&&1!=r&&(e<10&&(e="0"+e),t<10&&(t="0"+t),n<10&&(n="0"+n),s<10&&(s="0"+s),"00"==e?(jm(".J_salePromotionDay").css("display","none"),jm(".J_salePromotionDayNum").css("display","none")):jm(".J_salePromotionDayNum").html(e),jm(".J_salePromotionHourNum").html(t),jm(".J_salePromotionMinuteNum").html(n),jm(".J_salePromotionSecondNum").html(s)),h<0)if(1==d)h=c,m=u,d=2,Mobi.salePromotionDetail.showType=2,Mobi.showSalePromotionDl(Mobi.salePromotionDetail.salePromotionParam,Mobi.salePromotionDetail.styleType,Mobi.salePromotionDetail.saleReSalePriceHtml);else{if(clearInterval(Mobi.salePromotionDetail.saleCountTimeInterval),Mobi.salePromotionDetail.showType=1,"1"==Mobi.salePromotionDetail.salePromotionParam.saleType){var l=jm(".J_salePrePrice").html();null!=l&&jm(".J_saleMallPrice").html(l)}jm(".J_salePromotionRemove").remove(),1==o?jm(".productPrice").css("height","3.75rem"):jm(".productPrice").css("height","2.75rem")}},1e3)}}})},Mobi.showGbTimeCountDown=function(e,t,i,o){jm.ajax({url:"ajax/mall_h.jsp?cmd=getSystemTime",success:function(n){if((n=jm.parseJSON(n)).success){var a=n.now||0,r=0,s=0,l=0;e-(a/=1e3)>0?(r=e-a,s=t-e,l=1):t-a>0&&(r=e-a,s=t-a,l=2);var c="",d=0;1==l?(c="距拼团活动开始仅剩：{0}天{1}小时{2}分{3}秒",d=r):(c="距拼团活动结束仅剩：{0}天{1}小时{2}分{3}秒",d=s,jm(".J_salePromotionNewMessage").html(LS.salePromotionNewEndMessage)),(i||Fai.top._manageMode)&&1!=o&&(jm(".J_salePromotionDay").html(LS.salePromotionDay),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html("")),window.onload=function(){jm(".showSaleTimeImg").css("display","block")},clearInterval(Mobi.gbCountTimeInterval),Mobi.gbCountTimeInterval=setInterval(function(){var e=parseInt(d/86400),t=parseInt(d/3600)-24*e,n=parseInt(d/60)-24*e*60-60*t,a=parseInt(d%60);2052!=Fai.top._lcid&&1028!=Fai.top._lcid&&(t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a)),--d<=0&&Fai.top.location.reload(),1==l&&(i||Fai.top._manageMode)&&1!=o&&jm(".J_showCountDownClass").html("&nbsp;&nbsp;"+jm.format(c,e,t,n,a)),i&&!Fai.top._manageMode&&1!=o||jm(".showSaleTimeClass").html("&nbsp;&nbsp;"+jm.format(c,e,t,n,a)),(i||Fai.top._manageMode)&&1!=o&&(e<10&&(e="0"+e),t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),jm(".J_salePromotionDayNum").html(e),jm(".J_salePromotionHourNum").html(t),jm(".J_salePromotionMinuteNum").html(n),jm(".J_salePromotionSecondNum").html(a)),d<0&&clearInterval(Mobi.gbCountTimeInterval)},1e3)}}})},Mobi.addProductScreenFilterModel=function(e,t){var i=e;Mobi.initWebPage({triggerId:"screenButton",panelId:"productScreenFilterPanel",pageBg:!0,returnSeltFun:!0,callback:function(){var e,o=t.sortName,n=t.desc,a=t.groupId,r=t.psId;e=t.keyword?t.keyword:"";var s=t.mid,l=t.psc,c={};c.sortName=o,c.pdListId=i,c.desc=n,c.groupID=a,c.searchword=e,c.mid=s,urlStr="ajax/product_h.jsp?cmd=getScreenPrInfo",jm.ajax({type:"POST",url:urlStr,data:c,success:function(t){var i=jm.parseJSON(t);if(i.success){var s=jm.toJSON(i.list);Mobi.initScreenFilter(s,l,a,n,o,e,r)}}})},direction:"right",pageHead:"筛选",closeWebPage:".screenFilterIcon"})},Mobi.initScreenFilter=function(e,t,i,o,n,a,r){var s=jm.parseJSON(e),l=jm.parseJSON(t),c=LS.productScreenAll;if(l)for(var d=l.lid,m=s.length-1;m>=0;m--){var p=s[m];if(p.lid==d){c=p.libName;break}}var u=[];if(s.length>1)if(u.push("<div class='productScreenFilterLib' id='libTab'>"),u.push("<div class='productScreenLibLeft'>"+LS.productScreenSort+"</div>"),u.push("<div class='g_mainColor g_main_color_v3 productScreenLibRight'>"),u.push("<div class='icon-libNextMore libNextMoreIcon'></div>"),u.push("<div class='productScreenLibName' id='productScreenLibName'>"+c+"</div>"),u.push("</div>"),u.push("</div>"),l){d=l.lid;u.push("<input type='hidden' id='lidValue' value='"+d+"'/>")}else u.push("<input type='hidden' id='lidValue' value='-1'/>");else 1==s.length?u.push("<input type='hidden' id='lidValue' value='"+s[0].lid+"'/>"):u.push("<input type='hidden' id='lidValue' value='-1'/>");var h=u.join("");jm("#baseScreenFilterContenter").append(h),jm("#backContent").show();var f=[];f.push("<div class='productScreenFilterBottom'>"),f.push("<div class='g_bgColor g_main_bgColor_v3 productScreenFilterButton' id='screenCommit'>"+LS.productScreenCommit+"</div>"),f.push("</div>"),h=f.join(""),jm("#basePanel").append(h),s.length>1&&Mobi.changeScreenFilterLib(e),Mobi.initScreenFilterModel(e,l),Mobi.screenCommitData(e,i,o,n,a,r)},Mobi.setPrImageMaxHeight=function(e,t,i){var o=(t=jm("#module"+e).find(t)).find("img"),n=0,a=0;o.each(function(){(a=parseInt(jm(this).height()))>n&&(n=a)}),0!=n&&(i?t.css("height","100%"):t.css("height",n/_htmlFontSize+"rem"))},Mobi.changeScreenFilterLib=function(e){var t=jm.parseJSON(e);jm("#libTab").bind("click",function(){jm("#screenCommit").hide(),jm("#baseScreenFilterContenter").hide();var e=jm("#lidValue").val(),i=[];i.push("<div class='productScreenFilterOptionContenter' id='optionSelectorLib'>"),i.push("<div class='productScreenFilterTitle'>"),i.push("<div id='backLib' class='icon-screenFilterRt screenFilterRtIcon'></div>"),i.push("<div class='productScreenFilterTi'>"+LS.productScreenSort+"</div>"),i.push("</div>"),i.push("<div class='productScreenFilterContent'>"),e<0?i.push("<div class='productScreenFilterLineCheck' id='propOptionLibAll' onclick='Mobi.changeLibValue(-1,"+jm.encodeHtml(jm.toJSON(t))+")'>"):i.push("<div class='productScreenFilterLine' id='propOptionLibAll' onclick='Mobi.changeLibValue(-1,"+jm.encodeHtml(jm.toJSON(t))+")'>"),i.push("<div class='productScreenFilterLineLf'>"),i.push("<span>"+LS.productScreenAll+"</span>"),i.push("</div>"),e<0&&(i.push("<div class='entry-trangle'>"),i.push("</div>"),i.push("<div class='icon-check checkIcon'>"),i.push("</div>")),i.push("</div>"),i.push("<div class='g_separator'></div>");for(var o=0;o<t.length;o++){var n=t[o].lid,a=t[o].libName;n==e?i.push("<div class='productScreenFilterLineCheck' id='propOptionLib'  onclick='Mobi.changeLibValue("+t[o].lid+","+jm.encodeHtml(jm.toJSON(t))+")'>"):i.push("<div class='productScreenFilterLine' id='propOptionLib'  onclick='Mobi.changeLibValue("+t[o].lid+","+jm.encodeHtml(jm.toJSON(t))+")'>"),i.push("<div class='productScreenFilterLineLf'>"),i.push("<span>"+jm.encodeHtml(a)+"</span>"),i.push("</div>"),n==e&&(i.push("<div class='entry-trangle'>"),i.push("</div>"),i.push("<div class='icon-check checkIcon'>"),i.push("</div>")),i.push("</div>"),i.push("<div class='g_separator'></div>")}i.push("</div>"),i.push("</div>");var r=i.join("");jm("#basePanel").append(r),jm("#backLib").on("click",function(){jm("#optionSelectorLib").remove(),jm("#screenCommit").show(),jm("#baseScreenFilterContenter").show()})})},Mobi.changeLibValue=function(e,t){if(e>0){for(var i=t.length-1;i>=0;i--)if(t[i].lid==e){jm(".productScreenLibName").html(t[i].libName),jm("#lidValue").val(e);break}}else jm(".productScreenLibName").html(LS.productScreenAll),jm("#lidValue").val(-1);jm("#optionSelectorLib").remove(),jm("#screenCommit").show(),Mobi.initScreenFilterModel(jm.toJSON(t)),jm("#baseScreenFilterContenter").show()},Mobi.initScreenFilterModel=function(e,t){jm("#productScreenFilterOptions").length>0&&jm("#productScreenFilterOptions").remove(),jm(".noScreenProp").length>0&&jm(".noScreenProp").remove();var i=jm("#lidValue").val();if(e&&!(i<0)){var o,n=jm.parseJSON(e),a=[];t&&(o=t.prop,i=t.lid);for(var r=0;r<n.length;r++)if(n[r].lid==i){var s=n[r].propList;a.push("<div class='productScreenFilterContent' id='productScreenFilterOptions'>");for(var l=0;l<s.length;l++){var c=LS.productScreenAll;if(o)for(var d=0;d<o.length;d++){var m=s[l].id;if(m==o[d].k)if(c=o[d].v,11==m||12==m||13==m)(c=s[l].currency+(c=(c=(c=c.replace("[","")).replace(",","~")).replace("]",""))).indexOf("~")<0&&(c+="~")}a.push("<div class='productScreenFilterLine' id='screenOption"+l+"'>"),a.push("<div class='productScreenFilterLineLf'>"),a.push("<span>"+s[l].name+"</span>"),a.push("</div>"),a.push("<div class='productScreenFilterLineRt'>"),a.push("<div class='icon-nextMore nextMoreIcon'></div>"),a.push("<span class='productScreenFilterOption' id='screenOptionContent"+l+"'>"+c+"</span>"),a.push("</div>"),a.push("</div>"),a.push("<div class='g_separator'></div>")}a.push("</div>");break}var p=a.join("");jm("#baseScreenFilterContenter").append(p),jm.each(n,function(e,t){if(t.lid==i)for(var o=t.propList,n=0;n<o.length;n++)Mobi.changeScreenFilterModel(n,o[n])})}},Mobi.changeScreenFilterModel=function(e,t){var i=t.name,o=t.option,n=t.currency;jm("#screenOption"+e).bind("click",function(){jm("#baseScreenFilterContenter").hide();var t=jm("#screenOptionContent"+e).html();t=jm.decodeHtml(t),jm("#screenCommit").hide();var a=[];a.push("<div class='productScreenFilterOptionContenter' id='optionSelector"+e+"'>"),a.push("<div class='productScreenFilterTitle'>"),a.push("<div id='back' class='icon-screenFilterRt screenFilterRtIcon'></div>"),a.push("<div class='productScreenFilterTi'>"+i+"</div>"),a.push("</div>"),a.push("<div class='productScreenFilterContent'>"),t==LS.productScreenAll?a.push("<div class='productScreenFilterLineCheck' id='propOptionLineAll' onclick='Mobi.changePropValue(\"All\","+e+")'>"):a.push("<div class='productScreenFilterLine' id='propOptionLineAll' onclick='Mobi.changePropValue(\"All\","+e+")'>"),a.push("<div class='productScreenFilterLineLfLong'>"),a.push("<span id='optionAll'>"+LS.productScreenAll+"</span>"),a.push("</div>"),t==LS.productScreenAll&&(a.push("<div class='entry-trangle'>"),a.push("</div>"),a.push("<div class='icon-check checkIcon'>"),a.push("</div>")),a.push("</div>"),a.push("<div class='g_separator'></div>");for(var r=0;r<o.length;r++){var s=o[r];s.indexOf("[")>-1&&s.indexOf("]")>-1&&(s=(s=(s=s.replace("[","")).replace(",","~")).replace("]",""),r==o.length-1&&(s+="~")),t==(s=n+s)?a.push("<div class='productScreenFilterLineCheck' id='propOptionLine"+r+"' onclick='Mobi.changePropValue(\""+r+'",'+e+")'>"):a.push("<div class='productScreenFilterLine' id='propOptionLine"+r+"' onclick='Mobi.changePropValue(\""+r+'",'+e+")'>"),a.push("<div class='productScreenFilterLineLfLong'>"),a.push("<span id='option"+r+"'>"+s+"</span>"),a.push("</div>"),t==s&&(a.push("<div class='entry-trangle'>"),a.push("</div>"),a.push("<div class='icon-check checkIcon'>"),a.push("</div>")),a.push("</div>"),a.push("<div class='g_separator'></div>")}a.push("</div>"),a.push("</div>");var l=a.join("");jm("#basePanel").append(l),jm("#back").on("click",function(){jm("#optionSelector"+e).remove(),jm("#screenCommit").show(),jm("#baseScreenFilterContenter").show()})})},Mobi.changePropValue=function(e,t){jm("#screenOptionContent"+t).html(jm("#option"+e).html()),jm("#optionSelector"+t).remove(),jm("#screenCommit").show(),jm("#baseScreenFilterContenter").show()},Mobi.screenCommitData=function(e,t,i,o,n,a){var r=jm.parseJSON(e);jm("#screenCommit").bind("click",function(){var e,s={};r.length>1?jm.each(r,function(t,i){var o=jm("#productScreenLibName").html();(o=jm.decodeHtml(o))==i.libName&&(s.lid=i.lid,e=i)}):(s.lid=r[0].lid,e=r[0]);var l="?",c="pr.jsp";if(t&&(c+=l+"groupId="+t,l="&"),-1!=a&&(c+=l+"psId="+a,l="&"),i&&(c+=l+"desc="+i,l="&"),o&&(c+=l+"sortName="+o,l="&"),n&&(c+=l+"searchword="+n,l="&"),e){for(var d=[],m=e.propList,p=0;p<m.length;p++){var u=jm("#screenOptionContent"+p).html();if(u!=LS.productScreenAll){var h={},f=m[p].id;if(h.k=f,11==f||12==f||13==f){var g=m[p].currency;g&&(u=u.replace(g,"")),u="["+(u="~"==u.charAt(u.length-1)?u.replace("~",""):u.replace("~",","))+"]"}else u=jm.decodeHtml(u);h.v=u,d.push(h)}}s.prop=d,c+=l+"psc="+jm.encodeUrl(jm.toJSON(s))}document.location.href=c})},Mobi.showProductCacheList=[],Mobi.showMallCartScreen=function(e,t,i,o,n){var a=jm(".productMallOptionPanel");jm("#module"+e+" .J_fk-mallCart").off("click.cart").bind("click.cart",function(){var t=n&&n.replace?n.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/g,">").replace(/&#92;/gi,"\\").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/\<br\/\>/gi,"\n").replace(/&amp;/gi,"&"):n;jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent").append(t),a=jm(".productMallOptionPanel");var o=jm(this).attr("id")||"",l=!1,c={},d="",m="",p={},u=!1,h=!1;return jm.each(Mobi.showProductCacheList,function(e,t){if(t.id==o)return l=!0,c=t.pinfo,d=t.showOptionHtml,m=t.script,p=t.otherHtml,u=t.isPtLimitBuy,h=t.isImLimitBuy,t.isEarnestSale,!1}),r(),jm("#productMallOptionPanel_mcs_"+e).find(".productMallOptionPanel").hide(),l?s(c,d,m,p,u,h,h):jm.ajax({type:"POST",url:"ajax/product_h.jsp?cmd=getProductInfoAndDom",data:{pid:o,moduleId:e,mallShoppingOptions:i},error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);if(t.success){var i=t.pinfo,n=t.showOptionHtml,a=t.script,r=t.otherHtml,l=t.isPtLimitBuy,c=t.isImLimitBuy,d=t.isEarnestSale;Mobi.showProductCacheList.push({id:o,pinfo:i,showOptionHtml:n,script:a,otherHtml:r,isPtLimitBuy:l,isImLimitBuy:c,isEarnestSale:d}),s(i,n,a,r,l,c,d)}}}),!1});var r=Mobi.initWebPage({triggerId:"f"+e,panelId:"productMallOptionPanel_mcs_"+e,pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#productMallOptionPanel_mcs_"+e+" .productDetailClose.icon-Off",closeCallBack:function(){jm(".productMallOptionPanel .productMallOptionContentPanel").removeClass("mallThemeProductContentPanel"),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .productMallOptionHead").remove(),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .mallOptionAndNumBox").remove(),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .productMallShop").remove(),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .separatorLine").remove()}});function s(n,r,s,l,c,d,m){a=jm(".productMallOptionPanel");var p=n.id;a.attr("id","productMallOptionPanel"+p);var u=l.mallAmountHtml||"",h=l.mallWeightHtml||"",f=l.mallPriceHtml||"",g=l.productMallShopHtml||"",v=n.mallPrice.toFixed(2),b=v,j="",_="";if(n.openPriceCalendar?(a.addClass("withPriceCalendar"),a.find(".productMallOptionHead .productMallOptionImage").hide(),a.find(".productMallOptionHead .productDetail").hide(),a.find(".productMallOptionHead").append("<div class='indicator'>请选择</div>")):a.removeClass("withPriceCalendar"),i){var M=v,y=v,S=(n.optionsAmountList||{}).d||[];jm.each(S,function(e,t){var i=t,o=i.oPrice;if(null!=o&&""!=o&&0!=(i.flag||0)){var n=o||0;M=M<n?M:n,y=y>n?y:n,M=parseFloat(M)||0,y=parseFloat(y)||0,M==y?v=M.toFixed(2):(v=M.toFixed(2)+"~"+y.toFixed(2),j=y.toFixed(2),_=M.toFixed(2))}})}if(""!=_||""!=j){var I=parseFloat(j)*o*.01;b=parseFloat(_)*o*.01+"~"+I}jm("#choiceCurrency").text(t),jm("#mallPrice").text(b),Fai.top._openThemeV3?a.find(".mallOptionImg").css("background-image","url("+n.picPath+")"):a.find(".mallOptionImg").attr("src",n.picPath),a.find(".productMallAmount").html(u),a.find(".productMallWeight").html(h),m||a.find(".productDetailName").html("<div class='productName g_middleColor'><div class='productNameWrap' style='word-break:break-all;white-space: normal;overflow:hidden;text-overflow:ellipsis;'></div></div>"+f),a.find(".productNameWrap").text(n.name),a.find(".J-op-box").html(r),a.find(".productMallShop").html(g);var w=c?"_pt":d?"_im":"";jm("#g_increase"+w).unbind("click.ic").bind("click.ic",function(){Mobi.decrease2(p,w)}),jm("#g_decrease"+w).unbind("click.dc").bind("click.dc",function(){Mobi.increase2(p,w)});var C=document.createElement("script");C.type="text/javascript",C.innerHTML=s,C.id="opScript_"+e,document.getElementById("productMallOptionPanel_mcs_"+e).appendChild(C),jm("#opScript_"+e).remove(),c?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_pt").show(),jm(".J_productNumberContent_pt").show()):(jm("#limitAmountDiv_pt").hide(),jm(".J_productNumberContent_pt").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()),d?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_im").show(),jm(".J_productNumberContent_im").show()):(jm("#limitAmountDiv_im").hide(),jm(".J_productNumberContent_im").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()),jm("#productMallOptionPanel_mcs_"+e+" #productBuy").unbind("click.msc").bind("click.msc",function(){Mobi.mallBuy(p,0,1,e)}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmediatelyBug").unbind("click.msc").bind("click.msc",function(){Mobi.mallBuy(p,1,1,e)}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeSecKill").unbind("click.msc").bind("click.msc",function(){var t=parseInt(jm(this).attr("secKillId")||0);Mobi.mallBuy(p,1,null,e,null,null,{isSecKill:!0,secKillId:t})}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeGroupBuy").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("groupBuyId")||0);Mobi.mallBuy(p,1,null,null,null,null,{isGroupBuy:!0,groupBuyId:e,groupBuyDetailId:0})}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeCutPrice").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("cutPriceId")||0);Mobi.cutPrice(e,p)}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeIntegralMall").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("integralMallId")||0);Mobi.mallBuy(p,1,null,null,null,null,{isIntegralMall:!0,integralMallId:e})}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeEarnestSale").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("earnestSaleId")||0);Mobi.mallBuy(p,1,null,null,null,null,{isEarnestSale:!0,earnestSaleId:e})}),jm("#productMallOptionPanel_mcs_"+e).find(".productMallOptionPanel").show(),(Fai.top._templateFrameId>=2e3||Fai.top._templateFrameId<3e3)&&jm("#mallPrice").css({height:"",lineHeight:""}),jm("#productMallOptionPanel_mcs_"+e).find(".mallOptionImg").click(function(){var t=jm(this).attr("src");jm("#module"+e).find("#J_acct_pic").attr("src",t).click()});var P=document.createElement("script");P.type="text/javascript",P.innerHTML='jm(window).bind("pageshow", function(){jm("#productNum'+w+'").change();});',P.id="opScript2_"+e,document.getElementById("productMallOptionPanel_mcs_"+e).appendChild(P)}},Mobi.showMallCart=function(e,t){jm("#module"+t+" .J_fk-mallCart").bind("click",function(){return e==jm(this).attr("id")&&0!=jm("#module"+t).length&&o(),!1});var i="productMallOptionPanel"+e,o=Mobi.initWebPage({triggerId:"f",panelId:i,pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#"+i+" .productDetailClose.icon-Off",closeCallBack:function(){jm(".productMallOptionPanel .productMallOptionContentPanel").removeClass("mallThemeProductContentPanel")}});jm("#"+i+" #productBuy").bind("click",function(){Mobi.mallBuy(e,0,1,t)}),jm("#"+i+" .J_productImmediatelyBug").bind("click",function(){Mobi.mallBuy(e,1,1,t)})},Mobi.showFooterBox=function(){jm("#webFooterBox").removeClass("webDetailPage"),Fai.top._manageMode&&Fai.top._mobiFooterClose&&jm("#webFooter").hide()},Mobi.bookingPanelClickEvent=function(e,t){jm("#"+e).on("click",function(e){1==t?Mobi.logDog(200332,15):2==t?Mobi.logDog(200332,16):3==t&&Mobi.logDog(200332,17),jm("#bookingPanelTriggle").data("pid",jm(this).attr("_pid")).trigger("click"),e.stopPropagation(),e.preventDefault()})},Mobi.bookingBoxBind=function(e){if(triggerId="bookingPanelTriggle",jm("#"+triggerId).click(function(){e&&Mobi.ing(LS.bookingSubmitFullTips)}),!(e||jm("#productBookingPanel").length>0)){var t=[];t.push("<div class='productBookingPanel' id='productBookingPanel' style='display:none; background-color:white;'>"),t.push("<div class='ShipDetailsHeader webHeaderBg g_main_bgColor_v3'>"),t.push("<span class='g_close icon-gClose'></span><span class='title pageTitle'>"+Fai.top._bookingModuleTitle+"</span>"),t.push("</div>"),t.push("</div>"),jm(t.join("")).insertAfter("#"+triggerId);var i={triggerId:triggerId,panelId:"productBookingPanel",callback:function(){Mobi.showBookingBox()},closeWebPage:"#productBookingPanel .g_close"};Mobi.initWebPage(i)}},Mobi.showBookingBox=function(){var e=[],t={},i={};e.push("pid=0"),e.push("&cmd=getPanelData"),e.push("&_colId="+Fai.top._colId),e.push("&_extId="+Fai.top._extId),jm.ajax({type:"post",cache:!1,url:"ajax/booking_h.jsp?"+e.join(""),error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var o=jm.parseJSON(e);o.success?(i=o.pageData,t=i.moduleInfo,Mobi.bookingBoxInit(i,t)):Mobi.ing("获取数据失败",!1)}})},Mobi.bookingBoxInit=function(e,t){var i=e.bookingOpen,o=e.moduleId;jm("#module"+o).remove();var n=[];if(n.push("<div id='module"+e.moduleId+"'>"),i){var a=t.content.st;n.push("<div class='siteForm fk-siteForm-v "+(1==a?"verticalShowTye":"")+"'>"),n.push("<div id='siteFormItems' class='siteFormItemTable'>\n"),jm.each(e.contentList,function(i,o){if(o.hide)return!0;n.push(Mobi.genBookingInputStr(o,e,t))}),e.validation&&(1==a?(n.push("<div class='siteFormItem siteFormItemTr f-siteFormItemTr'>\n"),n.push("<div class='siteFormItemShowName' width='100%'>"+LS.bookingCode+"</div>\n"),n.push("</div>\n"),n.push("<div class='siteFormItem siteFormValidate siteFormItemTr'>"),n.push("<div class='siteFormItemTd'width='100%' >"),n.push("<input class='g_itext' type='text' placeholder='"+LS.EnterVerificationCode+"' id='M"+o+"siteFormValidateCode' maxlength='4' msg='"+LS.EnterVerificationCode+"' />"),n.push("<img id='M"+o+"FvalidateCodeImg' class='validateCodeImg' onclick=\"Mobi.siteFormValidation('', "+o+")\" src='/validateCode.jsp?vCodeId="+o+"&"+1e3*Math.random()+"'/>"),n.push("<div onclick=\"Mobi.siteFormValidation('', "+o+")\" class='left siteFormValidateUp changeSiteFormValidate'></div>"),n.push("<font class='bookingSubmitItemMust'>*</font>"),n.push("</div>"),n.push("</div>")):(n.push("<div class='siteFormItem siteFormValidate'>"),n.push("<div style='width: 23%;float: left; height:100%;'><div class='siteFormItemShowName'><table style='table-layout:fixed;text-align:right; height:100%;' width='100%' cellpadding='0' cellspacing='0'><tr><td  width='100%'>"+LS.bookingCode+"</td></tr></table></div></div>\n"),n.push("<div style='width: 77%;float: left;'><div class='siteFormItemShowVal'>"),n.push("<input class='g_itext validateInput' type='text' placeholder='"+LS.EnterVerificationCode+"' id='M"+o+"siteFormValidateCode' maxlength='4' msg='"+LS.EnterVerificationCode+"' />"),n.push("<img class='validateCodeImg' id='M"+o+"FvalidateCodeImg' onclick=\"Mobi.siteFormValidation('', "+o+")\" title='换一换' src='/validateCode.jsp?vCodeId="+o+"&"+1e3*Math.random()+"'/>"),n.push("<div onclick=\"Mobi.siteFormValidation('', "+o+")\" class='left changeSiteFormValidate'></div>"),n.push("<font class='bookingSubmitItemMust'>*</font>"),n.push("</div></div>"),n.push("</div>"))),n.push("</div>"),n.push("</div>"),Fai.top._manageMode||n.push("<div id='siteFormMsgM"+e.moduleId+"F-1' class='siteFormMsg g_warning'></div>"),n.push("<div class='siteFormAddButton "+(1==a?"verticalShowTye":"")+"'>\n"),n.push("<div id='M"+e.moduleId+"siteFormAddButton' class='siteFormSend'><input type='button' class='g_button sendIcon g_main_bgColor_v3' value='"+e.buttonName+"' /></div>\n"),n.push("</div>\n")}else{var r=e.bookingClosedTip;Fai.top._manageMode&&(r+="，"+e.pleaseClick+"<a style='color:#333;' href='javascript:window.open(\""+e.bookingEditUrl+"\");'>"+e.setUp+"</a>"),n.push("<div style='color:#333; font-size:0.6rem; text-align:center; padding-top:45%; padding-bottom:45%;'>"+r+"</div>")}n.push("</div>");var s=n.join("");jm("#productBookingPanel").append(s),Fai.top._bookingModuleTitle=t.content.mt,jm("#productBookingPanel .pageTitle").text(Fai.top._bookingModuleTitle),i&&Mobi.bookingSubmitPanleEventInit(e),Fai.top._manageMode&&Mobi.initModuleLayer(o,e.itemList,[],e.canDesign)},Mobi.mobiBookingSubmitAdd=function(e){if(Fai.top._manageMode)alert("当前为管理状态，提交无效。");else{var t=e.moduleId,i=e.moduleInfo,o=e.contentList,n=[],a=o,r=!0,s=(e.Def_LIMIT_INPUT_MAXLENTH,e.Def_LIMIT_TEXTAREA_MAXLEN),l=e.validation,c=jm("#M"+t+"siteFormValidateCode"),d=c.val(),m=[];if(a.length<1)return!1;if(jm.each(a,function(e,i){var o=i.id,a=i.name,l=i.must,c=i.type,d={};d.id=o,d.type=c,d.must=l;var p={o:0,i:0,a:100};if(null!=i.wordLimit&&(p=JSON.parse(i.wordLimit)),0==c){var u=jm.trim(jm("#M"+t+"siteFormInput"+o).val());if(l&&""==u)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(a))),r=!1,!1;if(u.length>p.a&&l)return Mobi.ing(jm.format(LS.siteFormSubmitInputMaxLength,jm.encodeHtml(a),p.a)),r=!1,!1;if(u.length<p.i&&l)return Mobi.ing(jm.format(LS.siteFormSubmitInputMinLength,jm.encodeHtml(a),p.i)),r=!1,!1;d.val=u}else if(1==c){var h=jm.trim(jm("#M"+t+"siteFormTextArea"+o).val());if(l&&""==h)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(a))),r=!1,!1;if(h.length>s)return Mobi.ing(jm.format(LS.siteFormSubmitInputMaxLength,jm.encodeHtml(a),s)),r=!1,!1;d.val=h}else if(2==c){var f=document.querySelectorAll("input[name='M"+t+"siteFormRadioR"+o+"']:checked");if(l&&0==f.length)return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(a))),r=!1,!1;f.length>0?d.val=f[0].value:d.val=""}else if(3==c){var g=document.querySelectorAll("input[name='M"+t+"siteFormCheckboxR"+o+"']:checked");if(l&&0==g.length)return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(a))),r=!1,!1;var v=[];for(e=0;e<g.length;e++)v.push(g[e].value);d.val=v.join("\n")}else if(4==c){var b=jm("#M"+t+"siteFormSelect"+o).val();if(l&&(0==b.length||"none"==b))return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(a))),r=!1,!1;d.val=b}else{if(5==c)return!0;if(6==c){u=jm("#Mobi"+t+"Calendar"+o+"Pluginsinput").val();var j=i.dateSetting?i.dateSetting.type:0,_=1==j?jm("#Mobi"+t+"Calendar"+o+"Plugins_endinput").val():"";if(l&&(""==u||1==j&&""==_))return Mobi.ing(jm.format(LS.siteFormSubmitCheckIsEmpty,jm.encodeHtml(a))),r=!1,!1;1==j&&(u=""==jm.trim(u)&&""==jm.trim(_)?"":u+" 至 "+_),d.val=u}else if(7==c){var M=jm("#module"+t).find("#siteForm"+t+"fileName"+o),y={};if(l&&""==M.attr("_tmpFileId"))return Mobi.ing("请选择文件上传"),r=!1,!1;""==M.attr("_tmpFileId")?d.val="":(d.val=M.attr("_fileId"),y.tmpFileName=M.attr("_tmpFileName"),y.fileId=d.val,y.tmpFileId=M.attr("_tmpFileId"),m.push(y))}else if(8==c){var S=jm.trim(jm("#M"+t+"siteFormPhoneInput"+o).val());if(l&&""==S)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(a))),r=!1,!1;if(!jm.isNationMobile(S)&&""!=S)return Mobi.ing(LS.mobileNumRegular),r=!1,!1;d.val=S}else if(9==c){var I=jm.trim(jm("#M"+t+"siteFormMailInput"+o).val());if(l&&""==I)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(a))),r=!1,!1;if(!jm.isEmail(I)&&""!=I)return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,jm.encodeHtml(a))),r=!1,!1;d.val=I}else if(10==c){var w=jm.trim(jm("#M"+t+"siteFormIndentityInput"+o).val());if(l&&""==w)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(a))),r=!1,!1;if(!jm.isCardNo(w)&&""!=w)return Mobi.ing(jm.format(LS.memberSignupUserAddItemCorrect,jm.encodeHtml(a))),r=!1,!1;d.val=w}else if(11==c){var C=jm("#M"+t+"siteFormAddressInput"+o).val();if(l&&""==C)return Mobi.ing(jm.format(LS.siteFormSubmitInputIsEmpty,jm.encodeHtml(a))),r=!1,!1;d.val=C}}n.push(d)}),!r)return!1;if(l&&""==d)return Mobi.ing(jm.format(c.attr("msg"))),r=!1,!1;var p="pid="+jm("#bookingPanelTriggle").data("pid")+"&submitContentList="+jm.encodeUrl(jm.toJSON(n))+"&vCodeId="+t+"&validateCode="+d+"&tmpFileList="+jm.encodeUrl(jm.toJSON(m));Mobi.ing(LS.siteFormSubmitIng,-1),jm.ajax({type:"post",url:"ajax/booking_h.jsp?cmd=add",data:p,error:function(){Mobi.ing(LS.js_systemError)},success:function(o){if((o=jm.parseJSON(o)).success){Mobi.ing(LS.siteFormSubmitOk,1),jm("#M"+t+"siteFormAddButton .sendIcon").attr("disabled",!0);var n=i[e.Def_BookingSubmit_JUMP_URL];setTimeout(function(){1==n.lt?Fai.top.location.href=i.jumpToUrl:Fai.top.location.reload()},2500)}else{if(o.hasFW)return void Mobi.ing(o.msg);-4==o.rt?Mobi.ing(LS.siteFormSubmitCountLimit):-20==o.rt?Mobi.ing(o.msg):-401==o.rt?(Mobi.ing(LS.siteFormSubmitValidateCodeErr),jm("#M"+t+"siteFormValidateCode").val(""),Mobi.siteFormValidation("",t)):-4==o.rt?Mobi.ing(LS.bookingSubmitFullTips):-7==o.rt?Mobi.ing(LS.siteImgFull):-2==o.rt?Mobi.ing(LS.js_argsError):Mobi.ing(LS.js_systemError)}}})}},Mobi.genBookingInputStr=function(e,t,i){var o=t.moduleId,n=e.id,a=e.type,r=e.name,s=e.must,l=e.headline,c=e.input;null==e.placeholder||e.placeholder,dateSettingList=[],isIpad=t.isIpad,showType=i.content.st;var d=c.split("\n"),m="",p="",u=(null==e.openAreaCode||e.openAreaCode,null==e.placeholder?"":e.placeholder),h={o:0,i:0,a:100};if(null!=e.wordLimit&&(h=JSON.parse(e.wordLimit)),a==t.Def_ContentList_Type_SINGLE_LINE)p="<input type='text' class='g_itext' placeholder='"+jm.encodeHtml(u)+"' maxlength='"+h.a+"' name='M"+o+"siteFormInput"+n+"' value='"+jm.encodeHtml(void 0!==t.memberName&&e.sys?t.memberName:"")+"' id='M"+o+"siteFormInput"+n+"' />\n";else if(a==t.Def_ContentList_Type_MULTI_LINE)p="<textArea class='g_textarea fk_formTextareaStyle' placeholder='"+jm.encodeHtml(u)+"' maxlength='"+t.Def_LIMIT_TEXTAREA_MAXLEN+"' id='M"+o+"siteFormTextArea"+n+"' cols='50' rows='3' /></textArea>\n";else if(a==t.Def_ContentList_Type_RADIO){p+="<div class='fk-siteFormItemCheckWrap'>",p+="<div class='fk-siteFormItemCheckList'>";for(var f=0;f<d.length;f++)p+="<div class='siteFormItemCheckItem "+(isIpad?"fk-siteFormItemCheckItem-isIpad":"")+"'><input type='radio' id='M"+o+"siteFormRadio"+n+"I"+f+"' name='M"+o+"siteFormRadioR"+n+"' value='"+jm.encodeHtml(d[f])+"'/><label for='M"+o+"siteFormRadio"+n+"I"+f+"'>"+jm.encodeHtml(d[f])+"</label></div>\n";p+="</div>",p+="</div>"}else if(a==t.Def_ContentList_Type_MULTIPLECHOICE){p+="<div class='fk-siteFormItemCheckWrap'>",p+="<div class='fk-siteFormItemCheckList'>";for(f=0;f<d.length;f++)p+="<div class='siteFormItemCheckItem "+(isIpad?"fk-siteFormItemCheckItem-isIpad":"")+"'><input type='checkbox' id='M"+o+"siteFormCheckbox"+n+"I"+f+"' name='M"+o+"siteFormCheckboxR"+n+"' value='"+jm.encodeHtml(d[f])+"'/><label for='M"+o+"siteFormCheckbox"+n+"I"+f+"'>"+jm.encodeHtml(d[f])+"</label></div>\n";p+="</div>",p+="</div>"}else if(a==t.Def_ContentList_Type_DROPDOWN){p+="<select class='g_selectTag fk-selectStyle' id='M"+t.moduleId+"siteFormSelect"+n+"' name='M"+o+"siteFormSelect"+n+"'>\n",p+="<option value='none'>"+LS.mallPleaseChoose+"</option>";for(f=0;f<d.length;f++)p+="<option value='"+jm.encodeHtml(d[f])+"'>"+jm.encodeHtml(d[f])+"</option>\n";p+="</select>"}else if(a==t.Def_ContentList_Type_DESC)p+="<div class='fk-siteFormTextTip fk-siteFormTextTipMain'>"+jm.encodeHtml(l)+"</div>\n",p+="<div class='fk-siteFormTextTip fk-siteFormTextTipSecond'>"+jm.encodeHtml(c)+"</div>\n";else if(a==t.Def_ContentList_Type_DATE){var g=e.dateSetting,v=1==(null==g.type?0:g.type);p+="<div class='"+(v?"fk-startDateInput":"")+" mobiCalendarPlugins' id='Mobi"+o+"Calendar"+n+"Plugins' val=''></div>\n",v&&(p+="<div class='fk-endDateInput mobiCalendarPlugins' id='Mobi"+o+"Calendar"+n+"Plugins_end' val=''></div>\n")}else if(a==t.Def_ContentList_Type_FILE_UPLOAD){var b=t.isIE;p+="<div class='fk-uploadComponent'>\n",p+="<span id='uploadButton"+t.moduleId+n+"'>\n",p+=b?"<input readonly='readonly' type='button' id='siteForm"+o+"fileUpload"+n+"'  class='uploadify-button' onclick='"+(Fai.top._manageMode?'javascript:alert("当前为管理状态，提交无效。");':"")+"' value='选择文件'/>\n":"<input readonly='readonly' type='button' class='uploadify-button' onclick='"+(Fai.top._manageMode?'javascript:alert("当前为管理状态，提交无效。");':"")+"' value='选择文件'/>\n",p+="<div class='uploadify-text' id='siteForm"+o+"fileName"+n+"' _tmpFileId='' >未选择文件</div>\n",p+="</span>\n",p+="</div>\n"}else a==t.Def_ContentList_Type_PHONE?p="<input onkeyup='(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,\"\");}).call(this)' oninput='if(value.length>11)value=value.slice(0,11);' type='number' class='g_itext' maxlength='11' placeholder='"+jm.encodeHtml(u)+"' id='M"+o+"siteFormPhoneInput"+n+"' value='"+jm.encodeHtml(void 0!==t.memberMobile&&/^[0-9]*$/.test(t.memberMobile)&&e.sys?t.memberMobile:"")+"' />":a==t.Def_ContentList_Type_MAIL?p="<input type='text' class='g_itext' maxlength='20' name='M"+o+"siteFormMailInput"+n+"' id='M"+o+"siteFormMailInput"+n+"' placeholder='"+jm.encodeHtml(u)+"'/>\n":a==t.Def_ContentList_Type_IDENTITY?p="<input type='text' class='g_itext' maxlength='18' name='M"+o+"siteFormIndentityInput"+n+"' id='M"+o+"siteFormIndentityInput"+n+"' placeholder='"+jm.encodeHtml(u)+"'/>\n":a==t.Def_ContentList_Type_ADDRESS&&(p="<input type='text' class='g_itext' placeholder='"+LS.mallPleaseChoose+"' maxlength='20' name='M"+o+"siteFormAddressInput"+n+"' id='M"+o+"siteFormAddressInput"+n+"' />\n");return 1==showType?5!=a?(m+="<div class='siteFormItem siteFormItemTr f-siteFormItemTr' >\n",m+="<div class='siteFormItemShowName' width='100%'>"+jm.encodeHtml(r)+"</div>\n",m+="</div>\n",m+="<div class='siteFormItem siteFormItemTr' id='siteFormItem"+n+"'>\n",m+="<div class='siteFormItemTd' width='100%'>"+p+(s&&7!=a?"<font class='bookingSubmitItemMust'>*</font>":"")+"</div>\n",m+="</div>\n"):(m+="<div class='siteFormItem siteFormItemTr'>\n",m+="<div class='siteFormItemTd'>"+p+"</div>\n",m+="</div>\n"):(m+="<div class='siteFormItem' id='siteFormItem"+n+"'>\n",5!=a?(m+="<div style='width: 23%;float: left; height:100%;'><div class='siteFormItemShowName'><table style='table-layout:fixed;text-align:right; height:100%;' width='100%' cellpadding='0' cellspacing='0'><tr><td style='overflow:hidden; text-overflow:ellipsis; white-space:nowrap; padding-left:0.5rem;' width='100%'>"+jm.encodeHtml(r)+"</td></tr></table></div></div>\n",m+="<div style='width: 77%;float: left;'><div class='siteFormItemShowVal'>"+p+(s?"<font class='bookingSubmitItemMust'>*</font>":"")+"</div></div>\n"):(m+="<div style='width: 23%;float: left; height:100%;'><div class='siteFormItemShowName'><table style='table-layout:fixed;text-align:right; height:100%;' width='100%' cellpadding='0' cellspacing='0'><tr><td style='overflow:hidden; text-overflow:ellipsis; white-space:nowrap; padding-left:0.5rem;' width='100%'>"+jm.encodeHtml(l)+"</td></tr></table></div></div>\n",m+="<div style='width: 77%;float: left; height:100%; font-size:0.6rem;'><div class='siteFormItemShowVal' style='height:100%;'><table style='height:100%;'><tr><td>"+jm.encodeHtml(c)+"</td></tr></table></div></div>\n"),m+="</div>\n",m+="<div class='siteFormItemLink'></div>\n"),m},Mobi.bookingSubmitPanleEventInit=function(e){var t=e.moduleId;jm.each(e.contentList,function(i,o){if(o.hide)return!0;var n=o.id,a=o.type;if(a==e.Def_ContentList_Type_DATE){var r=o.dateSetting;null==r.type||r.type;Mobi.initmobiFormTimeBtn({moduleId:t,siteFormItemId:n,minDate:new Date,yearChangeable:!0,monthChangeable:!0,swipeable:!0,placeholder:LS.mallPleaseChoose,dateSetting:r}),jm("<span class='fk-dateRangeUtil' id='Mobi"+t+"CalendarInput"+n+"'>"+LS.to+"</span>\n").insertAfter("#module"+t+" #siteFormItem"+n+" .fk-dateInputMaskWrap")}else if(a==e.Def_ContentList_Type_FILE_UPLOAD){if(Fai.top._manageMode)return!0;var s=e.isIE;if(fileSize=o.size>e.fileSizeLimit?e.fileSizeLimit:o.size,fileTypeList=[],!o.isAllFile){var l=((o.dftl||"")+(o.cftl||"")).split(" ");jm.each(l,function(e,t){if(t.length>0){var i="*."+t+";";fileTypeList.push(i)}})}s?Mobi.siteFormFileUpload(srcjQuery,size,id,n,t,fileTypeList,srcUpload,"选择文件"):11496535==Fai.top._cid?Mobi.siteFormFileUploadHtml(n,t,fileTypeList,e.isOverLimit,e.updateUrlViewRes,e.mobiVer,fileSize,e.srcjQuery,e.srcUploadjQuery,"www.jihosen.icoc.me",LS.mobiFormSubmitFileUploadReSelect):Mobi.siteFormFileUploadHtml(n,t,fileTypeList,e.isOverLimit,e.updateUrlViewRes,e.mobiVer,fileSize,e.srcjQuery,e.srcUploadjQuery,e.siteMainDomain,LS.mobiFormSubmitFileUploadReSelect)}else if(a==e.Def_ContentList_Type_ADDRESS){var c,d=e.currentLcid;c=2052==d||1028==d?site_cityUtil.getProvince():site_cityUtil.getProvinceEn(),(new MobileSelectArea).init({level:o.openMunicipalCode?3:2,lcid:d,trigger:"#M"+e.moduleId+"siteFormAddressInput"+n,value:jm("#M"+e.moduleId+"siteFormAddressInput"+n).data("value"),data:c,eventName:"click",init:0})}}),jm("#module"+t+" .siteFormSend").bind("click",function(){Mobi.mobiBookingSubmitAdd(e)})},Mobi.fixPorductDetailStyle=function(e){var t=jm("#productNewDetailPanel"+e),i=t.find(".J_pricePlaceHolder"),o="none"==t.find(".mallThemeProductWrap").css("display");i.length>0&&o&&i.addClass("fk-pricePlaceHolder")},Mobi.initCustab=function(e){if(top!=window){var t=jm("#module"+e);buttonWrap=t.find(".tabUiDiv"),buttonWrap.find("li").length<=3||(jm("#productTabUl").css("width","100%"),jm("#productTabUl").css("padding","0"),jm("<div class='J_preBtn f-preBtn faisco-icons'></div><div class='J_nextBtn f-nextBtn faisco-icons'></div>").appendTo(buttonWrap),buttonWrap.find(".J_preBtn").on("click",function(){var e=jm(".tabUiDiv2").offset();jm(".tabUiDiv").width(),jm(".tabUiDiv2").width();if(e.left>=0)return!1;var t=e.left+80+"px";jm(".tabUiDiv2").css("margin-left",t)}),buttonWrap.find(".J_nextBtn").on("click",function(){var e=jm(".tabUiDiv2").offset(),t=jm(".tabUiDiv").width(),i=jm(".tabUiDiv2").width();if(e.left<-(i-t))return!1;var o=e.left-80+"px";jm(".tabUiDiv2").css("margin-left",o)}))}},Mobi.fixImageHeightByRowCount=function(e,t){if(e){var i=document.getElementById(e);if(i)for(var o=i.querySelectorAll("img"),n=0,a=o.length,r=0;r<a;r++)!function(e){var i=new Image;i.src=o[e].src,i.onload=function(){i.height>n&&(n=i.height),s(e,t)}}(r)}function s(t,i){var o=0,n=0,a=jm("#"+e).find(".photoListImg"),r=jm("#"+e).find(".imgClass_160"),s=parseInt(t/i);a.each(function(e,t){(n=parseInt(jm(this).height()))>o&&parseInt(e/i)==s&&(o=n)}),r.each(function(e,t){0!=o&&parseInt(e/i)==s&&jm(this).css("height",o/_htmlFontSize+"rem")})}},Mobi.initShowMallOptionImg=function(e){var t=jm("#module"+e).find(".J_mallOptionImg");t.length>0&&jm(t).click(function(){var e=jm(this).attr("picid");"true"==jm(this).attr("isoptimg")?jm("#J_acct_"+Fai.top._aid+"_opt_pic_"+e).click():jm("#J_acct_"+Fai.top._aid+"_pic_"+e).click()})},Mobi.getcanvasTool=function(e){if(e){var t,i=n(e),o={};return o.ctx=i,o.getFactor=function(e,i,o){return t*(o/e*i)},o.getImgUrl=function(e){var t=jm("#_TOKEN").attr("value");return document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+t+"&imgUrl="+jm.encodeUrl(e)},o.loadImg=function(e,t){e.onload=function(){t()}},o.baseFontSize=t,o.initCanvas=n,o.drawText=a,o.Rect=r,o.Point=s,o.drawRoundedRect=l,o.Round=d,o.drawRound=function(e,t,o,n){var a=e.x,r=e.y,s=e.radius;i.save(),i.beginPath(),i.moveTo(a,r),i.fillStyle=t,i.globalAlpha=o,i.arc(a,r,s,0,2*Math.PI,!0),i.fill(),n?i.clip():(i.closePath(),i.restore())},o.drawRoundedRoundNeedClipEnd=m,o.drawRoundedRectNeedClipEnd=c,o.PdCanvas={},o.doCanvas=function(e,t){var n=-1;if(!e.length||e.length<=0)return;for(var s=0;s<e.length;s++){if(t&&t.length>0)for(var p=0;p<t.length;p++){var u=t[p];u.index==s&&u.callback()}s==n&&(c(),m());var h=e[s];if(h&&h.type&&h.data){var f=h.type||"",g=h.data||{};switch(f){case"image":if(!g.obj)continue;i.drawImage(g.obj,g.x,g.y,g.w,g.h);break;case"text":a(g.text,g.fontInfo,g.placeInfo,g.overHold,g.maxDrawCount,g.underlineInfo);break;case"roundedRect":var v=!1;g.clipInfo&&g.clipInfo.bengin&&(v=!0,n=g.clipInfo.endArrayIndex||-1);var b=r(g.areaInfo.x,g.areaInfo.y,g.areaInfo.w,g.areaInfo.h);l(b,g.r,g.areaStyleInfo,v);break;case"round":var v=!1;g.clipInfo&&g.clipInfo.bengin&&(v=!0,n=g.clipInfo.endArrayIndex||-1);var j=d(g.roundInfo.x,g.roundInfo.y,g.roundInfo.r);o.drawRound(j,g.style,g.globalAlpha,v);break;case"productMarketing":o.PdCanvas.drawMarketing(g.fontInfo,g.marketingRectInfo,g.marketingData,g.outText);break;case"productPrice":o.PdCanvas.drawPrice(g.showInfo,g.fontInfo,g.placeInfo,g.enhanceInfo);break;case"productTechnicalSupport":o.PdCanvas.drawTechnicalSupport(g.showInfo,g.fontInfo,g.placeInfo)}}}},o.PdCanvas.drawMarketing=function(e,t,o,n){var a=n||"";if(o&&!n)switch(o.marketingStyle){case"sale":a=o.marketingName||"促销";break;case"secKill":a="秒杀价";break;case"cutPrice":a=o.cutTimes+"人帮砍";break;case"groupPrice":a=o.groupNum+"人团"}if(""!=a){i.font=e.font;var s=t.rectX,d=t.rectY,m=t.marginWidth+i.measureText(a).width,p=t.height;l(r(s,d,m,p),t.r,t.bgStyle,!0),i.save(),i.font=e.font,i.fillStyle=e.style,i.textAlign=e.align,i.textBaseline=e.baseLine,i.fillText(a,s+m/2,d+p/2+2),c(),i.restore()}},o.PdCanvas.drawPrice=function(e,o,n,a){var r,s=e.choiceCurrencyVal,l=e.finallyShowPrices,c=n.choiceCurrencyX,d=n.maxWidth,m=0,p=.2*t,u=1,h=".00";a&&(p=a.interval||.2*t,u=a.type||1),i.save(),i.font=o.choiceCurrencyValFont,i.fillStyle=o.style,i.textAlign=o.align,i.textBaseline=o.baseLine;var f=i.measureText(s).width;r=c+p+f,i.fillText(s,c,n.choiceCurrencyY),i.font=o.priceFont;var g=l.firstPrice,v=l.secondPrice,b=g;if(v&&(b=g+"~"+v),2==u&&(b=Math.floor(g)+"",h="."+g.toFixed(2).split(".")[1],i.save(),i.font=a.decimalPlaceInfo.font,d-=i.measureText(".00").width,i.restore()),f+i.measureText(b).width>d){m=f;for(var j=0;j<b.length;j++)if((m+=i.measureText(b[j]).width)>d&&"."!=b[j-1]){b=b.substring(0,j)+"···";break}}if(i.fillText(b,r,n.choiceCurrencyY),2==u&&-1==(b+"").indexOf("···")){var _=r+i.measureText(b+"").width;i.font=a.decimalPlaceInfo.font,i.fillText(h,_+(a.decimalPlaceInfo.interval||0),n.choiceCurrencyY)}i.restore()},o.PdCanvas.drawTechnicalSupport=function(e,t,o){e&&(top._oem||e.oem||!e.showFaiscoSupport)||(i.save(),i.font=t.font,i.fillStyle=t.style,i.textAlign=t.align,i.textBaseline=t.baseLine,i.fillText("— 由凡科商城提供技术支持 —",o.textX,o.textY),i.restore())},o}function n(e){if(null!=e){var i=e.getContext("2d"),o=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1);return e.width=e.width*o,e.height=e.height*o,t=jm("html").css("font-size"),t=Number(t.substring(0,t.indexOf("p")))*o,i}}function a(e,t,o,n,a,r){if(e){i.save(),i.font=t.font,i.fillStyle=t.style,i.textAlign=t.align,i.textBaseline=t.baseLine;var s=o.maxWidth;textX=o.textX,textY=o.textY,texYOffset=o.offset;var l=0,c=0,d=1;a||(a=2);for(var m=0;m<e.length;m++)if(c+=i.measureText(e[m]).width,d>=a){if(c+i.measureText(n).width>s){i.fillText(e.substring(l,m-1)+n,textX,textY),p(i.measureText(e.substring(l,m-1)+n).width);break}if(m==e.length-1){i.fillText(e.substring(l,m+1),textX,textY),p(i.measureText(e.substring(l,m+1)).width);break}}else c>s&&(i.fillText(e.substring(l,m-1),textX,textY),p(i.measureText(e.substring(l,m-1)).width),d++,textY+=texYOffset,c=i.measureText(e[m]).width,l=m-1,m--),m==e.length-1&&(i.fillText(e.substring(l,m+1),textX,textY),p(i.measureText(e.substring(l,m+1)).width));i.restore()}function p(e){var t,o,n,a,s,l;r&&(t=textX,o=textY+r.uderLineAddY,n=e,a=r.fontSize,s=r.color,l=r.uderLineWidth,t-=n/2,o+=a+l,i.save(),i.beginPath(),i.strokeStyle=s,i.lineWidth=l,i.moveTo(t,o),i.lineTo(t+n,o),i.stroke(),i.restore())}}function r(e,t,i,o){return{x:e,y:t,width:i,height:o}}function s(e,t){return{x:e,y:t}}function l(e,t,o,n){if("string"==typeof o){o={fillStyle:o,strokeStyle:o}}var a=s(e.x+t,e.y),r=s(e.x+e.width,e.y),l=s(e.x+e.width,e.y+e.height),c=s(e.x,e.y+e.height),d=s(e.x,e.y);i.save(),i.beginPath(),i.fillStyle=o.fillStyle,o.lineWidth&&(i.lineWidth=o.lineWidth),i.strokeStyle=o.strokeStyle,i.moveTo(a.x,a.y),i.arcTo(r.x,r.y,l.x,l.y,t),i.arcTo(l.x,l.y,c.x,c.y,t),i.arcTo(c.x,c.y,d.x,d.y,t),i.arcTo(d.x,d.y,a.x,a.y,t),i.stroke(),i.fill(),n?i.clip():(i.closePath(),i.restore())}function c(){i.closePath(),i.restore()}function d(e,t,i){return{x:e,y:t,radius:i}}function m(){i.closePath(),i.restore()}},Mobi.drawCanvasSharePic=function(e){if(Fai.top._shareDataProdectDetail.productInfo){var t=Fai.top._shareDataProdectDetail.productInfo,i=JSON.parse(Fai.top._shareDataProdectDetail.jsShareInfo),o=i.marketingInfo,n=null;if(e?(Mobi.logDog(200876,3),n=document.getElementById("myCanvasImg")):n=document.getElementById("myCanvas"),null!=n){var a=n.getContext("2d"),r=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),s=jm("html").css("font-size"),l=12*(s=Number(s.substring(0,s.indexOf("p")))),c=15.7*s;n.width=l*r,n.height=c*r;var d=12*(s*=r),m=0,p=10.75*s,u=p,h=p,f=jm("#themColor").css("color"),g=jm("#_TOKEN").attr("value"),v=!1,b=!1,j=new Image;j.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+g+"&imgUrl="+jm.encodeUrl(t.picPath),j.onload=function(){var e=this.naturalHeight,t=this.naturalWidth;t>=e?m=p-(h=(u=p)/t*e):u=(h=p)/e*t,v=!0,I()&&w()};var _=new Image,M=Mobi.getDistCodeByArgOrCookie()||"",y="",S=Fai.top._shareDataProdectDetail.shareUrl.split("promoteMemberId=")[1];S&&(y=S.split("&")[0]||""),_.src=document.location.protocol+"//"+document.location.host+"/qrCode.jsp?cmd=pdPromoteCode&size=166&id="+t.id+"&dist="+M+"&promoteMemberId="+y,_.onload=function(){b=!0,I()&&w()}}}function I(){return v&&b}function w(){var n,r=18.2-m/s+"rem",l=d,c=18.2*s-m;if(e?(c=16.45*s-m,jm("#myCanvasImg").attr("height",c+"px")):(jm("#graphicPosterShowSwipe").css("height",r),jm("#myCanvas").attr("height",c+"px")),x(C(0,0,l,c),.375*s,"#ffffff",!1),x(C(n=.65*s,n,p,h),.3*s,"#f7f7f7",!0),a.drawImage(j,n+(p-u)/2,n,u,h),L(),function(){var e=t.name||"";a.save(),a.font=.525*s+"px arial",a.fillStyle="#353535",a.textAlign="left",a.textBaseline="top";var i=6.91*s,o=0,n=0,r=!1,l=.65*s;textY=12.05*s-m,texYOffset=.675*s;for(var c=0;c<e.length;c++)if(n+=a.measureText(e[c]).width,r){if(n+a.measureText("...").width>i){a.fillText(e.substring(o,c-2)+"...",l,textY);break}if(c==e.length-1){a.fillText(e.substring(o,c+1),l,textY);break}}else n>i&&(a.fillText(e.substring(o,c-1),l,textY),r=!0,textY+=texYOffset,texYOffset,n=a.measureText(e[c]).width,o=c-1,c--),c==e.length-1&&a.fillText(e.substring(o,c+1),l,textY);a.restore()}(),o.marketingStyle&&function(){if("cutPrice"==o.marketingStyle)return;var e="";switch(o.marketingStyle){case"sale":e=Fai.top.tipWords||"促销";break;case"secKill":e="秒杀价";break;case"groupPrice":e=o.groupNum+"人团";break;case"integralMall":Mobi.logDog(200975,2),e=o.itgName+"好礼"}a.font=.4*s+"px SourceHanSansCN-Normal";var t=.65*s,i=13.47*s-m,n=.5*s+a.measureText(e).width,r=.6*s;x(C(t,i,n,r),.15*s,f,!0),a.save(),a.font=.4*s+"px SourceHanSansCN-Normal",a.fillStyle="#FFFFFF",a.textAlign="center",a.textBaseline="middle",a.fillText(e,t+n/2,i+.05*s+r/2),L(),a.restore()}(),function(){if(i&&i.authNotAll)return;var e=Fai.top.choiceCurrencyVal,t=i.sharePrices,n=.65*s,r=n,l=6.91*s,c=0;a.save(),a.font=.5*s+"px SourceHanSansCN-Regular",a.fillStyle=f,a.textAlign="left",a.textBaseline="alphabetic",a.font=.75*s+"px SourceHanSansCN-Regular";var d=t.firstPrice,p=t.secondPrice;if(!d)return;var u=d;p&&(u=d+"~"+p);if(g+a.measureText(u).width>l){c=g;for(var h=0;h<u.length;h++)if((c+=a.measureText(u[h]).width)>l&&"."!=u[h-1]){u=u.substring(0,h)+"···";break}}if("integralMall"!=o.marketingStyle){var g=a.measureText(e).width;r=n+.2*s+g,a.fillText(e,n,14.75*s-m),a.fillText(u,r,14.75*s-m)}else{var v=t.minImIntegral,b=t.minImPrice,j=o.itgName;a.font=.65*s+"px SourceHanSansCN-Regular",a.fillText(v,n,14.75*s-m);var _=a.measureText(v).width,M=n+.2*s+_;if(a.font=.55*s+"px SourceHanSansCN-Regular",a.fillText(j,M,14.75*s-m),0==o.integtalMallType){var y=a.measureText(j).width,S=M+y;a.font=.65*s+"px SourceHanSansCN-Regular",a.fillText("+"+e+b,S,14.75*s-m)}}a.restore()}(),a.drawImage(_,8.675*s,12.05*s-m,2.725*s,2.725*s),function(){if(i&&(top._oem||i.oem||!i.showFaiscoSupport))return;a.save(),a.font=.4*s+"px SourceHanSansCN-Regular",a.fillStyle="#CACACA",a.textAlign="center",a.textBaseline="top",a.fillText("— 由凡科网提供技术支持 —",6*s,15.575*s-m),a.restore()}(),e){if(!document.getElementById("myCanvasImg"))return;v=document.getElementById("myCanvasImg").toDataURL("image/png");(g=new Image).src=v,g.setAttribute("class","actualPoster"),g.setAttribute("style","width:12rem;height:"+r+";"),jm(".myCanvasImgContain").empty().append(g),jm(".actualPoster").css("height",r)}else{if(function(){var e=16.45*s-m,t=1.8*s,i=C(0,e,d,t),o=a.createLinearGradient(0,0,d,0);o.addColorStop(0,"#FF9D27"),o.addColorStop(1,"#FF6056"),x(i,0,o,!0),a.save(),a.font=.55*s+"px SourceHanSansCN-Normal",a.fillStyle="#FFFFFF",a.textAlign="center",a.textBaseline="middle",a.fillText("长按保存海报",d/2,e+t/2-.05*s),L(),a.restore(),a.save(),a.beginPath(),a.arc(0,e,.35*s,0,2*Math.PI),a.arc(d,e,.35*s,0,2*Math.PI),a.clip(),a.clearRect(0,0,a.canvas.width,a.canvas.height),a.restore()}(),!document.getElementById("myCanvas"))return;var g,v=document.getElementById("myCanvas").toDataURL("image/png");(g=new Image).src=v,g.setAttribute("class","showPoster"),g.setAttribute("style","width:12rem;height:"+r+";"),jm(".myCanvasContain").empty().append(g),Mobi.drawCanvasSharePic(!0)}}function C(e,t,i,o){return{x:e,y:t,width:i,height:o}}function P(e,t){return{x:e,y:t}}function x(e,t,i,o){var n=P(e.x+t,e.y),r=P(e.x+e.width,e.y),s=P(e.x+e.width,e.y+e.height),l=P(e.x,e.y+e.height),c=P(e.x,e.y);a.save(),a.beginPath(),a.fillStyle=i,a.strokeStyle=i,a.moveTo(n.x,n.y),a.arcTo(r.x,r.y,s.x,s.y,t),a.arcTo(s.x,s.y,l.x,l.y,t),a.arcTo(l.x,l.y,c.x,c.y,t),a.arcTo(c.x,c.y,n.x,n.y,t),a.stroke(),a.fill(),o?(a.clip(),a.restore()):(a.closePath(),a.restore())}function L(){a.closePath()}},Mobi.drawEarnestSaleCanvasSharePic=function(){var e=document.getElementById("myCanvas");if(null!=e){var t=Mobi.getcanvasTool(e);if(t){var i=t.ctx,o=t.baseFontSize,n=13.44*o,a=0,r=0,s=8.704*o,l=11.9893*o,c=Fai.top._shareDataProdectDetail.productInfo,d=JSON.parse(Fai.top._shareDataProdectDetail.jsShareInfo),m=(d.marketingInfo,d.earnestSaleInfo),p=m.memberNameHeadPicUrl||"",u=c.picPath,h=m.memberName||"",f=c.name||"",g=Fai.top.choiceCurrencyVal,v=m.earnestPrice||"0.00",b=m.expandPrice||"0.00",j=m.earnestPriceTimeStr,_=d.oem,M=d.showFaiscoSupport,y=m.defaultMemberPic||!1;(_||!1===M)&&(r=.7893*o);var S=jm("#_TOKEN").attr("value"),I=!1,w=!1,C=!1,P=!1,x=!1,L=!1,k="";"undefined"!=typeof Fai&&void 0!==Fai.top._resRoot&&(k=Fai.top._resRoot);var F=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+S+"&imgUrl=";y&&(p=k+"/image/earnestSale/defAvatar.png");var T=new Image;T.src=F+jm.encodeUrl(p),T.onload=function(){I=!0,U()&&R()};var B=new Image;B.src=F+jm.encodeUrl(k+"/image/earnestSale/earnestArea.png"),B.onload=function(){w=!0,U()&&R()};var A=new Image;A.src=F+jm.encodeUrl(k+"/image/earnestSale/expandArea.png"),A.onload=function(){C=!0,U()&&R()};var D,O=new Image;O.src=F+jm.encodeUrl(p),O.onload=function(){P=!0,U()&&R()},(D=new Image).src=F+jm.encodeUrl(u),D.onload=function(){var e=this.naturalHeight,t=this.naturalWidth;a=l/t*e-s,x=!0,U()&&R()},(D=new Image).src=F+jm.encodeUrl(u),D.onload=function(){x=!0,U()&&R()};var E=new Image,N=Mobi.getDistCodeByArgOrCookie()||"",J="",H=Fai.top._shareDataProdectDetail.shareUrl.split("promoteMemberId=")[1];H&&(J=H.split("&")[0]||""),E.src=document.location.protocol+"//"+document.location.host+"/qrCode.jsp?cmd=pdPromoteCode&size=166&id="+c.id+"&dist="+N+"&promoteMemberId="+J,E.onload=function(){L=!0,U()&&R()}}}function U(){return I&&w&&C&&P&&x&&L}function R(){var e=18.645+(a-r)/o,c=n,d=18.645*o+a-r;jm("#graphicPosterShowSwipe").css("height",e+1.3+"rem").css("top","2rem"),jm("#myCanvas").attr("height",d+"px").attr("width",c+"px");var m,p,u,S=t.Rect(0,0,c,d);t.drawRoundedRect(S,.15*o,"#F7F7F7",!1),function(){var e=t.Rect(.533*o,.533*o,12.37*o,2.752*o);t.drawRoundedRect(e,1.386*o,{fillStyle:"#FFFFFF",strokeStyle:"#E6E6E6",lineWidth:1},!1);var n=t.Round(1.941*o,1.941*o,1.258*o);t.drawRound(n,"#FEECE0",1,!0);var a=O;y&&(a=T);i.drawImage(a,.6826*o,.6826*o,1.258*o*2,1.258*o*2),t.drawRoundedRoundNeedClipEnd();var r=5.9*o,s=3.52*o,l={font:.426*o+"px SourceHanSansCN-Regular",style:"#363636",align:"left",baseLine:"top"},c={maxWidth:r,textX:s,textY:1.3226*o,offset:.448*o},d=h+"向你推荐";t.drawText(d,l,c,"...",1),i.save(),i.font=l.font;var m=i.measureText(d).width;m>r&&(m=r);i.restore();var p={font:.426*o+"px SourceHanSansCN-Regular",style:"#FFFFFF",align:"center",baseLine:"middle"},u={rectX:s+m+.3626*o,rectY:1.14*o,marginWidth:.4792*o,height:.704*o,r:.3626*o,bgStyle:"#FC7228"};t.PdCanvas.drawMarketing(p,u,{marketingStyle:"earnestSale"},"用户推荐");var f={font:.426*o+"px SourceHanSansCN-Regular",style:"#676767",align:"left",baseLine:"top"},g={maxWidth:999*o,textX:3.52*o,textY:2.176*o,offset:.448*o};t.drawText("这个宝贝太值了，把心水好物分享给你",f,g,"...",1)}(),function(){var e=t.Rect(.533*o,3.648*o,12.373*o,8.96*o+a),n=i.createLinearGradient(0,0,0,8.96*o+a);n.addColorStop(0,"#FFCA6E"),n.addColorStop(1,"#FC7228");var r={fillStyle:n,strokeStyle:n};t.drawRoundedRect(e,0,r,!1);var c=.7253*o,d=3.84*o,m=l,p=s+a,u=t.Rect(c,d,m,p);t.drawRoundedRect(u,.2773*o,r,!0),i.drawImage(D,c,d,m,p-.1493*o),t.drawRoundedRectNeedClipEnd(),function(){if(b>v){i.drawImage(A,.56*o,11.32*o+a,12.38*o,1.3*o);var e=.64*o+"px SourceHanSansCN-Regular",n=6.2293*o,r={font:"bold "+e+"px Source Han Serif CN",style:"#FFECBB",align:"left",baseLine:"top"},s={maxWidth:999*o,textX:n,textY:11.6693*o+a,offset:.448*o};i.font=e;var l=i.measureText("膨胀最多可抵").width;i.restore(),t.drawText("膨胀最多可抵",r,s,"...",1);var c={choiceCurrencyVal:g,finallyShowPrices:{firstPrice:b}},d={choiceCurrencyValFont:"bold "+.426*o+"px Source Han Serif CN",priceFont:"bold "+.66*o+"px Source Han Serif CN",style:"#FFECBB",align:"left",baseLine:"alphabetic"},m={maxWidth:2.8*o,choiceCurrencyX:n+l,choiceCurrencyY:12.2*o+a},p={interval:-.05*o,type:2,decimalPlaceInfo:{font:"bold "+.426*o+"px Source Han Serif CN",interval:-1}};t.PdCanvas.drawPrice(c,d,m,p)}}(),i.drawImage(B,.51*o,10.03*o+a,6.016*o,2.6*o);var h={font:"bold "+.448*o+"px sans-serif",style:"#FC7228",align:"center",baseLine:"middle"},f={rectX:.7893*o,rectY:10.3893*o+a,marginWidth:.64*o,height:.6826*o,r:.3413*o,bgStyle:"#FFF0C8"};t.PdCanvas.drawMarketing(h,f,{marketingStyle:"earnestSale"},"定金");var j={choiceCurrencyVal:g,finallyShowPrices:{firstPrice:v}},_={choiceCurrencyValFont:.5973*o+"px sans-serif",priceFont:"bold "+1.3*o+"px sans-serif",style:"#FC7228",align:"left",baseLine:"alphabetic"},M={maxWidth:4*o,choiceCurrencyX:1.0026*o,choiceCurrencyY:12.3093*o+a},y={interval:-.1*o,type:2,decimalPlaceInfo:{font:"bold "+.5973*o+"px sans-serif"}};t.PdCanvas.drawPrice(j,_,M,y)}(),function(){var e=t.Rect(.533*o,13.013*o+a,12.373*o,4.373*o);t.drawRoundedRect(e,.1066*o,{fillStyle:"#FFFFFF",strokeStyle:"#F0F0F0",lineWidth:1},!1);var i={font:"bold "+.5546*o+"px sans-serif",style:"#333333",align:"left",baseLine:"top"},n={maxWidth:7.2746*o,textX:1.0026*o,textY:13.7386*o+a,offset:.768*o};t.drawText(f,i,n,"...",2);var r={font:.4266*o+"px SourceHanSansCN-Regular",style:"#BBBBBB",align:"left",baseLine:"top"},s={maxWidth:999*o,textX:1.0026*o,textY:15.4453*o+a,offset:.768*o};t.drawText("支付定金时间：",r,s,"...",1);var l={font:.4266*o+"px SourceHanSansCN-Regular",style:"#BBBBBB",align:"left",baseLine:"top"},c={maxWidth:999*o,textX:1.0026*o,textY:16.2133*o+a,offset:.768*o};t.drawText(j,l,c,"...",1)}(),i.drawImage(E,9.3866*o,13.44*o+a,2.56*o,2.56*o),i.save(),i.font=.384*o+"px SourceHanSansCN-Regular",i.fillStyle="#BBBBBB",i.textAlign="left",i.textBaseline="top",i.fillText("长按或扫描购买",9.28*o,16.2346*o+a),i.restore(),m={oem:_,showFaiscoSupport:M},p={font:.4266*o+"px SourceHanSansCN-Regular",style:"#CCCCCC",align:"center",baseLine:"top"},u={textX:6.72*o,textY:17.77*o+a},t.PdCanvas.drawTechnicalSupport(m,p,u);var I=document.getElementById("myCanvas").toDataURL("image/png"),w=new Image;w.src=I,w.setAttribute("class","showPoster"),w.setAttribute("style","width:13.44rem;height:"+e+";"),jm("#myCanvas").remove(),jm(".myCanvasContain").empty().append(w),jm(".myCanvasContain").append("<div class='earnestSaleShareBtn'>长按保存图片</div>"),jm("#graphicPosterShowSwipe").css("width",c/o+"rem").css("left",(16-c/o)/2+"rem").css("border-radius","0.064rem"),jm(".myCanvasImgContain").hide()}},Mobi.createGraphicPosterPage=function(){var e=jm("html").css("font-size"),t=12*(e=Number(e.substring(0,e.indexOf("p")))),i=15.7*e,o="";return o+="<div class='page_graphicPoster' id='graphicPosterShowSwipe'><div id='graphicPosterPanelBg'></div><div class='myCanvasContain'><canvas id='myCanvas' class='myCanvas' width='"+t+"px' height='"+i+"px'></div><div class='myCanvasImgContain'><canvas id='myCanvasImg' width='"+t+"px' height='"+i+"px'></div><div id='themColor' class='g_color g_main_color_v3'></div></div>"},Mobi.initgroupBuySharePage=function(){var e=JSON.parse(Fai.top._shareDataGroupBuyDetail.shareLinkList),t="";return t+="<div class='f_gbshareListPanel' id='groupBuyShare'><div id='gbSharePanelBg' style='height:100%;'></div><div class='gbshareListContent'><div class='gbshareListShow'><div class='gbshareListSwipe'><a hidefocus='true' class='gbshareLink' id='shareLinkWeixin' href='javascript:;' onclick='Mobi.logDog(200893, 1);'><div class='shareNewIcon g_iconMiddle icon-Weixin'></div><div class='shareText gbicon-Weixin-text'></div></a>",e.forEach(function(e,i){"graphic_poster"==e.icon&&(t+="<div style='display:inline-block;width:1rem;'></div><a id='graphicPosterItem' hidefocus='true' class='gbshareLink' href='javascript:;' onclick='Mobi.logDog(200893, 2);Mobi.drawGroupBuyCanvasSharePic();'><div class='shareNewIcon g_iconMiddle icon-gbgraphic_poster'></div><div class='shareText gbicon-graphic_poster-text'></div></a>")}),t+="</div><div id='cancelBtn' class='cancelBtn'><span class='cancelBtnSpan'>取消</span></div></div></div></div>"},Mobi.createGroupBuyGraphicPosterPage=function(){var e=jm("html").css("font-size"),t="";return t+="<div class='f_gpgraphicPoster' id='graphicPosterShowSwipe'><div id='gbGraphicPosterPanelBg' style='height:100%;'></div><div class='gpgraphicPosterContent'><div class='gbContentTitle'><span class='gbTitle'>海报邀请</span><div id='gbCloseIcon' class='closeIcon'></div></div><div class='gbpage_graphicPoster'><div class='myCanvasContain'><canvas id='myCanvas' class='myCanvas' width='"+11.325*(e=Number(e.substring(0,e.indexOf("p"))))+"px' height='"+19.625*e+"px'></canvas><div id='gbimg'></div><div class='promptTextContain'><p>长按保存海报</p></div><div id='themColor' class='g_color g_main_color_v3'></div></div></div></div></div>"},Mobi.drawGroupBuyCanvasSharePic=function(){jm("#cancelBtn").click();var e=document.getElementById("myCanvas");if(null!=e){var t=Mobi.getcanvasTool(e);if(t){var i=t.ctx,o=t.baseFontSize,n=Fai.top._shareDataGroupBuyDetail.pdInfo,a=Fai.top._shareDataGroupBuyDetail.jsShareInfo,r=Fai.top._shareDataGroupBuyDetail.memberInfo,s=11.325*o,l=0,c=9.575*o,d=c,m=c,p=jm("#_TOKEN").attr("value"),u=!1,h=!1,f=!1,g=!1,v="";"undefined"!=typeof Fai&&void 0!==Fai.top._resRoot&&(v=Fai.top._resRoot);var b=new Image;b.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+p+"&imgUrl="+jm.encodeUrl(v+"/image/share/gbsharehaibao_top.png"),b.onload=function(){u=!0,S()&&I()};var j=new Image,_=r.headPicUrl;j.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+p+"&imgUrl="+jm.encodeUrl(_),j.onload=function(){h=!0,S()&&I()};var M=new Image;M.src=document.location.protocol+"//"+document.location.host+"/ajax/mobiImgTransfer_h.jsp?_TOKEN="+p+"&imgUrl="+jm.encodeUrl(n.picPath),M.onload=function(){var e=this.naturalHeight,t=this.naturalWidth;t>=e?l=c-(m=(d=c)/t*e):d=(m=c)/e*t,f=!0,S()&&I()};var y=new Image;y.src=document.location.protocol+"//"+document.location.host+"/qrCode.jsp?cmd=printUrlCode&size=166&url="+encodeURIComponent(document.location.href),y.onload=function(){g=!0,S()&&I()}}}function S(){return u&&h&&f&&g}function I(){var e=19.3-l/o+"rem";canvasWidth=s,canvasHeight=19.3*o-l,jm("#graphicPosterShowSwipe").css("height",e),jm("#myCanvas").attr("height",canvasHeight+"px");var p=jm("#themColor").css("color"),u=t.Rect(0,0,canvasWidth,canvasHeight);t.drawRoundedRect(u,.2*o,"#ffffff",!1),i.drawImage(b,0,0,11.325*o,1.025*o),function(){var e={font:.5*o+"px arial",style:"#878787",align:"left",baseLine:"top"},n={maxWidth:5.9*o,textX:.875*o,textY:1.85*o,offset:.575*o};i.save(),i.font=e.font;var a=i.measureText(r.name).width;a>n.maxWidth&&(a=n.maxWidth);i.restore();var s=.625*o,l=(11.325*o-(s+a+.275*o))/2,c=1.35*o+s;n.textX=l+s+.275*o;var d=t.Round(l,c,s);t.drawRound(d,"#ffffff",1,!0),i.drawImage(j,l-s,c-s,2*s,2*s),t.drawRoundedRoundNeedClipEnd(),t.drawText(r.name,e,n,"...",1)}(),i.save(),i.font=.45*o+"px SourceHanSansCN-Light",i.fillStyle="#080808",i.textAlign="left",i.textBaseline="top",i.fillText("发现一件好物，快来和我一起拼",2.525*o,2.8*o),i.restore();var h=t.Rect(.425*o,3.925*o,10.5*o,14.925*o-l),f={fillStyle:"#ffffff",strokeStyle:"#E2E2E2",lineWidth:.025*o};t.drawRoundedRect(h,.25*o,f,!1),function(){var e=.875*o,n=4.4*o,a=t.Rect(e,n,c,m);t.drawRoundedRect(a,.15*o,"#f7f7f7",!0),i.drawImage(M,e+(c-d)/2,n,d,m),t.drawRoundedRectNeedClipEnd()}();var g={font:.45*o+"px arial",style:"#353535",align:"left",baseLine:"top"},v={maxWidth:6.9*o,textX:.875*o,textY:14.4*o-l,offset:.575*o};t.drawText(n.name,g,v,"...",2);var _={marketingStyle:"groupPrice",groupNum:n.groupNum},S={font:.35*o+"px SourceHanSansCN-Normal",style:"#FFFFFF",align:"center",baseLine:"middle"},I={rectX:.875*o,rectY:15.75*o-l,marginWidth:.2*o,height:.525*o,r:.15*o,bgStyle:p};t.PdCanvas.drawMarketing(_,S,I);var w={choiceCurrencyVal:n.choiceCurrencyVal,finallyShowPrices:{firstPrice:n.groupPrice}},C={choiceCurrencyValFont:.425*o+"px SourceHanSansCN-Regular",priceFont:.65*o+"px SourceHanSansCN-Regular",style:p,align:"left",baseLine:"alphabetic"},P={maxWidth:5.9*o,choiceCurrencyX:.875*o,choiceCurrencyY:17.1*o-l};t.PdCanvas.drawPrice(w,C,P),i.drawImage(y,7.875*o,14.275*o-l,2.125*o,2.125*o),i.save(),i.font=.35*o+"px SourceHanSansCN-Regular",i.fillStyle="#8A8A8A",i.textAlign="left",i.textBaseline="top",i.fillText("扫描或长按二维码",7.5*o,16.75*o-l),i.restore();var x={oem:a.oem,showFaiscoSupport:Fai.top._openThemeV3?a.showFaiscoSupportV3:a.showFaiscoSupport},L={font:.4*o+"px SourceHanSansCN-Regular",style:"#CACACA",align:"center",baseLine:"top"},k={textX:5.66*o,textY:17.9*o-l};t.PdCanvas.drawTechnicalSupport(x,L,k);var F=document.getElementById("myCanvas").toDataURL("image/png"),T=new Image;T.src=F,T.setAttribute("class","gbactualPoster"),T.setAttribute("style","width:11.325rem;height:"+e+";"),jm("#myCanvas").remove(),jm("#gbimg").append(T),jm(".actualPoster").css("height",e)}},Mobi.showGroupBuyMore=function(e,t){var i="";jm.ajax({url:"ajax/groupBuy_h.jsp?cmd=getGroupBuyProductList",data:"currentPid="+e,type:"POST",dataType:"json",success:function(e){if(e.success){var o=e.productInfo,n=e.choiceCurrencyVal,a=o.length,r="",s=1;if(0!=a){if("product"==t){var l=jm(".mProductList");l.hide(),0==l.length&&(i+="<div class='mallThemeSeparator g_breakline'></div>")}else r="borderTop",s=2;if(i+="<div class='f_groupBuyMore "+r+"'><div class='title'><span class='titleLine'></span><span class='titleName'>TA们正在拼</span><span class='titleLine'></span></div>",1==a){var c=(h=o[0]).id,d=h.name,m=h.picPath,p=h.groupBuyInfo;h.productVideoImg&&""!=h.productVideoImg&&(m=h.productVideoImg),i+="<div class='single'><div class='leftPic' style='background:url("+m+") no-repeat;background-size: 100% 100%;-moz-background-size: 100% 100%;'><div class='marketingTip g_bgColor g_main_bgColor_v3'>"+p.groupNum+"人团</div></div><div class='rightInfo'><div class='pdName'>"+d+"</div><div class='groupPrice g_color g_main_color_v3'>"+n+p.groupPrice+"</div><a href='pd.jsp?id="+c+"' onclick='Mobi.logDog(200892, "+s+");' class='jumpToUrl g_bgColor g_main_bgColor_v3'>立即拼</a></div><a href='pd.jsp?id="+c+"' onclick='Mobi.logDog(200892, "+s+");' class='overHidden'></a></div>"}else{i+="<div class='multiple'>";for(var u=0;u<a;u++){var h;c=(h=o[u]).id,d=h.name,m=h.picPath,p=h.groupBuyInfo;h.productVideoImg&&""!=h.productVideoImg&&(m=h.productVideoImg);var f="";u%2!=0&&(f="multipleRightItem"),i+="<div class='multipleItem "+f+"'><div class='topPic' style='background:url("+m+") no-repeat;background-size: 100% 100%;-moz-background-size: 100% 100%;'><div class='marketingTip g_bgColor g_main_bgColor_v3'>"+p.groupNum+"人团</div></div><div class='buttomInfo'><div class='pdName'>"+d+"</div><div class='groupPrice g_color g_main_color_v3'>"+n+p.groupPrice+"</div><a href='pd.jsp?id="+c+"' onclick='Mobi.logDog(200892, "+s+");' class='jumpToUrl g_bgColor g_main_bgColor_v3'>立即拼</a></div><a href='pd.jsp?id="+c+"' onclick='Mobi.logDog(200892, "+s+");' class='overHidden'></a></div>"}i+="</div>"}if(i+="</div>","product"==t)document.getElementById("tabPanel1").innerHTML+=i,setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel1")},100);else jm(".fk-groupBuyDetail").append(i)}}else Fai.img("系统错误")}})},Mobi.drawSelfRaisingVerification=function(e){var t=jm(".j_tipImg").css("color"),i=t.substr(0,t.length-1)+", 0.5)";jm(".j_tipImg").css("border","0.075rem solid "+i),jm(".j_tipImgSvg").css("fill",t),jm(".j_saveVerification").unbind().bind("click",function(){Mobi.ing("正在加载，请稍后")}),jm.ajax({url:"ajax/order_h.jsp?cmd=getSelfRaisingVerificationInfo",data:{orderId:e},type:"POST",dataType:"json",success:function(e){if(e.success){var t=e.info,i=JSON.parse(t.addrInfo.srp);!function(e){var t=document.getElementById("selfRaisingVerificationCanvas");if(null==t)return;var i=Mobi.getcanvasTool(t);if(!i)return;var o=i.ctx,n=i.baseFontSize,a=15.15*n,r=16.225*n,s=0,l=10.225*n,c=e.mobile,d=e.name,m=e.addr,p=e.takingProof,u=new Image,h={a:e.aid,w:e.wid,t:p};function f(){g(.55*n+"px SourceHanSansCN-Regular",m)>l&&(r+=s=1.2*n),jm("#selfRaisingVerificationCanvas").attr("height",r+"px").attr("width",a+"px");var e=i.Rect(0,0,a,r);i.drawRoundedRect(e,.25*n,"#ffffff",!0);var t={font:"bold "+.65*n+"px SourceHanSansCN-Medium",style:"#353535",align:"left",baseLine:"top"},h={maxWidth:999*n,textX:.8*n,textY:.9*n,offset:0*n};i.drawText("提货凭证",t,h,"",1);var f={font:.55*n+"px SourceHanSansCN-Medium",style:"#666666",align:"left",baseLine:"top"},v={maxWidth:999*n,textX:.825*n,textY:2.525*n,offset:0*n};i.drawText("手机号码：",f,v,"",1);var b={maxWidth:999*n,textX:3.6*n,textY:2.525*n,offset:0*n};i.drawText(c,f,b,"",1);var j={maxWidth:999*n,textX:1.375*n,textY:3.75*n,offset:0*n};i.drawText("自提点：",f,j,"",1);var _={maxWidth:999*n,textX:3.6*n,textY:3.75*n,offset:0*n};i.drawText(d,f,_,"",1);var M={maxWidth:999*n,textX:.825*n,textY:4.95*n,offset:0*n};i.drawText("提货地址：",f,M,"",1);var y,S={maxWidth:l,textX:3.6*n,textY:4.95*n,offset:1.2*n};i.drawText(m,f,S,"...",2),y=6.3*n+s,o.save(),o.beginPath(),o.strokeStyle="#CCCCCC",o.setLineDash([.25*n,.25*n]),o.moveTo(.75*n,y),o.lineTo(14.4*n,y),o.stroke(),o.restore(),function(){var e=6.3*n+s;o.save(),o.beginPath(),o.arc(0,e,.3*n,0,2*Math.PI),o.arc(a,e,.3*n,0,2*Math.PI),o.clip(),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.restore()}(),o.drawImage(u,4.375*n,7.175*n+s,6.4*n,6.4*n),function(){var e="提货码：",t=0;for(;;){var o=p.substr(t,4);if(!o||0==o.length)break;t+=4,e+=o,4==o.length&&p.substr(t,4).length>0&&(e+=" ")}var r=g(.6*n+"px SourceHanSansCN-Regular",e)+1*n,l=(a-r)/2,c=i.Rect(l,14.175*n+s,r,1.3*n);i.drawRoundedRect(c,0,"#F8F8F8",!0);var d={font:.6*n+"px SourceHanSansCN-Medium",style:"#353535",align:"left",baseLine:"top"},m={maxWidth:999*n,textX:l+.5*n,textY:14.55*n+s,offset:0*n};i.drawText(e,d,m,"",1),i.drawRoundedRectNeedClipEnd()}(),i.drawRoundedRectNeedClipEnd();var I=document.getElementById("selfRaisingVerificationCanvas").toDataURL("image/png"),w=new Image;w.src=I,w.setAttribute("class","verificationCanvas"),w.setAttribute("style","width:"+a/n+"rem;height:"+r/n+"rem;"),jm(".j_verificationContain").append(w)}function g(e,t){o.restore(),o.save(),o.font=e;var i=o.measureText(t).width;return o.restore(),i}u.src=document.location.protocol+"//"+document.location.host+"/qrCode.jsp?cmd=printStringCode&size=440&str="+JSON.stringify(h),u.onload=function(){f()}}({aid:t.aid,wid:t.wid,mobile:i.phone,name:i.name,addr:i.ais,takingProof:t.takingProof}),jm(".j_saveVerification").unbind().bind("click",function(){var e=document.getElementById("selfRaisingVerificationCanvas").toDataURL("image/png"),t=document.createElement("a"),i=new MouseEvent("click");t.download="提货凭证",t.href=e,t.dispatchEvent(i)})}}})},Mobi.getProductListPageData=function(e){return new Promise(function(t,i){var o=[];o.push("cmd=","getAjaxPageModuleV2Info"),o.push("&_colId=",Fai.top._pageId),o.push("&_extId=",0),o.push("&moduleId=",e.moduleId);var n=window.location.href;if(n.indexOf("lcid")>0){var a=Mobi.getUrlParam(n,"lcid");a&&o.push("&lcid=",a)}n.indexOf("_fromJzmHome")>0&&(Mobi.getUrlParam(n,"_fromJzmHome")&&o.push("&_fromJzmHome=",!0));if(Fai.top._manageMode){var r=Fai.top.Designer.copyData(e.module);r.extInfo={},o.push("&module=",encodeURIComponent(JSON.stringify(r)))}e.pageno&&o.push("&m"+e.moduleId+"pageno=",e.pageno),jm.ajax({type:"post",url:"ajax/module_h.jsp",data:o.join(""),error:function(){Mobi.ing(LS.js_systemError,!1)},success:function(e){var o=(e=jm.parseJSON(jm.trim(e))).data;e.success?t(o):(Mobi.ing(LS.js_systemError,!1),i(o))}})})},Mobi.createSelfRaisingVerificationPop=function(){var e=jm("html").css("font-size"),t="";return t+="<div class='f_selfRaisingVerification' id='selfRaisingVerification'><div id='selfRaisingVerificationBg' style='height:100%;'></div><div class='selfRaisingVerificationContent'><div class='j_canvasContain'><canvas id='selfRaisingVerificationCanvas' style='display:none;' width='"+13.9*(e=Number(e.substring(0,e.indexOf("p"))))+"px' height='"+16.25*e+"px'></canvas></div><div class='promptTextContain'><p>长按图片保存凭证</p></div></div></div>"},Mobi.drawSelfRaisingVerificationPop=function(e){jm(".j_saveVerification").unbind().bind("click",function(){Mobi.ing("正在加载，请稍后")}),jm.ajax({url:"ajax/order_h.jsp?cmd=getSelfRaisingVerificationInfo",data:{orderId:e},type:"POST",dataType:"json",success:function(e){if(e.success){var t=e.info,i=JSON.parse(t.addrInfo.srp);jm.ajax({url:"ajax/order_h.jsp?cmd=getSelfRaisingPoingList",data:{},type:"POST",dataType:"json",success:function(e){var o=e.selfRaisingDataList;if(o.length>0){for(var n=0;n<o.length;n++)if(o[n].id==i.id){i=o[n];break}!function(e){var t=document.getElementById("selfRaisingVerificationCanvas");if(null==t)return;var i=Mobi.getcanvasTool(t);if(!i)return;var o=i.ctx,n=i.baseFontSize,a=13.9*n,r=16.25*n,s=0,l=10*n,c=e.mobile,d=e.name,m=e.addr,p=e.takingProof,u=new Image,h={a:e.aid,w:e.wid,t:p};function f(){g(.55*n+"px SourceHanSansCN-Regular",m)>l&&(r+=s=1.2*n),jm("#selfRaisingVerificationCanvas").attr("height",r+"px").attr("width",a+"px");var e=i.Rect(0,0,a,r);i.drawRoundedRect(e,.25*n,"#ffffff",!0);var t={font:"bold "+.65*n+"px SourceHanSansCN-Medium",style:"#353535",align:"left",baseLine:"top"},h={maxWidth:999*n,textX:.75*n,textY:.875*n,offset:0*n};i.drawText("提货凭证",t,h,"",1);var f={font:.55*n+"px SourceHanSansCN-Medium",style:"#666666",align:"left",baseLine:"top"},v={maxWidth:999*n,textX:.775*n,textY:2.325*n,offset:0*n};i.drawText("手机号码：",f,v,"",1);var b={maxWidth:999*n,textX:3.55*n,textY:2.325*n,offset:0*n};i.drawText(c,f,b,"",1);var j={maxWidth:999*n,textX:1.325*n,textY:3.525*n,offset:0*n};i.drawText("自提点：",f,j,"",1);var _={maxWidth:999*n,textX:3.55*n,textY:3.525*n,offset:0*n};i.drawText(d,f,_,"",1);var M={maxWidth:999*n,textX:.775*n,textY:4.725*n,offset:0*n};i.drawText("提货地址：",f,M,"",1);var y,S={maxWidth:l,textX:3.55*n,textY:4.725*n,offset:1.2*n};i.drawText(m,f,S,"...",2),y=6.15*n+s,o.save(),o.beginPath(),o.strokeStyle="#CCCCCC",o.setLineDash([.23*n,.23*n]),o.moveTo(.5*n,y),o.lineTo(13.425*n,y),o.stroke(),o.restore(),function(){var e=6.15*n+s;o.save(),o.beginPath(),o.arc(0,e,.25*n,0,2*Math.PI),o.arc(a,e,.25*n,0,2*Math.PI),o.clip(),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.restore()}(),o.drawImage(u,3.725*n,7.025*n+s,6.4*n,6.4*n),function(){var e="提货码：",t=0;for(;;){var o=p.substr(t,4);if(!o||0==o.length)break;t+=4,e+=o,4==o.length&&p.substr(t,4).length>0&&(e+=" ")}var r=g(.6*n+"px SourceHanSansCN-Regular",e)+1*n,l=(a-r)/2,c=i.Rect(l,14.025*n+s,r,1.275*n);i.drawRoundedRect(c,0,"#F8F8F8",!0);var d={font:.6*n+"px SourceHanSansCN-Medium",style:"#353535",align:"left",baseLine:"top"},m={maxWidth:999*n,textX:l+.5*n,textY:14.42*n+s,offset:0*n};i.drawText(e,d,m,"",1),i.drawRoundedRectNeedClipEnd()}(),i.drawRoundedRectNeedClipEnd();var I=document.getElementById("selfRaisingVerificationCanvas").toDataURL("image/png"),w=new Image;w.src=I,w.setAttribute("style","width:"+a/n+"rem;height:"+r/n+"rem;"),jm(".j_canvasContain").append(w)}function g(e,t){o.save(),o.font=e;var i=o.measureText(t).width;return o.restore(),i}u.src=document.location.protocol+"//"+document.location.host+"/qrCode.jsp?cmd=printStringCode&size=440&str="+JSON.stringify(h),u.onload=function(){f()}}({aid:t.aid,wid:t.wid,mobile:i.phone,name:i.name,addr:i.ais,takingProof:t.takingProof}),jm(".j_saveVerification").unbind().bind("click",function(){var e=document.getElementById("selfRaisingVerificationCanvas").toDataURL("image/png"),t=document.createElement("a"),i=new MouseEvent("click");t.download="提货凭证",t.href=e,t.dispatchEvent(i)})}}})}}})},Mobi.productFormBtnClick=function(e,t){Mobi.linkToForm(e)},Mobi.consultImmediatelyBtnClick=function(e,t,i,o,n){jm("#"+e).off("click.consultBtn").on("click.consultBtn",function(){Mobi.logDog(201121,5),0==t?Mobi.triggerServiceNumber(1,i):1==t?Mobi.consultImmediately.render(o):2==t&&Mobi._popupZone.open(n)})},Mobi.initCombinedPurchaseInfo=function(e){e&&jm.ajax({url:"ajax/product_h.jsp?cmd=getProductDetailCpList",data:{pid:e},type:"POST",dataType:"json",success:function(e){if(e.success&&e.openCombinedPurchase){jm(".combinedPurchaseContainer #combinedPurchaseCount").html(e.combinedPurchaseCount),jm(".combinedPurchaseContainer #maxCpSavePrice").html(e.maxCpSavePrice);var t=e.combinedInfoList||[];if(t.length>0){var i=Mobi.getCpListHtml(e,!0,"","pdDetail");jm(".combinedPurchaseContainer .cpInfoList").html(i),jm(".combinedPurchaseContainer").show(),jm.each(t,function(e,t){if(e>=3)return!1;Mobi.secKillPdSwipe("pdDetailPdContainer"+t.id,"pdDetailPdSlideContainer"+t.id)}),jm(".combinedPurchaseContainer .cpBtn").on("click",function(){var e=jm(this).attr("cpId")||0;window.location.href="/combinedPurchaseDetail.jsp?cpId="+e})}if(e.combinedPurchaseCount>3){jm(".combinedPurchaseContainer .cpShowMore").css("display","flex");var o={triggerId:"combinedPurchaseShowMore",pageBg:!0,pageHtml:Mobi.getCpListHtml(e,!1,"cpShowMorePanel","panel"),closeWebPage:"",direction:"bottom",callback:function(){jm.each(t,function(e,t){Mobi.secKillPdSwipe("panelPdContainer"+t.id,"panelPdSlideContainer"+t.id)}),jm(".cpShowMorePanel .cpBtn").on("click",function(){var e=jm(this).attr("cpId")||0;window.location.href="/combinedPurchaseDetail.jsp?cpId="+e})}};Mobi.initWebPage(o),jm("#combinedPurchaseShowMore").click(function(){Mobi.logDog(201160,3)}),Mobi.logDog(201160,2)}}}})},Mobi.getCpListHtml=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0;if(e){var n=[];return n.push("<div class='combinedPurchaseListContainer "+i+"'>"),"cpShowMorePanel"==i&&n.push("<div class='cpPanelTitle'><span class='lineTitle'>组合套餐</span><span class='lineTitleTip'><span>"+e.combinedPurchaseCount+"</span>组套餐，最多可省"+Fai.top.choiceCurrencyVal+"<span>"+e.maxCpSavePrice+"<span></span></div>"),n.push("<div class='combinedPurchaseList'>"),jm.each(e.combinedInfoList,function(e,i){if(e>=3&&t)return!1;n.push("<div class='cpItem'>"),n.push("<div id='"+o+"PdSlideContainer"+i.id+"' class='pdSlideContainer'>"),n.push("<div id='"+o+"PdContainer"+i.id+"' class='pdContainer'>"),jm.each(i.pdInfoList,function(e,t){n.push("<div class='productItem J_prodItem'>"),n.push("<a class='J_prodItem-a' href='/pd.jsp?pid="+t.productId+"'>"),n.push("<div class='productPic'>"),n.push("<img class='productImg' src='"+t.picPath+"'>"),n.push("</div>"),n.push("<div class='pdName'>"+t.pdName+"</div>"),n.push("</a>"),n.push("</div>"),e!=i.pdInfoList.length-1&&n.push("<svg class='cpIncrease' fill='#CECECE'><use xlink:href='#jzm-vcpincrease'/></svg>")}),n.push("</div>"),n.push("</div>"),n.push("<div class='priceContain'>"),n.push("<svg fill='#CECECE' class='cpEqual'><use xlink:href='#jzm-vcpequal'></use></svg>"),n.push("<div class='cpPriceContainer'>"),n.push("<div class='cpPriceTitle'>套餐价</div>");var a=Mobi.getDividePrice(i.combinedPrice),r=Mobi.getDividePrice(i.savePrice);n.push("<div class='cpPrice g_color g_main_color_v3'>"+Fai.top.choiceCurrencyVal+a.intPrice+"<span class='decimal'>."+a.decimalPrice+"</span></div>"),n.push("</div>"),0!=i.savePrice&&n.push("<div class='cpSavePrice g_color g_main_color_v3'>可省"+Fai.top.choiceCurrencyVal+r.intPrice+"<span class='decimal'>."+r.decimalPrice+"</span></div>"),n.push("<div class='cpBtn g_button g_main_bgColor_v3' cpId='"+i.id+"'><span>立即购买</span></div>"),n.push("</div>"),n.push("</div>")}),n.push("</div>"),n.push("</div>"),n.join("")}},Mobi.getDividePrice=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i={};if(0==e)return i.intPrice="0",i.decimalPrice="00",i;var o=0,n="00";if(-1!=(e=(e=parseFloat(e||0)).toFixed(t)+"").indexOf(".")){var a=e.split(".");o=a[0],n=a[1]}return i.intPrice=o,i.decimalPrice=n,i},Mobi.initCpDetailInfo=function(e){jm("#g_web").css("background-color","#F4F4F4"),jm("#webFooterBox").hide(),jm("#webContainerBox").css("transform","unset"),jm("#webModuleContainer").css("transform","unset"),Mobi.cpPdOtionSelectType={},Mobi.finalCpPdOtionSelectType={},Mobi.cachePdOptionInfo={},jm.each(e.pdInfoList,function(e,t){var i=t.optionAmountInfo||{};Mobi.cachePdOptionInfo["optionsAmountInfo"+t.productId]=i,Mobi.cachePdOptionInfo["optionDom"+t.productId]=Mobi.getCpPdOptionInfoDom(t),Mobi.cachePdOptionInfo["mallPrice"+t.productId]=t.mallPrice||0,Mobi.cachePdOptionInfo["optionData"+t.productId]=t.optionData||[]}),jm(".cpDetailInfo .J_chooseOptionData").click(function(){var e=jm(this).attr("pid")||0;if(e){var t={triggerId:"showCpPdOptionPanel",pageHtml:Mobi.cachePdOptionInfo["optionDom"+e]||"",pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:".cpOptionPanel .cpOptionPanelClose",closeCallBack:function(){}};Mobi.initWebPage(t);var i=Mobi.cachePdOptionInfo["optionsAmountInfo"+e]||{},o=Mobi.cachePdOptionInfo["optionData"+e]||{},n=i.d||[];if(n.length>0){var a={optionsAmountList:n,isCombinedPurchase:!0,productId:e};jm("#showCpPdOptionPanel").click(),Mobi.initProductOptions(a),Mobi.selectCpPdOption(e,o,i),jm(".saveCpOptionBtn").click(function(){var t=jm(this).attr("pid")||0,i=Mobi.cpPdOtionSelectType["pid"+t]||"",o=Mobi.cachePdOptionInfo["optionsAmountInfo"+t]||{},n=Mobi.cachePdOptionInfo["optionData"+t]||[];if(Mobi.checkCpOptionData(i,o,Mobi.cachePdOptionInfo["optionData"+e])){var a=o.t||"",r=i.split("_"),s="",l={};if(jm.each(n,function(e,t){l[t.fieldKey]=t.items}),a.includes("_")){var c=a.split("_");jm.each(c,function(e,t){var i=r[e]||0,o=l[t];jm.each(o,function(e,t){t.i==parseInt(i)&&(s+=t.v+",")})})}else{var d=i,m=l[a];jm.each(m,function(e,t){t.i==parseInt(d)&&(s+=t.v+",")})}s.endsWith(",")&&(s=s.substring(0,s.length-1));var p=o.d||[],u=Mobi.cachePdOptionInfo["mallPrice"+t]||0;jm.each(p,function(e,t){i==t.t2&&(u=t.oPrice)}),jm("#originalPrice"+t).html("原价"+Fai.top.choiceCurrencyVal+parseFloat(u).toFixed(2)),jm("#chooseOptionStr"+t).html(s),Mobi.finalCpPdOtionSelectType["pid"+t]=i,jm(".cpOptionPanel .cpOptionPanelClose").click()}})}}}),jm(".cpDetailInfo #cpBuyBtn").click(function(){if(Fai.top._manageMode)Mobi.ing("管理状态下，暂不支持购买");else if(0!=e.stock)if(0!=e.status)if(5==e.status){var t=[],i=e.pdInfoList||[],o=!0,n=!1,a=void 0;try{for(var r,s=i[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var l=r.value,c={},d=[],m=l.productId||0;c.pid=m;var p=l.optionData||[],u=l.optionAmountInfo||{},h=Mobi.finalCpPdOtionSelectType["pid"+m]||"";if(!Mobi.checkCpOptionData(h,u,p))return;var f=u.t||"";if(""!=f){var g=h.split("_"),v={};jm.each(p,function(e,t){v[t.fieldKey]=t});var b=f.split("_");jm.each(b,function(e,t){var i=g[e]||0,o=v[t],n=o.items;jm.each(n,function(e,t){if(t.i==parseInt(i)){var n={};n.name=o.fieldKey,n.value=t.i,n.type=o.type,n.prop=o.n,n.selected=t.v,d.push(n)}})})}d.length>0&&(c.optList=JSON.stringify(d)),c.amount=l.cpAmount||1,t.push(c)}}catch(e){n=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(n)throw a}}var j={};j.pdInfoList=t,j.isCpOrder=!0,j.combinedPurchaseId=e.id||0,Mobi.mallBuy(0,1,0,0,"","",j)}else Mobi.ing("活动已结束");else Mobi.ing("活动即将开始");else Mobi.ing("该套餐已售罄")})},Mobi.selectCpPdOption=function(e,t,i){var o=Mobi.finalCpPdOtionSelectType["pid"+e];if(o&&""!=o){var n=i.t||"";if(n.includes("_")){var a=n.split("_"),r=o.split("_");jm.each(a,function(e,t){var i=r[e],o=jm(".cpOptionPanel .g_mallLabel[for='opIndept"+t+i+"']");o.length>0&&o.click()})}else{var s=jm(".cpOptionPanel .g_mallLabel[for='opIndept"+n+o+"']");s.length>0&&s.click()}}},Mobi.checkCpOptionData=function(e,t,i){if(!i||!t)return!1;if(0==(t.d||[]).length)return!0;if(""==e||e.includes("x")){var o="",n="",a=t.t||"";if(a.includes("_")){var r=a.split("_");if(""==e)o=r[0]||"";else{var s=e.split("_"),l=0;jm.each(s,function(e,t){if("x"==t)return l=e,!1}),o=r[l]}}else o=a;return jm.each(i,function(e,t){t.fieldKey==o&&(n=t.name)}),Mobi.ing(jm.format(LS.mallCartChoiceItemError,jm.encodeHtml(n))),!1}return!0},Mobi.getCpPdOptionInfoDom=function(e){var t=e.optionData,i=e.optionAmountInfo;if(!t||0==t.length||!i)return"";var o=[],n=i.type||"",a=i.d||[],r=n.split("_"),s=0;o.push("<div class='cpOptionPanel'>"),o.push("<div class='productMallOptionHead'>"),o.push("<div class='J_mallOptionImg mallOptionImg' picId='"+e.productId+"' style='background-image:url("+e.pdPic+")'></div>"),o.push("<div class='productDetail'>"),o.push("<div class='productDetailName'>"),o.push("<div class='productName g_middleColor'><div class='productNameWrap'>"+e.pdName+"</div></div>"),o.push("</div>"),e.openAmountProp&&(o.push("<div class='productDetailMallAmount'>"),o.push("<div class='productMallAmount'>"+e.amountKey+"<span id='targetAmount"+e.productId+"'>"+e.targetAmount+"</span></div>"),o.push("</div>")),o.push("<div class='productOriginalPrice' id='productOriginalPrice"+e.productId+"'>"+e.originalPriceTip+"</div>"),o.push("</div>"),o.push("<div class='productDetailClose icon-Off g_iconMiddle icon-defaultColor cpOptionPanelClose'></div>"),o.push("</div>"),o.push("<div class='mallOptionAndNumBox J-op-box'>");for(var l=0;l<t.length;l++){for(var c=t[l],d=c.items||[],m=c.fieldKey||"",p=c.type||"",u=c.name||"",h=0;h<r.length;h++)m==r[h]&&(s=h);4==p&&(m="opIndept"+m),d.length>0&&(o.push("<div class='mallNewOptionLine mallOptionLine g_middleColor J-op' data='"+m+"' option_name='"+c.name+"' type='"+p+"'>"),o.push("<span class='optionLineName'>"+u+"</span>"),o.push("<div class='optionsBlock'>"),jm.each(d,function(e,t){for(var i=t.i||0,n=t.pi||"",r=t.v||"",l=t.orgPic||"",c=!1,d=0;d<a.length;d++){var p=a[d],u=p.t2||"",h=p.flag||1,f=u.split("_"),g=-1;if(null!=f[s]&&(g=parseInt(f[s])),1==h&&s<f.length&&g==i&&p.isEnable){c=!0;break}}c&&(o.push("<input class='g_mallInput' type='radio' id='"+m+i+"' name='"+m+"' />"),""==l?o.push("<label class='g_mallLabel g_defaultColor' for='"+m+i+"' data='"+i+"'>"+r+"</label>"):o.push("<label class='g_mallLabel g_defaultColor' for='"+m+i+"' picId='"+n+"' data='"+i+"' _indeptPic='"+l+"'>"+r+"</label>"))}),s++,o.push("</div>"),o.push("</div>"))}return o.push("</div>"),o.push("<div class='saveCpOptionBtn g_bgColor g_main_bgColor_v3' pid='"+e.productId+"'>确定</div>"),o.push("</div>"),o.join("")},Mobi.productKnowPayBtnClick=function(e){Fai.top._manageMode?Mobi.ing("当前为管理态，不支持购买"):0==Fai.top.sessionMemberId?(Mobi.logDog(201356,3),Mobi.storageReturnUrl(Fai.top.location.href),Fai.top.location.href="login.jsp"):(Mobi.logDog(201356,3),jm.ajax({type:"post",url:"ajax/product_h.jsp?cmd=genKnowProductOrder",data:"productId="+e,success:function(e){if(null!=e){var t=jm.parseJSON(e);t.success?(Mobi.logDog(201356,4),t.isZero?(Mobi.ing("购买成功"),window.document.location.reload()):Mobi.jzPayUtils.normalOpenPay({bssId:t.knowProductOrderId,bssType:Mobi.BussinessType.BSSTYPE_KNOWPRODUCT,sucUrl:encodeURIComponent(window.location.href),failUrl:encodeURIComponent(window.location.href)})):Mobi.ing(t.msg)}},error:function(e){Mobi.ing("系统错误")}}))},Mobi.productKnowPayPlayVideo=function(){jm(".productBullet").hide(),jm(".productDetailHeader").hide(),jm(".productDetailHeaderV3").hide();var e=document.getElementById("knowproductVideoMask"),t=document.getElementById("knowPayVideo");e.style.display="block",t.play()},Mobi.initCourseCatalog=function(e,t){var i="columnProductId=".concat(e,"&pid=").concat(t);jm.ajax({type:"post",url:"ajax/product_h.jsp?cmd=getCourseCatalog",data:i,success:function(e){var t=JSON.parse(e),i=t.html,o=void 0===i?"":i,n=t.productUrl,a="";t.isFinPay||(a='\n                <a class="course_catalog_jump_column_btn g_oldThemeBgColor g_main_bgColor_v3" href="'.concat(n,'">前往购买</a>\n                '));var r='\n                <div class="course_catalog_container">\n                    <div class="course_catalog_container_header">\n                        <a class="course_catalog_jump" href="'.concat(n,'">\n                            <svg class="course_catalog_jump_icon">\n                                <use xlink:href="#jzm-vicon_arrow_1"></use>\n                            </svg>\n                            <span class="course_catalog_jump_text">返回专栏</span>\n                        </a>\n                        <span class="course_catalog_title">课程目录</span>\n                        <svg class="course_catalog_close_iocn">\n                            <use xlink:href="#jzm-vicon_close"></use>\n                        </svg>\n                    </div>\n                    ').concat(o,"\n                    ").concat(a,"\n                </div>\n            ");Mobi.initWebPage({triggerId:"J_courseCatalogBtn",pageBg:!0,direction:"bottom",closeWebPage:".course_catalog_close_iocn",pageHtml:"".concat(r),returnSeltFun:!0})}})},Mobi.productKnowPayVideoQuit=function(){document.getElementById("knowproductVideoMask").style.display="none",document.getElementById("knowPayVideo").load(),jm(".productBullet").show(),2!=Fai.top._other.templateInfo.templateDesignType&&jm(".productDetailHeader").show(),Fai.top._openThemeV3&&jm(".productDetailHeaderV3").show()},Mobi.hideFooterBox=function(){jm("#webFooterBox").css({display:"none"})},function(e,t,i){e.playKnowPayVideo=function(){t(".productBullet").hide(),t(".productDetailHeader").hide(),t(".productDetailHeaderV3").hide();var e=document.getElementById("knowproductVideoMask");document.getElementById("knowPayVideo");e.style.display="block",Mobi.logDog(201356,1)},e.playKnowPayVideoByPath=function(e,i){var o=document.getElementById("knowproductVideoMask"),n=document.getElementById("knowPayVideo");if(i.isConvertToM3u8Success)if(i.useM3u8){if(t(".productBullet").hide(),t(".productDetailHeader").hide(),t(".productDetailHeaderV3").hide(),o.style.display="block",Hls.isSupported()?(hls=new Hls,hls.loadSource(i.mediaPath),hls.attachMedia(n),hls.on(Hls.Events.MANIFEST_PARSED,function(){n.play()})):n.canPlayType("application/vnd.apple.mpegurl")&&(n.src=i.mediaPath,t(n).unbind("loadedmetadata.knowPayVideo").bind("loadedmetadata.knowPayVideo",function(){n.play()})),!i.isPay){var a=null;t(n).unbind("ended.knowPayVideo").bind("ended.knowPayVideo",function(){null!=a&&clearTimeout(a),a=setTimeout(function(){Mobi.createKnowPayPopup(e)},100)})}}else Mobi.ing("视频加密大概需要1-5分钟，请加密完成后再播放观看");else Mobi.ing("视频格式有误，请联系管理员更新视频");i.isPay?Mobi.logDog(201356,1):Mobi.logDog(201356,2)},e.checkKnowPayVideo=function(e,i){null==e||e<1||(Fai.top._manageMode?i?Mobi.ing("当前为管理态，不支持试看"):Mobi.ing("当前为管理态，不支持购买"):t.ajax({type:"post",url:"ajax/product_h.jsp?cmd=getKnowProductPayStatus",data:"productId="+e,success:function(i){var o=t.parseJSON(i);if(o.success)Mobi.playKnowPayVideoByPath(e,o);else{if(null!=o.isLogin&&!1===o.isLogin)return Mobi.storageReturnUrl(Fai.top.location.href),void(Fai.top.location.href="login.jsp");Mobi.ing(o.msg)}},error:function(e){}}))},e.quitKnowPayVideo=function(){document.getElementById("knowproductVideoMask").style.display="none",t(".productBullet").show(),2!=Fai.top._other.templateInfo.templateDesignType&&t(".productDetailHeader").show(),Fai.top._openThemeV3&&t(".productDetailHeaderV3").show()},e.createKnowPayPopup=function(e){t("#knowPayPopupContainer").length&&t("#knowPayPopupContainer").remove(),t("body").append('\n\t\t\t<div id="knowPayPopupContainer" class="knowPayPopupContainer">\n\t\t\t\t<div class="knowPayPopupBg"></div>\n\t\t\t\t<div class="knowPayPopupContent">\n\t\t\t\t\t<div class="knowPayPopupTip">\n\t\t\t\t\t\t<div class="knowPayPopupTitle">试看结束</div>\n\t\t\t\t\t\t<div class="knowPayPopupTips">试看已结束，如需要观看完整视频请单独购买</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="knowPayPopupBtnGroup">\n\t\t\t\t\t\t<div class="knowPayPopupCancel">取消</div>\n\t\t\t\t\t\t<div class="knowPayPopupClip"></div>\n\t\t\t\t\t\t<div class="knowPayPopupConfirm">购买</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),t("body").css("overflow","hidden"),t(".knowPayPopupCancel").unbind("click.knowPayPopup").bind("click.knowPayPopup",function(){return t(".knowPayPopupConfirm").unbind("click.knowPayPopupConfirm"),t(".knowPayPopupCancel").unbind("click.knowPayPopup"),t(".knowPayPopupBg").unbind("touchmove.knowPayPopup"),t(".knowPayPopupContent").unbind("touchmove.knowPayPopup"),t(".knowPayPopupContainer").unbind("touchmove.knowPayPopup"),t("#knowPayPopupContainer").remove(),t("body").css("overflow","initial"),!1}),t(".knowPayPopupConfirm").unbind("click.knowPayPopupConfirm").bind("click.knowPayPopupConfirm",function(){return null!=e&&Mobi.productKnowPayBtnClick(e),!1}),t(".knowPayPopupBg").unbind("touchmove.knowPayPopup").bind("touchmove.knowPayPopup",function(e){e.preventDefault()}),t(".knowPayPopupContent").unbind("touchmove.knowPayPopup").bind("touchmove.knowPayPopup",function(e){e.preventDefault()}),t(".knowPayPopupContainer").unbind("touchmove.knowPayPopup").bind("touchmove.knowPayPopup",function(e){e.preventDefault()})}}(Mobi,jm),function(e,t,i){e.SearchJumpProductUtils={bindJumpSearchProductEvent:function(e,i,o){null!=e&&null!=o&&t("#module"+e+" a").unbind("click.jumpInfo").bind("click.jumpInfo",function(t){Mobi.jumpModuleUtils.addModule(e,{moduleId:e,style:i,data:o})})},removeJumpSearchProductInfo:function(e){null!=e&&Mobi.jumpModuleUtils.removeModuleInfoById(e)}}}(Mobi,jm),Mobi.initProductAudioPlayer=function(e){var t=window.DocumentTouch&&document instanceof window.DocumentTouch||"ontouchstart"in document.documentElement,i=t?"touchstart":"mousedown",o=t?"touchmove":"mousemove",n=t?"touchend":"mouseup",a="micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i),r=e.picPath,s=e.istryOpen,l=e.productId,c=e.isFinPay,d=e.audioTryMin,m=e.imgZoomClass,p=e.isV1,u=e.isDefaultColorStyle,h=e.followColor,f=e.isUseCustomColor;Vue.component("product-audio-player",{template:'\n            <div class="product_audio_player_wrapper" :class="productAudioPlayerWrapperClass">\n                <div style="position: relative;display: inline-block;">\n                    <component :is="imgTag" class="product_audio_player_banner proDetailImg J_img_lazyload" :src-original="picPath" :class="imgZoomClass">\n                    </component>\n                    <div class="product_audio_try_tips" v-if="isShowTryTipsBtn">试听前{{audioTryMin}}分钟，购买后可收听完整内容</div>\n                    <div class="product_audio_try_tips" v-if="isShowBuyTips">当前内容购买后才可收听</div>\n                </div>\n                <div class="product_audio_player">\n                    <audio ref="audio" @canplay="oncanplay" @timeupdate="audioTimeUpdate"  @ended="audioEnd"></audio>\n                    <div class="product_audio_player_progress_wrapper" :style="progressWrapperStyle">\n                        <div class="product_auido_player_progress_base_line" @[downEvent]="controlAudioProgress" ref="progressLine">\n                            <div class="product_audio_player_progress_checked g_oldThemeBgColor g_main_bgColor_v3" :style="checkLineStyle"></div>\n                            <div class="product_audio_player_progress_hanlde g_oldThemeBgColor g_main_bgColor_v3" :style="handleStyle" @[downEvent]="moveControlAudioProgress"></div>\n                        </div>\n                        <div class="product_audio_player_time_area">\n                            <div class="product_audio_player_current_time product_audio_player_time">{{ currentTime | transTime}}</div>\n                            <div class="product_audio_player_all_time product_audio_player_time">{{duration | transTime}}</div>\n                        </div>\n                    </div>\n                    <div class="product_audio_player_tool">\n                        <svg class="product_audio_player_float" :style="floatStyle" @click="showWXfloatTips">\n                            <use xlink:href="#jzm-vicon_switch"></use>\n                        </svg>\n                        <svg class="product_audio_player_retreat" @click="retreatHandler">\n                            <use xlink:href="#jzm-vicon_retreat"></use>\n                        </svg>\n                        <svg class="product_audio_player_switch g_main_color_v3 g_oldThemeColor" @click="switchStatus" :style="switchStyle">\n                            <use :xlink:href="playStatusIcon"></use>\n                        </svg>\n                        <svg class="product_audio_player_forward" @click="forwardHandler">\n                            <use xlink:href="#jzm-vicon_forward"></use>\n                        </svg>\n                        <svg class="product_audio_player_multiple" @click="switchSpeedHandler">\n                            <use :xlink:href="multipleIcon"></use>\n                        </svg>\n                    </div>\n                    <div v-dom-portal="target" class="product_audio_player_wx_tips" v-show="isShowTryTips">\n                        <span class="product_audio_player_wx_tips_text">\n                            <span>点击右上角“...”，选择</span>\n                            <svg class="product_audio_player_floatingwindow">\n                                <use xlink:href="#jzm-vicon_floatingwindow"></use>\n                            </svg>\n                            <span>边听边聊微信</span>\n                        </span>\n                        <div class="product_audio_player_wx_tips_hide_btn" @click="hideHanlder">我知道了</div>\n                        <svg class="product_audio_player_wx_tips_tri">\n                            <use xlink:href="#jzm-vicon_triangle"></use>\n                        </svg>\n                    </div>\n                </div>\n            </div>\n            ',data:function(){return{picPath:r,progressWidth:"14",hanldeRadius:.225,isPlaying:!1,duration:0,currentTime:0,moveEvent:o,downEvent:i,upEvent:n,istryOpen:s,isFinPay:c,isWechat:a,target:"body",isShowTryTips:!1,audioTryMin:d,multipleArray:[.5,1,1.25,1.5,2],multipleCount:1,imgZoomClass:m,isInitAudio:!1,isV1:p,isDefaultColorStyle:u,followColor:h,isUseCustomColor:f}},computed:{productAudioPlayerWrapperClass:function(){return"product_audio_player_normal_header"},checkLineWidth:function(){return this.progressWidth*(this.progress/100)},checkLineStyle:function(){var e={width:"".concat(this.checkLineWidth,"rem")};return this.isUseCustomColor&&!this.isDefaultColorStyle&&(e["background-color"]=this.followColor),e},handleStyle:function(){var e={left:"".concat(this.checkLineWidth-this.hanldeRadius,"rem")};return this.isUseCustomColor&&!this.isDefaultColorStyle&&(e["background-color"]=this.followColor),e},progressWrapperStyle:function(){return{width:"".concat(this.progressWidth,"rem")}},playStatusIcon:function(){return this.isPlaying?"#jzm-vicon_suspend":"#jzm-vicon_play"},progress:function(){return this.duration?this.currentTime/this.duration*100:0},isShowTryTipsBtn:function(){return s&&!c},isShowBuyTips:function(){return!s&&!c},floatStyle:function(){var e={};return this.isWechat||(e.visibility="hidden"),e},currentMultiple:function(){return this.multipleArray[this.multipleCount%this.multipleArray.length]},multipleIcon:function(){var e="".concat(this.currentMultiple).split(".").join("-");return"#jzm-vicon_".concat(e,"x")},imgTag:function(){return this.isV1?"img":"div"},switchStyle:function(){if(this.isUseCustomColor&&!this.isDefaultColorStyle)return{color:this.followColor}}},filters:{transTime:function(e){function t(e){return"".concat(e).padStart(2,"0")}var i=t(parseInt(e/60)),o=t(parseInt(e%60));return"".concat(i,":").concat(o)}},methods:{switchStatus:function(){var e=this.$refs.audio;e.paused?this.checkAudio():(e.pause(),this.isPlaying=!1)},checkAudio:function(){var e=this;Fai.top._manageMode?this.istryOpen?Mobi.ing("当前为管理态，不支持试听"):Mobi.ing("当前为管理态，不支持购买"):this.isInitAudio||jm.ajax({type:"post",url:"ajax/product_h.jsp?cmd=getKnowProductPayStatus",data:"productId="+l,success:function(t){var i=jm.parseJSON(t);i.success?e.initPlayAduio(i):Mobi.ing("当前内容购买后才可收听")},error:function(e){}}),this.isInitAudio&&this.playAudio()},initPlayAduio:function(e){var t=this,i=e.isConvertToM3u8Success,o=e.useM3u8,n=e.mediaPath,a=this.$refs.audio;i?o?Hls.isSupported()?(hls=new Hls,hls.loadSource(n),hls.attachMedia(a),hls.on(Hls.Events.MANIFEST_PARSED,function(){t.isInitAudio=!0,t.playAudio()})):a.canPlayType("application/vnd.apple.mpegurl")&&(a.src=n,this.isInitAudio=!0,jm(a).unbind("loadedmetadata.knowPayVideo").bind("loadedmetadata.knowPayVideo",function(){t.playAudio()})):Mobi.ing("音频加密大概需要1-5分钟，请加密完成后再播放"):Mobi.ing("音频格式有误，请联系管理员更新视频")},playAudio:function(){var e=this,t=this.$refs.audio;jm("audio").each(function(e,t){t.pause()}),t.play().then(function(){t.currentTime===t.duration&&(t.currentTime=0),e.isPlaying=!0}).catch(function(){e.isPlaying=!1})},oncanplay:function(){this.updateDuration()},audioTimeUpdate:function(){this.updateDuration(),this.currentTime=this.$refs.audio.currentTime},controlAudioProgress:function(e){var t=this;this.updateAudioProgress(e),jm(this.$el).off("".concat(this.moveEvent,".audio")).on("".concat(this.moveEvent,".audio"),this.updateAudioProgress.bind(this)),jm(this.$el).off("".concat(this.upEvent,".audio")).on("".concat(this.upEvent,".audio"),function(){jm(t.$el).off("".concat(t.moveEvent,".audio")).off("".concat(t.upEvent,".audio"))})},updateAudioProgress:function(e){var i=this.$refs.audio,o=this.$refs.progressLine;if(!i.paused||0!=i.currentTime){var n=parseFloat(window.getComputedStyle(o,null).width.replace("px","")),a=jm(o).offset().left,r=(t?e.touches[0].pageX-a:e.pageX-a)/n;i.currentTime=i.duration*r,this.audioTimeUpdate()}},retreatHandler:function(){var e=this.currentTime-15;e=e<0?0:e,this.currentTime=e,this.$refs.audio.currentTime=e},forwardHandler:function(){var e=this.currentTime+15;e=e>this.duration?this.duration:e,this.currentTime=e,this.$refs.audio.currentTime=e},showWXfloatTips:function(){this.isShowTryTips=!0},hideHanlder:function(){this.isShowTryTips=!1},switchSpeedHandler:function(){this.multipleCount+=1;var e=this.currentMultiple;this.$refs.audio.playbackRate=e},audioEnd:function(){s&&!c&&this.createKnowPayPopup(),this.isPlaying=!1},moveControlAudioProgress:function(e){},updateDuration:function(){var e=this.$refs.audio.duration;(Number.isNaN(e)||e===1/0)&&(e=0),this.duration=e},createKnowPayPopup:function(){jm("#knowPayPopupContainer").length&&jm("#knowPayPopupContainer").remove(),jm("body").append('\n                        <div id="knowPayPopupContainer" class="knowPayPopupContainer audioKnowPay">\n                            <div class="knowPayPopupBg"></div>\n                            <div class="knowPayPopupContent">\n                                <div class="knowPayPopupTip">\n                                    <div class="knowPayPopupTitle">试听结束</div>\n                                    <div class="knowPayPopupTips">试听已结束，如需要听完整音频请单独购买</div>\n                                </div>\n                                <div class="knowPayPopupBtnGroup">\n                                    <div class="knowPayPopupCancel">取消</div>\n                                    <div class="knowPayPopupClip"></div>\n                                    <div class="knowPayPopupConfirm">购买</div>\n                                </div>\n                            </div>\n                        </div>\n                    '),jm("body").css("overflow","hidden"),jm(".knowPayPopupCancel").unbind("click.knowPayPopup").bind("click.knowPayPopup",function(){return jm(".knowPayPopupConfirm").unbind("click.knowPayPopupConfirm"),jm(".knowPayPopupCancel").unbind("click.knowPayPopup"),jm(".knowPayPopupBg").unbind("touchmove.knowPayPopup"),jm(".knowPayPopupContent").unbind("touchmove.knowPayPopup"),jm(".knowPayPopupContainer").unbind("touchmove.knowPayPopup"),jm("#knowPayPopupContainer").remove(),jm("body").css("overflow","initial"),!1}),jm(".knowPayPopupConfirm").unbind("click.knowPayPopupConfirm").bind("click.knowPayPopupConfirm",function(){return null!=l&&Mobi.productKnowPayBtnClick(l),!1}),jm(".knowPayPopupBg").unbind("touchmove.knowPayPopup").bind("touchmove.knowPayPopup",function(e){e.preventDefault()}),jm(".knowPayPopupContent").unbind("touchmove.knowPayPopup").bind("touchmove.knowPayPopup",function(e){e.preventDefault()}),jm(".knowPayPopupContainer").unbind("touchmove.knowPayPopup").bind("touchmove.knowPayPopup",function(e){e.preventDefault()})}},mounted:function(){}}),appc=(new Vue).$mount("#productAudioPlayer")},Mobi.alert=function(){var e=null;function t(){var e=document.getElementById("alert");e&&function(e,t,i){t="number"==typeof t?t:300,e.style.transition="opacity "+t+"ms linear",e.style.opacity=1,setTimeout(function(){e.style.opacity=0},0),i&&setTimeout(i,t)}(e,null,function(){e.parentElement.removeChild(e)})}return function(i){if(clearTimeout(e),e=setTimeout(t,3e3),document.getElementById("alert")){document.getElementById("alert").childNodes[0].childNodes[0].textContent=i}else{var o=window._resImageRoot;if(!o)try{o=window.top._resImageRoot}catch(e){o=""}var n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");n.appendChild(a),a.appendChild(r),a.appendChild(s),n.id="alert",r.setAttribute("data-role","msg"),n.style.cssText="position:fixed; top:50px; left: 50%; transform: translateX(-50%); z-index:9999;",a.style.cssText='height: 40px; line-height: 40px; margin:3px 0; font-size: 13px; font-family: "Microsoft Yahei","微软雅黑",宋体, 新宋体,sans-serif; color: #ff8e1e;  background-color: #fff5dc; z-index:9999; box-shadow: 0px 5px 10px -5px #b3b3b3; -moz-box-shadow: 0px 5px 10px -5px #b3b3b3; -webkit-box-shadow: 0px 5px 10px -5px #b3b3b3; position: relative; white-space: nowrap;',r.style.cssText="display: inline-block; margin-left: 15px; word-break:keep-all; white-space:nowrap; vertical-align: middle;",s.style.cssText="height: 40px; margin: 0px 10px 0px 7px; width:8px; cursor:pointer; background:url("+o+"/image/close02.png?v=201711250607) center no-repeat; display: inline-block; vertical-align: middle;",r.textContent=i,s.addEventListener("click",t),s.addEventListener("mouseenter",function(e){e.currentTarget.style.background="url("+o+"/image/close03.png?v=201711250607) center no-repeat"}),s.addEventListener("mouseleave",function(e){e.currentTarget.style.background="url("+o+"/image/close02.png?v=201711250607) center no-repeat"}),document.body.appendChild(n),function(e,t,i){t="number"==typeof t?t:300,e.style.transition="opacity "+t+"ms linear",e.style.opacity=0,setTimeout(function(){e.style.opacity=1},0),i&&setTimeout(i,t)}(n)}}}(),Mobi.initOnlineServiceWidth=function(){if(!Fai.top._openThemeV3){var e=jm("body");if(e.hasClass("mobiCol20")){if(Fai.top._isMobiMallOpen)return void jm("#webCustomerServiceBox").css("display","none");if(Fai.top._bookingOpen||Fai.top._immediatelyConsultOpen||Fai.top._productFormOpen)return void jm("#webCustomerServiceBox").css("display","none")}if((e.hasClass("mobiCol21")||e.hasClass("mobiCol28")||e.hasClass("mobiCol4"))&&Fai.top._newsCommentOpen)jm("#webCustomerServiceBox").css("display","none");else if(Fai.top.independentSetFooterBar&&jm("#webCustomerServiceBox").css("display","none"),!(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3)){var t=Mobi.getPreviewObject("customerServiceDiv");if(t){var i=t.querySelectorAll(".service").length;0===i?(jm("#webCustomerServiceBox").css("opacity",0),Fai.top._openOnlineService=!1,Fai.top._onlineServiceJson.open=!1):(jm("#webCustomerServiceBox").css("opacity",1),Fai.top._openOnlineService=!0,Fai.top._onlineServiceJson.open=!0),Mobi.allFixWXPA(1),jm("#customerServiceDiv .service").css("width",100/i+"%"),jm("#customerServiceDiv .serviceClass_1").off("click.log").on("click.log",function(){Mobi.logDog(200171,2)}),jm("#customerServiceDiv .serviceClass_5").off("click.log").on("click.log",function(){Mobi.logDog(200171,1)}),jm("#customerServiceDiv .serviceClass_-1").off("click.log").on("click.log",function(){Mobi.logDog(200171,3)})}}}},Mobi.showMapService=function(e){var t,i,o,n,a;e?(t=JSON.parse(e),i=t.an,o=t.ad,n=t.c,a=t.a):(t=Fai.top._onlineServiceJson.map,n=t.city,a=t.d_address),Fai.top.Mobi.getPreviewWindow().Mobi.mobiMapModule.bMapSearch("",{},n,a).then(function(e){var r=e.title,s=e.address,l=e.point,c={name:void 0===i||!t.inl&&""==i?r:i,province:n,areaDetail:a,detail:o||s,tel:t.t,other:"",bmp:{x:l.lng,y:l.lat},distance:"0"};Mobi.renderMapOption(c,t)}).catch(function(){Mobi.renderMapOption({name:"新增地址",province:"广州市",areaDetail:"天河路250号",detail:"广州市天河路250号",tel:"",other:"",bmp:{x:113.333394,y:23.139114},distance:"0"},t)})},Mobi.renderMapOption=function(e,t){var i={content:{}};i.content.isShowTel=t.ts;var o={manageMode:Fai.top._manageMode,isJumpLink:!0};Mobi.mapDetail.render(e,o,i)},Mobi.closeMapService=function(){Mobi.mobiShowScroll(),jm("#webMapServiceBox").removeClass("showMapService"),jm(window).off("popstate.map")},Mobi.unloadForATag=function(){jm.os.supportsTouch||jm("#g_body").delegate("#customerServiceDiv a","click",function(e){e.target||e.srcElement;var t,i=Fai.top._onlineServiceJson;if(this){var o=parseInt(this.getAttribute("id").substring(11)),n=jm(this).attr("href")||"";if(2===parseInt(o)||1===parseInt(o)){if(n.indexOf("tel:")<0&&n.indexOf("triggerServiceNumber")<0&&n.indexOf("sms:")<0)return;if(Fai.top._manageMode){for(var a in i)if(i[a].type==o){t=i[a];break}if(t.baseSetting.jumpCtrl){var r=t.baseSetting.jumpCtrl.jumpType;if(1!=r&&2!=r)return}}return t&&2==parseInt(o)&&""==t.number?(Mobi.alert("请输入接受信息的电话"),Fai.top.Mobi.getPreviewWindow().Mobi.onlineServiceClickCallBack(o,t.typeStr)):t&&1==o&&t.phoneInfo&&""==t.phoneInfo[0].number?(Mobi.alert("请输入电话号码"),Fai.top.Mobi.getPreviewWindow().Mobi.onlineServiceClickCallBack(o,t.typeStr)):Mobi.alert("该功能无法在桌面浏览器中启动"),!1}0==n.indexOf("tel:")&&Mobi.alert("该功能无法在桌面浏览器中启动")}})},Mobi.triggerServiceNumber=function(e,t){if(jm.os.supportsTouch)if(1==e){var i=-1!=window.navigator.userAgent.indexOf("swan/");"undefined"!=typeof swan&&i?swan.webView.getEnv(function(e){e.smartprogram?swan.makePhoneCall({phoneNumber:t}):window.location.href="tel:"+t}):window.location.href="tel:"+t}else 2==e&&(window.location.href="sms:"+t);else Mobi.alert("该功能无法在桌面浏览器中启动")},Mobi.showPhonesBg=function(){var e=jm(".J_showMorePhone");e.length<1||e.on("click.phone",function(e){Mobi.showJumpPhone()})},Mobi.showJumpPhone=function(){var e=Fai.top._onlineServiceJson.phone.phoneInfo;if(e&&e.length>=1){Mobi.mobiHideScroll();var t=document.body.clientHeight,i=document.body.clientWidth,o=document.getElementById("g_web"),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");n.id="phoneDiv",a.id="fullbg",r.id="tablesDiv",s.id="scrollTable",n.className="phoneDiv",r.className="tablesDiv",a.className="phoneFullBg",s.className="scrollTable",l.id="iScrollDiv",o.appendChild(n);var c=document.getElementById("phoneDiv");c.appendChild(a),c.appendChild(r),r.appendChild(s);var d=document.getElementById("fullbg"),m=document.getElementById("tablesDiv"),p=document.getElementById("scrollTable");p.appendChild(l);var u=document.getElementById("iScrollDiv");d.style.height=t+"px",d.style.width=i+"px",d.style.position="fixed";for(var h=0;h<e.length;h++){var f=h+1,g=Mobi.encodeHtml(e[h].name),v=e[h].number,b=document.createElement("div");b.id="fullTableDiv"+f,b.className="fullTableDiv",u.appendChild(b);document.getElementById("fullTableDiv");b.innerHTML="<a id='numberHref_"+Fai.top._onlineServiceJson.phone.type+f+"' href='javascript:Mobi.triggerServiceNumber(1, \""+v+"\");'>";var j=c.getElementsByClassName("fullTableDiv")[h].getElementsByTagName("a")[0],_=document.createElement("div");_.id="tableDiv",_.className="tableBox tableDiv",j.appendChild(_);document.getElementById("tableDiv");var M=document.createElement("div"),y=document.createElement("div"),S=document.createElement("div"),I=document.createElement("div"),w=(document.createElement("div"),document.createElement("div"));M.className="phoneName phonebox",M.id="phoneName"+f,y.className="phoneNumber phonebox",y.id="phoneNumber"+f,S.className="phoneOperation phonebox",S.id="phoneOperation"+f,I.id="phoneLine",I.className="phoneLine",w.id="phoneOperImg"+f,w.className="phoneOperImg icon-phoneOperImg",_.appendChild(M),_.appendChild(y),_.appendChild(S),u.appendChild(I),S.appendChild(w);var C=document.getElementById("phoneName"+f),P=document.getElementById("phoneNumber"+f),x=(document.getElementById("phoneOperation"+f),document.getElementById("phoneOperImg"),document.createTextNode(g));C.appendChild(x),P.innerHTML=v,jm.os.supportsTouch||(j.onclick=function(){Mobi.alert("该功能无法在桌面浏览器中启动")})}var L=document.createElement("div"),k=document.createElement("div");L.id="pCancle",L.className="pCancle",k.id="phoneCancle",k.className="phoneCancle",m.appendChild(L),L.appendChild(k);var F=document.getElementById("phoneCancle");F.innerHTML=LS.cancel;var T=document.documentElement.clientHeight-F.offsetHeight;p.offsetHeight>T&&(s.style.height=document.documentElement.clientHeight-F.offsetHeight+"px"),Mobi.deviceTypeIsMobi()&&new iScroll("scrollTable"),setTimeout("tablesDiv.style.cssText = 'bottom: 0; ';",10),setTimeout(function(){d.style.opacity="0.3"},10);var B=0,A=jm("#phoneDiv").find(".phoneName");A.forEach(function(e){var t=jm(e).offset();t.width>B&&(B=t.width)}),0!=B&&A.forEach(function(e){jm(e).css("width",B+"px")}),d.onclick=function(){var e=document.getElementById("phoneDiv");m.style.cssText="bottom: -100%",d.style.opacity="0",Mobi.mobiShowScroll(),setTimeout(function(){e.parentNode.removeChild(e)},100)},F.onclick=function(){var e=document.getElementById("phoneDiv");m.style.cssText="bottom: -100%",d.style.opacity="0",Mobi.mobiShowScroll(),setTimeout(function(){e.parentNode.removeChild(e)},100)}}},Mobi.showQqBg=function(){var e=jm(".J_showMoreQq");e.length<1||e.on("click.qq",function(e){Mobi.showMoreQQ()})},Mobi.showMoreQQ=function(){var e=Fai.top._onlineServiceJson.tcInfo||Fai.top._onlineServiceJson.qq.qqInfo;if(e.length>=1){Mobi.mobiHideScroll();var t=document.body.clientHeight,i=document.body.clientWidth,o=document.getElementById("g_web"),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div");n.id="qqDiv",a.id="fullbg",r.id="tablesDiv",s.id="scrollTable",n.className="qqDiv",r.className="tablesDiv",a.className="qqFullBg",s.className="scrollTable",o.appendChild(n);var l=document.getElementById("qqDiv");l.appendChild(a),l.appendChild(r),r.appendChild(s);var c=document.getElementById("fullbg"),d=document.getElementById("tablesDiv"),m=document.getElementById("scrollTable");c.style.height=t+"px",c.style.width=i+"px",c.style.position="fixed";for(var p=0;p<e.length;p++){var u=p+1,h=Mobi.encodeHtml(e[p].name),f=e[p].number,g=document.createElement("div");g.id="fullTableDiv"+u,g.className="fullTableDiv",m.appendChild(g);document.getElementById("fullTableDiv");g.innerHTML="<a id='numberHref_5"+u+"' target='_blank' href='javascript: Mobi.openQQ(\""+f+"\");'>";var v=document.getElementById("numberHref_5"+u),b=document.createElement("div");b.id="tableDiv",b.className="tableBox tableDiv",v.appendChild(b);document.getElementById("tableDiv");var j=document.createElement("div"),_=document.createElement("div"),M=document.createElement("div"),y=document.createElement("div"),S=(document.createElement("div"),document.createElement("div"));j.className="qqName qqbox",j.id="qqName"+u,_.className="qqNumber qqbox",_.id="qqNumber"+u,M.className="qqOperation qqbox",M.id="qqOperation"+u,y.id="qqLine",y.className="qqLine",S.id="qqOperImg"+u,S.className="qqOperImg icon-qqOperImg",b.appendChild(j),b.appendChild(_),b.appendChild(M),m.appendChild(y),M.appendChild(S);var I=document.getElementById("qqName"+u),w=document.getElementById("qqNumber"+u),C=(document.getElementById("qqOperation"+u),document.getElementById("qqOperImg"),document.createTextNode(h));I.appendChild(C),w.innerHTML=f}var P=document.createElement("div"),x=document.createElement("div");P.id="qCancle",P.className="qCancle",x.id="qqCancle",x.className="qqCancle",d.appendChild(P),P.appendChild(x);var L=document.getElementById("qqCancle");L.innerHTML=LS.cancel;var k=document.documentElement.clientHeight-L.offsetHeight;m.offsetHeight>k&&(s.style.height=document.documentElement.clientHeight-L.offsetHeight+"px");var F=0,T=jm("#qqDiv").find(".qqName");T.forEach(function(e){var t=jm(e).offset();t.width>F&&(F=t.width)}),0!=F&&T.forEach(function(e){jm(e).css("width",F+"px")}),setTimeout("tablesDiv.style.cssText = 'bottom: 0; ';",10),setTimeout(function(){c.style.opacity="0.3"},10),c.onclick=function(){var e=document.getElementById("qqDiv");d.style.cssText="bottom: -100%",c.style.opacity="0",Mobi.mobiShowScroll(),setTimeout(function(){e.parentNode.removeChild(e)},100)},L.onclick=function(){var e=document.getElementById("qqDiv");d.style.cssText="bottom: -100%",c.style.opacity="0",Mobi.mobiShowScroll(),setTimeout(function(){e.parentNode.removeChild(e)},100)}}},Mobi.bindServiceBtnEvent=function(e,t){var i=jm(".serviceBtn");i.length<1||(i.off("click.ser").on("click.ser",function(){jm("body").attr("ontouchmove","return false;"),Mobi.createMallServicePanel()}),i.off("mouseover.ser").on("mouseover.ser",function(){Fai.top._manageMode&&Mobi.addModuleLayer(jm(this).attr("id"),[{text:"编辑客服",display:"text",className:"edit",evalScript:"Mobi.getPreviewWindow().Mobi.setServiceTool();"}],4,!0)}),i.off("mouseout.ser").on("mouseout.ser",function(){Fai.top._manageMode&&Mobi.removeModuleLayer(jm(this).attr("id"))}))},Mobi.createMallServicePanel=function(){2==Fai.top._mallService||Fai.top._openThemeV3?Mobi.mallServiceList():Mobi.notMallServiceList()},Mobi.mallServiceList=function(){var e,t=Fai.top._serviceList,i=[];if(t.forEach(function(e){1==e.showType&&i.push(e)}),1!=i.length){Mobi.mobiHideScroll();var o,n,a,r="<div class='serviceFullBg'></div>",s="",l="",c="";for(r+="<div id='J_serviceListPanel' class='serviceListPanel'>",o=0,n=i.length;o<n;o++)a=i[o],showType=a.showType,s=a.classname,a.serviceType,"true"==a.isFontIcon?(s=a.classname,c=""):(s="",c="background-image:url("+a.filePath+");"),l=a.color?"color:"+a.color+";":"",showType&&(0==a.serviceType?(r+="<div class='serviceItem qqServiceLine'>",r+="<a id='qqServiceItem"+o+"' href='javascript: Mobi.openQQ(\""+a.serviceAccount+"\");'>",r+="<div class='serviceIcon'><span style='"+c+l+";' class=' serviceIconText "+s+"'></span></div>",r+="<div class='serviceName'><span class='serviceNameText'>"+a.showFont+"</span></div>",r+="<div class='serviceNumber'><span class='serviceNumberText'>"+a.serviceAccount+"</span></div>",r+="<div class='operationBox'><div class='operationIcon icon-operation'></div></div>",r+="</a>",r+="</div>"):1==a.serviceType?(r+="<div class='serviceItem weChatServiceLine'>",r+="<a id='weChatServiceItem"+o+"' href='javascript:;' onclick='Mobi.showWeChatService(\""+a.code+"\")'>",r+="<div class='serviceIcon'><span style='"+c+l+"' class=' serviceIconText "+s+"'></span></div>",r+="<div class='serviceName'><span class='serviceNameText'>"+a.showFont+"</span></div>",r+="<div class='serviceNumber'><span class='serviceNumberText'>点击咨询</span></div>",r+="<div class='operationBox'><div class='operationIcon icon-operation'></div></div>",r+="</a>",r+="</div>"):2==a.serviceType?(r+="<div class='serviceItem baiduBridgeServiceLine'>",r+="<a id='baiduBridgeServiceItem"+o+"' href='javascript:;' onclick='Mobi.showBaiduBridge()'>",r+="<div class='serviceIcon'><span style='"+c+l+";' class=' serviceIconText "+s+"'></span></div>",r+="<div class='serviceName'><span class='serviceNameText'>"+a.showFont+"</span></div>",r+="<div class='serviceNumber'><span class='serviceNumberText'>点击咨询</span></div>",r+="<div class='operationBox'><div class='operationIcon icon-operation'></div></div>",r+="</a>",r+="</div>"):(r+="<div class='serviceItem phoneServiceLine'>",r+="<a id='phoneServiceItem"+o+"' href='javascript:Mobi.triggerServiceNumber(1, \""+a.serviceAccount+"\");'>",r+="<div class='serviceIcon'><span style='"+c+l+"' class=' serviceIconText "+s+"'></span></div>",r+="<div class='serviceName'><span class='serviceNameText'>"+a.showFont+"</span></div>",r+="<div class='serviceNumber'><span class='serviceNumberText'>"+a.serviceAccount+"</span></div>",r+="<div class='operationBox'><div class='operationIcon icon-operation'></div></div>",r+="</a>",r+="</div>"));r+="<div id='cancleSer' class='cancleSer'>"+LS.cancel+"</div>",r+="</div>",jm(r).appendTo(jm("body")),jm(".serviceFullBg, .cancleSer").off("click.ser").on("click.ser",function(){jm(window).off("scroll"),jm(".serviceFullBg").remove(),jm(".serviceSettingEntrance").remove(),jm(".serviceListPanel").remove(),jm("body").removeAttr("ontouchmove"),Mobi.mobiShowScroll(),Fai.top._manageMode&&Mobi.removeEditLayer(jm(".serviceListPanel"))}),jm(".serviceListPanel .qqServiceLine").off("click.log").on("click.log",function(e){Mobi.logDog(200171,1)}),jm(".serviceListPanel .baiduBridgeServiceLine").off("click.log").on("click.log",function(e){Mobi.logDog(200171,3)}),jm(".serviceListPanel .phoneServiceLine").off("click.log").on("click.log",function(e){Mobi.logDog(200171,2)}),Mobi.isPC()&&jm(".phoneServiceLine").off("click.ser").on("click.ser",function(){Mobi.alert("该功能无法在桌面浏览器中启动！")})}else if(0==(e=i[0]).serviceType)Mobi.openQQ(e.serviceAccount);else if(1==e.serviceType)Mobi.showWeChatService(e.code);else if(2==e.serviceType)Mobi.showBaiduBridge();else{if(Mobi.isPC())return void Mobi.alert("该功能无法在桌面浏览器中启动！");window.location.href="tel:"+e.serviceAccount}},Mobi.banScroll=function(e){jm(window).scroll(function(){jm(window).scrollTop(e)})},Mobi.notMallServiceList=function(){var e=Fai.top._onlineServiceJson.phone,t=Fai.top._onlineServiceJson.qq,i=e&&e.phoneInfo&&e.phoneInfo.length>0,o=t&&t.qqInfo&&t.qqInfo.length>0;if(i||o||e.open||t.open){Mobi.mobiHideScroll();var n,a,r,s="<div class='serviceFullBg'></div>",l="",c="",d="";if(s+="<div id='J_serviceListPanel' class='serviceListPanel'>",i&&e.open)for(l=e.baseSetting.classname,e.baseSetting.colIconCusType,2!=e.baseSetting.colIconType?l=e.baseSetting.classname+" icon-phoneServiceIcon":d="background-image:url("+e.baseSetting.iconFilePath+");",c=e.baseSetting.color?"background-color:"+e.baseSetting.color+";":"",n=0,a=e.phoneInfo.length;n<a;n++)s+="<div class='serviceItem phoneServiceLine'>",s+="<a id='phoneServiceItem"+n+"' href='tel:"+(r=e.phoneInfo[n]).number+"'>",s+="<div class='serviceIcon'><span style='"+d+c+"' class='phoneServiceIcon serviceIconText "+l+"'></span></div>",s+="<div class='serviceName'><span class='serviceNameText'>"+r.name+"</span></div>",s+="<div class='serviceNumber'><span class='serviceNumberText'>"+r.number+"</span></div>",s+="<div class='operationBox'><div class='operationIcon icon-operation'></div></div>",s+="</a>",s+="</div>";if(l="",1,0,l="","",d="",c="",o&&t.open)for(l=t.baseSetting.classname,t.baseSetting.colIconCusType,2!=t.baseSetting.colIconType?l=t.baseSetting.classname+" icon-qqServiceIcon":d="background-image:url("+t.baseSetting.iconFilePath+");",c=t.baseSetting.color?"background-color:"+e.baseSetting.color+";":"",n=0,a=t.qqInfo.length;n<a;n++)s+="<div class='serviceItem qqServiceLine'>",s+="<a id='qqServiceItem"+n+"' href='javascript: Mobi.openQQ(\""+(r=t.qqInfo[n]).number+"\");'>",s+="<div class='serviceIcon'><span style='"+d+c+";' class='qqServiceIcon serviceIconText "+l+"'></span></div>",s+="<div class='serviceName'><span class='serviceNameText'>"+r.name+"</span></div>",s+="<div class='serviceNumber'><span class='serviceNumberText'>"+r.number+"</span></div>",s+="<div class='operationBox'><div class='operationIcon icon-operation'></div></div>",s+="</a>",s+="</div>";s+="<div id='cancleSer' class='cancleSer'>"+LS.cancel+"</div>",s+="</div>",jm(s).appendTo(jm("body")),jm(".serviceFullBg, .cancleSer").off("click.ser").on("click.ser",function(){jm(window).off("scroll"),jm(".serviceFullBg").remove(),jm(".serviceSettingEntrance").remove(),jm(".serviceListPanel").remove(),Mobi.mobiShowScroll(),jm("body").removeAttr("ontouchmove"),Fai.top._manageMode&&Mobi.removeEditLayer(jm(".serviceListPanel"))}),Mobi.isPC()&&jm(".phoneServiceLine").off("click.ser").on("click.ser",function(){Mobi.alert("该功能无法在桌面浏览器中启动！")}),jm(".serviceListPanel").mouseover(function(){Fai.top._manageMode&&Mobi.addModuleLayer(jm(this).attr("id"),[{text:"编辑客服",display:"text",className:"edit",evalScript:"Mobi.getPreviewWindow().Mobi.setServiceTool();"}],-1,!0)}),jm(".serviceListPanel").mouseout(function(){Fai.top._manageMode&&Mobi.removeModuleLayer(jm(this).attr("id"))})}},Mobi.setServiceTool=function(){top.Fai.popupWindowVersionTwo.createPopupWindow({title:"设置客服",frameSrcUrl:"mobiServiceOnline.jsp",width:750,height:600,version:2,closeFunc:function(){jm(".serviceFullBg").remove(),jm(".serviceSettingEntrance").remove(),jm(".serviceListPanel").remove(),jm(window).off("scroll"),Mobi.bindServiceBtnEvent()}}),Mobi.logDog(200166,2)},Mobi.unLoadForWechat=function(){var e=document.querySelector("#customerServiceDiv");if(e){for(var t=e.querySelectorAll("a"),i=!1,o=0,n=t.length;o<n;o++)if(-1!==t[o].href.indexOf("mailto:")){i=!0;break}i&&(e.onclick=function(e){var t=e.target;if(-1!==jm(t).parents("a").attr("href").indexOf("mailto:")&&Mobi.getPreviewWindow().Mobi.isWechat()){var i=function(){r.style.display="none",s.style.display="none",r=null,s=null,a.ontouchmove=null,a=null,l.onclick=null,l=null};e.stopPropagation(),e.preventDefault();var o=window,n=document,a=n.querySelector("body"),r=n.querySelector(".fk-unloadForWechatBg"),s=r?r.querySelector(".fk-unloadForWechat"):null,l=s?s.querySelector(".f-cross"):null,c=o._htmlFontSize/40;a.ontouchmove=function(e){e.preventDefault()},null==r?("<div class='fk-unloadForWechatBg'>","  <div class='fk-unloadForWechat'>","      <div class='f-crossWrap'>","          <div class='f-cross'></div>","      </div>","      <div class='f-tipImgWrap'>","          <div class='f-tipImg'></div>","      </div>","      <p>微信暂不支持发送邮件功能</p>","      <p>请到浏览器打开！</p>","  </div>","</div>",jm("<div class='fk-unloadForWechatBg'>  <div class='fk-unloadForWechat'>      <div class='f-crossWrap'>          <div class='f-cross'></div>      </div>      <div class='f-tipImgWrap'>          <div class='f-tipImg'></div>      </div>      <p>微信暂不支持发送邮件功能</p>      <p>请到浏览器打开！</p>  </div></div>").appendTo(jm("body")),n=document,r=n.querySelector(".fk-unloadForWechatBg"),s=r.querySelector(".fk-unloadForWechat"),l=s.querySelector(".f-cross"),s.querySelector(".f-tipImg").style.transform="scale("+c+", "+c+") ",l.style.transform="scale("+c+", "+c+")",s.style.top=(o.screen.availHeight-s.clientWidth)/2-60+"px",s.style.left=(o.screen.availWidth-s.clientWidth)/2+"px",l.onclick=i):(r.style.display="block",s.style.display="block",l.onclick=i)}})}},Mobi.isOpenBaiduBridge=function(){var e=Fai.top.Mobi.getPreviewWindow()._hmt,t=!1;void 0!==e&&(void 0!==e.id&&(t=!0));return t},Mobi.showBaiduBridge=function(){if(Mobi.isOpenBaiduBridge())Mobi.showBaiduBridgeV2();else if(Fai.top._manageMode){var e=[];Fai.top._oem?e.push("<div id='baiduBridgeTips'>开启该功能需先接入百度商桥 <a href='"+Mobi.getOemViewUrl(589)+"' target='_blank'>接入教程</a></div>"):e.push("<div id='baiduBridgeTips'>开启该功能需先接入百度商桥 <a href='http://"+Fai.top._jzProUrl+"/blog/604' target='_blank'>接入教程</a></div>");var t=Fai.top.Fai.popupWindow({title:"温馨提示",divContent:e,width:374,height:88});Fai.top.Fai.addPopupWindowBtn(t,{id:"save",text:"知道了",extClass:"saveButton",click:function(){Fai.top.Fai.closePopupWindow(t)}})}else Mobi.alert("未接入百度商桥")},Mobi.showBaiduBridgeV2=function(){function e(){setTimeout(function(){jm("body").css("overflow",""),jm("body").attr("ontouchmove",""),jm("html").css("overflow","")},0)}jm("ins#newBridge").show(),jm("ins#newBridge").find("#nb_icon_wrap").length&&jm("ins#newBridge").find("#nbWebImLightContainer").hide(),jm("ins#newBridge").find("#nb_icon_wrap").hide(),jm("ins#newBridge").find("#nb_nodeboard").hide(),jm("ins#newBridge").off("click","#nb_icon_wrap").on("click","#nb_icon_wrap",function(){jm("ins#newBridge").find("#nbWebImLightContainer").show()}),jm("ins#newBridge").find("#nbWebImLightContainer").length>0?jm("ins#newBridge").find("#nb_invite_wrap").remove():jm("ins#newBridge").find("#nb_invite_wrap").show(),jm("ins#newBridge").find("#nb_toolbar_wrap").length>0&&!Fai.top._manageMode&&jm("ins#newBridge").find("#nb_toolbar_wrap").hide(),Fai.top.Mobi.getPreviewWindow().jm("#nb_icon_wrap").click(),jm("ins#newBridge").off("click","#nbwlToggle").on("click","#nbwlToggle",function(){jm("ins#newBridge").hide()}),jm("ins#newBridge").off("click","#nb_nodeboard_close").on("click","#nb_nodeboard_close",function(){jm("ins#newBridge").hide()}),jm("ins#newBridge").off("click","#sucess_close").on("click","#sucess_close",function(){jm("ins#newBridge").hide()}),jm("ins#newBridge").off("click",".qiao-webimlite-head-close").on("click",".qiao-webimlite-head-close",e),jm("ins#newBridge").off("click","#nb_invite_cancel").on("click","#nb_invite_cancel",e),jm("ins#newBridge").off("click","#nb_invite_tool").on("click","#nb_invite_tool",e),window.addEventListener("popstate",function(t){e()},!1)},Mobi.showWeChatService=function(e){if(Fai.top._manageMode&&top.Mobi.checkSaveBar())return!1;var t="";t+="<div class='weChatCodeBg' style='position:absolute;top:0;width:100%;height:100%;z-index:9998;'>",t+="<div class='weChatBg' style='position:absolute;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.7);'></div>",t+="</div>",t+="<div class='weChatCodePanel' style='top:0;width:100%;z-index: 9999;'>",t+="<div class='weChatBackground' style='z-index:9999;background:#fff;border-radius:0.25rem;width:10.9rem;height:11.9rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);transform:translate(-50%,-50%);'></div>",t+="<img class='weChatCode' style='z-index:9999;width:8rem;height:8rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);transform:translate(-50%,-50%);margin-top:-0.50rem;' src='"+e+"'>",t+="<span class='weChatCodeFont' style='z-index:9999;width:8rem;height:8rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);transform:translate(-50%,-50%);margin-top:7.925rem;font-size:0.65rem;text-align:center;'>"+(Mobi.isWechat()?LS.weChatCodeTip:LS.scanWeChatCodeTip)+"</span>",t+="</div>",jm("#g_web").append(t),jm("html,body").css("overflow","hidden"),jm("html,body").css("height","100%"),jm("#g_web").on("touchmove",function(e){e.preventDefault()}),jm("#g_web").find(".weChatCodeBg, .weChatCodeFont").click(function(){jm("#g_web").find(".weChatCodeBg").hide(),jm("#g_web").find(".weChatCodePanel").hide(),jm("html,body").css("overflow",""),jm("#g_web").off("touchmove")})},Mobi.showShare=function(e){var t=Fai.top.all_oks_LinkUrl,i=Fai.top._onlineServiceJson.oneKeySharing.shareLinkList,o=[];t.forEach(function(e,t){-1!=i.indexOf(e.icon)&&o.push(e)});var n={shareLinkList:JSON.stringify(o),fromOks:!0},a={triggerId:"oneKeySharing",pageBg:!0,pageHtml:Mobi.sharePage(n),direction:"bottom",callback:function(){Mobi.showCommSharePanel("shareListShowSwipe2","page",e)},closeWebPage:"#shareListPanelBg2"};Fai.top._oneKeySharingChanged&&(a.redo=!0),null!=e&&""!=e&&(a.redo=!0),Mobi.showPanel(a)},Mobi.openQQ=function(e){if(Fai.top._manageMode)Fai.top.Fai.ing("管理态不支持跳转外部链接，请通过“预览”进行访问",!0);else{var t="http://wpa.qq.com/msgrd?v=3&uin="+e+"&site=qq&menu=yes";Mobi.isWechat()||Mobi.isPC()||(t="mqqwpa://im/chat?chat_type=wpa&uin="+e,jm.os.ios&&(t="mqqwpa://im/chat?chat_type=wpa&uin="+e+"&version=1&src_type=web&web_src=oicqzone.com")),window.location.href=t}},Mobi.initLocater=function(){var e=jm("#multiLanguageCtrl ");if(!e)return!1;var t=jm("#lanSelect .lanContainer").find("div[currentlan]"),i=1===t.length?jm(t[0]).text():jm(t[1]).text(),o=1===t.length?jm(t[0]).attr("currentlan"):jm(t[1]).attr("currentlan");t.hide(),jm(e).addClass("Icon"+o),jm("#lanSelected").addClass("Icon"+o),e.find(".lanTitle").eq(0).text(i),jm("#lanSelected").find(".lanTitle").eq(0).text(i),jm(".lanItem ").click(function(e){jm("#lanSelect").length<1||0==parseInt(jm("#lanSelect").height())||(e.stopPropagation(),Fai.top._manageMode||(document.location.href=jm(this).attr("value")))}),jm(document).unbind("click").bind("click",function(e){var t=e.target||e.srcElement;"multiLanguageCtrl"!==t.id&&(0==jm(t).closest("#lanSelect").length&&Mobi.closeLanSelect(),navigator.userAgent.toLowerCase().indexOf("sogoumobilebrowser")>-1||e.stopPropagation())}),jm("#lanSelect .lanContainer").height(0);var n=Mobi.getUrlParam(Mobi.getPreviewWindow().location.href,"returnUrl");n||(n=Mobi.getPreviewWindow().location.pathname+Mobi.getPreviewWindow().location.search),n=jm.encodeUrl(n);var a=jm("#topBarMemberSignup").attr("href");jm("#topBarMemberSignup").attr("href",a+n);var r=jm("#topBarMemberName").attr("href");jm("#topBarMemberName").attr("href",r+n)},Mobi.languageCtrl=function(){var e=function(e){return parseInt(jm("#lanSelect").height())>0?Mobi.closeLanSelect():(Fai.top._manageMode&&Mobi.removeAllEditLayer(),Mobi.openLanSelect()),e.stopPropagation(),!1};Mobi.getTransitionEndEventName();Fai.top._manageMode?(setTimeout(function(){$(Mobi.getPreviewObject("multiLanguageCtrl")).unbind("click").bind("click",e),$(Mobi.getPreviewObject("lanSelected")).unbind("click").bind("click",e)},2e3),Mobi.getPreviewObject("lanSelect")):(jm("#multiLanguageCtrl").unbind("click").bind("click",e),jm("#lanSelected").unbind("click").bind("click",e),document.getElementById("lanSelect"))},Mobi.closeLanSelect=function(){jm("#lanSelect").length<1||0==parseInt(jm("#lanSelect").height())||(jm("#bgm_icon").length>0&&jm("#bgm_icon").hasClass("bgm_rightUp")&&jm("#bgm_icon").css("visibility","visible"),jm("#lanSelect").height(0),jm("#lanSelect").css("opacity",.3),jm("#lanSelect .lanContainer").height(0),Fai.top._manageMode&&jm("#lanFixed").remove())},Mobi.openLanSelect=function(){if(!(jm("#lanSelect").length<1||parseInt(jm("#lanSelect").height())>0)){jm("#bgm_icon").length>0&&jm("#bgm_icon").hasClass("bgm_rightUp")&&jm("#bgm_icon").css("visibility","hidden"),jm("#lanSelect .lanContainer").height("");var e=parseFloat(jm("#lanSelected").height())+parseFloat(jm("#lanSelect .lanContainer").height()),t=jm(".multiLanguageCtrl ").css("margin-top");e+=t=t.indexOf("px")>0?parseFloat(t.substr(0,t.length-2)):parseFloat(t),jm("#lanSelect").height(e+"px"),jm("#lanSelect").css("opacity",1),Fai.top._manageMode&&jm("#webMultilingualArea").append("<div id='lanFixed' class='lanFixed'></div>")}},Mobi.removeLanSelectFlag=function(){jm("#lanSelect").removeClass("lanDisabled")},Mobi.addLanSelectFlag=function(){jm("#lanSelect").addClass("lanDisabled")},Mobi.initFooterLanguageEvent=function(){if(!(Fai.top.templateFrameId<2e3||Fai.top.templateFrameId>=3e3)){var e=jm("#footer"),t=e.find(".languageVis"),i=e.find(".languageFullBg"),o=e.find(".languageListPanel");1==e.find(".langItem").length&&e.find(".footLanguageItem").hide(),t.off("click.lang").on("click.lang",function(){i.show(),o.addClass("langPanelUp")}),i.off("click.lang").on("click.lang",function(){jm(this).hide(),o.removeClass("langPanelUp")});var n=e.find(".langItem[currentlan='"+Fai.top._lcid+"']").text();e.find(".languageVis a").eq(0).text(2052==Fai.top._lcid?"中文版":n),jm(".langItem").click(function(e){e.stopPropagation(),document.location.href=jm(this).attr("value")})}},Mobi.initFooterStyle=function(e){var t=jm("#footer"),i=e.rt.c,o=e.rt.s,n=t.find(".technicalSupport"),a=t.find(".footerMenu"),r=n.find("a"),s=n.eq(1).find(".footerSep");linkFontColor=e.gt.c,linkFontSize=e.gt.s,0==e.fb.y?Mobi.removeCtrlStyleCssList("fixedAreaBoxStyle","",[{cls:"#footer",key:"background"}]):2==e.fb.y?Mobi.refreshFooterBg(e):Mobi.setCtrlStyleCssList("fixedAreaBoxStyle","",[{cls:"#footer",key:"background",value:"none"}]),0==e.rt.y?n.css({color:"#999",fontSize:"0.6rem"}):n.css({color:i,fontSize:o+"px"}),0==e.gt.y?(s.css({color:"#999",fontSize:"0.6rem"}),r.css({color:"#999",fontSize:"0.6rem"})):(s.css({color:linkFontColor,fontSize:linkFontSize+"px"}),r.css({color:linkFontColor,fontSize:linkFontSize+"px"}),a.find("a").css({color:linkFontColor,fontSize:linkFontSize+"px"}))},Mobi.refreshFooterBg=function(e){var t=e.fb,i={repeat:t.r,color:t.c,picScale:t.ps,imgPath:t.p,type:t.y},o="";if(1==i.type)o="none",Util.setAdvanceStyleList([{cls:".navbarV3",key:"background",value:o}]);else if(2==i.type){i.repeat;null!=i.color&&void 0!==i.color||(i.color="#000");var n=i.color,a=(o="",i.imgPath);if(a)if(o+="url("+a+") ",0==i.picScale)switch(i.repeat){case 3:o+="repeat center";break;case 5:o+="center top /100% repeat";break;case 11:o+="repeat-x top";break;case 1:o+="repeat-x center";break;case 12:o+="repeat-x bottom";break;case 21:o+="repeat-y left";break;case 2:o+="repeat-y center";break;case 22:o+="repeat-y right"}else if(1==i.picScale)switch(o+="no-repeat ",i.repeat){case 13:o+="left top";break;case 8:o+="center top";break;case 14:o+="right top";break;case 6:o+="center left";break;case 0:o+="center center";break;case 7:o+="center right";break;case 15:o+="bottom left";break;case 9:o+="bottom center";break;case 16:o+="bottom right"}else 2==i.picScale?o+="no-repeat center /cover":3==i.picScale?o+="no-repeat center top /100% 100%":4==i.picScale&&(o+="no-repeat center /contain");n.indexOf("linear-gradient")>=0&&a?o+=","+n:o+=" "+n,jm("#footer").css("background",o)}},Mobi.setFooterBg=function(e,t){var i=t,o="",n=!1,a=jm("#footer");4==i.fb.r?(o="100% 100%",n=!0):5==i.fb.r&&(o="100%",n=!0),a.css("background",e),n&&a.css("background-size",o)},Mobi.languageCtrlV3=function(){var e=jm("#languageSelect");function t(t){var o,n;if(!(e.find(".lanItem").length<1))return parseInt(jm("#languageSelect").height())>0?i():(Fai.top._manageMode&&Mobi.removeAllEditLayer(),o=parseFloat(e.find(".lanContainer").height()),n=jm("#languageSelect .lanContainer").find("div[currentlan]"),e.height(o+"px"),e.css("background","rgba(255,255,255,0.9)").css("overflow","unset"),n.addClass("current")),t.stopPropagation(),!1}function i(){e.height(0),e.css("background","rgba(255,255,255,0)").css("overflow","hidden")}Fai.top._manageMode?setTimeout(function(){$(Mobi.getPreviewObject("languaSwitch")).unbind("click").bind("click",t)},2e3):jm("#languaSwitch").unbind("click").bind("click",t),e.find(".lanItem").length>0&&(e.find(".lanItem").unbind("click").bind("click",function(e){jm("#languageSelect").length<1||0==parseInt(jm("#languageSelect").height())||(e.stopPropagation(),Fai.top._manageMode||(document.location.href=jm(this).attr("value")),jm(this).addClass("current"))}).unbind("mouseover").bind("mouseover",function(){jm("#languageSelect").length<1||0==parseInt(jm("#languageSelect").height())||e.find(".lanItem").removeClass("current")}),jm("body").unbind("click").bind("click",function(e){"languageSelect"!==(e.target||e.srcElement).id&&(i(),navigator.userAgent.toLowerCase().indexOf("sogoumobilebrowser")>-1||e.stopPropagation())}))},Mobi.decrease=function(e){var t=parseInt(jm("#productNum").val());isNaN(t)&&(t=1),t>99999998&&(t=99999998),t<0&&(t=0),t+1>1&&jm("#g_decrease").removeClass("g_opacity50"),jm("#productNum").val(t+1)},Mobi.increase=function(e){var t=parseInt(jm("#productNum").val());isNaN(t)&&(t=1),t<2&&(t=2),t-1==1&&jm("#g_decrease").addClass("g_opacity50"),jm("#productNum").val(t-1)},Mobi.decrease_pt=function(e){var t=parseInt(jm("#productNum_pt").val());isNaN(t)&&(t=1),t>99999998&&(t=99999998),t<0&&(t=0),t+1>1&&jm("#g_decrease_pt").removeClass("g_opacity50"),jm("#productNum_pt").val(t+1)},Mobi.increase_pt=function(e){var t=parseInt(jm("#productNum_pt").val());isNaN(t)&&(t=1),t<2&&(t=2),t-1==1&&jm("#g_decrease_pt").addClass("g_opacity50"),jm("#productNum_pt").val(t-1)},Mobi.decrease_im=function(e){var t=parseInt(jm("#productNum_im").val());isNaN(t)&&(t=1),t>99999998&&(t=99999998),t<0&&(t=0),t+1>1&&jm("#g_decrease_im").removeClass("g_opacity50"),jm("#productNum_im").val(t+1)},Mobi.increase_im=function(e){var t=parseInt(jm("#productNum_im").val());isNaN(t)&&(t=1),t<2&&(t=2),t-1==1&&jm("#g_decrease_im").addClass("g_opacity50"),jm("#productNum_im").val(t-1)},Mobi.decrease2=function(e,t){t=t||"";var i=parseInt(jm("#productMallOptionPanel"+e+" #productNum"+t).val());isNaN(i)&&(i=1),i>99999998&&(i=99999998),i<0&&(i=0),i+1>1&&jm("#productMallOptionPanel"+e+" #g_decrease"+t).removeClass("g_opacity50"),jm("#productMallOptionPanel"+e+" #productNum"+t).val(i+1)},Mobi.increase2=function(e,t){t=t||"";var i=parseInt(jm("#productMallOptionPanel"+e+" #productNum"+t).val());isNaN(i)&&(i=1),i<2&&(i=2),i-1==1&&jm("#productMallOptionPanel"+e+" #g_decrease"+t).addClass("g_opacity50"),jm("#productMallOptionPanel"+e+" #productNum"+t).val(i-1)},Mobi.removeMallTIps=function(){jm("#mallBuyTips").remove(),jm(".productDetailClose").each(function(){jm(this).click()}),document.getElementById("webLoading").style.display="none"},Mobi.MallAjaxErrno={ok:0,error:1,manager:2,login:3,idNotExist:4,orderSettle:5,noMall:6,toProductDetail:7,orderNotExist:8,networkError:9,outOfMallAmount:10,mallAmountZero:11,mallOptionStop:12,OutOfAllowAmount:13,notAdded:14,payDomainError:15,couponNotFound:16,couponUnavail:17,couponOverTime:18,authMemberNotAllow:19,maxItemList:20,optionOutOfDate:21,COMBINED_PURCHASE_STOCK_ZERO:22,COMBINED_PURCHASE_INVALID:23,secKillNotOpen:-809,secKillCanNotJoinAgain:-801,secKillFrequencyAddImme:-811,INTRA_CITY_SHIP_MIN_PRICE_NOT_ENOUGH:-1100,INTRA_CITY_SHIP_CLOSE:-1101,INTRA_CITY_DISTANCE_ERR:-1102,INTRA_CITY_TIME_NOT_OPEN:-1104,INTRA_CITY_TIME_ARGS_ERR:-1105,INTRA_CITY_TIME_INVALID:-1106},function(e,t,i){e.isIntraCityAjaxError=function(e){return[Mobi.MallAjaxErrno.INTRA_CITY_SHIP_MIN_PRICE_NOT_ENOUGH,Mobi.MallAjaxErrno.INTRA_CITY_SHIP_CLOSE,Mobi.MallAjaxErrno.INTRA_CITY_DISTANCE_ERR,Mobi.MallAjaxErrno.INTRA_CITY_TIME_NOT_OPEN,Mobi.MallAjaxErrno.INTRA_CITY_TIME_ARGS_ERR,Mobi.MallAjaxErrno.INTRA_CITY_TIME_INVALID].includes(e)},e.returnIntraCityShipErrorMsg=function(e){switch(e){case Mobi.MallAjaxErrno.INTRA_CITY_SHIP_CLOSE:var t=Fai.top._intraCityShipConf.cn||"同城配送";n("".concat(t,"服务已暂停，暂时无法提交订单。"));break;case Mobi.MallAjaxErrno.INTRA_CITY_SHIP_MIN_PRICE_NOT_ENOUGH:var i=Fai.top._currencyVal,o=Fai.top._intraCityShipConf.spd.gsp.mpfd;n("商品总额需满".concat(i).concat(o,"才能起送"));break;case Mobi.MallAjaxErrno.INTRA_CITY_DISTANCE_ERR:n("配送地址超出商家配送范围，请重新选择再提交订单。");break;case Mobi.MallAjaxErrno.INTRA_CITY_TIME_NOT_OPEN:t=Fai.top._intraCityShipConf.cn||"同城配送";n("".concat(t,"服务已暂停，暂时无法选择。"));break;case Mobi.mallAjaxErrno.INTRA_CITY_TIME_ARGS_ERR:case Mobi.mallAjaxErrno.INTRA_CITY_TIME_INVALID:n("当前送达时间已过期，请重新选择");break;default:Mobi.ing(LS.js_systemError)}function n(e){Mobi.ing(e)}}}(Mobi,jm),Mobi.returnMallErrorMsg=function(e,t,i){if(e=parseInt(e),Mobi.isIntraCityAjaxError(e))Mobi.returnIntraCityShipErrorMsg(e);else switch(parseInt(e)){case Mobi.MallAjaxErrno.error:Mobi.ing(LS.mallAjaxErrno_error);break;case Mobi.MallAjaxErrno.manager:1==t?Mobi.showMallTips(LS.mallAjaxErrno_manager,!1):Mobi.showMallTips(LS.addCartAjaxErrno_manager,!1);break;case Mobi.MallAjaxErrno.login:goToMallCartUrl="login.jsp?returnUrl="+jm.encodeUrl(jm.getUrlRoot(location.href))+"&errno=11",location.href=goToMallCartUrl;break;case Mobi.MallAjaxErrno.idNotExist:Mobi.ing(LS.mallAjaxErrno_idNotExist);break;case Mobi.MallAjaxErrno.orderSettle:Mobi.ing(LS.mallAjaxErrno_orderSettle);break;case Mobi.MallAjaxErrno.noMall:Mobi.ing(LS.mallAjaxErrno_noMall);break;case Mobi.MallAjaxErrno.orderNotExist:Mobi.ing(LS.mallAjaxErrno_orderNotExist);break;case Mobi.MallAjaxErrno.networkError:Mobi.ing(LS.networkError);break;case Mobi.MallAjaxErrno.outOfMallAmount:i?Mobi.ing("该套餐部分商品已售罄，请联系商家补货"):Mobi.ing(LS.mallAmountOverFlow);break;case Mobi.MallAjaxErrno.mallAmountZero:case-11:i?Mobi.ing("该套餐部分商品已售罄，请联系商家补货"):Mobi.ing(LS.mallAmountZero);break;case Mobi.MallAjaxErrno.mallOptionStop:Mobi.ing(LS.mallOptionStop);break;case Mobi.MallAjaxErrno.OutOfAllowAmount:Mobi.ing("超过可购量");break;case Mobi.MallAjaxErrno.notAdded:Mobi.ing(LS.mallProductNotAdded);break;case Mobi.MallAjaxErrno.maxItemList:Mobi.ing("产品类型数量超过300，请减少产品类型后重试。");break;case Mobi.MallAjaxErrno.secKillNotOpen:Mobi.ing("秒杀活动已失效");break;case Mobi.MallAjaxErrno.secKillCanNotJoinAgain:Mobi.ing("不好意思，您已经参与过该秒杀活动");break;case Mobi.MallAjaxErrno.secKillFrequencyAddImme:Mobi.ing("您的操作太频繁了，请稍后再试");break;case Mobi.MallAjaxErrno.COMBINED_PURCHASE_STOCK_ZERO:Mobi.ing("该套餐已售罄，请联系商家补货");break;case Mobi.MallAjaxErrno.COMBINED_PURCHASE_INVALID:Mobi.ing("该套餐已失效");break;case Mobi.MallAjaxErrno.optionOutOfDate:Mobi.ing("该商品购物选项已更新，请重新下单");break;default:Mobi.ing(LS.js_systemError)}},Mobi.initOptionsStr=function(e,t){"number"!=typeof t&&(t=""),Mobi.optionsStr["oldOptionsStr"+t]=e},Mobi.optionsStr={},Mobi.mallBuying={},Mobi.mallBuy=function(e,t,i,o,n,a,r){var s=(r=r||{}).isGroupBuy||!1,l=r.groupBuyId||0,c=r.groupBuyDetailId||0,d=r.isSecKill||0,m=d&&r.secKillId||0,p=r.isIntegralMall||!1,u=r.integralMallId||0,h=r.isEarnestSale||!1,f=r.earnestSaleId||0,g=r.isCpOrder||!1,v=r.combinedPurchaseId||0,b=r.pdInfoList||[],j=r.hideAddCartTips||!1,_=r.cb||0;g?void 0===Mobi.mallBuying["cp"+v]&&(Mobi.mallBuying["cp"+v]=!1):void 0===Mobi.mallBuying[e]&&(Mobi.mallBuying[e]=!1);var M=!1;if(jm.each(Mobi.mallBuying,function(e,t){if(t)return M=!0,!1}),!M){g?Mobi.mallBuying["cp"+v]=!0:Mobi.mallBuying[e]=!0;var y="";s&&jm(".J_productNumberContent_pt").length>0&&"none"!=jm(".J_productNumberContent_pt").css("display")&&(y="_pt"),p&&jm(".J_productNumberContent_im").length>0&&"none"!=jm(".J_productNumberContent_im").css("display")&&(y="_im"),jm("#productNum"+y).change();var S="id="+e+"&fromDetail=true",I=[],w=jm(".J-op"),C=0,P=!0;if(g)S="combinedPurchaseId="+v+"&isCpOrder=true";else{1==i&&(w=jm("#productMallOptionPanel"+e+"[moduleId='"+o+"'] .J-op"));var x=!1;if(n&&!jm.isEmptyObject(n))S+="&optionList="+jm.encodeUrl(jm.toJSON(n));else{jm(w).each(function(e,t){if(!x){var i=jm(this),o=i.attr("option_name"),n=i.attr("data"),a=i.attr("type"),r=i.attr("option_data");if(isTime=i.attr("isTime"),"true"===isTime){var s=Mobi.priceCalendar.getSelected();if(null==s||""===s||void 0===s)return Mobi.ing(jm.format(LS.mallCartChoiceItemError,jm.encodeHtml(o))),x=!0,P=!1,!1;(l={}).name=n,l.value=s,null!=a&&(l.name=n.replace(/^opIndept/,""),l.type=parseInt(a)),I.push(l),x=!1}else{if(!r)return Mobi.ing(jm.format(LS.mallCartChoiceItemError,jm.encodeHtml(o))),x=!0,P=!1,!1;var l;(l={}).name=n,l.value=parseInt(r),l.prop=jm.encodeUrl(o),l.selected=jm.encodeUrl(jm(".isSelected")[e].innerText),null!=a&&(l.name=n.replace(/^opIndept/,""),l.type=parseInt(a)),I.push(l),x=!1}}});var L="oldOptionsStr";if(1==i&&(L+=e),"null"!=Mobi.optionsStr[L]&&Mobi.optionsStr[L]){for(var k=Mobi.optionsStr[L].split("_"),F=[],T=0;T<k.length;T++)if("timeOption"===k[T])for(var B=0;B<I.length;B++)5==I[B].type&&F.push(I[B]);else for(B=0;B<I.length;B++)I[B].name==k[T]&&F.push(I[B]);I=F}if(!P)return Mobi.mallBuying[e]=!1,!1;I.length>0&&(S+="&optionList="+jm.encodeUrl(jm.toJSON(I)))}var A=jm("#productNum"+y);0!=jm("#productMallOptionPanel"+e+" #productNum"+y).length&&(A=jm("#productMallOptionPanel"+e+" #productNum"+y));var D=A.val();C=1;jm.isInteger(D)&&(C=parseInt(D)),C<1?C=1:C>9999999&&(C=9999999),A.val(C),a&&(C=a),S+="&amount="+C}var O="addCartItem";if(1===t){var E={pid:e,amount:C,optList:jm.toJSON(n),isGroupBuy:s,secKillId:m,groupBuyId:l,isIntegralMall:p,integralMallId:u,isEarnestSale:h,earnestSaleId:f,pdInfoList:b,isCpOrder:g,combinedPurchaseId:v};null!=E.optList&&0!=E.optList.length&&E.optList&&"null"!=E.optList||(E.optList=jm.toJSON(I)),O="addIme",S+="&codata="+jm.toJSON(E)}jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd="+O,data:S,error:function(){Mobi.ing(LS.js_systemError),Mobi.mallBuying[e]=!1,1===t?Mobi.logMonitor(5952,!0):Mobi.logMonitor(5954,!0)},success:function(n){var a=jm.parseJSON(n);if(a.success){if(1===t){var b="";s?(b+="&isGroupBuy="+s,b+="&groupBuyId="+l,b+="&groupBuyDetailId="+c,Mobi.logDog(200479,0)):d?b+="&secKillId="+m:p?(b+="&isIntegralMall="+p,b+="&integralMallId="+u):h?(b+="&isEarnestSale="+h,b+="&earnestSaleId="+f,Mobi.logDog(201085,1)):g&&(b+="&isCpOrder="+g,b+="&combinedPurchaseId="+v),window.self!=window.top&&/(iPhone|iPad|iPod|safari)/i.test(navigator.userAgent.toLowerCase())?location.href="mstl.jsp?immeData="+jm.encodeUrl(jm.toJSON(E))+b:location.href="mstl.jsp?imme"+b}else j?Mobi.removeMallTIps():Mobi.showMallTips(LS.addToMallCatSuccess,!0);Mobi.refreshMallCartNum(),_&&_(),Mobi.mallBuying["cp"+v]=!1,Mobi.mallBuying[e]=!1}else{if(a.rt==Mobi.MallAjaxErrno.authMemberNotAllow)Mobi.ing(a.data+LS.authLevelBuy),1===t?Mobi.logMonitor(5953,!0):Mobi.logMonitor(5955,!0);else if(a.rt==Mobi.MallAjaxErrno.login){1===t?Mobi.logMonitor(5953,!0):Mobi.logMonitor(5955,!0);var M={};M.buyType=t,M.productId=e,M.entry=i,M.moduleId=o,M.option=jm.toJSON(I),M.count=C,M.options=r,localStorage.setItem("mallBuyCallBack",jm.toJSON(M));var y="login.jsp?returnUrl="+jm.encodeUrl(jm.getUrlRoot(location.href))+"&errno=11";location.href=y}else 1===t?Mobi.logMonitor(5952,!0):Mobi.logMonitor(5954,!0),g&&a.rt==Mobi.MallAjaxErrno.OutOfAllowAmount&&jm("#productBuy").data("max-amount",a.maxAmount||0),Mobi.returnMallErrorMsg(a.rt,t,g);Mobi.mallBuying["cp"+v]=!1,Mobi.mallBuying[e]=!1}}})}},Mobi.initBuyNumber=function(e,t,i,o){jm(".mall_product").eq(0).css("border-top","1px solid #fff");var n=jm(".itemLine"+e);t==i&&n.find(".icon-minisIcon").addClass("g_opacity50"),t==o&&n.find(".icon-plusIcon").addClass("g_opacity50")},Mobi.ajaxChangeAmount=function(e,t,i){jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setItem&orderId="+t,data:"itemId="+i+"&amount="+e,error:function(){Mobi.ing(LS.mallCartUpdateError)},success:function(t){return(t=jm.parseJSON(t)).success?(Mobi.setAcSaleList(i,e),Mobi.reCtOrderMoney(),!0):(-3==t.rt?Mobi.ing(LS.mallCartUpdateNotFound):-9==t.rt?Mobi.ing(LS.mallCartUpdateStatusError):Mobi.ing(LS.mallCartUpdateError),!1)}})},Mobi.mallCartAmountChange=function(e,t,i,o,n,a,r){var s=jm(".itemLine"+e),l=s.find(".buyNumber"),c=l.val(),d=1;jm.isInteger(c)&&(d=parseInt(c)),d<o||d==o?(d=o,s.find(".icon-minisIcon").addClass("g_opacity50"),s.find(".icon-plusIcon").removeClass("g_opacity50")):(d>n||d==n)&&0!=n?(d=n,Mobi.ing(LS.mallAmountOverFlow,!0),s.find(".icon-plusIcon").addClass("g_opacity50"),s.find(".icon-minisIcon").removeClass("g_opacity50")):d>a&&r?(d=a,s.find(".icon-plusIcon").addClass("g_opacity50"),s.find(".icon-minisIcon").removeClass("g_opacity50")):d>9999998&&(d=9999999),isNaN(d)||d<=0||d>9999999?Mobi.ing(LS.mallCartAmountError):(Mobi.ajaxChangeAmount(d,t,i),l.val(d),d>1?s.find(".icon-minisIcon").removeAttr("disabled"):s.find(".icon-minisIcon").attr("disabled","true"))},Mobi.mallCartAmountPlus=function(e,t,i,o,n,a,r,s){if("true"!=jm(e).attr("disabled")){var l=jm(".itemLine"+t),c=l.find(".buyNumber"),d=c.val();if(jm.isInteger(d)&&(d=parseInt(d)+1),d<2?d=1:(d>a||d==a)&&0!=a?(d=a,l.find(".icon-plusIcon").addClass("g_opacity50 "),n!=a&&l.find(".icon-minisIcon").removeClass("g_opacity50")):s&&d>r?(d=r,Mobi.ing(LS.mallAmountOverFlow,!0),l.find(".icon-plusIcon").addClass("g_opacity50 "),n!=r&&l.find(".icon-minisIcon").removeClass("g_opacity50")):d>9999998&&(d=9999999),d>n&&l.find(".icon-minisIcon").removeClass("g_opacity50"),isNaN(d)||d<=0||d>9999999)Mobi.ing(LS.mallCartAmountError);else{Mobi.ajaxChangeAmount(d,i,o),c.val(d);var m=LS.pay,p=Mobi.countSelectNum();0!=jm(".J_select").length&&jm(".cartSettle").val(m+"("+p+")"),d>1?l.find(".icon-minisIcon").removeAttr("disabled"):l.find(".icon-minisIcon").attr("disabled","true")}}},Mobi.mallCartAmountMinis=function(e,t,i,o,n,a){var r=jm(".itemLine"+t),s=r.find(".buyNumber"),l=s.val();if(jm.isInteger(l)&&(l=parseInt(l)-1),0!=l)if(r.find(".icon-plusIcon").removeClass("g_opacity50"),l<n||l==n?(l=n,r.find(".icon-minisIcon").addClass("g_opacity50"),n!=a&&r.find(".icon-plusIcon").removeClass("g_opacity50")):l<=1?(l=1,r.find(".icon-minisIcon").addClass("g_opacity50")):l>9999998&&(l=9999999),l<a&&r.find(".icon-plusIcon").removeClass("g_opacity50"),isNaN(l)||l<=0||l>9999999)Mobi.ing(LS.mallCartAmountError);else{Mobi.ajaxChangeAmount(l,i,o),s.val(l);var c=LS.pay,d=Mobi.countSelectNum();0!=jm(".J_select").length&&jm(".cartSettle").val(c+"("+d+")"),l>1?r.find(".icon-minisIcon").removeAttr("disabled"):r.find(".icon-minisIcon").attr("disabled","true")}},Mobi.acSaleProShowList={},Mobi.initAcSaleList=function(e){Mobi.acSaleProShowList=jm.parseJSON(e)},Mobi.removeAcSaleList=function(e){if(!isNaN(e)){var t=Mobi.acSaleProShowList;if(!(t.length<=0))for(var i=!1,o=0;o<t.length&&0==i;o++){var n=t[o].acList;if(void 0!==n&&null!=n)for(var a=0;a<n.length;a++)if(n[a].id==e){n.splice(a,1),i=!0;break}}}},Mobi.setAcSaleList=function(e,t){if(!isNaN(e)){var i=Mobi.acSaleProShowList;if(!(i.length<=0))for(var o=!1,n=0;n<i.length&&0==o;n++){var a=i[n].acList;if(void 0!==a&&null!=a)for(var r=0;r<a.length;r++)if(a[r].id==e){a[r].amount=t,o=!0;break}}}},Mobi.countItsSaveMoney=function(){var e=0,t=[];return jm(".J_select").each(function(i,o){var n=jm.parseJSON(jm(this).attr("saleInfo"));if(null!=n&&"{}"!=n&&n!={}){if(void 0!==n&&null!=n&&Mobi.checkSaleProVal(n)){var a=n.other.ruleData.d,r=n.id;if(2==n.saleType&&"1"==n.other.ruleData.s){var s=jm(this).find(".buyNumber").val()||1,l=jm(this).find(".mall_product").attr("price")||0,c=parseFloat(s)*parseFloat(l),d=0;jm.each(a,function(e,t){c>=t.m&&(d=t.n)}),e+=d}else if(2==n.saleType&&"2"==n.other.ruleData.s&&jm.inArray(n.id,t)<0){var m=0;t.push(r),jm(".J_select[promotionid='"+r+"']").each(function(e,t){var i=jm(this).find(".buyNumber").val()||1,o=jm(this).find(".mall_product").attr("price")||0,n=parseInt(i)*parseFloat(o);m+=n});var p=0,u=0;for(i=0;i<a.length;i++){var h=parseFloat(a[i].m),f=parseFloat(a[i].n);h<=0&&(h=0,f=0),m>=h&&h>p&&(p=h,u=f)}e+=u}}}}),e},Mobi.checkSaleProVal=function(e){return void 0!==e.other&&void 0!==e.other.ruleData&&void 0!==e.other.ruleData.s&&void 0!==e.other.ruleData.d&&null!=e.other.ruleData.d&&e.other.ruleData.d.length>0},Mobi.countFoldOfSigle=function(e,t,i){for(var o=0,n=0,a=0;a<e.length;a++){saleDataParam=e[a];var r=saleDataParam.m,s=saleDataParam.n;r<=0&&(r=0,s=0),t>=r&&r>o&&(o=r,n=s)}return n>0&&t>=o&&t>=n&&(i+=n),i},Mobi.reCtOrderMoney=function(){var e=jm(".J_select .mall_product"),t=0;e.each(function(){var e=parseFloat(jm(this).attr("price"),2),i=parseInt(jm(this).find(".buyNumber").val());isNaN(i)&&(i=0),t+=e*i});var i=Mobi.countItsSaveMoney();i=parseFloat(i),0!=t&&(t-=i);var o,n=jm("#count"),a=n.attr("choiceCurrencyVal");o=t<1e11?t.toFixed(2):t<1e12?t.toFixed(1):t.toFixed(0),n.html(isNaN(o)?a+"0.00":a+o),jm(".saleSaveMoney").html(isNaN(i.toFixed(2))?a+"0.00":a+i.toFixed(2))},Mobi.mallCartSmItemDel=function(e,t){if(!(e<0)){var i={content:"确定要将该产品从购物车中移除吗？",textClass:"confirm",callback:function(){Mobi.ing(LS.mallCartUpdating);var i=[],o=jm(".J_noSelect[smid = '"+e+"'],.J_select[smid = '"+e+"'],.invalidItem[smid = '"+e+"']")||[];jm(o).each(function(){var e=parseInt(jm(this).attr("itemid"));i.push(e)}),jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=delItem&orderId="+t,data:{itemIds:jm.toJSON(i)},error:function(){Mobi.ing(LS.mallCartUpdateError)},success:function(t){(t=jm.parseJSON(t)).success?(Mobi.ing(LS.mallCartUpdateOk,1),jm(o).each(function(){var e=parseInt(jm(this).attr("itemid"));jm(this).remove(),Mobi.removeAcSaleList(e)}),jm(".mallCart .smInfo[smid = '"+e+"']").remove(),0==jm(".mall_product").length?Fai.top.location.reload():Mobi.reCtOrderMoney()):-3==t.rt?Mobi.ing(LS.mallCartUpdateNotFound):-9==t.rt?Mobi.ing(LS.mallCartUpdateStatusError):Mobi.ing(LS.mallCartUpdateError);var i=LS.pay,n=Mobi.countSelectNum();jm(".cartSettle").val(i+"("+n+")"),Mobi.reCtOrderMoney()}})}};Mobi.prompt(i)}},Mobi.mallCartSmSelectSwitch=function(e){if(!(e<0)){var t=jm(".mallCart .smInfo[smid='"+e+"'] .selectSmItemCheck");if(jm(t).hasClass("faisco-icons-right"))jm(t).removeClass("faisco-icons-right").addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),(jm(".J_noSelect[smid = '"+e+"'],.J_select[smid = '"+e+"']")||[]).each(function(){var e=parseInt(jm(this).attr("itemid"))||0;jm("#selectBtn"+e).hasClass("faisco-icons-right")&&jm("#selectBtn"+e).click()});else jm(t).removeClass("faisco-icons-shape11").addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem"),(jm(".J_noSelect[smid = '"+e+"'],.J_select[smid = '"+e+"']")||[]).each(function(){var e=parseInt(jm(this).attr("itemid"))||0;jm("#selectBtn"+e).hasClass("faisco-icons-shape11")&&jm("#selectBtn"+e).click()})}},Mobi.mallCartItemDel=function(e,t,i){var o={content:"确定要将该产品从购物车中移除吗？",textClass:"confirm",callback:function(){Mobi.ing(LS.mallCartUpdating),jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=delItem&orderId="+t,data:"itemIds=["+i+"]",error:function(){Mobi.ing(LS.mallCartUpdateError)},success:function(t){if((t=jm.parseJSON(t)).success){Mobi.ing(LS.mallCartUpdateOk,1);var o=jm(document.getElementsByClassName("itemLine"+e)[0].parentNode.previousSibling),n=jm(".itemLine"+e).parent().attr("smid");jm(".itemLine"+e).parent().remove();var a=jm(".J_noSelect[smid = '"+n+"'],.J_select[smid = '"+n+"']");o.hasClass("smInfo")&&0==a.length?o.remove():o.find(".mobiCartGreyLine").remove(),Mobi.removeAcSaleList(i),0==jm(".mall_product").length?Fai.top.location.reload():(Mobi.reCtOrderMoney(),jm(".mall_product").eq(0).css("border-top","1px solid #fff"))}else-3==t.rt?Mobi.ing(LS.mallCartUpdateNotFound):-9==t.rt?Mobi.ing(LS.mallCartUpdateStatusError):Mobi.ing(LS.mallCartUpdateError);var r=LS.pay,s=Mobi.countSelectNum();jm(".cartSettle").val(r+"("+s+")"),Mobi.reCtOrderMoney()}})}};Mobi.prompt(o)},Mobi.selectInMallCart=function(e){var t=LS.pay,i=!1,o=!1;if(jm("div[id^='selectBtn']").each(function(){var e=jm(this).attr("pdtype");1==e&&jm(this).hasClass("faisco-icons-right")&&(i=!0),0==e&&jm(this).hasClass("faisco-icons-right")&&(o=!0)}),jm("#selectBtn"+e).hasClass("faisco-icons-right")){jm("#selectBtn"+e).removeClass().addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),jm("#selectBtn"+e).parent().parent().removeClass().addClass("J_noSelect"),jm("#selectAllInMallCart").hasClass("faisco-icons-right")&&jm("#selectAllInMallCart").removeClass().addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),0==(a=Mobi.countSelectNum())?jm(".cartSettle").val(t):jm(".cartSettle").val(t+"("+a+")")}else{var n=jm("#selectBtn"+e).attr("pdtype");if(i&&0==n)return void Mobi.ing("实物产品不能与卡密产品一起结算");if(o&&1==n)return void Mobi.ing("卡密产品不能与实物产品一起结算");jm("#selectBtn"+e).removeClass().addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem"),jm("#selectBtn"+e).parent().parent().removeClass().addClass("J_select"),0==jm(".J_noSelect").length&&0!=jm(".J_select").length&&jm("#selectAllInMallCart").removeClass().addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem");var a=Mobi.countSelectNum();jm(".cartSettle").val(t+"("+a+")")}Mobi.reCtOrderMoney();var r=jm(".J_noSelect[itemid = '"+e+"'],.J_select[itemid = '"+e+"']")||[];if(r.length>0){var s=parseInt(r.attr("smid"));if(!isNaN(s)){var l=jm(".J_noSelect[smid = '"+s+"'],.J_select[smid = '"+s+"']")||[],c=!0;l.each(function(){var e=jm(this).attr("itemid");jm(this).find("#selectBtn"+e).hasClass("faisco-icons-shape11")&&(c=!1)}),c?jm(".smInfo[smid='"+s+"'] .selectSmItemCheck").removeClass("faisco-icons-shape11").addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem"):jm(".smInfo[smid='"+s+"'] .selectSmItemCheck").removeClass("faisco-icons-right").addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem")}}},Mobi.selectAllInMallCart=function(){var e=LS.pay,t="true"==jm("#selectAllInMallCart").attr("hasVpd"),i=jm("div[id^='selectBtn']").length||0;if(jm("#selectAllInMallCart").hasClass("faisco-icons-right"))jm("#selectAllInMallCart").removeClass().addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),jm(".mallCart .selectSmItemCheck").removeClass("faisco-icons-right").addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),jm("div[id^='selectBtn']").each(function(){jm(this).removeClass().addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),jm(this).parent().parent().removeClass().addClass("J_noSelect")}),jm(".cartSettle").val(e);else{var o=0;jm("div[id^='selectBtn']").each(function(){t?1==jm(this).attr("pdtype")?(jm(this).removeClass().addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem"),jm(this).parent().parent().removeClass().addClass("J_select"),o++):(jm(this).removeClass().addClass("faisco-icons-shape11").addClass("g_color g_main_color_v3").css("font-size","1rem"),jm(this).parent().parent().removeClass().addClass("J_noSelect")):(jm(this).removeClass().addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem"),jm(this).parent().parent().removeClass().addClass("J_select"),o++)}),o==i&&(jm("#selectAllInMallCart").removeClass().addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem"),jm(".mallCart .selectSmItemCheck").removeClass("faisco-icons-shape11").addClass("faisco-icons-right").addClass("g_color g_main_color_v3").css("font-size","0.75rem")),t&&o!=i&&Mobi.ing("实物产品不能与卡密产品一起结算");var n=Mobi.countSelectNum();jm(".cartSettle").val(e+"("+n+")")}Mobi.reCtOrderMoney()},Mobi.countSelectNum=function(){var e=0;return jm(".mallCart .J_select").each(function(){e+=parseInt(jm(this).find(".buyNumber").val())}),e},Mobi.showMallTips=function(e,t){if(Fai.top._templateFrameId>=2e3||Fai.top._openThemeV3)null==t&&(t=!0),Mobi.removeMallTIps(),Mobi.ing(e,t);else{document.getElementById("webLoading").style.display="block";var i=document.getElementById("webLoading"),o="<div id='mallBuyTips' class='mallTips'><div class='top wekitBox'><div class='topIcon'></div><div class='topText flex1'>"+e+"</div></div><div class='bottom wekitBox'><div class='left flex1' onclick='Mobi.removeMallTIps();'>"+LS.mallContinueShopping+"</div><a href='mcart.jsp' class='right flex1'>"+LS.mallToCartCount+"</a></div></div>";i.innerHTML=o}},Mobi.SelfRaisingList=[],Mobi.initSelfRaisingSelect=function(e){Mobi.SelfRaisingList=e;jm.cookie("_selfRaisingMapAuthSetting")&&Mobi.computeSelfRaisingPointAndSort(Mobi.SelfRaisingList,function(){var e="距您"+Mobi.SelfRaisingList[0].distance+"m";Mobi.SelfRaisingList[0].distance>=1e3&&(e="距您"+Mobi.SelfRaisingList[0].distanceKilometer+"km"),jm("#selfRaisingPoint").attr("_pointid",Mobi.SelfRaisingList[0].id).html(jm.encodeHtml(Mobi.SelfRaisingList[0].name)),jm(".j_selfRaisingPointDistance").html(e).show(),Mobi.SelfRaisingList.forEach(function(e,t){var i=e.distance+"m";e.distance>=1e3&&(i=e.distanceKilometer+"km");var o=jm(".j_selfRaisingPointPanel"+t);o.attr("_pointId",e.id),o.find(".pointName").html(jm.encodeHtml(e.name)),o.find(".pointAddr").html(jm.encodeHtml(e.ais)),o.find(".pointPhoner").html(jm.encodeHtml(e.phone)),o.find(".distance").html(i),o.find(".distanceTipContain").removeClass("noneDistanceTipContain"),o.find(".j_distanceTipContain").attr("_pointId",e.id),0==t?(o.find(".selfRaisingSelect").show(),o.find(".selfRaisingUnSelect").hide()):(o.find(".selfRaisingSelect").hide(),o.find(".selfRaisingUnSelect").show())})}),jm("#selfRaisingMsg").length>0&&"none"!==jm("#selfRaisingMsg").css("display")&&jm(".earnestSaleshipDays").hide();var t=!1,i={triggerId:"mstlTopTipContain",pageBg:!0,pageHtml:Mobi.createMapAuthSetting(),direction:"bottom",callback:function(){Mobi.logDog(201032,1),jm(".j_mapAuthSettingAccess").click(function(){Mobi.logDog(201032,2),t=!0,jm(".j_mapAuthSettingClose").click(),jm.cookie("_selfRaisingMapAuthSetting",!0,{path:"/",expires:365}),jm("#mstlTopTipContain").hide(),Mobi.initSelfRaisingSelect(e)})},closeCallBack:function(){t||Mobi.logDog(201032,3),Mobi._tempShowMapAuthSetting||(t||jm("#mstlTopTipContain").show(),Mobi._tempShowMapAuthSetting=!0)},closeWebPage:".j_mapAuthSettingClose"};Mobi.initWebPage(i),jm(".j_distanceTipContain").click(function(e){e.stopPropagation();var t,i={},o=jm(this).attr("_pointId");Mobi.SelfRaisingList.some(function(e,n){if(e.id==o)return t=e.ais,i={lat:e.pp.lat,lng:e.pp.lng},!0}),Mobi.openQQMap(t,i)}),jm("#selfRaisingPointInfo").delegate(".selfRaisingPointPanel","click",function(){var t=jm(".selfRaisingPointName").attr("_pointId"),i=jm(this).attr("_pointId"),o="",n="",a="";if(t!=i){jm("#selfRaisingPointInfo").find(".faisco-icons-right").hide(),jm("#selfRaisingPointInfo").find(".faisco-icons-shape11").show(),jm(this).find(".faisco-icons-right").show(),jm(this).find(".faisco-icons-shape11").hide();for(var r=0;r<e.length;r++)if(e[r].id==i){o=e[r].name,n=e[r].distance,a=e[r].distanceKilometer;break}var s=jm("#selectSelfRaisingPoint");if(s.find(".selfRaisingPointName").attr("_pointId",i).html(jm.encodeHtml(o)),jm.cookie("_selfRaisingMapAuthSetting")){var l="距您"+n+"m";n>=1e3&&(l="距您"+a+"km"),s.find(".j_selfRaisingPointDistance").html(l)}jm("#editPointInfo").removeClass("webPagePanelShow")}})},Mobi,jm,Mobi.initSelfRaisingTopTip=function(){},function(e,t,i){jm(function(){e.$Bus=new Vue({})});e.initShipTabList=function(e){Fai.top.shipTabListVm=new Vue({el:"#propListTab",template:'\n\t\t\t\t<div id=\'propListTab\' class=\'propListTab fk_shipTabList\' :checked-id="checkedId" :idList="tabOpenIdList" :count="tabOpenList.length" v-if="tabOpenList.length>1">\n\t\t\t\t\t<div class=\'outContain fk_shipTabItem J_outContain\' :active="checkedId===item.id" :_mode=\'item.id\' v-for="(item, index) in tabOpenList" @click="onTabClick(item.id)">\n\t\t\t\t\t\t<div :class=\'nameCls\'>{{item.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',data:function(){var t=e.defaultShipType,i=0;if(e.tabOpenList.length>0){var o=!1,n=!0,a=!1,r=void 0;try{for(var s,l=e.tabOpenList[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var c=s.value;if(c.id===t){i=c.id,o=!0;break}}}catch(e){a=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw r}}o||(i=e.tabOpenList[0].id)}return{intraCityShipConf:Fai.top._intraCityShipConf,checkedId:i,shipTabListData:e,order:Fai.top._order}},watch:{checkedId:function(e){1===e&&Mobi.$Bus.$emit("onMallShipPanelShow")}},mounted:function(){var e=this;1===this.checkedId?(Mobi.$Bus.$emit("onMallShipPanelShow"),Vue.nextTick(function(){e.refresh()})):Vue.nextTick(function(){e.refresh()})},methods:{genItemCls:function(e){return[]},onTabClick:function(e){var t=this;this.checkBeforeClick(e).then(function(){t.changeShipById(e)}).catch(function(e){jm.isFunction(e)?e():console.log("res",e)})},refresh:function(){this.changeShipById(this.checkedId)},changeShipById:function(e){var t=this;this.resetShipDom(),this.checkedId=e,Mobi.$Bus.$emit("onShipTabChanged",e),Vue.nextTick(function(){1==e||0==e?t.changeShipToMallShip():2==e?t.changeShipToSelfTaking():3==e&&t.changeShipToIntraCity(),Mobi.recheckItg(),t.calculateFooterPrice()})},calculateFooterPrice:function(){var e=jm("#mobiMstlFooterPrice");if(e.length){var t=parseFloat(e.data("balanceprice"))||0,i=this.shipPrice||parseFloat(jm("#shipPrice").attr("value"))||0;e.text(Fai.top._choiceCurrencyVal+Mobi.calculate(t,i,0))}},checkBeforeClick:function(e){var t=this;return new Promise(function(i,o){return t.checkedId===e?o():3===e&&Fai.top.intraCityShipTimePanelVM.isOpenTimeSetting&&Fai.top.intraCityShipTimePanelVM.isTimeOver?o(function(){var e=Fai.top._intraCityShipConf.cn||"同城配送",t="".concat(e,"服务已暂停，暂时无法提交订单。");Mobi.ing(t)}):void i()})},changeShipToMallShip:function(){jm("#shipLine");var e=jm("#shipTplLine"),t=this.shipPrice||parseFloat(jm("#shipPrice").attr("value"))||0;Fai.top._mstlMerchantProductListVm&&Fai.top._mstlMerchantProductListVm.isMerchantProductExist()&&(t+=Fai.top._mstlMerchantProductListVm.totalShipPrice());var i=this.orderOriginPrice+t;if(i.toFixed(2)+"",jm("#totalValue").text(i),jm(".orderAssign_line").show(),jm("#mstlTopTipContain").hide(),0!=e.length&&e.show(),jm(".f_earnestSale").length>0){var o=Fai.top._choiceCurrencyVal;jm(".earnestSaleshipDays").show();var n=jm(".f_earnestSale").find(".innerBottomContain .second"),a=n.html().split(o)[1];n.text(o+Mobi.calculate(a,this.shipPrice,0)),jm("#totalValue").text(Fai.top._earnestSaleTotalValue)}},changeShipToSelfTaking:function(){jm("#shipLine");var e=jm("#shipTplLine");jm("#totalValue").text();takingValueTemp=takingValueTemp=Mobi.calculate(this.orderOriginPrice,this.shipPrice,1);var t=parseFloat(takingValueTemp)||0;if(jm("#totalValue").text(t.toFixed(2)),jm("#selfRaisingMsg").show(),jm.cookie("_selfRaisingMapAuthSetting")||jm("#mstlTopTipContain").show(),0!=e.length&&e.hide(),Mobi._tempShowMapAuthSetting||jm.cookie("_selfRaisingMapAuthSetting")||(jm("#mstlTopTipContain").hide(),Mobi.SelfRaisingList.length>1&&jm("#mstlTopTipContain").click()),jm(".f_earnestSale").length>0){var i=Fai.top._choiceCurrencyVal;jm(".earnestSaleshipDays").hide();var o=jm(".f_earnestSale").find(".innerBottomContain .second"),n=o.html().split(i)[1];o.text(i+Mobi.calculate(n,this.shipPrice,1)),jm("#totalValue").text(Fai.top._earnestSaleTotalValue)}},changeShipToIntraCity:function(){jm("#mstlTopTipContain").hide(),jm(".J_intraCityShipAddr").show();var e=this.orderOriginPrice+this.shipPrice;jm("#totalValue").text(e.toFixed(2))},resetShipDom:function(){jm("#selfRaisingMsg").hide(),jm(".orderAssign_line").hide(),jm(".J_intraCityShipAddr").hide()}},computed:{bdColor:function(){return this.shipTabListData.bdColor},tabOpenList:function(){return this.shipTabListData.tabOpenList},tabOpenIdList:function(){return this.tabOpenList.map(function(e){return e.id})},nameCls:function(){return["innerTitle",this.bdColor]},orderOriginPrice:function(){return parseFloat(jm("#cartTotalPrice").attr("totalPrice"))||0},intraCityPrice:function(){if(this.isOverShipDistance)return 0;var e=this.intraCityShipConf;return e&&e.spd?1===e.spd.olp?this.ladderPrice:e.spd.gsp.sp:0},ladderPrice:function(){var e=this.intraCityShipConf.pua.p,t=Fai.top.intraCityShipPanelVm.addrInfo.addr_info.pos,i=Mobi.calculateIntraCityShipDistanceKm(e,t),o=this.intraCityShipConf,n=o.spd.lsp,a=n.dr,r=o.spd.gsp.sp,s=i-a,l=n.id,c=n.isp;return i<=a?r:r+s/l*c},shipPrice:function(){if(1!==this.checkedId)return 2===this.checkedId?0:3===this.checkedId?this.intraCityPrice:0;this.order.shipPrice},isOverShipDistance:function(){if(!Fai.top.intraCityShipPanelVm.addrInfo)return!0;var e=Fai.top.intraCityShipPanelVm.addrInfo,t=this.intraCityShipConf.pua.p,i=e.addr_info.pos;return!t||!i||Mobi.calculateIntraCityShipDistanceKm(t,i)>this.intraCityShipConf.sr.dr}}})}}(Mobi),function(e,t,i){e.initIntraCityShip=function(e){t(function(){Fai.top.intraCityShipPanelVm=new Vue({el:"#intraCityShipAddr",data:function(){var t=-1;return Fai.top._addrInfoList.forEach(function(e,i){e.isIntraCity&&e.isIntraDefault&&(t=i)}),{visible:!1,shipTimeItem:null,checkedAddrIndex:t,intraCityShipData:e,addrInfoList:Fai.top._addrInfoList,addrPropInfoList:Fai.top._addrPropInfoList,OrderPropTypeDef:Fai.top._OrderPropTypeDef}},watch:{checkedAddrIndex:function(){Vue.nextTick(function(){Mobi.recheckItg()})},addrInfo:{deep:!0,handler:function(){Fai.top.shipTabListVm&&(Fai.top.shipTabListVm.refresh(),Vue.nextTick(function(){Mobi.recheckItg()}))}}},beforeMount:function(){var e=3===Fai.top.shipTabListVm.checkedId;this.visible=e},template:'\n\t\t\t\t\t<div class=\'fk_intraCityShipAddr J_intraCityShipAddr\' id=\'intraCityShipAddr\' v-show="visible">\n\t\t\t\t\t    <div class="fk_intraCityShipAddr_wrap" id="editIntraCityAddr"  @click="gotoAddrListPage">\n\t\t\t\t\t\t\t<div v-if="addrInfo">\n\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_address" v-if="addrInfo">\n\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v39 fk_mstl_icon fk_intraCityShipAddr_address_icon">\n\t\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v39"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_address_text">\n\t\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_address_text_content">{{addrInfo.addr}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v2 fk_mstl_icon fk_intraCityShipAddr_user_phone_arrow">\n\t\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v2"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_user" v-if="isOpenNameProp || isOpenMobileProp">\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_user_name" v-if="isOpenNameProp">{{addrInfo.name || \'-\'}}</div>\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_user_mobile" v-if="isOpenMobileProp">{{addrInfo.mobile}}</div>\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_user_phone">\n\t\t\t\t\t\t\t\t\t\t\x3c!--<div :class="defaultCls">默认</div>--\x3e\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_address">\n\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v39 fk_mstl_icon fk_intraCityShipAddr_address_icon">\n\t\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v39"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_address_text">\n\t\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_address_text_content">请选择收货人地址</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v2 fk_mstl_icon fk_intraCityShipAddr_user_phone_arrow">\n\t\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v2"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_shipTime" v-if="shipTimeVisible"  @click="callShipTimePanel">\n\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_icon_label">\n\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v40 fk_mstl_icon fk_intraCityShipAddr_shipTime_icon">\n\t\t\t\t\t\t\t\t\t    <use xlink:href="#jzm-v40"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_shipTime_label">送达时间</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="fk_intraCityShipAddr_shipTime_value">\n\t\t\t\t\t\t\t\t\t<span class="fk_intraCityShipAddr_shipTime_value_text">{{shipTimeText}}</span>\n\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v2  fk_mstl_icon fk_intraCityShipAddr_shipTime_value_icon">\n\t\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v2"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t    <div class=\'shipTopBg\'></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t',created:function(){Mobi.$Bus.$off("onCheckedIntraCityAddrInfo",this.onCheckedIntraCityAddrInfo).$on("onCheckedIntraCityAddrInfo",this.onCheckedIntraCityAddrInfo),Mobi.$Bus.$off("onVisitorSaveIntraCityAddr",this.onVisitorSaveIntraCityAddr).$on("onVisitorSaveIntraCityAddr",this.onVisitorSaveIntraCityAddr),Mobi.$Bus.$off("onShipTimePanelConfirm",this.onShipTimePanelConfirm).$on("onShipTimePanelConfirm",this.onShipTimePanelConfirm)},computed:{isOpenNameProp:function(){return Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_NAME)},isOpenMobileProp:function(){return Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_MOBILE)},shipTimeVisible:function(){return!(1!==Fai.top._intraCityShipConf.ts.ota||intraCityShipTimePanelVM.isTimeOver)},shipTimeText:function(){if(this.shipTimeItem){var e=this.shipTimeItem.timestamp;return Mobi.DateUtil.getDayTextForNow(e)+" "+this.shipTimeItem.text}return"请选择送达时间"},shipTimeValue:function(){},bgColor:function(){return this.intraCityShipData.bgColor},defaultCls:function(){return["fk_intraCityShipAddr_user_phone_label",this.bgColor]},addrInfo:function(){return this.addrInfoList[this.checkedAddrIndex]},isVisitor:function(){return 0===Fai.top.sessionMemberId}},methods:{onShipTimePanelConfirm:function(e){this.shipTimeItem=e},onVisitorSaveIntraCityAddr:function(e,t){this.isVisitor&&(this.checkedAddrIndex=t)},onCheckedIntraCityAddrInfo:function(e){this.addrInfoList[e]?this.checkedAddrIndex=e:this.checkedAddrIndex=-1},gotoAddrListPage:function(){this.isVisitor?-1===this.checkedAddrIndex?Mobi.showAddrAddPage():Mobi.showAddrEditPage(this.checkedAddrIndex):Mobi.showAddrListPage()},callShipTimePanel:function(e){Mobi.$Bus.$emit("onShipTimePanelOpen"),e.stopPropagation()}}})})},Mobi.getAddrListPageOptions=function(){return{triggerId:"addrListPage",panelId:"editCusInfo",callback:function(){Mobi.fixTouchPenetrate("editCusInfo","addrListPage")},closeWebPage:"#editCusInfo .g_close"}},Mobi.showAddrListPage=function(){var e=Mobi.getAddrListPageOptions();Mobi.showPageWithInit(e),setTimeout(function(){jm("#editCusInfo").css("overflow-y","auto"),jm("#editCusInfo").css("height","100%"),jm("#editCusInfo").addClass("webPagePanelShow")},400)},Mobi.hideAddrListPage=function(){var e=Mobi.getAddrListPageOptions();Mobi.hidePage(e),t("#g_body").css("overflow-y","")},Mobi.showAddrEditPage=function(e){Mobi.showAddrAddOrEditPage(),Mobi.$Bus.$emit("onAddrEditPageShow",e)},Mobi.showAddrAddPage=function(){Mobi.showAddrAddOrEditPage(),Mobi.$Bus.$emit("onAddrAddPageShow")},Mobi.getAddrAddOrEditOption=function(){return{triggerId:"addrEditPage",panelId:"editAddrInfo",callback:function(){e.fixTouchPenetrate("editAddrInfo","addrEditPage")},closeWebPage:"#editAddrInfo .g_close"}},Mobi.showAddrAddOrEditPage=function(){var e=Mobi.getAddrAddOrEditOption();Mobi.showPageWithInit(e),t("#editAddrInfo").hide(),t("#editAddrInfo").removeClass("webPagePanelShow"),t("#editAddrInfo").show(),t("#editAddrInfo").addClass("webPagePanelShow")},Mobi.hideAddrOrEditPage=function(){var e=Mobi.getAddrAddOrEditOption();Mobi.hidePage(e)},Mobi.showPageWithInit=function(e){var i=t("#webPagePanel"+e.panelId),o=t("#webPagePanel"+e.triggerId);o.length||(Mobi.showPanel(e,!0),i=t("#webPagePanel"+e.panelId),o=t("#webPagePanel"+e.triggerId)),i.css("z-index",1e3),o.css("z-index",1e3),o.show(),i.hide(),i.show(),i.addClass("webPagePanelShow"),setTimeout(function(){e.panelId&&t("#"+e.panelId).addClass("webPagePanelShow")})},Mobi.hidePage=function(e){var i=t("#webPagePanel"+e.panelId);t("#webPagePanel"+e.triggerId).hide(),i.hide(),i.removeClass("webPagePanelShow"),t("#g_body").css("overflow-y",""),e.panelId&&t("#"+e.panelId).removeClass("webPagePanelShow")}}(Mobi,jm),function(e,t,i){e.showShipTemplateDetailPage=function(){var t={triggerId:"shipTplLinePage",panelId:"shiptemplatedetailPanel",callback:function(){Mobi.changeShipType(),Mobi.fixTouchPenetrate("shiptemplatedetailPanel","shipTplLinePage")},closeWebPage:"#modifyShipTemplate .g_close",direction:"bottom",pageBg:!0};e.showPageWithInit(t)},e.hideShipTemplateDetailPage=function(){e.hidePage(options)}}(Mobi,jm),function(t,i,o){jm(function(){Vue.component("com-shiptemplatedetail",{template:"\n\t\t\t\t<div id=\"shiptemplatedetailPanel\" style=\"display:none;\">\n\t\t\t\t\t<div id='modifyShipTemplate'  class='modifyShipDetails' style='background-color:inherit;'>\n\t\t\t\t\t \t<div class='g_close' style='width:100%;height:100%;'></div>\n\t\t\t\t\t \t<div class=\"headerCls\" style='display:none'>\n\t\t\t\t\t \t\t<span class='title pageTitle'>{{mallStlShipListTitle}}</span></div>\n\t\t\t\t\t \t<div class='profileContent'>\n\t\t\t\t\t\t\t<div class='count_line wekitBox ShipItem' id=''>\n\t\t\t\t\t\t\t\t<div class='left flex1 J_shipName'>{{tmpShipName}}</div>\n\t\t\t\t\t\t \t<div class='left flex1 J_shipPrice' :id='shipPriceId' value='0' :shipType='tmpShipType'>{{choiceCurrencyVal}}0.0</div>\n\t\t\t\t\t\t\t\t<span class='faisco-icons-shape11' style='font-size: 1rem;height: 2.5rem;line-height: 2.5rem;float: right;'></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t \t</div>\n\t\t\t\t\t </div>\n\t\t\t\t</div>\n\t\t\t",props:{data:Object},data:function(){return this.data},computed:{shipPriceId:function(){return"tmpType_"+this.tmpShipType},headerCls:function(){return["ShipDetailsHeader","webHeaderBg",this.themeV3Bgcolor]}}}),Vue.component("comp-merchant-total-ship",{props:{data:Object},template:"\n\t\t\t\t<div class='ship_line'>\n\t\t\t\t\t<div class='count_line wekitBox'>\n\t\t\t\t\t\t<div class='linetitle'>\n\t\t\t\t\t\t\t<span>总配送费</span>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t<div class='selectship flex1'>\n\x3c!--\t\t\t\t\t\t\t<span  :class=\"fColor\">{{ choiceCurrencyVal + finalPrice }}</span>--\x3e\n\t\t\t\t\t\t\t<fai-price-comp :class=\"fColor\" :currency=\"choiceCurrencyVal\" :number=\"finalPrice\"></fai-price-comp>\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",created:function(){Fai.top._totalShipVm=this},methods:{selfShipPrice:function(){return parseFloat(jm("#shipPrice").attr("value"))||0}},computed:{merchantTotalShipPrice:function(){return Fai.top._mstlMerchantProductListVm.totalShipPrice()},fColor:function(){return Fai.top._fColor},choiceCurrencyVal:function(){return Fai.top._choiceCurrencyVal},finalPrice:function(){return this.merchantTotalShipPrice+this.selfShipPrice()}},mounted:function(){this.$forceUpdate()}}),Vue.component("comp-shiptplline",{props:{data:Object},template:"\n\t\t\t\t<div>\n\t\t\t\t\t<div class='ship_line' id='shipTplLine' @click=\"callShipTemplateDetailPage\" v-if=\"checkedAddrIndex==-1\">\n\t\t\t\t\t\t<div class='count_line wekitBox'>\n\t\t\t\t\t\t\t<div class='linetitle'>\n\t\t\t\t\t\t\t\t<span>{{mallStlShipListTitle}}</span>\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t<div class='selectship flex1'>\n\t\t\t\t\t\t\t\t<span id='shipValue' :shipType='tmpShipType' provinceCode='' cityCode='' countyCode=''>{{tmpShipName}}</span>\n\t\t\t\t\t\t\t\t<span id='shipPrice' :currency='choiceCurrencyVal' value='0'> {{freeShipping}} </span>\n\t\t\t\t\t\t\t\t<svg role='img' class='jzm-v2 fk_mstl_icon'><use xlink:href='#jzm-v2'></use></svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t",data:function(){var e=Object.assign(this.data,{});return e.addrInfoList=Fai.top._addrInfoList,e.addrPropList=Fai.top._addrPropList,e.checkedAddrIndex=-1,e},watch:{checkedAddrIndex:function(){this.callCalculateShipPrice()}},created:function(){Mobi.$Bus.$off("onCheckedExpressAddrInfo",this.onCheckedExpressAddrInfo),Mobi.$Bus.$on("onCheckedExpressAddrInfo",this.onCheckedExpressAddrInfo),Mobi.$Bus.$off("onVisitorSaveExpressAddr",this.onVisitorSaveExpressAddr),Mobi.$Bus.$on("onVisitorSaveExpressAddr",this.onVisitorSaveExpressAddr),Mobi.$Bus.$off("onMallShipPanelCheckedAddrIndexChanged",this.onMallShipPanelCheckedAddrIndexChanged),Mobi.$Bus.$on("onMallShipPanelCheckedAddrIndexChanged",this.onMallShipPanelCheckedAddrIndexChanged)},computed:{fColor:function(){return Fai.top._fColor},isMerchantsSelfSaleEmpty:function(){return 1===Fai.top.shipTabListVm.checkedId&&Fai.top._mstlMerchantProductListVm.isSelfSaleEmpty()},expressShipPrice:function(){return parseInt(i("#shipPrice").attr("value"))||0},expressAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return!e.addrInfo.isIntraCity})},combineAddrInfoList:function(){return this.addrInfoList.map(function(e,t){return{addrInfo:e,index:t}})},addrInfo:function(){return Fai.top._addrInfoList[this.checkedAddrIndex]}},methods:{callCalculateShipPrice:function(){this.addrInfoList[this.checkedAddrIndex]&&Mobi.calculateMallShipTplByAddrInfo(this.addrInfoList[this.checkedAddrIndex])},onMallShipPanelCheckedAddrIndexChanged:function(e){this.checkedAddrIndex=e,this.callCalculateShipPrice()},onCheckedExpressAddrInfo:function(e){this.checkedAddrIndex=e},onVisitorSaveExpressAddr:function(e){this.checkedAddrIndex=e},callShipTemplateDetailPage:function(){Mobi.showShipTemplateDetailPage()}}}),Vue.component("comp-shipdetail",{template:"\n\t\t\t\t\t<div id='modifyShipDetails' class='modifyShipDetails' style='background-color: inherit;'>\n\t\t\t\t\t\t<div class='g_close' style='width: 100%;height: 100%;'></div>\n\t\t\t\t\t\t<div class='profileContent'>\n\t\t\t\t\t\t\t<div v-for='(item,index) in shipList' v-if='item.show'>\n\t\t\t\t\t\t\t\t<div class='count_line wekitBox ShipItem' :ship-item=\"index\" @click=\"onShipItemClick(index)\">\n\t\t\t\t\t\t\t\t\t<div class='left J_shipName'>{{item.type}}</div>\n\t\t\t\t\t\t\t\t\t<div class='flex1 J_shipPrice' :value='item.price' :shipType='index'>{{choiceCurrencyVal + item.price}}</div> \n\t\t\t\t\t\t\t\t\t<i v-if=\"index === checkedIndex\" class='faisco-icons-right g_color g_main_color_v3 J_selectShip' style='height: 2.5rem;line-height: 2.5rem;float: right;margin-right: 0.15rem;'></i>\n\t\t\t\t\t\t\t\t \t<i v-else class='faisco-icons-shape11' style='font-size: 1rem;height: 2.5rem;line-height: 2.5rem;float: right;'></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t",data:function(){return{shipList:Fai.top._shipList,choiceCurrencyVal:Fai.top._choiceCurrencyVal,shipListData:Fai.top._shipListData}},mounted:function(){Mobi.changeShipType()},methods:{onShipItemClick:function(e){Mobi.hideShipDetailPage(),this.shipListData.shipLineData.selectIdx=e,this.shipListData.shipLineData.shipType=this.shipList[e].type,this.shipListData.shipLineData.price=this.shipList[e].price,Mobi.onShipTypeChange(jm('[ship-item="'+e+'"]'))}},computed:{checkedIndex:function(){return this.shipListData.shipLineData.selectIdx}}});var e={props:{data:Object},computed:{priceVisible:function(){return!this.isOverShipDistance},isIntraCity:function(){return 3===Fai.top.shipTabListVm.checkedId},isExpress:function(){return 1===Fai.top.shipTabListVm.checkedId},isVisible:function(){return[1,3].includes(Fai.top.shipTabListVm.checkedId)},mallStlShipListTitle:function(){return this.shipLineData.mallStlShipListTitle},selectIdx:function(){return this.shipLineData.selectIdx},shipType:function(){return this.shipLineData.shipType},choiceCurrencyVal:function(){return this.shipLineData.choiceCurrencyVal},price:function(){return this.shipLineData.price},isOverShipDistance:function(){if(!Fai.top.intraCityShipPanelVm.addrInfo)return!0;var e=Fai.top.intraCityShipPanelVm.addrInfo,t=this.intraCityShipConf.pua.p,i=e.addr_info.pos;return!t||!i||Mobi.calculateIntraCityShipDistanceKm(t,i)>this.intraCityShipConf.sr.dr},intraCityPrice:function(){if(this.isOverShipDistance)return 0;var e=this.intraCityShipConf;return e&&e.spd?1===e.spd.olp?this.ladderPrice:e.spd.gsp.sp:0},ladderPrice:function(){var e=this.intraCityShipConf.pua.p,t=Fai.top.intraCityShipPanelVm.addrInfo.addr_info.pos,i=Mobi.calculateIntraCityShipDistanceKm(e,t),o=this.intraCityShipConf,n=o.spd.lsp,a=n.dr,r=o.spd.gsp.sp,s=i-a,l=n.id,c=n.isp;return i<=a?r:r+s/l*c},shipPrice:function(){return 2===Fai.top.shipTabListVm.checkedId?0:3===Fai.top.shipTabListVm.checkedId?this.intraCityPrice:parseInt(100*this.price)/100},isOpenExpress:function(){return 1===Fai.top.shipTabListVm.checkedId}},methods:{stopPropagation:function(e){this.isIntraCity&&e.stopPropagation()},callPanel:function(){Mobi.showShipDetailPage()}}};Vue.component("comp-intra-shipline",{mixins:[e],props:{data:Object},data:function(){return{shipLineData:this.data,intraCityShipConf:Fai.top._intraCityShipConf}},template:"\n\t\t\t\t<div v-if=\"isIntraCity && priceVisible\" class='ship_line' id=\"shipLine\">\n\t\t\t\t\t<div class='count_line wekitBox' @click=\"stopPropagation\">\n\t\t\t\t\t\t<div class='linetitle'>\n\t\t\t\t\t\t\t<span>配送费</span>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t<div class='selectship flex1' >\n\t\t\t\t\t\t\t<span id='shipValue' :shipType=\"selectIdx\"></span>\n\t\t\t\t\t\t\t<span id='shipPrice' :currency='choiceCurrencyVal' :value='intraCityPrice'>{{(choiceCurrencyVal +  intraCityPrice.toFixed(2))}}</span>\n\t\t\t\t\t\t\t<svg role='img' class='jzm-v2 fk_mstl_icon'><use xlink:href='#jzm-v2'></use></svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"}),Vue.component("comp-mallship-shipline",{mixins:[e],props:{data:Object},data:function(){return{shipLineData:this.data,intraCityShipConf:Fai.top._intraCityShipConf}},template:"\n\t\t\t\t<div v-else-if=\"isExpress\" class='count_line wekitBox' id=\"shipLine\">\n\t\t\t\t\t<div class='linetitle'>\n\t\t\t\t\t\t<span>{{mallStlShipListTitle}}</span>\n\t\t\t\t\t</div>\t\n\t\t\t\t\t<div class='selectship flex1' @click=\"callPanel\">\n\t\t\t\t\t\t<span id='shipValue' :shipType=\"selectIdx\" v-text=\"shipType\" ></span>\n\t\t\t\t\t\t\x3c!--这里id保持一致，是以为外界需要抓取这里的价格，计算总费用--\x3e\n\t\t\t\t\t\t<span id='shipPrice' :currency='choiceCurrencyVal' :value='price'>{{(choiceCurrencyVal +  price)}}</span>\n\t\t\t\t\t\t<svg role='img' class='jzm-v2 fk_mstl_icon'><use xlink:href='#jzm-v2'></use></svg>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"}),Vue.component("comp-shipline",{data:function(){return{shipLineData:this.data,intraCityShipConf:Fai.top._intraCityShipConf}},template:"\n\t\t\t\t\n\t\t\t\t\n\t\t\t",mounted:function(){}}),Vue.component("comp-noaddr-propInfo-contain",{props:{data:Object,checkedAddrIndex:Number,inputedAddrInfo:Object},template:"\n\t\t\t\t<div class='noAddrPropInfoContain' id='noAddrPropInfoContain'>\n\t\t\t\t    \x3c!-- 3项以上，走地址编辑的流程 --\x3e\n\t\t\t\t    <div v-if=\"addrPropList.length>3\">\n\t\t\t\t\t\t<div class=\"noAddrPanel\" @click=\"gotoAddrEditPage\">\n\t\t\t\t\t\t    <div v-for=\"(item, index) in addrPropList\" v-show=\"index<3\">\n\t\t\t\t\t\t\t\t<div class='noAddrLine'>\n\t\t\t\t\t\t\t\t\t<span style='color:#333'>{{item.name}}：</span>\n\t\t\t\t\t\t\t\t\t<span v-if=\"item.type === OrderPropTypeDef.CUS_DATE\" class='noAddr_prop'>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"getAddrInfoCusDate(item).s\">{{getAddrInfoCusDate(item).s}}</template>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"getAddrInfoCusDate(item).e\">{{serWeekTo}}{{getAddrInfoCusDate(item).e}}</template>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span v-else class='noAddr_prop'>{{getValue(item)}}</span>\n\t\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t<svg v-if=\"addrPropList.length>=2\" role=\"img\" class=\"jzm-v2 fk_mstl_icon fk_mstl_icon_noAddr\"><use xlink:href=\"#jzm-v2\"></use></svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t    </div>\n\t\t\t\t    \x3c!-- 3项以内，可以在界面上编辑 --\x3e\n\t\t\t\t\t<div v-else class='edit_line noAddrEditLineItem' v-for=\"(item, index) in addrPropList\">\n\t\t\t\t\t\t<div class='propName'>\n\t\t\t\t\t\t\t<span>{{item.name}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='wekitBox propValueWrap' :date-type=\"item.type === CUS_DATE\" :id='genBoxIdAttr(item)'>\n\t\t\t\t\t\t    <div  v-if=\"item.type === CUS_DATE\" style=\"width:12rem\">\n\t\t\t\t\t\t\t\t<comp-timepicker :addrProp=\"item\" :addrInfo=\"inputedAddrInfo\" :data=\"item.timePickerData\"></comp-timepicker>\n\t\t\t\t\t\t    </div>\n\n\t\t\t\t\t\t\t<input v-else-if=\"item.type === OrderPropTypeDef.SYS_NAME\" :_field='item.field'  :id='genInputIdAttr(item)' v-model.lazy=\"inputedAddrInfo.name\"  :_prop='item.name' class='propItemValue' :_required='(item.required ? 1 : 0)' type='text'  :maxlength='FIELD_MAXLEN' :placeholder='item.placeholderStr'  :propType='item.type'/>\n\n\t\t\t\t\t\t\t<input v-else-if=\"item.type === OrderPropTypeDef.SYS_MOBILE\" :_field='item.field'  :id='genInputIdAttr(item)' v-model.lazy=\"inputedAddrInfo.mobile\"  :_prop='item.mobile' class='propItemValue' :_required='(item.required ? 1 : 0)' type='text'  :maxlength='FIELD_MAXLEN' :placeholder='item.placeholderStr'  :propType='item.type'/>\n\n\t\t\t\t\t\t\t<input v-else v-model.lazy=\"inputedAddrInfo[item.fieldKey]\" :_field='item.field' :id='genInputIdAttr(item)'   :_prop='item.name' class='propItemValue' :_required='(item.required ? 1 : 0)' type='text'  :maxlength='FIELD_MAXLEN' :placeholder='item.placeholderStr'  :propType='item.type'/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",data:function(){var e=this.inputedAddrInfo;return Fai.top._addrPropList.forEach(function(t,i){void 0===e[t.fieldKey]&&(e[t.fieldKey]="")}),Object.assign({OrderPropTypeDef:Fai.top._OrderPropTypeDef,addrPropList:Fai.top._addrPropList,serWeekTo:Fai.top._serWeekTo},this.data)},mounted:function(){},methods:{getValue:function(e){return Mobi.Address.getPropVal(e,this.inputedAddrInfo)},getAddrInfoCusDate:function(e){var t=this.getValue(e);return{s:t.s,e:t.e}},genDateCls:function(e){return[1==e.dateType?"fk-startDateInput":"","mobiCalendarPlugins"]},genMobiIdAttr:function(e){return"Mobi"+this.moduleId+"Calendar"+e.id+"Plugins"},genMobiEndIdAttr:function(e){return"Mobi"+this.moduleId+"Calendar"+e.id+"Plugins_end"},genInputIdAttr:function(e){return"edit_"+e.field},genInputValue:function(e){return this.info[e.field]},genBoxIdAttr:function(e){return"orderPropId"+e.id},gotoAddrEditPage:function(e){-1==this.checkedAddrIndex?Mobi.showAddrAddPage():Mobi.showAddrEditPage(this.checkedAddrIndex)}}}),Vue.component("comp-assign-itemline",{props:{addrInfoItem:Object,data:Object},template:'\n\t\t\t\t<div class=\'assignItem_line fk_mallShipPanel\' id=\'assignItemline\' :_index=\'addrInfoItem.index\'  @click="gotoAddrListPage">\t\n\t\t\t\t    <div class=\'receiverLine\'>\n\t\t\t\t\t\t\n\t\t\t\t\t    \x3c!--地址信息--\x3e\n\t\t\t\t\t    <div class=\'item_value flex1 fk_mallShipPanel_addrInfo\' v-if="addrInfo">\n\t\t\t\t\t\t\t<svg role="img"  class="jzm-v39 fk_mstl_icon fk_mallShipPanel_addrInfo_icon">\n\t\t\t\t\t\t\t  <use xlink:href="#jzm-v39"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<div class="fk_mallShipPanel_addrInfo_addr">\n\t\t\t\t\t\t\t\t<div class="fk_mallShipPanel_addrInfo_addr_content">{{addrInfo.addr}}</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t    \t\x3c!--跳转箭头--\x3e\n\t\t\t\t\t\t\t<svg role="img" class="jzm-v2 fk_mstl_icon fk_mallShipPanel_addrInfo_arrow"><use xlink:href="#jzm-v2"></use></svg>\n\n\t\t\t\t\t\t\t\x3c!--<span v-show="false" :class=\'addrFieldCls\'  :id=\'addrFieldIdAttr\' :isMallTheme="isMallTheme">{{addrInfo.addr}}</span>--\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- 个人信息要依据后台是否设置开启，进行展示 --\x3e\n\t\t\t\t\t    <div v-if="addrInfo">\n\t\t\t\t\t\t\t<span  class=\'addr_value flex1 info_addr\' v-if="isOpenNameProp || isOpenMobileProp">\n\t\t\t\t\t\t\t    \x3c!--<span class=\'receiverkey\'>{{order_prop_receiver}}：</span>--\x3e\n\t\t\t\t\t\t        <span class="info_addr_name" v-if="isOpenNameProp">{{addrInfo.name || \'-\'}}</span>\n\t\t\t\t\t\t        <span class="info_addr_mobile" v-if="isOpenMobileProp">{{addrInfo.mobile}}</span>\n\t\t\t\t\t\t    </span>\n\t\t\t\t\t    </div>\n\t\t\t\t    </div>\n\t\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t',data:function(){return Object.assign(this.data,{addrInfoList:Fai.top._addrInfoList,addrPropInfoList:Fai.top._addrPropInfoList,OrderPropTypeDef:Fai.top._OrderPropTypeDef})},created:function(){},beforeMount:function(){},methods:{genItemCls:function(e){return["addr_value flex1 info_"+e.fieldKey]},genItemIdAttr:function(e){return"info_"+e.fieldKey},isNameItem:function(e){return"name"===e.fieldKey},addrFieldCls:function(){return"info_"+this.addrField},gotoAddrListPage:function(){this.$emit("callAddrList")}},computed:{isOpenNameProp:function(){return Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_NAME)},isOpenMobileProp:function(){return Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_MOBILE)},addrFieldIdAttr:function(){return"info_"+this.addrField},addrInfo:function(){return this.addrInfoItem.addrInfo}}}),Vue.component("comp-noaddrlistinfo",{props:{data:Object},template:"\n\t\t\t\t<div id='noAddrListInfo' style='background-color:#fafafa;'>\n\t\t\t\t    <div class='assignItem_line' id='assignItemline' :_index='info._index'></div>\t\n\t\t\t\t    <div class='noAddrPanel'>\n\t\t\t\t\t\t<div v-for=\"(item, index) in propDataList\">\n\t\t\t\t\t\t\t<div class='noAddrLine'>\n\t\t\t\t\t\t\t\t<span style='color:#333'>{{item.name}}：</span>\n\t\t\t\t\t\t\t    <span class='noAddr_prop' :propType='item.type' :id='genItemIdAttr(item)'>{{item.noAddr_propValue}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span v-if=\"index>3\" class='icon-rightIcon rightToward'></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t    </div>\n\t\t\t\t</div>\t\n\t\t\t",data:function(){return Object.assign({},this.data)},methods:{genItemIdAttr:function(e){return"info_"+e.field}}})}),t.initMallShipPanel=function(e){Fai.top.mallShipPanelVm=new Vue({el:"#mallShipPanel",template:'\n\t\t\t\t<div class=\'orderAssign_line\' :class="{fk_mallShipPanel_visitor:isVisitor}" v-if="addrPropListExist" :id=\'editAddrIdAttr\'>\n\t\t\t\t    \x3c!-- 开启了地址项 --\x3e\n\t\t\t\t    <div v-if="isOpenAddrProp">\n\t\t\t\t    \t\x3c!-- 地址不为空(地址必定存在，才会出这个界面) --\x3e\n\t\t\t\t\t\t<comp-assign-itemline v-if="expressAddrInfoList.length>0 && addrInfo" :addrInfoItem="addrInfoItem" :data="assignItemlineData" v-on:callAddrList="gotoAddrListPage"></comp-assign-itemline>\n\t\t\t\t    \t\x3c!-- 地址为空 --\x3e\n\t\t\t\t\t\t<div v-else :class=\'linetitle1Cls\' id=\'linetitle1\' @click="gotoAddrListPage">\n\t\t\t\t\t\t\t<svg role="img" class="jzm-v39 fk_mstl_icon fk_intraCityShipAddr_address_icon"><use xlink:href="#jzm-v39"></use></svg>\n\t\t\t\t\t\t\t<span>{{mallShiplinetitle1Data.moduleName}}</span>\n\t\t\t\t\t\t\t<svg role="img" class="jzm-v2 fk_mstl_icon" style="float:right">\n\t\t\t\t\t\t\t  <use xlink:href="#jzm-v2"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t    </div>\n\t\t\t\t    \x3c!-- 开启了关闭地址项 --\x3e\n\t\t\t\t\t<comp-noaddr-propInfo-contain v-else :data="noAddrPropInfoContainData" :inputedAddrInfo="inputedAddrInfo" :checkedAddrIndex="checkedAddrIndex"></comp-noaddr-propInfo-contain>\n\t\t\t\t    <div class=\'shipTopBg\'></div>\n\t\t\t\t</div>\n\t\t\t',data:function(){var t=-1;Fai.top._addrInfoList.forEach(function(e,i){1===e.isDefault&&(t=i)});var i=Fai.top._addrInfoList[t]||{},o=Object.assign(e,{checkedAddrIndex:t,addrInfoList:Fai.top._addrInfoList,addrPropList:Fai.top._addrPropList,inputedAddrInfo:i});return o.addrInfoList=Fai.top._addrInfoList,o},watch:{checkedAddrIndex:function(){var e=this;Vue.nextTick(function(){Mobi.promiseCalculateMallShipTplByAddrInfo(e.addrInfo).then(function(){Mobi.recheckItg()})}),Mobi.$Bus.$emit("onMallShipPanelCheckedAddrIndexChanged",this.checkedAddrIndex)},addrInfo:{deep:!0,handler:function(){[0,1].includes(Fai.top.shipTabListVm.checkedId)&&this.addrInfo&&Mobi.promiseCalculateMallShipTplByAddrInfo(this.addrInfo)}}},mounted:function(){var e=this;Vue.nextTick(function(){Mobi.$Bus.$emit("onMallShipPanelCheckedAddrIndexChanged",e.checkedAddrIndex)})},created:function(){Mobi.$Bus.$off("onCheckedExpressAddrInfo",this.onCheckedExpressAddrInfo),Mobi.$Bus.$on("onCheckedExpressAddrInfo",this.onCheckedExpressAddrInfo),Mobi.$Bus.$off("onVisitorSaveExpressAddr",this.onVisitorSaveExpressAddr).$on("onVisitorSaveExpressAddr",this.onVisitorSaveExpressAddr),Mobi.$Bus.$off("onMallShipPanelShow",this.onMallShipPanelShow).$on("onMallShipPanelShow",this.onMallShipPanelShow)},computed:{linetitle1Cls:function(){return["linetitle1",this.mallShiplinetitle1Data.noAddrMsgListClass]},addrPropListExist:function(){return this.addrPropList.length>0},expressAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return!e.addrInfo.isIntraCity})},combineAddrInfoList:function(){return this.addrInfoList.map(function(e,t){return{addrInfo:e,index:t}})},addrInfo:function(){return this.isOpenAddrProp?this.addrInfoList[this.checkedAddrIndex]:this.inputedAddrInfo},addrInfoItem:function(){return{index:this.checkedAddrIndex,addrInfo:this.addrInfo}},isVisitor:function(){return 0===Fai.top.sessionMemberId}},methods:{onMallShipPanelShow:function(){this.addrInfo&&Mobi.promiseCalculateMallShipTplByAddrInfo(this.addrInfo)},onVisitorSaveExpressAddr:function(e,t){this.checkedAddrIndex=t,this.inputedAddrInfo=this.addrInfoList[t]},onCheckedExpressAddrInfo:function(e){this.addrInfoList[e]?this.checkedAddrIndex=e:this.checkedAddrIndex=-1},gotoAddrListPage:function(){this.isVisitor?-1==this.checkedAddrIndex?Mobi.showAddrAddPage():Mobi.showAddrEditPage(this.checkedAddrIndex):Mobi.showAddrListPage()}}})},t.showShipDetailPage=function(){var e=t.getShipDetailOption();t.showPageWithInit(e),i("#webPagePanelshipLinePage").css("z-index",999),i("#modifyShipDetailsPanel").removeClass("webPagePanelBottom")},t.hideShipDetailPage=function(){var e=t.getShipDetailOption();t.hidePage(e),i("#webPagePanelshipLinePage").css("z-index",""),i("#modifyShipDetailsPanel").removeClass("webPagePanelBottom"),i("#g_body").css("overflow-y","")},t.getShipDetailOption=function(){return{triggerId:"shipLinePage",panelId:"modifyShipDetailsPanel",callback:function(){Mobi.fixTouchPenetrate("shipLinePage","modifyShipDetailsPanel")},closeWebPage:"#modifyShipDetailsPanel .g_close",direction:"bottom",pageBg:!0}},jm(function(){var t;Vue.component("comp-addritem",{props:(t={item:Object,disabled:Boolean,index:Number,editText:{type:String,required:!0},delText:{type:String,required:!0}},_defineProperty(t,"editText",{type:String,required:!0}),_defineProperty(t,"cancelDefaultText",{type:String,required:!0}),_defineProperty(t,"setDefaultText",{type:String,required:!0}),_defineProperty(t,"isIntraCity",Boolean),t),data:function(){return{OrderPropTypeDef:Fai.top._OrderPropTypeDef}},template:"\n\t\t\t\t<div class='addrInfo' :_item='item.index' @click=\"checkedAddrHandler\">\n\t\t\t\t\t<div :class=\"nameCls\" style='width:100%;'>\t\n\t\t\t\t\t\t<div class='nameAndPhone' v-if=\"isOpenNameProp || isOpenMobileProp\">\n\t\t\t\t\t\t\t<span class='name' v-if=\"isOpenNameProp\">\n\t\t\t\t\t\t\t\t<span class=\"name_text\">{{item.addrInfo.name || '-'}}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class='phone' v-if=\"isOpenMobileProp\">{{item.addrInfo.mobile}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='address'>\n\t\t\t\t\t\t\t<span id='addr'>{{item.addrInfo.addr}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='selectedArea'>\n\t\t\t\t\t\t<div class='left'>\n\t\t\t\t\t  \t\t<div class='selectedDiv' @click=\"setDefault\">\n\t\t\t\t  \t\t\t\t<label :for='(\"input\"+ item.index )'>\n\t\t\t\t  \t\t\t\t\t<input type='radio' :checked=\"isDefault\" class='checkbox-comp' :id='( \"input\"+ item.index )' name='defaultLogo'>\n\t\t\t\t  \t\t\t\t\t<span class=\"radio_box\" :class=\"{ g_bdColor:isDefault, g_bgColor:isDefault,  g_main_bgColor_v3:isDefault}\"></span>\n\t\t\t\t  \t\t\t\t\t<span class='text'>{{genSelectedDivText(item)}}</span>\n\t\t\t\t  \t\t\t\t</label>\n\t\t\t\t  \t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t \t<div class='right'>\n\t\t\t\t\t \t\t<div class='edit' :_index=\"item.index\" @click=\"edit\">\n\t\t\t\t\t \t\t\t<span>{{editText}}</span>\n\t\t\t\t\t \t\t</div>\n\t\t\t\t\t \t\t<div @click=\"remove\" class='cutOut' v-if=\"!isDefault\">\n\t\t\t\t\t \t\t\t<span>{{delText}}</span>\n\t\t\t\t\t \t\t</div>\n\t\t\t\t\t \t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",methods:{genSelectedDivText:function(){return this.isDefault?this.setDefaultText:this.cancelDefaultText},edit:function(){Mobi.showAddrEditPage(this.item.index)},remove:function(e){jm(this);Mobi.prompt({textClass:"confirm",content:"确定要删除该收货人信息吗？",callback:this.onRemoveConfirm}),e.stopPropagation()},onRemoveConfirm:function(){var e=this,t=this.item.index,i={opera:"delAddr",_item:t+""},o=this.defaultAddrIndex;jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set&id="+Fai.top.sessionMemberId,data:"info="+jm.encodeUrl(jm.toJSON(i)),error:function(){Mobi.ing(LS.systemError)},success:function(i){var n=jm.parseJSON(i);n.success?(jm("#mobiPrompt").remove(),jm("#mobiPrompt_Bg").remove(),e.isCurrChecked&&e.callCheckedAddr(parseInt(o)),Vue.nextTick(function(){Fai.top._addrInfoList.splice(t,1)})):Mobi.ing(n.msg)}})},setDefault:function(e){if(this.isIntraCity){if(this.item.isIntraDefault)return}else if(1==this.item.isDefault)return;var t=this.item.index+"",i=Mobi.deepCopy(this.item.addrInfo);this.isIntraCity?i.isIntraDefault=!0:i.isDefault=1,i=Mobi.replaceCusDateStrToObj(i);var o={opera:"setDefault"};o._item=t,o.addrInfo=i;var n=this;jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set&id="+Fai.top.sessionMemberId,data:{info:jm.toJSON(o)},error:function(){Mobi.ing(LS.memberProfileError)},success:function(e){var t=jm.parseJSON(e);t.success?n.isIntraCity?(n.intraCityAddrInfoList.forEach(function(e){e.addrInfo.isIntraDefault=!1}),n.item.addrInfo.isIntraDefault=!0):(n.expressAddrInfoList.forEach(function(e){e.addrInfo.isDefault=0}),n.item.addrInfo.isDefault=1):Mobi.ing(t.msg)}}),e.stopPropagation()},checkedAddrHandler:function(e){this.item.addrInfo.isIntraCity&&this.disabled?e.stopPropagation():(this.callCheckedAddr(this.item.index),Mobi.hideAddrListPage(),e.stopPropagation())},callCheckedAddr:function(t){if(this.item.addrInfo.isIntraCity){if(this.disabled)return void e.stopPropagation();Mobi.$Bus.$emit("onCheckedIntraCityAddrInfo",t)}else Mobi.$Bus.$emit("onCheckedExpressAddrInfo",t)}},computed:{defaultAddrIndex:function(){var e=-1;if(this.isIntraCity){var t=this.intraCityAddrInfoList.filter(function(e){return e.addrInfo.isIntraDefault});t&&(e=t[0].index)}else{var i=this.expressAddrInfoList.filter(function(e){return e.addrInfo.isDefault});i&&(e=i[0].index)}return e},isCurrChecked:function(){return this.item.addrInfo.isIntraCity?Fai.top.intraCityShipPanelVm.checkedAddrIndex===this.item.index:!!Fai.top.mallShipPanelVm&&Fai.top.mallShipPanelVm.checkedAddrIndex===this.item.index},isOpenNameProp:function(){return Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_NAME)},isOpenMobileProp:function(){return Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_MOBILE)},isDefault:function(){return this.item.addrInfo.isIntraCity?this.item.addrInfo.isIntraDefault:1==this.item.addrInfo.isDefault},expressAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return!e.addrInfo.isIntraCity})},intraCityAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return e.addrInfo.isIntraCity})},combineAddrInfoList:function(){return Fai.top._addrInfoList.map(function(e,t){return{addrInfo:e,index:t}})},nameCls:function(){return[this.isDefault?"":"middle","info_name"]}}}),Vue.component("comp-addrinfolist",{props:{data:Object,isIntraCity:{required:!0,type:Boolean}},template:'\n\t\t\t\t<div>\t\n\t\t\t\t\t\x3c!--同城配送的地址--\x3e\n\t\t\t\t    <div v-if="isIntraCity">\n\t\t\t\t\t\t\x3c!--同城配送的地址-可选择--\x3e\n\t\t\t\t\t\t<div class="fk_intraCityAddrList_enable">\n\t\t\t\t\t\t\t<comp-addritem \n\t\t\t\t\t\t\t\t:delText="g_del" \n\t\t\t\t\t\t\t\t:isDefault="item.addrInfo.isIntraDefault" \n\t\t\t\t\t\t\t\t:setDefaultText="addrInfo_defaultAddr" \n\t\t\t\t\t\t\t\t:cancelDefaultText="mobi_mall_SetDefault" \n\t\t\t\t\t\t\t\t:editText="mobi_mall_edit" \n\t\t\t\t\t\t\t\t:item="item" \n\t\t\t\t\t\t\t\tv-for="item in intraCityEabledAddrInfoList"\n\t\t\t\t\t\t\t\t:isIntraCity="isIntraCity"\n\t\t\t\t\t\t\t></comp-addritem>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="fk_intraCityAddrList_disable" v-if="intraCityDisableAddrInfoList.length>0">\n\t\t\t\t\t\t\t<div class="fk_intraCityAddrList_disable_title">以下为超配送范围地址：</div>\n\t\t\t\t\t\t\t<comp-addritem \n\t\t\t\t\t\t\t\tdisabled \n\t\t\t\t\t\t\t\t:delText="g_del" \n\t\t\t\t\t\t\t\t:isDefault="item.addrInfo.isIntraDefault" \n\t\t\t\t\t\t\t\t:setDefaultText="addrInfo_defaultAddr" \n\t\t\t\t\t\t\t\t:cancelDefaultText="mobi_mall_SetDefault" \n\t\t\t\t\t\t\t\t:editText="mobi_mall_edit" \n\t\t\t\t\t\t\t\t:item="item" \n\t\t\t\t\t\t\t\tv-for="item in intraCityDisableAddrInfoList"\n\t\t\t\t\t\t\t\t:isIntraCity="isIntraCity"\n\t\t\t\t\t\t\t></comp-addritem>\n\t\t\t\t\t\t</div>\n\t\t\t\t    </div>\n\t\t\t\t\t\x3c!--快递发货的地址--\x3e\n\t\t\t\t    <div v-else>\n    \t\t\t\t\t<comp-addritem \n    \t\t\t\t\t\t:delText="g_del" \n    \t\t\t\t\t\t:isDefault="item.addrInfo.isDefault==1" \n    \t\t\t\t\t\t:setDefaultText="addrInfo_defaultAddr" \n    \t\t\t\t\t\t:cancelDefaultText="mobi_mall_SetDefault" \n    \t\t\t\t\t\t:editText="mobi_mall_edit" \n    \t\t\t\t\t\t:item="item" \n    \t\t\t\t\t\tv-for="item in expressAddrInfoList"\n    \t\t\t\t\t></comp-addritem>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t',data:function(){var e=Object.assign(this.data,{intraCityShipConf:Fai.top._intraCityShipConf,addrInfoList:Fai.top._addrInfoList});return e},created:function(){Mobi.$Bus.$off("onShipTabChanged",this.onShipTabChanged),Mobi.$Bus.$on("onShipTabChanged",this.onShipTabChanged)},methods:{onShipTabChanged:function(e){}},computed:{expressAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return!e.addrInfo.isIntraCity})},intraCityAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return e.addrInfo.isIntraCity})},combineAddrInfoList:function(){return this.addrInfoList.map(function(e,t){return{addrInfo:e,index:t}})},currAddrInfoList:function(){return this.isIntraCity?this.intraCityAddrInfoList:this.expressAddrInfoList},intraCityEabledAddrInfoList:function(){var e=this.intraCityShipConf,t=e.pua.p,i=e.sr.dr;return this.intraCityAddrInfoList.filter(function(e){var o=e.addrInfo.addr_info.pos;return!!o&&Mobi.syncComputeDistanceBetween({latitude:o.lat,longitude:o.lng},{latitude:t.lat,longitude:t.lng})/1e3<=i})},intraCityDisableAddrInfoList:function(){var e=this.intraCityShipConf,t=e.pua.p,i=e.sr.dr;return this.intraCityAddrInfoList.filter(function(e){var o=e.addrInfo.addr_info.pos;return!o||Mobi.syncComputeDistanceBetween({latitude:o.lat,longitude:o.lng},{latitude:t.lat,longitude:t.lng})/1e3>i})}}}),Vue.component("comp-addrlistpage",{template:"\n\t\t\t\t<div id='addrInfo' class='addressList'>\n\t\t\t\t\t<comp-addrinfolist :isIntraCity=\"isIntraCity\" ref=\"addrinfolist\" :data=\"mallShipAddrInfo\"></comp-addrinfolist>\n\t\t\t\t\t<div v-show='showAddrAddBtn' id='orderAddAddrInfo' class='g_button orderAddAddrInfo g_main_bgColor_v3' @click=\"gotoAddrAddPage\">{{mobi_newAddrInfo}}</div>\n\t\t\t\t</div>\n\t\t\t",props:{data:Object,isIntraCity:{required:!0,type:Boolean}},data:function(){return this.data},computed:{showAddrAddBtn:function(){var e=this,t=Fai.top._addrInfoListLimit||30;return this.data.mallShipAddrInfo.addrInfoList.filter(function(t){return e.isIntraCity?t.isIntraCity:!t.isIntraCity}).length<t}},watch:{"data.mallShipAddrInfo.addrInfoList":function(){}},methods:{gotoAddrAddPage:function(e){Mobi.showAddrAddPage(),e.stopPropagation()}}}),Vue.component("comp-provinceform",{template:"\n\t\t\t\t<div>\n\t\t\t\t\t<div class='edit_line' style='display:none'>\n\t\t\t   \t\t\t<div class='linetitle'>\n\t\t\t\t\t\t\t<span>{{provinceText}}</span>\n\t\t\t\t\t\t\t<span class='icon-addrSelect icon-select'></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- //隐藏不用就好。不能删掉，因为还有部分逻辑用它来判断是否开痛了运费模版 --\x3e\n\t\t\t\t\t\t<select class='g_selectTag' id='mallShipTemplate_province' style='display:none;' ></select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<comp-province-city-county :addrInfo=\"addrInfo\" :data='provinceData'></comp-province-city-county>\n\t\t\t\t</div>\n\t\t\t",props:{provinceText:String,provinceData:Object,addrInfo:Object}}),Vue.component("comp-province-city-county",{props:{data:Object,addrInfo:Object},template:"\n\t\t\t\t<div class=\"locationPanel\">\n\t\t\t\t\t\x3c!--区域选项--\x3e\n\t\t\t\t\t<div class='edit_line' v-show=\"!addrNotExist\">\t\n\t\t\t\t\t\t<div class='linetitle'>\n\t\t\t\t\t\t\t<span class='editLineItem'>{{Region}}</span>\n\t\t\t\t\t\t\t<span class='icon-addrSelect icon-select'></span>\n\t\t\t\t\t    </div>\n\t\t\t\t\t\t<select class='g_selectTag' :id='allAreaIdStr' :value=\"area\" @change=\"onAreaChange\">\n\t\t\t\t\t\t    <option value=''>------</option>\n\t\t\t\t\t\t    <option value='cn' v-if=\"showChina\">{{cnLocale}}</option>\n\t\t\t\t\t\t    <option value='os' v-if=\"showOversea\">{{osLocale}}</option>\n\t\t\t\t\t\t    <option :value='item.id' v-for=\"item in cusAreaProvinceList\">{{item.name}}</option>\n\t\t\t\t\t\t</select>\n\t\t     \t\t</div>\n\n\t\t\t\t\t\x3c!--【行政区域】或【省市县】的 控件--\x3e\n\t\t            <div v-show=\"areaUIVisible\">\n\t\t\t\t\t\t<div class='edit_line'>\n\t\t\t\t\t\t\t\x3c!--表单字段--\x3e\n\t\t\t\t\t\t\t<div class='linetitle'>\n\t\t\t                     <span v-show=\"cusAreaVisible\" class='J_administrativeRegion editLineItem'>{{administrativeRegion}}</span>\n\t\t\t                     <span v-show=\"ssqVisible\" class='J_ssq editLineItem' >{{mobi_ssq}}</span>\n\t\t\t                </div>\n\n\t\t\t\t\t\t\t\x3c!--省、市、区 表单字段--\x3e\n\t\t\t \t\t\t\t<input type='text' :id='areaBoxInputIdAttr' :value=\"getAddressWithSplitChar('-')\" @click=\"callRegionPanel\" class='g_input propItemValue' placeholder='------' readOnly='true' isCn isOs isCus area1 area2 area3/>\n\n\t\t\t\t\t\t\t<div class=\"panel_container\" v-if=\"inited\">\n\t\t\t\t\t\t\t\t\x3c!--省、市、区 面板--\x3e\n\t\t\t\t \t\t\t\t<div :id='areaBoxIdAttr' class='areaBox' style='display:none;'>\n\t\t\t\t \t\t\t\t\t<div :id='areaBoxCloseIdAttr' style='height:100%'></div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\x3c!-- 自定义区域的地址面板 --\x3e\n\t\t\t\t \t\t\t\t\t<div v-if=\"cusAddrPanelVisible\" :id='areaBox2IdAttr' class='areaBox2'>\n\t\t\t\t \t\t\t\t\t\t<div :id='sec_boxIdStr' class='sec_box'>\n\t\t\t\t \t\t\t\t\t\t\t<div class='sec_head J_areaHead2'>\n\t\t\t\t \t\t\t\t\t\t\t\t<div class='sec_sec sec item' :active=\"cusRegionTabIndex==0\" @click=\"checkCusAreaTab(0)\">{{firstRegion}}</div>\n\t\t\t\t \t\t\t\t\t\t\t\t<div class='sec_thd thd item' :active=\"cusRegionTabIndex==1\" @click=\"checkCusAreaTab(1)\">{{secRegion}}</div>\n\t\t\t\t \t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t\t<div class='sec_content'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-if=\"cusRegionTabIndex===0\"\"> \n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='group_item' :cid='item.id' :cname='item.name' v-for=\"item in cusAreaCityList\" @click=\"setCusCity(item.id)\">{{item.name}}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div v-else-if=\"cusRegionTabIndex===1\"> \n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class='group_item' :cid='item.id' :cname='item.name' v-for=\"item in cusAreaCountyList\" @click=\"setCusCounty(item.id)\">{{item.name}}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\x3c!-- 中国省市区的面板 --\x3e\n\t\t\t\t \t\t\t\t\t<div v-else :id='areaBox1IdAttr' class='areaBox1' @click=\"stopPropagation\">\n\n\t\t\t \t\t\t\t\t\t\t<div class='pv_head J_areaHead'>\n\t\t\t \t\t\t\t\t\t\t\t<div @click=\"checkedRegionTab(0)\" :active=\"regionTabIndex===0\" class='pv_head_item pv_pv pv'>{{province}}</div>\n\t\t\t \t\t\t\t\t\t\t\t<div @click=\"checkedRegionTab(1)\" :active=\"regionTabIndex===1\" class='pv_head_item pv_city city'>{{city}}</div>\n\t\t\t \t\t\t\t\t\t\t\t<div @click=\"checkedRegionTab(2)\" :active=\"regionTabIndex===2\" class='pv_head_item pv_county county'>{{county}}</div>\n\t\t\t \t\t\t\t\t\t\t\t<div @click=\"checkedRegionTab(3)\" :active=\"regionTabIndex===3\" class='pv_head_item pv_street street'>{{street}}</div>\n\t\t\t \t\t\t\t\t\t\t</div>\n\n\t\t\t\t \t\t\t\t\t\t<div v-if=\"regionTabIndex===0\" :id='province_boxIdAttr' class='province_box'>\n\t\t\t\t \t\t\t\t\t\t\t<div class='pv_content'>\n\t\t\t\t \t\t\t\t\t\t\t\t<div v-if=\"area==='os'\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div v-for='item in provinceContent' class='pv_group' v-show='item.isOs'>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t<div class='group_head'>{{item.head}}</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t<div class='group_content'>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t<div v-for='contentItem in item.content' class='group_item' @click=\"setProvince(contentItem.id)\" :pid='contentItem.id' :pname='contentItem.name'>{{contentItem.simpleName}}</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div v-for='item in provinceContent' class='pv_group' v-show='!item.isOs'>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t<div class='group_head'>{{item.head}}</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t<div class='group_content'>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t<div v-for='contentItem in item.content' class='group_item' :pid='contentItem.id' :pname='contentItem.name' @click=\"setProvince(contentItem.id)\">{{contentItem.simpleName}}</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t \t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t<div v-else-if=\"regionTabIndex===1\" :id='city_boxIdAttr' class='city_box' >\n\t\t\t\t \t\t\t\t\t\t\t<div class='city_content'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='group_item' @click=\"setCity(item.id)\" :cid='item.id' :cname='item.name' v-for='item in cityContent' >{{item.simpleName}}</div>\n\t\t\t\t \t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t<div v-else-if=\"regionTabIndex===2\" :id='county_boxIdAttr' class='county_box'>\n\t\t\t\t \t\t\t\t\t\t\t<div class='county_content'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='group_item' @click=\"setCounty(item.id)\" :cid='item.id' :cname='item.name' v-for='item in countyContent' >{{item.simpleName}}</div>\n\t\t\t\t \t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t<div v-else-if=\"regionTabIndex===3\" :id='street_boxIdAttr' class='street_box'>\n\t\t\t\t \t\t\t\t\t\t\t<div class='street_content'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class='group_item' @click=\"setStreet(item.id)\" :cid='item.id' :cname='item.name' v-for='item in streetContent' >{{item.simpleName}}</div>\n\t\t\t\t \t\t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t\t</div>\n\t\t\t\t \t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t    <div class='edit_line'>\t\n\t\t\t\t        <div class='linetitle'>\n\t\t\t\t            <span class='editLineItem'>{{mobi_mall_Address}}</span>\n\t\t\t\t        </div>\n\t\t\t\t        <textarea :id='addrSaveIdAttr' v-model.lazy=\"addrInfo.addr_info.streetAddr\" _field='addrDetail' :_required='(required ? 1 : 0)' :_prop='mobi_mall_Address' class='propItemValue g_textArea' :maxlength='ADDR_MAXLEN' :placeholder='placeholderStr'></textarea>\n\t\t\t\t    </div>\n\t\t\t\t</div>\n\t\t\t",data:function(){return Object.assign(Fai.top._provinceCityCountyData,{area:"",regionTabIndex:0,cusRegionTabIndex:0,hasAttr:!1,inited:!1,allCusAreaList:Fai.top._allCusAreaList})},created:function(){Mobi.$Bus.$off("onLocationPanelInited",this.onLocationPanelInited).$on("onLocationPanelInited",this.onLocationPanelInited)},watch:{"addrInfo.addr_info":{deep:!0,handler:function(){var e=[];this.codeAddress&&e.push(this.codeAddress),this.addrInfo.addr_info.streetAddr&&e.push(this.addrInfo.addr_info.streetAddr.trim()),99e4===this.addrInfo.addr_info.provinceCode?this.addrInfo.addr=this.osLocale+this.addrInfo.addr_info.streetAddr.trim():this.addrInfo.addr=e.join("")}},addrInfo:function(e){this.setAreaForInit(e)},area:function(e,t){}},methods:{onLocationPanelInited:function(){this.inited=!0},stopPropagation:function(){return!1},checkCusAreaTab:function(e){this.cusRegionTabIndex=e},checkedRegionTab:function(e){this.regionTabIndex=e},hide:function(){this.regionTabIndex=0,Mobi.hideRegionPanel()},onAreaChange:function(e){var t=e.target.value,i=parseInt(t);isNaN(i)?(this.addrInfo.addr_info.provinceCode="os"==t?99e4:void 0,this.addrInfo.addr_info.isCus=!1):(this.addrInfo.addr_info.isCus=!0,this.setCusProvince(i)),this.area=t,this.$forceUpdate()},setAreaForInit:function(e){var t=e.addr_info;if(t.isCus){var i=this.cusAreaProvinceList.filter(function(e){return e.id===t.provinceCode})[0];this.area=i?i.id+"":""}else 99e4==t.provinceCode?this.area="os":t.provinceCode?this.area="cn":this.area=""},onShipTabChanged:function(e){},callRegionPanel:function(){this.inited;this.inited?this.cusAddrPanelVisible&&this.checkCusAreaEmpty()||Mobi.showRegionPanel():this.cusAddrPanelVisible&&this.checkCusAreaEmpty()||this.callRegionPanelFirstly()},callRegionPanelFirstly:function(){Mobi.ing("加载地址中..."),setTimeout(function(){site_cityUtil.initProvinces(Fai.top._lcid),Mobi.$Bus.$emit("onLocationPanelInited"),Vue.nextTick(function(){Mobi.showRegionPanel(),Mobi.ing("加载完毕...")})})},checkCusAreaEmpty:function(){return 0===this.cusRegionTabIndex&&0===this.cusAreaCityList.length||1===this.cusRegionTabIndex&&0===this.cusAreaCountyList.length},setCusProvince:function(e){this.addrInfo.addr_info.provinceCode=e,this.checkCusAreaTab(0),this.resetForProvince()},setCusCity:function(e){this.addrInfo.addr_info.cityCode=e,this.resetForCity(),this.cusAreaCountyList.length?this.checkCusAreaTab(1):this.hide()},setCusCounty:function(e){this.addrInfo.addr_info.countyCode=e,this.resetForCounty(),this.hide()},resetForProvince:function(){var e=this.addrInfo.addr_info;e.cityCode=void 0,e.countyCode=void 0,e.streetCode=void 0},resetForCity:function(){var e=this.addrInfo.addr_info;e.countyCode=void 0,e.streetCode=void 0},resetForCounty:function(){this.addrInfo.addr_info.streetCode=void 0},setProvince:function(e){this.addrInfo.addr_info.provinceCode=e,this.checkedRegionTab(1),this.resetForProvince(),0===this.cityContent.length&&this.hide()},setCity:function(e){this.addrInfo.addr_info.cityCode=e,this.checkedRegionTab(2),this.resetForCity(),0===this.countyContent.length&&this.hide()},setCounty:function(e){this.addrInfo.addr_info.countyCode=e,this.checkedRegionTab(3);this.addrInfo.addr_info;this.resetForCounty(),0===this.streetContent.length&&this.hide()},setStreet:function(e){this.addrInfo.addr_info.streetCode=e,this.hide()},genLocList:function(e){var t=this;return e.map(function(e){return t.getLocInfo(e.id)})},getProvinceInfo:function(e,t){var i="";return this.isCn?(i=site_cityUtil.getInfo(e).name,simpleName=site_cityUtil.simpleProvinceNameStr(i)):(i=site_cityUtil.getInfoEn(e).name,simpleName=site_cityUtil.simpleProvinceNameStrEn(i)),{id:e,name:i,simpleName:simpleName}},getLocInfo:function(e){var t="",i="";return this.isCn?(t=site_cityUtil.getInfo(e).name,i=site_cityUtil.simpleCityNameStr(t)):(t=site_cityUtil.getInfoEn(e).name,i=site_cityUtil.simpleCityNameStrEn(t)),{id:e,name:t,simpleName:i}},getAddressWithSplitChar:function(e){e=e||"";var t=[],i=this.addrInfo.addr_info||{};if(i.isCus)return this.getCusAddress(e);var o=this.getProvinceInfo(i.provinceCode||-1);return-1===o.id?t.join(e):(t.push(o.name),-1===(o=this.getLocInfo(i.cityCode||-1)).id?t.join(e):(t.push(o.name),-1===(o=this.getLocInfo(i.countyCode||-1)).id?t.join(e):(t.push(o.name),-1===(o=this.getLocInfo(i.streetCode||-1)).id?t.join(e):(t.push(o.name),t.join(e)))))},getAddress:function(){return this.getAddressWithSplitChar()},getCusAddress:function(){return this.getCusAddressWithSplitChar()},getCusAddressWithSplitChar:function(e){e=e||"";var t=this.addrInfo.addr_info,i=t.provinceCode,o=t.cityCode,n=t.countyCode,a=[],r=null;return(r=this.cusAreaProvinceList.filter(function(e){return e.id==i})[0])?(a.push(r.name),(r=this.cusAreaCityList.filter(function(e){return e.id==o})[0])?(a.push(r.name),(r=this.cusAreaCountyList.filter(function(e){return e.id==n})[0])?(a.push(r.name),a.join(e)):a.join(e)):a.join(e)):a.join(e)}},computed:{cusAddrPanelVisible:function(){return this.addrInfo.addr_info.isCus||this.cusAreaVisible},areaUIVisible:function(){var e=this.area.trim();return""!==e.trim()&&"os"!==e},cusAreaVisible:function(){var e=this.area.trim();return""!==e&&"os"!==e&&"cn"!==e},ssqVisible:function(){return"cn"===this.area},codeAddress:function(){return this.getAddress()},diffStr:function(){return this.hasAttr?"":"mallShipTemplate_"},allAreaIdAttr:function(){return this.diffStr+this.allAreaIdStr},areaBoxInputIdAttr:function(){return this.diffStr+this.areaBoxInputIdStr},areaBoxIdAttr:function(){return this.diffStr+this.areaBoxIdStr},areaBoxCloseIdAttr:function(){return this.diffStr+this.areaBoxCloseIdStr},areaBox1IdAttr:function(){return this.diffStr+this.areaBox1IdStr},province_boxIdAttr:function(){return this.diffStr+this.province_boxIdStr},city_boxIdAttr:function(){return this.diffStr+this.city_boxIdStr},county_boxIdAttr:function(){return this.diffStr+this.county_boxIdStr},street_boxIdAttr:function(){return this.diffStr+this.street_boxIdStr},areaBox2IdAttr:function(){return this.diffStr+this.areaBox2IdStr},sec_boxIdAttr:function(){return this.diffStr+this.sec_boxIdStr},thd_boxIdAttr:function(){return this.diffStr+this.thd_boxIdStr},addrSaveIdAttr:function(){return this.hasAttr?"edit_addrDetal":"addrInfo_street"},isCn:function(){var e=Fai.top._lcid;return 2052==e||1028==e},provinceContent:function(){var e=this;return Object.values(site_cityUtil.getAreaGroupsPinYin()).map(function(t){var i=t[0],o="OS"==i,n=t[1];Fai.top._lcid;return{isOs:o,head:i,content:n=n.map(function(t){return e.getProvinceInfo(t)})}})},cityContent:function(){if(!this.addrInfo.addr_info.provinceCode)return[];Fai.top._lcid;var e=[];return e=this.isCn?site_cityUtil.getCities(this.addrInfo.addr_info.provinceCode):site_cityUtil.getCitiesEn(this.addrInfo.addr_info.provinceCode),this.genLocList(e)},countyContent:function(){if(!this.addrInfo.addr_info.cityCode)return[];var e=[];Fai.top._lcid;return e=this.isCn?site_cityUtil.getCounty(this.addrInfo.addr_info.cityCode):site_cityUtil.getCountyEn(this.addrInfo.addr_info.cityCode),this.genLocList(e)},streetContent:function(){if(!this.addrInfo.addr_info.countyCode)return[];var e=[];Fai.top._lcid;return e=this.isCn?site_cityUtil.getStreet(this.addrInfo.addr_info.countyCode):site_cityUtil.getStreetEn(this.addrInfo.addr_info.countyCode),this.genLocList(e)},cusAreaProvinceList:function(){return this.allCusAreaList.filter(function(e){return 0===e.parentId})},cusAreaCityList:function(){var e=this.addrInfo.addr_info.provinceCode;return this.allCusAreaList.filter(function(t){return t.parentId===e&&0!==t.parentId})},cusAreaCountyList:function(){var e=this.addrInfo.addr_info.cityCode;return this.allCusAreaList.filter(function(t){return t.parentId===e&&0!==t.parentId})}}}),Vue.component("comp-timepicker",{template:"\n\t\t\t\t<div class=\"fk_addrProp_timepicker\">\n\t\t\t\t\t<div :id='idStartAttr' :class='pluginsStartCls' :val='initedTimeInfo.s' ></div>\n\t\t\t\t\t<div :id='idEndAttr' v-show=\"dateType==1\"  class='fk-endDateInput mobiCalendarPlugins'  :val='initedTimeInfo.e' ></div>\n\t\t\t\t</div>\n\t\t\t",props:{data:Object,addrProp:Object,addrInfo:Object},data:function(){return Object.assign({},this.data)},mounted:function(){Mobi.initOrderPropDateType(this.data.options),Mobi.$Bus.$off("onTimePickerAddrInfoChange",this.onTimePickerAddrInfoChange).$on("onTimePickerAddrInfoChange",this.onTimePickerAddrInfoChange)},watch:{addrInfo:function(e,t){this.onTimePickerAddrInfoChange()}},methods:{onTimePickerAddrInfoChange:function(){var e=i(this.$el).find("input").eq(0),t=i(this.$el).find("input").eq(1);e.length&&e.val(this.initedTimeInfo.s),t.length&&t.val(this.initedTimeInfo.e)},getTimeInfoString:function(){var e=this.$el.querySelectorAll("input"),t=e[0].value||"",i="";return e.length>1&&(i=e[1].value||""),JSON.stringify({s:t,e:i})}},computed:{initedTimeInfo:function(){var e=this.addrInfo[this.addrProp.fieldKey],t=null;try{var i=null;i="string"===Mobi.typeOf(e)?JSON.parse(e):e,t=i=Object.assign({e:"",s:""},i)}catch(e){t={s:"",e:""}}return t},pluginsStartCls:function(){return[1==this.dateType?"fk-startDateInput":"","mobiCalendarPlugins"]},idStartAttr:function(){return"Mobi"+this.moduleId+"Calendar"+this.id+"Plugins"},idEndAttr:function(){return"Mobi"+this.moduleId+"Calendar"+this.id+"Plugins_end"}}}),Vue.component("comp-addrpropitem",{template:"\n\t\t\t    <div>\n\n\t\t\t        \x3c!--地址项--\x3e\n\t\t\t\t\t<comp-province-city-county v-if=\"isSysAddr\" :addrInfo=\"addrInfo\"></comp-province-city-county>\n\n\t\t\t        \x3c!--其它项--\x3e\n\t\t\t\t\t<div v-else class='edit_line'>\n\t\t\t        \t\x3c!--项的名称--\x3e\n\t\t\t\t\t    <div class='linetitle'>\n\t\t\t\t\t    \t<span class='editLineItem'>{{item.name}}</span>\n\t\t\t\t\t    </div>\t\n\n\t\t\t        \t\x3c!--项的值--\x3e\n\t\t\t\t\t\t<div class='wekitBox' :id='orderPropIdAttr'>\n\t\t\t\t\t\t\t\x3c!--姓名--\x3e\n\t\t\t\t\t        <input v-if=\"isSysName\" :_field='field' :id='editField' v-model=\"addrInfo.name\"  :_prop='item.name' class='g_input propItemValue ' :_required='requiredInt' type='text'  :maxlength='item.maxLength' :placeholder='item.placeholderStr' :propType='item.type'/>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\x3c!--手机号--\x3e\n\t\t\t\t\t        <input v-else-if=\"isSysMobile\" :_field='field' :id='editField' v-model=\"addrInfo.mobile\"  :_prop='item.name' class='g_input propItemValue' :_required='requiredInt' type='number'  maxlength='11' :placeholder='item.placeholderStr' :propType='item.type'/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\x3c!--日期--\x3e\n\t\t\t\t\t\t\t<template v-else-if=\"isCusDate\">\n\t\t\t\t\t        \t<comp-timepicker v-if=\"isCusTimeVisibie\" ref=\"timepicker\"  :data='item.timePickerData' :addrProp=\"item\" :addrInfo=\"addrInfo\"></comp-timepicker>\n\t\t\t\t\t\t\t</template>\n\t\n\t\t\t\t\t\t\t\x3c!--其他的表单项--\x3e\n\t\t\t\t\t        <input v-else :_field='field' :id='editField'  :_prop='item.name' class='g_input propItemValue ' :_required='requiredInt' type='text' v-model.lazy=\"addrInfo[item.fieldKey]\"  :maxlength='item.maxLength' :placeholder='item.placeholderStr' :propType='item.type'/>\n\t\t\t\t\t    </div>\n\t\t\t\t\t</div>\n\t\t\t    </div>\n\t\t\t\t    \n\t\t\t",props:{item:Object,isAddAddr:Boolean,addrInfo:Object},data:function(){return{OrderPropTypeDef:Fai.top._OrderPropTypeDef,addrPropList:Fai.top._addrPropList}},mounted:function(){!this.isSysAddr&&this.isMobile&&Mobi.siteFormPhoneValidate(this.editField)},computed:{isCusTimeVisibie:function(){return this.addrPropList.length>3||Mobi.isOpenAddrPropByType(this.OrderPropTypeDef.SYS_ADDR)},field:function(){return this.item.fieldKey},isSysMobile:function(){return this.OrderPropTypeDef.SYS_MOBILE===this.item.type},isMobile:function(){var e=this.OrderPropTypeDef;return[e.SYS_MOBILE,e.CUS_MOBILE].includes(this.item.type)},isSysAddr:function(){return this.item.type===this.OrderPropTypeDef.SYS_ADDR},isCusDate:function(){return this.item.type===this.OrderPropTypeDef.CUS_DATE},isSysName:function(){return this.item.type===this.OrderPropTypeDef.SYS_NAME},editField:function(){return"edit_"+this.item.fieldKey},requiredInt:function(){return this.item.required?1:0},orderPropIdAttr:function(){return"orderPropId"+this.item.id}},methods:{getTimeInfoString:function(){return this.$refs.timepicker.getTimeInfoString()}}}),Vue.component("comp-addredit",{props:{saveBtnText:String,isIntraCity:{required:!0,type:Boolean}},data:function(){var e=this.initFormAddrInfo({addr_info:{}});return{isAddAddr:!1,addrInfoList:Fai.top._addrInfoList,addrPropList:Fai.top._addrPropList,formAddrInfo:e,OrderPropTypeDef:Fai.top._OrderPropTypeDef}},template:'\n\t\t\t\t<div class=\'addrSettle\'>\n\t\t\t\t\t<div class=\'editPanel\'>\n\t\t\t\t\t\t<div  v-for=\'item in addrPropList\'>\n\t\t\t\t\t\t\t\x3c!--对日期项进行一个特殊处理--\x3e\n\t\t\t\t\t\t\t<comp-addrpropitem v-if="item.type===OrderPropTypeDef.CUS_DATE" ref="timepicker" :isAddAddr="isAddAddr" :addrInfo="formAddrInfo" :item="item"></comp-addrpropitem>\n\t\t\t\t\t\t\t<comp-addrpropitem v-else :isAddAddr="isAddAddr" :addrInfo="formAddrInfo" :item="item"></comp-addrpropitem>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\'g_button orderSaveAddrInfo g_main_bgColor_v3\' @click="saveAddrInfo">{{saveBtnText}}</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!--这个要确认废弃才能删除掉<comp-provinceform v-if="isOpenMallTemplate" :provinceText="mobi_mall_Province":addrInfo="formAddrInfo"></comp-provinceform>--\x3e\n\t\t\t    </div>\n\t\t\t',methods:{setTimeInfo:function(){var e=this.formAddrInfo;Array.isArray(this.$refs.timepicker)&&this.$refs.timepicker.forEach(function(t){var i=t.getTimeInfoString();e[t.item.fieldKey]=JSON.parse(i)})},saveAddrInfo:function(e){e.stopPropagation();this.isVisitor?this.saveAddrInfoForVisitor():this.saveAddrInfoForMember()},saveAddrInfoForVisitor:function(){var e=this;return this.checkAndSetDataBeforeSave().then(function(){var t=e.getDataForSave().info;e.onSaveSuccess(t)}).catch(this.saveErrorHandler)},onSaveSuccess:function(e){this.isAddAddr;this.isAddAddr?this.onSaveSuccessForAdd(e):this.onSaveSuccessForEdit(e),Mobi.hideAddrOrEditPage(),this.isVisitor&&Mobi.hideAddrListPage()},onSaveSuccessForEdit:function(e){Vue.set(Fai.top._addrInfoList,this.editIndex,e),this.isIntraCity?Mobi.$Bus.$emit("onVisitorSaveIntraCityAddr",e,this.editIndex):Mobi.$Bus.$emit("onVisitorSaveExpressAddr",e,this.editIndex)},onSaveSuccessForAdd:function(e){Fai.top._addrInfoList.push(e);var t=Fai.top._addrInfoList.length-1;this.isIntraCity?Mobi.$Bus.$emit("onVisitorSaveIntraCityAddr",e,t):Mobi.$Bus.$emit("onVisitorSaveExpressAddr",e,t)},checkAddrCount:function(){var e=this;return new Promise(function(t,i){if(e.isAddAddr){var o=Fai.top._addrInfoListLimit||30;(e.isIntraCity?e.intraCityAddrInfoList.length>=o:e.expressAddrInfoList.length>=o)?i(function(){Mobi.ing(LS.mallAddrInfoAmountLimit,!0)}):t()}else t()})},checkForm:function(){var e=this;return new Promise(function(t,o){var n=e.formAddrInfo,a=Mobi.Address.getErrPropWithIng({addrInfo:n,propList:Fai.top._addrPropList});a?o(function(){var e=i("#orderPropId"+a.id+" input")[0],t=i("#orderPropId"+a.id+" select")[0];e?e.focus():t&&t.focus()}):t()})},setFormAddrInfoPos:function(){var e=this;return new Promise(function(t,i){e.isIntraCity?Mobi.getLocationByAddress(e.formAddrInfo.addr).then(function(i){e.formAddrInfo.addr_info.pos=i,t()},function(e){i(function(){Mobi.ing("查询不到地址")})}):t()})},getDataForSave:function(){this.addrInfoList;var e=this.editIndex+"",t=this.isIntraCity,i=this.formAddrInfo,o=0,n=!1;t?this.isAddAddr?0===this.intraCityAddrInfoList.length&&(n=!0):n=this.combineAddrInfoList[e].addrInfo.isIntraDefault:this.isAddAddr?0===this.expressAddrInfoList.length&&(o=1):o=this.combineAddrInfoList[e].addrInfo.isDefault;jm(this);var a={},r=this.formAddrInfo,s=jm("#allArea"),l=!("os"==s.val()||"cn"==s.val());i.addr_info.streetCode,i.addr_info.countyCode,i.addr_info.cityCode,i.addr_info.provinceCode,i.addr_info.street;a.isCus=l,i.addr_info.isCus||99e4!==i.addr_info.provinceCode||Vue.set(i.addr_info,"cityCode",990100),a.provinceCode=i.addr_info.provinceCode||-1,a.cityCode=i.addr_info.cityCode||-1,a.countyCode=i.addr_info.countyCode||-1,a.streetCode=i.addr_info.streetCode||-1,a.streetAddr=i.addr_info.streetAddr,r.addr_info=i.addr_info,r.addr=i.addr,r.isDefault=o,r.isIntraDefault=n,r.isIntraCity=t;var c={};return c.opera=this.isAddAddr?"addAddr":"editAddr",c._item=e+"",c.addrInfo=r,{memberInfo:c,info:r}},onAddrEditPageShow:function(e){this.isAddAddr=!1;var t=this.addrInfoList[e];this.editIndex=e,this.setFormAddrInfo(t)},onAddrAddPageShow:function(){this.isAddAddr=!0;var e=this.initFormAddrInfo({addr_info:{}});this.formAddrInfo=e},setFormAddrInfo:function(e){e=Mobi.deepCopy(e),e=this.initFormAddrInfo(e),this.formAddrInfo=e},initFormAddrInfo:function(e){return e.addr=e.addr||"",e.addr_info=Object.assign({cityCode:void 0,countyCode:void 0,isCus:!1,provinceCode:void 0,streetAddr:"",streetCode:void 0},e.addr_info),e},saveErrorHandler:function(e){jm.isFunction(e)?e():console.log("res",e)},checkAndSetDataBeforeSave:function(){var e=this;return e.setTimeInfo(),this.checkAddrCount().then(function(){return e.checkForm()}).then(function(){return e.setFormAddrInfoPos()})},saveAddrInfoForMember:function(){var e=this;return this.checkAndSetDataBeforeSave().then(function(){var t=e.getDataForSave(),i=t.info,o=t.memberInfo;jm.ajax({type:"post",url:"ajax/member_h.jsp?cmd=set&id="+Fai.top.sessionMemberId,data:"info="+jm.encodeUrl(jm.toJSON(o)),error:function(){Mobi.ing(LS.memberProfileError)},complete:function(){},success:function(t){var o=jm.parseJSON(t);o.success?e.onSaveSuccess(i):Mobi.ing(o.msg)}})}).catch(this.saveErrorHandler)}},computed:{isVisitor:function(){return 0===Fai.top.sessionMemberId},expressAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return!e.addrInfo.isIntraCity})},intraCityAddrInfoList:function(){return this.combineAddrInfoList.filter(function(e){return e.addrInfo.isIntraCity})},combineAddrInfoList:function(){return this.addrInfoList.map(function(e,t){return{addrInfo:e,index:t}})}},mounted:function(){Mobi.$Bus.$off("onAddrEditPageShow",this.onAddrEditPageShow).$on("onAddrEditPageShow",this.onAddrEditPageShow),Mobi.$Bus.$off("onAddrAddPageShow",this.onAddrAddPageShow).$on("onAddrAddPageShow",this.onAddrAddPageShow)}})}),t.initAddrEditPage=function(e){new Vue({el:"#editAddrInfo",template:"\n\t\t\t\t<div id='editAddrInfo' class='modifyProfile J_cusBack'>\n\t\t\t\t    <div class='loginHeader webHeaderBg g_main_bgColor_v3'>\n\t\t\t\t        <span class='g_close icon-gClose'></span>\n\t\t\t\t        <span class='title pageTitle'>{{mobi_editAddrInfo}}</span>\n\t\t\t\t    </div>\n\t\t\t\t    <comp-addredit :isIntraCity=\"isIntraCity\" :saveBtnText=\"mobi_avatarSave\"></comp-addredit>\n\t\t\t\t</div>\n\t\t\t",data:function(){return e},methods:{},computed:{isIntraCity:function(){return 3===Fai.top.shipTabListVm.checkedId}}})},t.initProfileAddrEditPage=function(e){new Vue({el:"#profileAddrEditPage",template:"\n\t\t\t    <div id='profileAddrEditPage'>\n\t\t\t\t\t<div id='editAddrInfo' class='modifyProfile J_cusBack'>\n\t\t\t\t\t    <div class='loginHeader webHeaderBg g_main_bgColor_v3'>\n\t\t\t\t\t        <span class='g_close icon-gClose'></span>\n\t\t\t\t\t        <span class='title pageTitle'>{{mobi_editAddrInfo}}</span>\n\t\t\t\t\t    </div>\n\t\t\t\t\t    <comp-addredit :isIntraCity=\"false\" :saveBtnText=\"mobi_avatarSave\"></comp-addredit>\n\t\t\t\t\t</div>\n\t\t\t    </div>\n\t\t\t\t\t\n\t\t\t",data:function(){return e}})},t.initAddrListPage=function(e){Fai.top.addrListPageVm=new Vue({el:"#editCusInfo",template:"\n\t\t\t\t<div id='editCusInfo' class='editCusInfo'>\n\t\t\t\t\t<div :class='headerCls'>\n\t\t\t\t\t\t<span class='g_close icon-gClose'></span>\n\t\t\t\t\t\t<span class='title pageTitle'>{{orderModuleName}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='orderSettle'>\n\n\t\t\t\t\t\t<div style='display:none'>\t\t\n\t\t\t\t\t\t    <div v-for=\"item in viewPropList\">\n\t\t\t\t\t\t\t\t<input v-if=\"item.isCusDate\" :_field='item.field' :id='item.startInputId' :propType=\"item.type\" :_prop='item.itemName' class='g_input propItemValue' :_required=\" (item.required ? 1 : 0) \"/>\n\t\t\t\t\t\t\t\t<input v-if=\"item.isRange\" :_field='item.field' :id='item.endInputId'/>\n\t\t\t\t\t\t\t\t<input v-if=\"!item.isCusDate\" :_field='item.field' :propType=\"item.type\" :_prop='item.itemName' class='g_input propItemValue' :_required='(item.required ? 1 : 0)'/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id='addrInfoList'>\n\t\t\t\t\t\t    <comp-addrlistpage :isIntraCity=\"isIntraCity\" ref=\"addrlistpage\" :data=\"listPageData\"></comp-addrlistpage>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",data:function(){return Object.assign(e,{addrInfoList:Fai.top._addrInfoList,addrPropInfoList:Fai.top._addrPropInfoList})},mounted:function(){Mobi.$Bus.$off("onAddrListPageShow").$on("onAddrListPageShow",this.onAddrListPageShow)},computed:{isIntraCity:function(){return 3===(Fai.top.shipTabListVm||{}).checkedId},headerCls:function(){return["loginHeader","webHeaderBg"+(this.openThemeV3?" g_main_bgColor_v3":"")]},listPageData:function(){return{mallShipAddrInfo:this.mallShipAddrInfo,mobi_newAddrInfo:this.mobi_newAddrInfo}},save:function(){this.isAddAddr?this.saveAddrForAdd():this.saveAddrForEdit()},saveAddrForAdd:function(){},saveAddrForEdit:function(){isAddAddrInfoClick=!1,"edit"==jm(this).attr("class")?_item=jm(this).attr("_index"):_item=jm(this).parent().attr("_item"),opera="editAddr";var e=addrInfoListTmp[_item];jm("#editAddrInfo").find(".propItemValue").each(function(){var t=jm(this).attr("_field"),i=jm(this).attr("proptype"),o=jm(this).attr("id")||"";if(9==i){var n=e[t];""!=n&&null!=n||(n={});var a=n;if(jm(this).val(a.s),null!=a.e){var r=o.replace("input","")+"_endinput";jm("#"+r).val(a.e)}}else jm(this).val(e[t])});var t=e.addr_info;if(null!=t){if(t.isCus)jm("#allArea").val(t.provinceCode),jm("#allArea").change(),jm("#areaBox2 .group_item[cid='"+t.cityCode+"']").click(),jm("#areaBox2 .group_item[cid='"+t.countyCode+"']").click();else{var i=this.getCodeNameMap(e,Lcid);i.streetName,i.countyName,i.cityName,i.provinceName;99e4==t.provinceCode?(jm("#areaBoxInput").attr("isOs",1),jm("#allArea").val("os"),jm("#allArea").change()):(jm("#areaBoxInput").attr("isCn",1),jm("#allArea").val("cn"),jm("#allArea").change()),jm("#areaBoxInput").attr("area1",t.provinceCode),jm("#areaBoxInput").attr("area2",t.cityCode),jm("#areaBoxInput").attr("area3",t.countyCode),jm("#areaBoxInput").attr("area4",t.streetCode),jm("#areaBox1 .group_item[pid='"+t.provinceCode+"']").click(),jm("#areaBox1 .group_item[cid='"+t.cityCode+"']").click(),jm("#areaBox1 .group_item[cid='"+t.countyCode+"']").click(),jm("#areaBox1 .group_item[cid='"+t.streetCode+"']").click()}jm("#addrInfo_street").val(t.streetAddr)}else jm("#addrInfo_street").val(e.addr);e.isDefault}},methods:{onAddrListPageShow:function(){this.goToAddrAddPageWhenAddrEmpty()},getCodeNameMap:function(e,t){return 2052==Lcid||1028==Lcid?(streetName=site_cityUtil.getInfo(addr_info.streetCode).name,countyName=site_cityUtil.getInfo(addr_info.countyCode).name,cityName=site_cityUtil.getInfo(addr_info.cityCode).name,provinceName=site_cityUtil.getInfo(addr_info.provinceCode).name):(streetName=site_cityUtil.getInfoEn(addr_info.streetCode).name,countyName=site_cityUtil.getInfoEn(addr_info.countyCode).name,cityName=site_cityUtil.getInfoEn(addr_info.cityCode).name,provinceName=site_cityUtil.getInfoEn(addr_info.provinceCode).name),{streetName:streetName,countyName:countyName,cityName:cityName,provinceName:provinceName}},gotoAddrAddPage:function(){Mobi.showAddrAddPage()},goToAddrAddPageWhenAddrEmpty:function(){var e=3===(Fai.top.shipTabListVm||{}),t=Fai.top.addrListPageVm.$refs.addrlistpage.$refs.addrinfolist;e?0===t.intraCityAddrInfoList.length&&this.gotoAddrAddPage():0===t.expressAddrInfoList.length&&this.gotoAddrAddPage()}}})},t.initShipListVm=function(e){Fai.top.shipListVm=new Vue({el:"#shipListVm",template:'\n\t\t\t    <div>\n\t\t\t    \t<template v-if="!isSelfSaleEmpty()">\n\t\t\t\t    \t<comp-intra-shipline v-if="isIntraCity" ref="intraShipLine" :data="shipLineData" class=\'ship_line\'></comp-intra-shipline>\n\t\t\t\t\t\t<comp-shiptplline v-else-if="isExpress && isOpenMallTemplate" ref="mallshippaneltpl" :data="mallShipPanelTplData"></comp-shiptplline>\n\t\t\t\t\t\t<comp-mallship-shipline v-else-if="isExpress && !isOpenMallTemplate" :data="shipLineData" class=\'ship_line\' ref="shipline"></comp-mallship-shipline>\n\t\t\t    \t</template>\n\t\t\t\t\t<comp-merchant-total-ship v-if="isMerchantProductExist() && openExpressDelivery() && !isCombinedPurchaseFreeShopping()"></comp-merchant-total-ship>\n\t\t\t\t\t\n\t\t\t\t\t\x3c!--运费模板的ui--\x3e\n\t\t\t        <div v-if="isOpenMallTemplate">\n\t\t\t\t        <div id="mallShipTemplateDetail">\n\t                        <com-shiptemplatedetail :data="mallShipPanelTplData"></com-shiptemplatedetail>\n\t\t\t\t\t\t</div>\n\t\t\t        </div>\n\t\t\t        <div v-else>\x3c!--普通运费的ui--\x3e\n\t\t\t\t\t\t<div id="modifyShipDetailsPanel" style="display:none;">\n\t\t\t\t\t\t    <comp-shipdetail></comp-shipdetail>\n\t\t\t\t\t\t</div>\n\t\t\t        </div>\n\t\t\t    </div>\n\t\t\t',data:function(){return Object.assign({addrInfoList:Fai.top._addrInfoList,addrPropList:Fai.top._addrPropList,checkedAddrIndex:-1},e)},computed:{isIntraCity:function(){return 3===(Fai.top.shipTabListVm||{}).checkedId},isExpress:function(){return 1===(Fai.top.shipTabListVm||{}).checkedId},shipLineVm:function(){return this.isIntraCity?this.$refs.intraShipLine:this.isOpenMallTemplate?this.$refs.mallshippaneltpl:this.$refs.shipLine},shipPrice:function(){return this.isMallShipListClose?0:this.isOpenMallTemplate?0:this.$refs.shipline?this.$refs.shipline.shipPrice:0}},methods:{isCombinedPurchaseFreeShopping:function(){return Fai.top._isCombinedPurchaseFreeShopping},openExpressDelivery:function(){return Fai.top._openExpressDelivery},isMerchantProductExist:function(){return Fai.top._mstlMerchantProductListVm.isMerchantProductExist()},isSelfSaleEmpty:function(){return Fai.top._mstlMerchantProductListVm.isSelfSaleEmpty()}}})},t.initProfileAddrListPage=function(e){new Vue({el:"#profileAddrListPage",template:"\n\t\t\t    <div id='profileAddrListPage' class='profileAddrListPage'>\n\t\t\t\t\t<div id='addrInfoList'  class='J_cusBack modifyProfile'>\n\t\t\t\t\t\t<div class='loginHeader webHeaderBg'>\n\t\t\t\t\t\t\t<span onclick=\"jm('#addrInfoList').hide();jm('#profile').show();\" class='g_close icon-gClose'></span>\n\t\t\t\t\t\t\t<span class='title pageTitle'></span>\n\t\t\t\t\t\t\t<span @click=\"onBackHome\" class='homeIcon icon-homeIcon'></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id='memberDeliveryAddress'>\n\t\t\t\t\t\t    <comp-addrlistpage :isIntraCity=\"false\" :data=\"deliveryAddressData\"></comp-addrlistpage>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t    </div>\n\t\t\t",data:function(){return e},methods:{onClose:function(){jm("#addrInfoList").hide(),jm("#profile").show()},onBackHome:function(){window.location.href="index.jsp"}}})}}(Mobi,jm),function(e,t,i){function o(e,t,i){var o=e.name;return t&&""!=t?e.type===Fai.top._OrderPropTypeDef.CUS_DATE&&""==t.s?(i(jm.format(LS.memberSignupUserAddItemCorrect,o)),!1):r(e,t,i):(i(jm.format(LS.memberSignupUserAddItemCorrect,o)),!1)}function n(e,t){Fai.top._OrderPropTypeDef;return t[a(e)]}function a(e){var t=Fai.top._OrderPropTypeDef;return e.type===t.SYS_NAME?"name":e.type===t.SYS_EMAIL?"email":e.type===t.SYS_ADDR?"addr":e.type===t.SYS_ZIP?"zip":e.type===t.SYS_PHONE?"phone":e.type===t.SYS_MSG?"msg":e.type===t.SYS_MOBILE?"mobile":(e.type,t.CUS_MOBILE,e.fieldKey)}function r(e,t,o){var n=Fai.top._OrderPropTypeDef,a=e.name,r=e.type,s=t;if(s){if(r==n.SYS_EMAIL||r==n.CUS_EMAIL)if(!jm.isEmail(s))return o(LS.mallStlSubmitInput2+a),!1;if(r==n.SYS_MOBILE&&!jm.isNationMobile(s))return o(LS.mobileNumRegular),!1;if(r==n.CUS_MOBILE)if(!jm.isNationMobile(s))return o(a+LS.mobileNumDefRegular),!1;if(r==n.CUS_IDENTITY)if(!jm.isCardNo(s))return o(LS.mallStlSubmitInput2+a),!1;if(r==n.CUS_DATE){var l=s;if("[object String]"===Object.prototype.toString.call(l)&&(l=jm.parseJSON(l)),1==e.other.dateSetting.type)if("选择日期"==l.s||"开始日期"==l.s||l.e==i)return o(LS.mallStlSubmitInput2+a),!1}}return!0}function s(e,t,i){var o=Fai.top._OrderPropTypeDef;if(e.type==o.SYS_ADDR){if(t.isCus){if(!t.provinceCode)return i(LS.mallStlSubmitAddrErr,1),!1}else{if(!t.provinceCode)return i(LS.placeChoiceArea,1),!1;if(99e4==t.provinceCode);else if(!t.cityCode)return i(LS.mallStlSubmitAddrErr,1),!1}if(!t.streetAddr)return i(LS.placeInputDetailedAddress,1),!1}return!0}Mobi.Address={check:function(e){return null===this.getErrProp(e)},checkWithIng:function(e){return e=this.getIngOption(e),this.check(e)},getIngOption:function(e){return Object.assign({_showToast:Mobi.ing},e)},getErrProp:function(e){for(var t=Fai.top._OrderPropTypeDef,i=e.addrInfo,a=e.propList,l=e._showToast||function(){},c=0;c<a.length;c++){var d=a[c],m=n(d,i),p=d.type===t.SYS_ADDR,u=(d.name,d.flag);if(!(Mobi.checkBit(u,2)?p?s(d,i.addr_info,l):o(d,m,l):p?s(d,i.addr_info,l):r(d,m,l)))return d}return null},getErrPropWithIng:function(e){return e=this.getIngOption(e),this.getErrProp(e)},getPropVal:n,getPropField:a}}(jm),Mobi.createMapAuthSetting=function(){return"<div class='f_mapAuthSetting' id='mapAuthSetting'><div id='mapAuthSettingnBg' style='height:100%;'></div><div class='mapAuthSettingContent'><div class='closeBtn j_mapAuthSettingClose'></div><div class='img'></div><div class='title'>网站想要访问您的地理位置</div><div class='message'>提供您的位置，我们将为您更精确地匹配自提点。</div><div class='btnContain'><div class='cancel j_mapAuthSettingClose'>不允许</div><div class='access j_mapAuthSettingAccess'>好</div></div></div></div>","<div class='f_mapAuthSetting' id='mapAuthSetting'><div id='mapAuthSettingnBg' style='height:100%;'></div><div class='mapAuthSettingContent'><div class='closeBtn j_mapAuthSettingClose'></div><div class='img'></div><div class='title'>网站想要访问您的地理位置</div><div class='message'>提供您的位置，我们将为您更精确地匹配自提点。</div><div class='btnContain'><div class='cancel j_mapAuthSettingClose'>不允许</div><div class='access j_mapAuthSettingAccess'>好</div></div></div></div>"},Mobi.computeSelfRaisingPointAndSortInfo={pointListMap:{}},Mobi.computeSelfRaisingPointAndSort=function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;!function(){var t=new qq.maps.LatLng(39.984104,116.307503);new qq.maps.Map(document.getElementById("allmap"),{zoom:12,center:t});new qq.maps.Geolocation("TJ7BZ-JZKWD-XZ44I-HEYDM-RDJJJ-WHFVL","fkApp").getLocation(function(t){new qq.maps.LatLng(t.lat,t.lng);Mobi.computeSelfRaisingPointAndSortInfo.latCurrent=t.lat,Mobi.computeSelfRaisingPointAndSortInfo.lngCurrent=t.lng;var n="";e.forEach(function(t,i){n+=t.pp.lat+","+t.pp.lng,i!=e.length-1&&(n+=";")}),e.length<50&&i?jm.ajax({type:"get",url:"https://apis.map.qq.com/ws/coord/v1/translate?locations="+n+"&type=3&output=jsonp&callback=Mobi.routematrixSuccessCallback.translateCallBack&key=TJ7BZ-JZKWD-XZ44I-HEYDM-RDJJJ-WHFVL",dataType:"jsonp",jsonpCallback:"Mobi.routematrixSuccessCallback",error:function(){},success:function(e){}}):jm.ajax({type:"post",url:"ajax/mall_h.jsp?cmd=getTxMapDistance",data:{startLat:t.lat,startLng:t.lng,destinationsStrs:n},error:function(){},success:function(e){e=jm.parseJSON(e),Mobi.routematrixSuccessCallback.distanceCallBack(e,o)}})},function(e){Mobi.ing("获取定位失败，如使用微信浏览器请选择其它浏览器打开")},{failTipFlag:!0})}(),o||(o=0),Mobi.computeSelfRaisingPointAndSortInfo.pointListMap[o]={},Mobi.computeSelfRaisingPointAndSortInfo.pointListMap[o].pointList=e,Mobi.computeSelfRaisingPointAndSortInfo.pointListMap[o].callback=t},Mobi.routematrixSuccessCallback={baiduCallBack:function(e){},translateCallBack:function(e){var t="";e.locations.forEach(function(i,o){t+=i.lat+","+i.lng,o!=e.locations.length-1&&(t+=";")}),jm.ajax({type:"get",url:"https://apis.map.qq.com/ws/distance/v1/?mode=driving&from="+Mobi.computeSelfRaisingPointAndSortInfo.latCurrent+","+Mobi.computeSelfRaisingPointAndSortInfo.lngCurrent+"&to="+t+"&output=jsonp&callback=Mobi.routematrixSuccessCallback.distanceCallBack&key=TJ7BZ-JZKWD-XZ44I-HEYDM-RDJJJ-WHFVL",dataType:"jsonp",jsonpCallback:"Mobi.routematrixSuccessCallback",error:function(){},success:function(e){}})},distanceCallBack:function(e,t){t||(t=0);var i=e.result.elements;i&&i.length>0&&(Mobi.computeSelfRaisingPointAndSortInfo.pointListMap[t].pointList.forEach(function(e,t){e.distance=i[t].distance,e.distanceKilometer=(i[t].distance/1e3).toFixed(1)}),Mobi.computeSelfRaisingPointAndSortInfo.pointListMap[t].pointList.sort(function(e,t){return e.distance-t.distance}),Mobi.logDog(201032,4)),Mobi.computeSelfRaisingPointAndSortInfo.pointListMap[t].callback()}},Mobi.openQQMap=function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=new qq.maps.LatLng(39.984104,116.307503);new qq.maps.Map(document.getElementById("allmap"),{zoom:12,center:o});new qq.maps.Geolocation("TJ7BZ-JZKWD-XZ44I-HEYDM-RDJJJ-WHFVL","fkApp").getLocation(function(o){var n=new qq.maps.LatLng(o.lat,o.lng),a=new qq.maps.LatLng(t.lat,t.lng),r=[a];if(i)qq.maps.convertor.translate(r,3,function(t){a=t[0];var i="https://apis.map.qq.com/tools/routeplan/eword="+jm.encodeUrl(e);i+="&spointy="+n.lat+"&spointx="+n.lng,i+="&epointy="+a.lat+"&epointx="+a.lng,i+="?referer=fkapp&key=TJ7BZ-JZKWD-XZ44I-HEYDM-RDJJJ-WHFVL",window.location.href=i});else{var s="https://apis.map.qq.com/tools/routeplan/eword="+jm.encodeUrl(e);s+="&spointy="+n.lat+"&spointx="+n.lng,s+="&epointy="+a.lat+"&epointx="+a.lng,s+="?referer=fkapp&key=TJ7BZ-JZKWD-XZ44I-HEYDM-RDJJJ-WHFVL",window.location.href=s}},function(i){Mobi.openBaiDuMap(e,t)},{failTipFlag:!0})},Mobi.openBaiDuMap=function(e,t){var i=new BMap.Map("allmap");i.enableScrollWheelZoom();var o=new BMap.Geolocation;o.enableSDKLocation(),o.getCurrentPosition(function(o){if(this.getStatus()==BMAP_STATUS_SUCCESS){var n=new BMap.Marker(o.point);i.addOverlay(n),i.panTo(o.point);var a="http://api.map.baidu.com/direction?";a+="origin="+o.point.lat+","+o.point.lng,a+="&destination=name:"+jm.encodeUrl(e)+"|latlng:"+t.lat+","+t.lng,a+="&region=北京&mode=driving&output=html",window.location.href=a}else Mobi.ing("定位失败")},{enableHighAccuracy:!0})},Mobi.initOrderRaisingPanel=function(e,t,i){if("string"==typeof e&&(e=JSON.parse(e)),jm(".shippingItem").hide(),jm("#MDPointInfo").click(function(){Mobi.openQQMap(t,i)}),jm.cookie("_selfRaisingMapAuthSetting")){var o=[e];Mobi.computeSelfRaisingPointAndSort(o,function(){var e=o[0].distance+"m";o[0].distance>=1e3&&(e=o[0].distanceKilometer+"km");var t=jm("#showPointInfo");t.find(".distance").html(e),t.find(".distanceTipContain").removeClass("noneDistanceTipContain")})}else{var n={triggerId:"showMapAuth",pageBg:!0,pageHtml:Mobi.createMapAuthSetting(),direction:"bottom",callback:function(){jm(".j_mapAuthSettingAccess").click(function(){jm.cookie("_selfRaisingMapAuthSetting",!0,{path:"/",expires:365}),jm(".j_mapAuthSettingClose").click(),Mobi.initOrderRaisingPanel(e,t,i)})},closeWebPage:".j_mapAuthSettingClose"};Mobi.initWebPage(n)}},Mobi.addrInfo=function(e){Mobi.addr_info=e},Mobi.initModuleMallAddrInfo=function(e,t,i,o,n){return},function(e,t,i){function o(){var e="unknow";return t("#mallShipTemplate_areaBox").length?e="mallShipTemplate_areaBox":t("#areaBox").length&&(e="areaBox"),{triggerId:"addrLocation",panelId:e,pageBg:!0,direction:"bottom",closeWebPage:"#mallShipTemplate_areaBoxClose"}}Mobi.checkIntraCityAddrSaveWithErrorTip=function(){Fai.top.shipTabListVm;return!0},Mobi.showRegionPanel=function(){var e=o();Mobi.showPageWithInit(e),t("#"+e.panelId).addClass("webPagePanelShow")},Mobi.hideRegionPanel=function(){var e=o();Mobi.hidePage(e)}}(Mobi,jm),Mobi.isCalTpl=!0,Mobi.initModuleMallShipTemplate=function(e){(e=e||{}).choiceCurrencyVal;var t=e.Lcid;e.cusAreaList,e.shipType,e.pdItemList,LS.mallPleaseChoose;site_cityUtil.initProvinces(t);var i=jm("#shipValue").attr("shiptype");jm(".modifyShipDetails .faisco-icons-shape11").each(function(e,t){jm(this).parent().find(".J_shipPrice").attr("shiptype")==i&&jm(this).removeAttr("style").attr("style","margin-right:0.15rem;height:2.5rem;line-height:2.5rem;float:right;").removeAttr("class").attr("class","faisco-icons-right g_color J_selectShip")})},Mobi.calculateMallShipTplByAddrInfo=function(e){var t=Mobi.getCalculateMallShipTplOptionByAddrInfo(e);Mobi.calculateMallShipTpl(t)},Mobi.getCalculateMallShipTplOptionByAddrInfo=function(e){var t,i=e.addr_info;return i.isCus?[i.provinceCode,i.cityCode,i.countyCode].every(function(e){return e>=0&&(t=e,!0)}):t=99e4===i.provinceCode?i.cityCode||i.provinceCode:i.cityCode,{isStatic:!i.isCus,areaId:t,choiceCurrencyVal:Fai.top._choiceCurrencyVal,pdItemList:Fai.top._contentOrder.itemList,mallStlCalcTotal:Mobi.mallStlCalcTotal}},Mobi.promiseCalculateMallShipTplByAddrInfo=function(e){var t=Mobi.getCalculateMallShipTplOptionByAddrInfo(e);return Mobi.promiseCalculateMallShipTpl(t)},Mobi.promiseCalculateMallShipTpl=function(e){return new Promise(function(t,i){if(Fai.top._isOpenMallTemplate&&e.areaId){var o=e.isStatic,n=e.areaId,a=(e.choiceCurrencyVal,e.pdItemList||[]),r=e.mallStlCalcTotal||function(){};jm.ajax({type:"post",url:"ajax/mall_h.jsp?cmd=getMallShipTplPrice",data:"itemList="+jm.encodeUrl(jm.toJSON(a))+"&isCus="+!o+"&cityCode="+n,error:function(){Mobi.ing("系统错误。"),Mobi.logMonitor(5986,!0)},success:function(e){var o=jm.parseJSON(e);if(o.success){t(o);var n=o.shipPrice||0,a={type:0};a.defaultPrice=n,Mobi.changeShipTplPrice(a),r();var s=jm("#mobiMstlFooterPrice");if(s.length){var l=parseFloat(s.data("balanceprice"))||0,c=n||0;s.text(Fai.top._choiceCurrencyVal+Mobi.calculate(l,c,0))}}else i(),Mobi.logMonitor(5986,!0),Mobi.ing(o.errMsg)}})}})},Mobi.calculateMallShipTpl=function(e){Mobi.promiseCalculateMallShipTpl(e)},Mobi.changeShipTplPrice=function(e){var t=jm("#shipPrice").attr("currency");0==e.defaultPrice?jm("#tmpType_"+e.type).text(LS.freeShipping):jm("#tmpType_"+e.type).text(t+e.defaultPrice.toFixed(2)),jm("#tmpType_"+e.type).attr("value",e.defaultPrice.toFixed(2)),jm("#shipValue").attr("shiptype")==e.type&&(jm("#shipPrice").attr("value",e.defaultPrice.toFixed(2)),jm("#shipPrice").text(0==e.defaultPrice?LS.freeShipping:t+e.defaultPrice.toFixed(2)),Fai.top._totalShipVm&&Fai.top._totalShipVm.$forceUpdate(),Mobi.mallStlCalcTotal()),Mobi.recheckItg()},Mobi.onShipTypeChange=function(e){var t=Fai.top._choiceCurrencyVal,i=e,o=parseFloat(jm("#shipPrice").attr("value")),n=parseFloat(jm("#totalValue").text()),a=parseFloat(i.find(".J_shipPrice").attr("value")),r=parseFloat(i.find(".J_shipPrice").attr("shipType")),s=(i.find(".J_shipPrice").text(),i.find(".J_shipName").text()),l=jm("#shipLine").length>0?t+"0.0":LS.freeShipping;if(jm("#shipPrice").attr("value",a).text(0==a?l:t+a),jm("#shipValue").attr("shiptype",r).text(s+"  "),n=Mobi.calculate(Mobi.calculate(n,o,1),a,0),jm("#totalValue").text(n.toFixed(2)),jm(".f_earnestSale").length>0){var c=jm(".f_earnestSale").find(".innerBottomContain .second"),d=c.html().split(t)[1];c.text(t+Mobi.calculate(Mobi.calculate(d,o,1),a,0)),jm("#totalValue").text(Fai.top._earnestSaleTotalValue)}Mobi.recheckItg()},Mobi.changeShipType=function(){jm(".ShipItem").click(function(){Mobi.onShipTypeChange(jm(this))})},Mobi.changeBankList=function(){jm(".bankListArea").click(function(){var e=jm(this),t=e.find(".bankItemValue").eq(2).text(),i=e.find(".bankItemValue").eq(0).text(),o=e.find(".bankItemValue").eq(1).text();jm(".orderDetail_line .bankDetailArea").find(".bankItemValue").eq(2).text(t),jm(".orderDetail_line .bankDetailArea").find(".bankItemValue").eq(0).text(i),jm(".orderDetail_line .bankDetailArea").find(".bankItemValue").eq(1).text(o),jm(".modifyBankList .g_close").click()})},Mobi.getRootFontSize=function(){var e=jm("html").css("font-size");return e=e.substring(0,e.length-2),Number(e)},Mobi.cacheOrderInfo=function(e){localStorage.setItem("orderInfo",e)},Mobi.recheckItg=function(){var e={},t=Fai.top.shipListVm||{};Fai.top.shipTabListVm;if(e.order=localStorage.getItem("orderInfo"),e.shipPrice=t.shipPrice||0,e.couponOff=parseFloat(jm("#couponOffsetMoney").attr("_offsetmoney")),e.finalPay=parseFloat(jm("#totalValue").text()),e.itgOff=parseFloat(jm("#offsetMoney").attr("_offsetmoney")),0===e.shipPrice&&(e.shipPrice=parseFloat(jm("#shipPrice").attr("value"))||0),Fai.top._mstlMerchantProductListVm.isMerchantProductExist()&&(e.shipPrice+=Fai.top._mstlMerchantProductListVm.totalShipPrice()),isNaN(e.itgOff)&&(e.itgOff=0),isNaN(e.couponOff)&&(e.couponOff=0),jm.parseJSON(e.order)){e.total=jm.parseJSON(e.order).tempTotalPrice;var i=parseFloat(jm.parseJSON(e.order).tempNeedPayPrice+e.shipPrice-e.couponOff-e.itgOff);e.finalPay=i}else{e.total=parseFloat(jm("#totalValue").text());i=parseFloat(e.total-e.couponOff-e.itgOff);e.finalPay=i}jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=recheckItg",async:!1,data:e,error:function(){Fai.ing(LS.js_systemError,!1)},success:function(e){var t=jm.parseJSON(e);if(t.success&&null!=t.rtData.maxUse&&void 0!==t.rtData.maxUse){jm("#canUse").text(t.rtData.maxUse);var i=Mobi.calculate(t.rtData.maxUse,t.rtData.needItg,3);jm("#itgOffsetMoney").text(i),jm("#itgOffsetMoney").attr("_offsetmoney",i),jm("#useItg").attr("_maxuse",t.rtData.maxUse),jm("#useItgLine .jz-switch").removeClass("jz-switch-checked"),jm("#useItg").val(0),jm("#useItg").trigger("change"),Mobi.mallStlCalcTotal()}}})},function(e,t,i){var o={};function n(){return{triggerId:"callCoupon",panelId:"couponUseListPanel",callback:function(){Mobi.fixTouchPenetrate("callCoupon","couponUseListPanel")},closeWebPage:"#couponUseListPanel .g_close",direction:"bottom",pageBg:!0}}Mobi.initUseCoupon=function(e){this.selectCoupon={},self=this,o.couponList=e,o.couponColorList=["red","orange","yellow","green","blue","pink","purple"],function(e){Mobi.defaultCouponSelect=-1;var t=parseFloat(jm("#cartTotalPrice").attr("totalPrice"));if("undefined"!=e&&0!=e.length){var i=e[0];if("undefined"!=i){Mobi.defaultCouponSelectId=i.cdId;var o=i.savePrice,n=i.orderMinPrice;jm("#couponOffsetMoney").text(jm.format(LS.settlementCoupon,o,n)),jm("#couponOffsetMoney").attr("_offsetmoney",o),Mobi.selectCoupon.saveMoney=o,Mobi.selectCoupon.id=i.cdId,Mobi.selectCoupon.orderMinPrice=i.orderMinPrice;var a=jm("#useItg");if(t-o<=0)a.val(0),jm("#itgOffsetMoney").text("0.00"),jm("#canUse").text(0);else{var r=parseInt(a.attr("_needitg")),s=parseInt(a.attr("_maxuse")),l=Math.floor((t-o)*r);l<s&&(s=l),jm("#canUse").text(s),jm("#itgOffsetMoney").text((s/r).toFixed(2))}Mobi.mallStlCalcTotal()}else Mobi.selectCoupon={}}else jm("#showCouponCount").css("display","inline-block")}(e),Mobi.onTouchAndClickEvent("#couponLine",function(){Mobi.showCouponPanel()}),Mobi.recheckItg()},Mobi.initCouponPanel=function(e){new Vue({el:"#couponListPanel",template:"\n\t\t\t\t<div class='couponUseListPanel' id='couponUseListPanel' style=\"display:none\">\n\t\t\t\t\t<div style='position: absolute;bottom: 0;width: 100%;z-index:999;' @click=\"stopPropagation\">\n\t\t\t\t\t\t<div class='couponListTitle'>{{LS.coupon}}</div>\n\t\t\t\t\t\t<div class='couponUseListContent' id='couponUseListContent'>\n\t\t\t\t\t\t\t<div id='couponListItems' style='max-height:10rem; overflow: auto;'>\n\t\t\t\t\t\t\t\t<div class='couponListContainer'>\n\t\t\t\t\t\t\t\t\t<div class='couponUseListItem J_couponItem' v-for='item in couponList' :couponId='item.cdId' @click=\"onItemClick(item.cdId)\" >\n\t\t\t\t\t\t\t\t\t\t<span>{{genPrice(item)}}</span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<div :class=\"genItemCls(item)\" :order_min_price='item.orderMinPrice' :coupon_value='item.savePrice' :id='(\"selectBtn\"+item.cdId)'  ></div>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class='couponUseListItem' couponId='-1' style='margin-bottom:3rem;' @click=\"onItemClick(-1)\">\n\t\t\t\t\t\t\t\t\t\t<span>{{LS.doNotUsed}}</span>\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t<div class='faisco-icons-shape11 couponCheckBox' id='selectBtn-1' order_min_price ='-1'  coupon_value='-1' couponId='-1'></div>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t   </div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t",data:function(){return{couponList:e}},computed:{LS:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return LS}),defaultCouponSelectId:function(){return Mobi.defaultCouponSelectId}},methods:{genPrice:function(e){return jm.format(LS.settlementCoupon,e.savePrice,e.orderMinPrice)},genItemCls:function(e){return this.defaultCouponSelectId===e.cdId?"faisco-icons-right couponCheckBox g_color g_main_color_v3":"faisco-icons-shape11 couponCheckBox"},onItemClick:function(e){Mobi.changeCheckButtonRight(e),Mobi.defaultCouponSelectId=e},stopPropagation:function(){return!1}},mounted:function(){Vue.nextTick(function(){Mobi.changeCheckButtonRight(Mobi.defaultCouponSelectId)})}})},Mobi.changeCheckButtonRight=function(e){var t=parseFloat(jm("#cartTotalPrice").attr("totalPrice"));if(jm("#couponUseListPanel .faisco-icons-right").each(function(e,t){jm(t).removeClass().addClass("faisco-icons-shape11").addClass("couponCheckBox")}),jm("#selectBtn"+e).hasClass("faisco-icons-right"))jm("#selectBtn"+e).removeClass().addClass("faisco-icons-shape11").addClass("couponCheckBox");else{jm("#selectBtn"+e).removeClass().addClass("faisco-icons-right").addClass("couponCheckBox").addClass("g_color g_main_color_v3");var i=jm("#selectBtn"+e).attr("coupon_value"),o=jm("#selectBtn"+e).attr("order_min_price");null!=i&&-1!=i?(jm("#couponOffsetMoney").text(jm.format(LS.settlementCoupon,i,o)),jm("#couponOffsetMoney").attr("_offsetmoney",i),Mobi.selectCoupon.saveMoney=i,Mobi.selectCoupon.id=e,jm("#showCouponCount").hide()):(jm("#couponOffsetMoney").text(LS.notUse),jm("#couponOffsetMoney").attr("_offsetmoney",""),jm("#showCouponCount").css("display","inline-block"),Mobi.selectCoupon={});var n=jm("#useItg");null!=i&&-1!=i||(i=0);var a=parseInt(n.attr("_needitg")),r=parseInt(n.attr("_maxuse")),s=Math.floor((t-i)*a);s<r&&(r=s),jm("#canUse").text(r);var l=(r/a).toFixed(2);jm("#itgOffsetMoney").text(l),jm("#useItgLine #offsetMoney").hasClass("jz-switch-checked")?(jm("#offsetMoney").attr("_offsetmoney",l),n.val(r)):(jm("#offsetMoney").attr("_offsetmoney",0),n.val(0))}jm("#webPagePanelcouponLine .webPagePanelBg").css("display","none"),jm("#couponUseListPanel").removeClass("webPagePanelShow"),jm("#g_body").attr("style",""),Mobi.mallStlCalcTotal(),Mobi.recheckItg()},Mobi.showCouponPanel=function(){var e=n();Mobi.showPageWithInit(e)},Mobi.hideCouponPanel=function(){var e=n();Mobi.hidePage(e)}}(Mobi,jm),Mobi.setUseIntegral=function(){Fai.top._choiceCurrencyVal;jm.os.supportsTouch?jm("#editUseItgPanel .g_button").off("touchend").on("touchend",function(){setTimeout(function(){Mobi.initPresentIpt()&&jm("#editUseItgPanel .g_close").click()},300)}):jm("#editUseItgPanel .g_button").off("mousedown").on("mousedown",function(){Mobi.initPresentIpt()&&jm("#editUseItgPanel .g_close").click()}),jm.os.supportsTouch?jm("#editUseItgPanel .notUseBtn").off("touchend").on("touchend",function(){setTimeout(function(){jm("#offsetMoney").attr("_offsetmoney","0"),jm("#useItg").val("0"),Mobi.initPresentIpt(),Mobi.mallStlCalcTotal(),jm("#editUseItgPanel .g_close").click()},300)}):jm("#editUseItgPanel .notUseBtn").off("mousedown").on("mousedown",function(){jm("#offsetMoney").attr("_offsetmoney","0"),jm("#useItg").val("0"),Mobi.initPresentIpt(),Mobi.mallStlCalcTotal(),jm("#editUseItgPanel .g_close").click()})},Mobi.mallStlCalcTotal=function(){var e=parseFloat(jm("#cartTotalPrice").attr("totalPrice"));if(!isNaN(e)){var t=jm("#cartTotalPrice").attr("useCurrencyWithNoDecimal"),i=parseFloat(jm("#shipPrice").attr("value"))||0;if(Fai.top._mstlMerchantProductListVm.isMerchantProductExist()&&(i+=Fai.top._mstlMerchantProductListVm.totalShipPrice()),isNaN(i)&&(i=0),jm("#mallShipTemplate_province").length>0){var o=jm("#shipValue");o.attr("provinceCode",jm("#mallShipTemplate_areaBoxInput").attr("area1")),o.attr("cityCode",jm("#mallShipTemplate_areaBoxInput").attr("area2")),o.attr("countyCode",jm("#mallShipTemplate_areaBoxInput").attr("area3")),o.attr("streetCode",jm("#mallShipTemplate_areaBoxInput").attr("area4"));var n=jm("#shipValue").attr("shiptype")}else if(1==jm("#mallShip").length){n=jm("#shipValue").attr("shiptype");jm("#mallShip").attr("shipType",n)}var a=0;if(jm("#offsetMoney").length>0){var r=jm("#offsetMoney").attr("_offsetmoney");if(!isNaN(r)&&!Mobi.isNull(r)&&e+i<(a=parseFloat(r))){Mobi.ing(jm.format(LS.integral_maxUse,jm("#useItg").attr("_maxuse"),jm.encodeHtml(jm("#useItg").attr("_itegName"))));var s=(e+i).toFixed(2);return"true"==t&&(s=Math.ceil(s).toFixed(2)),void module.find(".mallStlTotal .totalValue").text(s)}}Mobi.selectCoupon&&"id"in Mobi.selectCoupon&&Mobi.selectCoupon.id&&(a+=Number(Mobi.selectCoupon.saveMoney));var l=parseInt(jm("#presentItg").attr("value"));jm("#mallShipCount").text(i.toFixed(2));s=(e+i-a).toFixed(2);if("true"==t&&(s=Math.ceil(s).toFixed(2)),jm("#selfRaisingMsg").length>0&&"none"!==jm("#selfRaisingMsg").css("display")&&jm("#shipPrice").length>0&&(s=Mobi.calculate(s,jm("#shipPrice").attr("value"),1)),jm(".f_earnestSale").length>0&&(s=(s-i).toFixed(2),Fai.top._earnestSaleTotalValue=s),s=parseFloat(s)||0,jm("#totalValue").text(s.toFixed(2)),l>0&&0==jm(".f_earnestSale").length){var c=parseInt((e-a).toFixed(2)*l);c<0&&(c=0),jm("#presentItg").text(c)}var d=parseFloat(jm("#cartTotalPrice").attr("saleSaveMoney")),m=jm("#couponOffsetMoney").attr("_offsetmoney");m=parseFloat(void 0===m||null==m||""==m?0:m);var p=jm("#offsetMoney").attr("_offsetmoney"),u=d+m+(p=parseFloat(void 0===p||null==p||""==p?0:p));jm("#saleSavePrice").text(u.toFixed(2)),0==u?jm(".sale_price").hide():jm(".sale_price").show()}},Mobi.editInfoSave=function(e){var t=jm(".editPanel"),i=new Array,o=!1,n={},a={};if(t.find(".propItemValue").each(function(){var e=jm(this).val(),n=jm(this).attr("id"),r=jm(this).attr("_field"),s=jm(this).attr("proptype"),l=jm(this).attr("_prop");if((1==jm(this).attr("_required")||"true"==jm(this).attr("_required"))&&!e&&!o)return msg=LS.mallStlSubmitInput+jm(this).attr("_prop"),Mobi.ing(msg),jm("#"+n).trigger("focus"),o=!0,!1;if(e&&e.length>0){if(8==s&&!jm.isNationMobile(e))return msg=LS.mobileNumRegular,Mobi.ing(msg),jm("#"+n).trigger("focus"),o=!0,!1;if(10==s&&!jm.isNationMobile(e))return msg=l+LS.mobileNumDefRegular,Mobi.ing(msg),jm("#"+n).trigger("focus"),o=!0,!1;if((3==s||12==s)&&!jm.isEmail(e))return msg=LS.mallStlSubmitInput2+jm(this).attr("_prop"),Mobi.ing(msg),jm("#"+n).trigger("focus"),o=!0,!1;if(11==s&&!jm.isCardNo(e))return msg=LS.mallStlSubmitInput2+jm(this).attr("_prop"),Mobi.ing(msg),jm("#"+n).trigger("focus"),o=!0,!1;var c={};if(9==s){if(e.length>0){c.s=e;var d=n.replace("input","")+"_endinput",m=t.find("#"+d);if(m.length>0){var p=m.val();if(""==p)return msg=LS.mallStlSubmitInput2+jm(this).attr("_prop"),Mobi.ing(msg),o=!0,!1;c.e=p}}e=c}}if(void 0!==r){var u={};u.field=r,u.value=e,u.type=s,u.name=l,i.push(u),a[r]=e}}),!o){var r="",s=1==jm("#mallShipTemplate_province").length;if(s){var l=parseInt(jm("#mallShipTemplate_areaBoxInput").attr("area2")),c=parseInt(jm("#mallShipTemplate_areaBoxInput").attr("isCus"));if(isNaN(l)&&!c)return Mobi.ing(LS.mallStlSubmitAddrErr),!1;r=2052==Fai.top._lcid||1028==Fai.top.lcid?jm("#mallShipTemplate_areaBoxInput").val().replace(/-/g,"")+jm("#edit_addrDetal").val():jm("#mallShipTemplate_areaBoxInput").val().replace(/-/g," ")+" "+jm("#edit_addrDetal").val()}if(1==jm("#allArea").length){r="";var d=jm("#areaBoxInput"),m=jm("#addrInfo_street"),p=parseInt(d.attr("area2")),u=parseInt(d.attr("area1")),h=parseInt(d.attr("area3")),f=parseInt(d.attr("area4")),g=parseInt(d.attr("isCus")),v="1"==m.attr("_required");if(v&&isNaN(u))return Mobi.ing(LS.mallStlSubmitAddrErr),!1;if(v&&isNaN(p)&&!g)return Mobi.ing(LS.mallStlSubmitAddrErr),!1;r=2052==Fai.top._lcid||1028==Fai.top.lcid?d.val().replace(/-/g,"")+jm("#addrInfo_street").val():d.val().replace(/-/g," ")+" "+jm("#addrInfo_street").val(),isNaN(p)&&(p=-1),isNaN(h)&&(h=-1),isNaN(f)&&(f=-1),0!=e&&(n.provinceCode=u,n.cityCode=p,n.countyCode=h,n.streetCode=f,n.streetAddr=m.val(),n.isCus=!!g,a.addr_info=n,a.addr=r,a.isDefault=1);var b={field:"addr"};b.value=r,i.push(b),a.addr=r}if(0!=e){var j={opera:"addAddr"};j.addrInfo=a,jm.ajax({type:"post",url:action="ajax/member_h.jsp?cmd=set&id="+e,data:"info="+jm.encodeUrl(jm.toJSON(j)),success:function(e){},error:function(){Mobi.ing(LS.js_systemError)}})}if(jm(".assignItem_line").length<1){var _="",M="",y="",S="";if(jm(".orderAssign_line .shipTopBg:last-child").remove(),0!=jm("#allArea").length||s){_+="<div class='assignItem_line' id='assignItemline'>",_+="<div class='receiverLine'>",_+="<span class='icon-toAddrListArrow'></span>";var I=!1;jm.each(i,function(e){if("name"===i[e].field)_+="<span class='addr_value flex1 info_"+i[e].field+"' id='info_"+i[e].field+"'>"+(i[e].value||"")+"</span>";else if("mobile"===i[e].field){if(I)return;I=!0,_+="<span class='addr_value flex1 info_phone' id='info_phone'>"+i[e].value+"</span>"}else"addr"===i[e].field&&(M=i[e].value,y=i[e].field)}),_+="</div>",_+="<div class='item_value flex1'>",_+="<span class='icon-addrSelected'></span>",""!=M&&""!=y?S=M:""!=r&&(S=r),_+="<span class='info_addr' id='info_addr'>"+(S||"")+"</span>",_+="</div>",_+="</div>"}else{var w=1;_+="<div class='assignItem_line' id='assignItemline'  style='background-color:#fafafa;'></div>",_+="<div id='noAddrListInfo' style='background-color:#fafafa;'>",_+="\t<div class='noAddrPanel'>",jm.each(i,function(e){if(!(w>3)&&null!=i[e].field&&""!=i[e].field&&null!=i[e].field){_+="<div class='noAddrLine'><span style='color:#333'>"+i[e].name+"：</span>";var t=i[e].value;if(9==i[e].type&&null!=t){var o=t;null!=o.s&&(t=o.s,null!=o.e&&(t+=" "+LS.to+" "+o.e))}_+="<span class='noAddr_prop' propType='"+i[e].type+"' id='info_"+i[e].field+"'>"+t+"</span>",w++,_+="</div>"}}),w>3&&(_+="<span class='icon-rightIcon rightToward'></span>"),_+=" </div>"}_+="<div class='shipTopBg'></div>",jm("#linetitle1").removeClass("noAddrMsgList"),jm(".orderAssign_line").append(_),(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3||Fai.top._openThemeV3)&&jm("#assignItemline").off("click.mall").on("click.mall",function(){jm("#linetitle1").click()})}else{0==jm("#allArea").length&&jm(".noAddrPanel .noAddr_prop").each(function(){var e=jm(this).attr("id"),t=jm(this).attr("proptype"),i=e.replace("info_",""),o=a[i];if(null!=t&&9==t&&""!=o){var n=o;null!=n.s&&(o=n.s,null!=n.e&&(o+=" "+LS.to+" "+n.e))}jm("#"+e).text(o)});var C=jm(".assignItem_line");C.find("#info_name").text(""),C.find("#info_phone").text(""),C.find("#info_addr").text(""),a.name&&C.find("#info_name").text(a.name),a.mobile&&C.find("#info_phone").text(a.mobile),a.addr&&C.find("#info_addr").text(a.addr)}jm("#editCusInfo .g_close").click()}},Mobi.mallConfirmImSettle=function(e,t,i,o,n,a,r,s,l,c,d,m){var p=jm(jm(".J_productName")[0]).html(),u=jm("#totalImUseItg").html(),h=jm("#integralMallDeduction").attr("_itgName")||"",f=jm("#integralMallDeduction").attr("_integtalMallType")||0,g=parseFloat(jm("#totalValue").html());isNaN(g)&&(g=0),0==f?Mobi.logDog(200978,3):Mobi.logDog(200978,1);c={textClass:"confirm",content:"确定使用"+(g>0?Fai.top._choiceCurrencyVal+g.toFixed(2)+"+":"")+u+h+(g<=0?"兑换":"换购")+p+"吗？",callback:function(){Mobi.mallSubmit(e,t,i,o,n,a,r,s,l,c,d,m)}};Mobi.prompt(c)},Mobi.mallConfirmEsSettle=function(e,t,i,o,n,a,r,s,l,c,d,m){if(jm("#earnestSaleSwitch")[0].checked)Mobi.mallSubmit(e,t,i,o,n,a,r,s,l,c,d,m);else{c={textClass:"confirm",content:"购买预售商品，定金不退还，是否继续下单？",callback:function(){jm("#earnestSaleSwitch")[0].click(),Mobi.mallSubmit(e,t,i,o,n,a,r,s,l,c,d,m)}};Mobi.prompt(c)}},Mobi.mallSubmiting=!1,Mobi.checkMallSubmitForIntraCityShip=function(){return new Promise(function(e,t){if(3===(Fai.top.shipTabListVm||{}).checkedId){Fai.top.intraCityShipPanelVm.addrInfo,Fai.top._intraCityShipConf.pua.p;if(Fai.top.intraCityShipTimePanelVM){var i=Fai.top.intraCityShipTimePanelVM;if(Fai.top.intraCityShipTimePanelVM.isOpenTimeSetting){if(0===i.savedValues.length)return t(function(){Mobi.ing("请选择送达时间")});if(i.timeList[i.savedValues[2]].timestamp<(new Date).getTime())return t(function(){Mobi.ing("当前送达时间已过期，请重新选择")})}}e()}else e()})},function(e,t,i){function o(e){return new Promise(function(i,o){jm(".orderSettle");var n=Fai.top.shipTabListVm||{},a=3===n.checkedId?Fai.top.intraCityShipPanelVm.addrInfo:Fai.top.mallShipPanelVm.addrInfo;if(a){if(a=a||{},a=Mobi.deepCopy(a),[0].includes(n.checkedId)&&Fai.top._addrPropList.filter(function(e){return 9===e.type}).forEach(function(e){if(""==a[e.fieldKey]){var i=t("#orderPropId"+e.id),o=i.find(".fk-datePickStart").val(),n=i.find(".fk-datePickEnd").val();a[e.fieldKey]={s:o,e:n}}}),!Mobi.Address.checkWithIng({addrInfo:a,propList:Fai.top._addrPropList}))return o();var r=a;if(Mobi.addr_info=a.addr_info,Fai.top._addrPropList.forEach(function(t){if(t.type===Fai.top._OrderPropTypeDef.SYS_NAME)e.name=r.name||"";else if(t.type===Fai.top._OrderPropTypeDef.SYS_MOBILE)e.mobile=r.mobile||"";else if(t.type===Fai.top._OrderPropTypeDef.SYS_EMAIL)e.email=r.email||"";else if(t.type===Fai.top._OrderPropTypeDef.SYS_ADDR)e.addr=r.addr||"";else if(t.type===Fai.top._OrderPropTypeDef.SYS_PHONE)e.phone=r.phone||"";else if(t.type===Fai.top._OrderPropTypeDef.CUS_DATE){var i="string"===Mobi.typeOf(r[t.fieldKey]);e[t.fieldKey]=i?r[t.fieldKey]||"":JSON.stringify(r[t.fieldKey])}else e[t.fieldKey]=r[t.fieldKey]||""}),(2052==Fai.top._lcid||1028==Fai.top.lcid)&&Mobi.addr_info&&!Mobi.addr_info.isCus){var s=Mobi.addr_info.cityCode,l=Mobi.addr_info.countyCode,c=Mobi.addr_info.streetCode,d=s&&""!=s&&"-1"!=s&&""==site_cityUtil.getInfo(s).name,m=l&&""!=l&&"-1"!=l&&""==site_cityUtil.getInfo(l).name,p=c&&""!=c&&"-1"!=c&&""==site_cityUtil.getInfo(c).name;if(d||m||p)return o(function(){Mobi.ing("您的地址已过期，请更新地址后重新提交订单")})}var u={};void 0!==Mobi.addr_info&&null!=Mobi.addr_info&&(u={provinceCode:parseInt(Mobi.addr_info.provinceCode)||-1,cityCode:parseInt(Mobi.addr_info.cityCode)||-1,countyCode:parseInt(Mobi.addr_info.countyCode)||-1,streetCode:parseInt(Mobi.addr_info.streetCode)||-1,streetAddr:Mobi.addr_info.streetAddr||"",isCus:Mobi.addr_info.isCus||!1});var h=jm("#areaBoxInput");if(null==e.addr&&1==h.length){var f="";f=2052==Fai.top._lcid||1028==Fai.top.lcid?h.val().replace(/-/g,"")+jm("#addrInfo_street").val():h.val().replace(/-/g," ")+" "+jm("#addrInfo_street").val(),e.addr=f,u={provinceCode:parseInt(h.attr("area1"))||-1,cityCode:parseInt(h.attr("area2"))||-1,countyCode:parseInt(h.attr("area3"))||-1,streetCode:parseInt(h.attr("area4"))||-1,streetAddr:jm("#addrInfo_street").val(),isCus:1==parseInt(h.attr("isCus"))}}if(Fai.top._isOpenMallTemplate&&1===n.checkedId){r.addr_info.isCus||99e4===r.addr_info.provinceCode&&(r.addr_info.cityCode=990100);var g={provinceCode:parseInt(r.addr_info.provinceCode),cityCode:parseInt(r.addr_info.cityCode),countyCode:parseInt(r.addr_info.countyCode),streetCode:parseInt(r.addr_info.streetCode),isCus:r.addr_info.isCus,streetAddr:r.addr_info.streetAddr};e.shipType=g}else e.addrInfo=JSON.stringify(u),e.shipType=parseInt(jm("#shipValue").attr("shipType"));e.isTakingPoint=!1,i()}else Mobi.ing(LS.mall_chooseAddress,!0)})}function n(e){return new Promise(function(t,o){var n=Fai.top.shipTabListVm||{};if((n.checkedId===i||1===n.checkedId||0===n.checkedId)&&Fai.top._mallMerchantsOpen&&Fai.top._mstlMerchantProductListVm.getMerchantsShipList().length>0){var a,r=Fai.top._mstlMerchantProductListVm.getMerchantsShipList();if(Fai.top._mstlMerchantProductListVm.isMerchantExpire())return o(function(){Mobi.ing("订单中有店铺没有在营业中")});if(e.other||(e.other={}),e.other.merchantsShipList=[],Fai.top._mstlMerchantProductListVm.isSelfSaleEmpty()||e.other.merchantsShipList.push({mctId:0,shipType:e.shipType,remark:e.msg}),r.length>0)(a=e.other.merchantsShipList).push.apply(a,_toConsumableArray(r))}t()})}Mobi.memberDepositPayNeedLeadHandler=function(e,t){return 15==e&&!t&&(Mobi.prompt({textClass:"goSetting",content:"未设置交易密码，无法正常使用余额支付！",callback:function(){location.href="depositPwd.jsp"}}),!0)},Mobi.mallSubmit=function(e,t,i,o,n,a,r,s,l,c,d,m){if(i||0!==e){r=r||{},c=c||{},d=d||{},m=m||{};var p=jm("#mstlBtn"),u={};!function(e){if(Mobi.orderLvMessageOpen){var t=jm("#orderLeveaMsgIn").val()||"";t.length>Mobi.orderLvMessageMaxNum&&(t=t.substring(0,Mobi.orderLvMessageMaxNum)),e.msg=t}else e.msg=""}(u),Mobi.checkAndSetDataAttrForShipMode(u).then(function(){return function(e){return new Promise(function(t,i){var o=jm("#onlineBankType"),n=0;return 1==o.length&&(n=parseInt(o.attr("_paymode")))<3&&(e.payMode=n),0==o.length?i(function(){jm(".f_earnestSale").length>0?Mobi.ing("商家尚未设置线上支付方式，请联系商家"):Mobi.ing(LS.unPaidTips)}):isNaN(n)?i(function(){Mobi.ing(LS.mallStlPayOnlineType)}):(1==o.length&&n>2&&(9!=(n=parseInt(o.attr("_paymode")))&&8!=n&&7!=n&&(e.payBankType=parseInt(o.attr("_type"))),e.payMode=parseInt(o.attr("_paymode"))),void t())})}(u)}).then(function(){return function(e){return new Promise(function(t,i){var o=jm("#useItg");if(o.length>0){var n=o.val();if(jm.isInteger(n)){var a=parseInt(o.attr("_maxUse")),r=parseInt(o.attr("_currentitg")),s=o.attr("_itegName");if(n>r)return i(function(){Mobi.ing(jm.format(LS.integral_notOverCurrent,jm.encodeHtml(s),jm.encodeHtml(s))),o.focus()});if(n>a)return i(function(){Mobi.ing(jm.format(LS.integral_notOver,jm.encodeHtml(s),a)),o.focus()});if(n<0)return i(function(){Mobi.ing(LS.integral_inputInteger),o.focus()});e.useItg=parseInt(n)}}t()})}(u)}).then(function(){!function(e){jm("#presentItgShow").length>0&&(e.presentItg=!0)}(u),function(e){Mobi.selectCoupon&&"id"in Mobi.selectCoupon&&Mobi.selectCoupon.id&&(e.cdId=Number(Mobi.selectCoupon.id))}(u)}).then(function(){urlArg=function(e,t,i){var o="orderId="+e;t&&(o=window.self!=window.top&&/(iPhone|iPad|iPod|safari)/i.test(navigator.userAgent.toLowerCase())?"imme&immeData="+jm.encodeUrl(jm.toJSON(i)):"imme");return o}(e,i,a),p.attr("disabled","disabled"),Mobi.ing(LS.mallStlSubmitting,-1);var t=jm("#onlineBankType").attr("_paymode");!i&&o.length>0?jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=delItem&orderId="+e,data:"itemIds=["+o+"]",error:function(){Mobi.ing(LS.mallCartUpdateError)},success:function(o){(o=jm.parseJSON(o)).success?Mobi.ajaxSettleOrder(urlArg,u,n,i,t,e,r,s,c,d,m):-9==o.rt?(Mobi.ing(LS.mallStlSubmitStatusError),setTimeout(function(){window.location.href="mcart.jsp"},2e3)):Mobi.ing(LS.mallStlSubmitError)}}):Mobi.ajaxSettleOrder(urlArg,u,n,i,t,e,r,s,c,d,m)}).catch(function(e){jm.isFunction(e)?e():console.log("res",e)}).finally(function(){p[0].disabled=!1})}else Mobi.ing("您目前处于管理状态，您的订单为示例数据。")},Mobi.checkAndSetDataAttrForShipMode=function(e){var t=Fai.top.shipTabListVm||{},i=0===t.checkedId||1===t.checkedId,a=2===t.checkedId,r=3===t.checkedId;return i?o(e).then(function(){return n(e)}):a?function(e){return new Promise(function(t,i){var o=jm("#selfRaisingMsgName").val(),n=jm("#selfRaisingMsgPhone").val(),a=jm("#selfRaisingPoint").attr("_pointId"),r=Mobi.SelfRaisingList;if(""==o)return i(function(){Mobi.ing("请输入提货人姓名。")});if(e.name=o,""==n)return i(function(){Mobi.ing("请输入自提人手机号码。")});if(!(jm.isPhone(n)&&7<=n.length&&n.length<=11))return i(function(){Mobi.ing("请输入7~11位正确的手机号。")});if(e.mobile=n,0==r.length)return i(function(){Mobi.ing("商家未设置自提点，请联系商家。")});if(!(a>0))return i(function(){Mobi.ing("自提点信息错误，请联系管理员。")});for(var s=0;s<r.length;s++)if(r[s].id==a){e.addrInfo='{"srp":'+jm.toJSON(jm.toJSON(r[s]))+"}";break}e.isTakingPoint=!0,t()})}(e):r?o(e).then(function(){return Mobi.checkMallSubmitForIntraCityShip()}).then(function(){!function(e){var t=Fai.top.intraCityShipPanelVm.addrInfo,i=Fai.top._intraCityShipConf,o={provinceCode:parseInt(t.addr_info.provinceCode),cityCode:parseInt(t.addr_info.cityCode),countyCode:parseInt(t.addr_info.countyCode),streetCode:parseInt(t.addr_info.streetCode),streetAddr:t.addr_info.streetAddr,isCus:t.addr_info.isCus};if(1===i.ts.ota){var n=intraCityShipTimePanelVM.checkedTimeItem,a=Mobi.DateUtil.format(new Date(n.timestamp),"YYYY-MM-DD")||"",r=t.addr_info.pos||{};o.icsd={st:a,tst:i.ts.tst,irs:!0,iots:i.ts.iots,tp:n.id,lat:r.lat,lng:r.lng}}e.addrInfo=JSON.stringify(o),e.addr=t.addr;var s=i.pua.p,l=Mobi.calculateIntraCityShipDistanceKm(s,t.addr_info.pos);e.isIntraCityShip=!0,e.intraCityDistance=l}(e)}):n(e)}}(Mobi,jm),Mobi.ajaxSettleOrder=function(e,t,i,o,n,a,r,s,l,c,d){if(!Mobi.mallSubmiting){var m=l||{};Mobi.mallSubmiting=!0;var p=t&&t.other&&t.other.merchantsShipList&&t.other.merchantsShipList.some(function(e){return e.mctId>0});jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=settle&"+e,data:"data="+jm.encodeUrl(jm.toJSON(t))+"&groupBuyOptions="+jm.encodeUrl(jm.toJSON(r))+"&cutPriceOptions="+jm.encodeUrl(jm.toJSON(s))+"&integralMallOptions="+jm.encodeUrl(jm.toJSON(c))+"&earnestSaleOptions="+jm.encodeUrl(jm.toJSON(d))+"&options="+jm.encodeUrl(jm.toJSON(l)),error:function(){Mobi.mallSubmiting=!1,Mobi.ing(LS.mallStlSubmitError),Mobi.logMonitor(5999,!0),p&&Mobi.logMonitor(7215,!0)},success:function(s){if((s=jm.parseJSON(s)).success)jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=addAfterShop",data:"data="+jm.encodeUrl(jm.toJSON(i)),error:function(){Mobi.mallSubmiting=!1,stlMsg.html(LS.mallStlSubmitError)},success:function(e){n=parseInt(n),c.isIntegralMall&&(n>2&&Mobi.logDog(200978,5),Mobi.logDog(200977,2)),m.isCpOrder&&n>2&&Mobi.logDog(201162,2),window.location.href=n>2?"onlinePayment.jsp?orderId="+(o?s.oid:a):"mdetail.jsp?id="+(o?s.oid:a)+"&suc=true"}});else{if(Mobi.mallSubmiting=!1,-3==s.rt)Mobi.ing(LS.mallStlSubmitNotFound);else if(-9==s.rt)Mobi.ing(LS.mallStlSubmitStatusError),setTimeout(function(){window.location.href="mcart.jsp"},2e3);else if(s.rt==Mobi.MallAjaxErrno.mallAmountZero)Mobi.ing(jm.format(LS.oAmountIsZero));else if(-23==s.rt)location.href="login.jsp?errno=11";else if(s.rt==Mobi.MallAjaxErrno.outOfMallAmount)m.isCpOrder?Mobi.ing("该套餐部分商品已售罄，请联系商家补货"):Mobi.ing(jm.format(LS.outOfMallAmount));else if(s.rt==Mobi.MallAjaxErrno.OutOfAllowAmount)Mobi.ing(jm.format(LS.allowAmountOverNameList,s.productsName));else if(s.rt==Mobi.MallAjaxErrno.couponOverTime)Mobi.ing(LS.couponOverTime);else if(s.rt==Mobi.MallAjaxErrno.couponUnavail)Mobi.ing(LS.couponUnavail);else if(s.rt==Mobi.MallAjaxErrno.couponNotFound)Mobi.ing(LS.couponNotFound);else if(s.rt<=-600&&s.rt>=-609){var l;-608==s.rt?(l={textClass:"goToPay",cancelClass:"giveUpJoin",content:"非常抱歉，该团已满，继续支付会自动为您开新团",callback:function(){r.groupBuyDetailId=0,Mobi.ajaxSettleOrder(e,t,i,o,n,a,r)}},Mobi.prompt(l)):-605==s.rt?(l={textClass:"goToPay",cancelClass:"giveUpJoin",content:"不好意思，已经超出成团时间，继续支付将自动为您开新团",callback:function(){r.groupBuyDetailId=0,Mobi.ajaxSettleOrder(e,t,i,o,n,a,r)}},Mobi.prompt(l)):-609==s.rt?Mobi.ing("不好意思，您已经参与该团"):Mobi.ing("参团失败，请稍后再试")}else s.rt<=-800&&s.rt>=-850?-801==s.rt?Mobi.ing("不好意思，您已经参与过该秒杀活动"):-809==s.rt?Mobi.ing("不好意思，该秒杀活动已失效"):-810==s.rt?Mobi.ing("不好意思，该产品已售罄"):Mobi.ing("秒杀失败，请稍后再试"):-900==s.rt?Mobi.ing("积分余额不足，快去赚取积分！"):s.rt==Mobi.MallAjaxErrno.optionOutOfDate?Mobi.ing("该商品购物选项已更新，请重新下单"):-851==s.rt?Mobi.ing("不好意思，活动已结束"):s.useMsg?Mobi.ing(s.msg):Mobi.returnMallErrorMsg(s.rt);s.rt==Mobi.MallAjaxErrno.error?Mobi.logMonitor(5999,!0):Mobi.logMonitor(5998,!0),p&&Mobi.logMonitor(7215,!0)}}})}},Mobi.orderLvMessageOpen=!1,Mobi.orderLvMessageMaxNum=0,Mobi.initOrderLvMsgPrm=function(e,t){Mobi.orderLvMessageOpen=e,Mobi.orderLvMessageMaxNum=t},Mobi.mallSettle=function(e){if(e>0){var t=[];if(jm(".mallCart .invalidItem").each(function(){t.push(jm(this).attr("itemId"))}),jm(".mallCart .J_noSelect").each(function(){t.push(jm(this).attr("itemId"))}),jm(".mallCart .mall_product").length==t.length)return void Mobi.ing(LS.settleFailplsModifyCart);if(jm(".mallCart .mall_product").length>500)return void Mobi.ing(LS.mcartTooLong);var i=!1;if(jm(".mallCart .J_select").each(function(){var e=Number(jm(this).find(".buyNumber").val()),t=Number(jm(this).attr("realamount")),o=jm(this).attr("enableAmount");if(e>t&&"true"==o)return i=!0,!1}),i)return void Mobi.ing(LS.mallAmountOverFlow);window.location.href="mstl.jsp?id="+e+"&invalidIds="+jm.encodeUrl(t)}else window.location.href="mstl.jsp"},Mobi.initPresentIpt=function(){var e=jm("#useItg");if(e.length>0){Fai.top._choiceCurrencyVal;var t=parseInt(e.attr("_needitg")),i=parseInt(e.val()),o=e.attr("_itegName"),n=parseInt(e.attr("_maxuse")),a=parseFloat(jm("#cartTotalPrice").attr("totalPrice"));if(isNaN(a))return!1;if((!jm.isInteger(i)||i<0)&&(jm("#offsetMoney").attr("_offsetmoney",""),Mobi.ing(LS.integral_inputOverZero),e.focus,i=0),i>n){Mobi.ing(jm.format(LS.integral_maxUse,n,jm.encodeHtml(jm("#useItg").attr("_itegName")))),jm("#useItg").val(n),jm("#canUse").text(n);var r=(n/t).toFixed(2);return jm("#offsetMoney").attr("_offsetmoney",r),jm("#itgOffsetMoney").text(r),Mobi.mallStlCalcTotal(),!1}if(i>parseInt(e.attr("_currentItg")))return Mobi.ing(jm.format(LS.integral_notOverCurrent,jm.encodeHtml(o),jm.encodeHtml(o))),i=0,e.focus(),!1;r=(i/t).toFixed(2);if(jm("#offsetMoney").attr("_offsetmoney",r),Mobi.mallStlCalcTotal(),0==i)return!1}return!0},Mobi.setPayOnlineType=function(e,t){var i=Fai.top._recomentPayMode,o=(e=jm(e),""),n="";t=e.attr("_name");e.hasClass("payMode")?(o=e.attr("_payMode"),jm("#onlineBankType").attr("_payMode",o)):e.hasClass("bank")&&(o=e.attr("_payMode"),n=e.attr("_type"),jm("#onlineBankType").attr("_payMode",o),jm("#onlineBankType").attr("_type",n)),jm(".icon-selectedPayMode").removeAttr("class").attr("class","icon-selectedPayMode payMode"+(o>2?"Online":o)),jm("#onlineBankType").text(t),i==o?jm("#onlineBankTip").css("display","unset"):jm("#onlineBankTip").css("display","none"),jm("#pgListDiv .J_selectPay").removeAttr("style").attr("style","font-size:1rem;height:2.5rem;line-height:2.5rem;").removeAttr("class").attr("class","faisco-icons-shape11"),jm("#pgListDiv .payMode").each(function(e,t){jm(this).attr("_paymode")==o&&jm(this).find(".faisco-icons-shape11").removeAttr("style").attr("style","margin-left:0.1rem;height:2.5rem;line-height:2.5rem;").removeAttr("class").attr("class","faisco-icons-right g_color g_main_color_v3 J_selectPay")}),Mobi.hidePayListPage()},Mobi.setOrderDetailPageHeaderColor=function(e){var t;t=e?".orderDetailTop":".orderDetail_header";var i=(jm(t).find(".g_color").length?jm(t).find(".g_color"):jm(t).find(".g_main_color_v3")).css("color");i=i.substring(i.indexOf("(")+1,i.indexOf(")")),i+=", 0.08",jm(t).css("background-color","rgba("+i+")")},Mobi.initOrderSuccessStyle=function(){jm(".paysucSvg").css("fill",Fai.top._themeColor),jm("#g_web").css("background","#fff")},Mobi.initpayOrder=function(e){new Mobi.payOrder(e).init()},Mobi.payOrder=function(e){this.orderId=e},Mobi.checkOrderStatue=function(e){jm.ajax({type:"post",url:"ajax/mall_h.jsp?cmd=checkOrderStatue",data:"orderId="+e,error:function(){Fai.ing("系统错误。")},success:function(t){jm.parseJSON(t).success&&(Fai.top.location.href="mdetail.jsp?id="+e+"&suc=true")}})},function(e,t,i){var o;Mobi.payOrder.prototype.init=function(){o=this.orderId,e(".payButton").on("click",function(){var t=e(this).attr("_href"),i=e(this).attr("_orderId");void 0!==i&&null!=i&&(o=i);var n=Mobi.checkOrderPayLimit(o);if(""==n){var a="WXPAY"==t,r=e(this).attr("_appId"),s=function(t,i,n){var a=window.location.href,r="";if(a.indexOf("lcid")>0){var s=Mobi.getUrlParam(a,"lcid");s&&(r+="&lcid="+s)}var l=!0;return e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=checkOrder"+r,data:"orderId="+o+"&isWX="+t,async:!1,dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(a){if(!a.success)if(l=!1,-3==a.rt)Mobi.ing(LS.mallStlSubmitNotFound);else if(-9==a.rt)Mobi.ing(LS.mallStlSubmitStatusError);else if(a.rt==Mobi.MallAjaxErrno.mallAmountZero)Mobi.ing(e.format(LS.oAmountIsZero));else if(a.rt==Mobi.MallAjaxErrno.outOfMallAmount)Mobi.ing(e.format(LS.outOfMallAmount));else if(a.rt==Mobi.MallAjaxErrno.OutOfAllowAmount)Mobi.ing(e.format(LS.allowAmountOverNameList,Mobi.encodeHtml(a.productsName)));else if(a.rt==Mobi.MallAjaxErrno.payDomainError)Mobi.ing(e.format(LS.mallPayDomainError));else if(a.rt==Mobi.MallAjaxErrno.notAdded)Mobi.ing(e.format(LS.mallProductNotAdded));else if(a.rt<=-600&&a.rt>=-609){var r;-608==a.rt?(r={textClass:"goToPay",cancelClass:"giveUpJoin",content:"非常抱歉，该团已满，继续支付会自动为您开新团",callback:function(){e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setOrderNewGroupBuyDetail",data:"orderId="+o,dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(e){e.success?t?Mobi.getWxpayUrl(i,o):document.location.href=n:-9==e.rt?window.location.reload():Mobi.ing("当前网络异常，请刷新后重试")}})}},Mobi.prompt(r)):-605==a.rt?(r={textClass:"goToPay",cancelClass:"giveUpJoin",content:"不好意思，已经超出成团时间，继续支付将自动为您开新团",callback:function(){e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setOrderNewGroupBuyDetail",data:"orderId="+o,dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(e){e.success?t?Mobi.getWxpayUrl(i,o):document.location.href=n:-9==e.rt?window.location.reload():Mobi.ing("当前网络异常，请刷新后重试")}})}},Mobi.prompt(r)):-604==a.rt?Mobi.ing("不好意思，活动已结束"):-609==a.rt?Mobi.ing("不好意思，您已经参与该团"):Mobi.ing("参团失败，请稍后再试")}else Mobi.ing(LS.mallStlSubmitError)}}),l}(a,r,t);s&&(a?Mobi.getWxpayUrl(r,o):document.location.href=t)}else Mobi.ing(n)})}}(jm),Mobi.checkOrderPayLimit=function(e){var t="";return jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=checkOrderPayLimit",data:"orderId="+e,async:!1,dataType:"json",error:function(){t=""},success:function(e){t=!e.success&&e.isOverTime?e.msg:!e.success&&e.isFaiHost?e.msg:""}}),t},Mobi.getWxpayUrl=function(e,t){var i=location.href,o=!1,n=i.indexOf("wxPay/")>=0?"":"wxPay/";if(i.indexOf("h-mlist.html")>=0?(i=i.replace("h-mlist.html",n+"mdetail.jsp"),o=!0):i.indexOf("mlist.jsp")>=0&&(i=i.replace("mlist",n+"mdetail"),o=!0),o&&(i.indexOf("?")>=0&&(i=i.substring(0,i.indexOf("?"))),i+="?id="+t),"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)){var a=Fai.top._lcid&&Fai.top._siteLcid&&Fai.top._siteLcid!=Fai.top._lcid?"lcid="+Fai.top._lcid:"";a&&(i+=(i.indexOf("?")>=0?"&":"?")+a),i=encodeURIComponent(i),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=1#wechat_redirect"}else Mobi.callPay(0,t)},Mobi.callPay=function(e,t){Mobi.showLoading();var i=window.location.href,o="";if(i.indexOf("lcid")>0){var n=Mobi.getUrlParam(i,"lcid");n&&(o+="&lcid="+n)}jm.ajax({type:"post",url:"ajax/mall_h.jsp?cmd=getWxpayCallPayParam&orderId="+t+"&code="+e+o,error:function(){Mobi.closeLoading(),Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(jm.decodeUrl(e));(Mobi.closeLoading(),t.success)?Mobi.callPayAPI(t):(Mobi.closeLoading(),"micromessenger"!=navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?Mobi.ing("使用微信支付购买商品请在微信端打开网站"):Mobi.ing(t.errMsg+"(请联系网站管理员)"))}})},Mobi.callPayAPI=function(e){if("micromessenger"!=navigator.userAgent.toLowerCase().match(/MicroMessenger/i)){if("SUCCESS"!=e.result)return void Mobi.ing(e.errMsg?e.errMsg:"微信支付失败，请尝试在微信端进行支付");var t=window.location.href,i=Fai.top._lcid&&Fai.top._siteLcid&&Fai.top._siteLcid!=Fai.top._lcid?"lcid="+Fai.top._lcid:"";return i&&(t+=(t.indexOf("?")>=0?"&":"?")+i),void(window.location.href=e.url+"&redirect_url="+encodeURIComponent(t))}try{var o=function(){var t={appId:e.appId,nonceStr:e.nonceStr,timeStamp:e.timeStamp,paySign:e.paySign,package:e.pak,signType:"MD5"};WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(e){if("get_brand_wcpay_request:cancel"!=e.err_msg&&WeixinJSBridge.log(e.err_msg),"get_brand_wcpay_request:ok"!=e.err_msg){"get_brand_wcpay_request:cancel"==e.err_msg?Mobi.ing(LS.wxpayCancel):Mobi.ing(LS.wxpayErr),Mobi.showLoading();var t=window.location.href;t.indexOf("?")>=0&&(t=t.substring(0,t.indexOf("?")));var i=Fai.top._lcid&&Fai.top._siteLcid&&Fai.top._siteLcid!=Fai.top._lcid?"&lcid="+Fai.top._lcid:"";t+="?id="+jm("#wxpayBtn").attr("_orderid")+i,setTimeout(function(){window.location.replace(t)},3e3)}else Mobi.showLoading(),setTimeout(function(){var e=window.location.href,t="";if(e.indexOf("lcid")>0){var i=Mobi.getUrlParam(e,"lcid");i&&(t=(t=Mobi.getLanCodeFromLcid(i))?t+"/":"")}window.location.href="/"+t+"mdetail.jsp?id="+jm("#wxpayBtn").attr("_orderid")+"&suc=true"},1e3)})};"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)):o()}catch(e){}},Mobi.backOff=function(e){if(Fai.top._manageMode){var t={};if(t.fun=top.Mobi.saveDesignToCheckUpRedirectUrl,t.args=new Array,t.args.push("../mcart.jsp"),top.Mobi.checkSaveBar(t,!0))return!1;window.location.href="index.jsp"}else history.go(-1)},Mobi.getThemeColorTransparency=function(e){return jm("#temBox").length<1&&jm("#g_body").append(jm("<div id='temBox' class='g_color g_main_color_v3'></div>")),"rgba("+jm("#temBox").css("color").split(/[()]/)[1]+", "+e+")"},Mobi.initEarnestSaleStyle=function(){jm(".f_earnestSale").length>0&&jm(".f_earnestSale").find(".tip .topLine").css("background",Mobi.getThemeColorTransparency(.5)),jm(".J_disableBalance").length>0&&jm(".J_disableBalance").find(".payButton").css("background",Mobi.getThemeColorTransparency(.3)).css("border-color",Mobi.getThemeColorTransparency(.1))},Mobi.initEarnestSaleStatusStyle=function(e,t){if(!(jm(".f_earnestSale").length<1)){var i=jm(".f_earnestSale");e>=3&&(i.find(".tip .topLine").css("background",Mobi.getThemeColorTransparency(.5)),i.find(".tip .bottomLine").css("background",Mobi.getThemeColorTransparency(.5)),i.find(".tip .bottomCircle").css("background",Mobi.getThemeColorTransparency(1)),i.find(".innerBottomContain .first").css("color",Mobi.getThemeColorTransparency(1)),i.find(".innerBottomContain .second").css("color",Mobi.getThemeColorTransparency(1))),1==t&&i.find(".info .innerTopContain").css("color","red"),t>0&&i.find(".info .innerBottomContain").css("color","red")}},Mobi.showEsTimeCountDown=function(e){jm.ajax({url:"ajax/mall_h.jsp?cmd=getSystemTime",success:function(t){if((t=jm.parseJSON(t)).success){var i=t.now||0,o=0;e-(i/=1e3)>0&&(o=e-i),countTime=o,clearInterval(Mobi.esCountTimeInterval),Mobi.esCountTimeInterval=setInterval(function(){var e=parseInt(countTime/86400),t=parseInt(countTime/3600)-24*e,i=parseInt(countTime/60)-24*e*60-60*t,o=parseInt(countTime%60);2052!=Fai.top._lcid&&1028!=Fai.top._lcid&&(t<10&&(t="0"+t),i<10&&(i="0"+i),o<10&&(o="0"+o)),countTime--,countTime<=0&&Fai.top.location.reload(),e<10&&(e="0"+e),t<10&&(t="0"+t),i<10&&(i="0"+i),o<10&&(o="0"+o),jm(".J_EsDayNum").html(e),jm(".J_EsHourNum").html(t),jm(".J_EsMinuteNum").html(i),jm(".J_EsSecondNum").html(o),countTime<0&&clearInterval(Mobi.esCountTimeInterval)},1e3)}}})},Mobi.getNewFlowInfo=function(e,t,i){var o=jm("#module"+e);void 0!==i&&i?o.find(".J-newFlowInfo").append("<div>无需配送</div>"):jm.ajax({type:"post",url:"ajax/flowInfo_h.jsp?cmd=flowMsg",data:"id="+t,success:function(i){var n=jm.parseJSON(i);if(n.flowCorpName){if(flowMsgList=[],null!=n.msgList&&0!==n.msgList.length&&n.success){n.msgList.length>0&&(flowMsgList.push("<div class='flowInfo'>"),flowMsgList.push("<div class='flowBusMsg'>"),flowMsgList.push("<span class='flowBusName'>"+n.flowCorpName+"</span>"),flowMsgList.push("<span class='flowBusNumber'>"+n.flowBillNum+"</span>"),flowMsgList.push("<span class='icon-rightIcon' style='position: absolute;right: 0;color: #ccc;'></span>"),flowMsgList.push("</div>"),flowMsgList.push("<div class='flowFlag icon-flowFlag'></div>"),flowMsgList.push("<div class='flowLastNews'><span>"+n.msgList[0].context+"</span></div>"),flowMsgList.push("<div><span class='flowMsgTime'>"+n.msgList[0].time+"</span>"),flowMsgList.push("</div>"),flowMsgList.push("</div>"))}else{flowMsgList.push("<div class='flowInfo'>"),flowMsgList.push("<div class='flowBusMsg'>"),flowMsgList.push("<span class='flowBusName'>"+n.flowCorpName+"</span>"),flowMsgList.push("<span class='flowBusNumber'>"+n.flowBillNum+"</span>"),flowMsgList.push("<span class='icon-rightIcon' style='position: absolute;right: 0;color: #ccc;'></span>"),flowMsgList.push("</div>"),flowMsgList.push("<div class='flowFlag icon-flowFlag'></div>"),flowMsgList.push("</div>"),flowMsgList.push("</div>"),o.find(".noflowInfo").eq(0).show()}o.find(".orderDetail_addr").css("border-top","1px solid #f2f2f2"),o.find(".J-newFlowInfo").append(flowMsgList.join("")),n.success?o.find(".J-newFlowInfo").eq(0).click(function(){Mobi.getAllFlowInfo(e,t)}):null!=n.msg&&Mobi.ing(n.msg)}}})},Mobi.setFlowDivSwipeLis=function(){var e,t,i,o;jm("#J-flowClickDiv").bind("click",function(){Mobi.ing("aaaa")}),jm("#J-flowSwipeDiv").bind("mousedown",function(n){e=n.clientX-jm("#J-flowSwipeDiv").offset().left,t=n.clientY-jm("#J-flowSwipeDiv").offset().top,jm("#J-flowSwipeDiv").bind("mousemove",function(e){}).bind("mouseup",function(n){jm("#J-flowSwipeDiv").unbind("mousemove").unbind("mouseup"),i=n.clientX-jm("#J-flowSwipeDiv").offset().left,o=n.clientY-jm("#J-flowSwipeDiv").offset().top,Mobi.ing(o);e==i&&t==o&&(Mobi.ing(n.offsetX+","+n.offsetY),jm("#J-flowClickDiv").css("margin-left",n.offsetX-10+"px"),jm("#J-flowClickDiv").css("margin-top",n.offsetY+5+"px"),jm("#J-flowSwipeDiv").css("display","none"),setTimeout(function(){jm("#J-flowClickDiv").click(),jm("#J-flowClickDiv").click(),jm("#J-flowClickDiv").click(),jm("#J-flowSwipeDiv").css("display","block")},100))})})},Mobi.getAllFlowInfo=function(e,t){jm("#module"+e);var i=jm("#flowDetailPanel"+t),o=jm("#g_web");i.length<1&&jm.ajax({type:"post",url:"ajax/flowInfo_h.jsp?cmd=show",data:"id="+t,success:function(i){var n=jm.parseJSON(i);o.append(n.flowDetailHtml),Mobi.initFlowDetailEvent(e,t)}}),setTimeout(function(){jm.ajax({type:"post",url:"ajax/flowInfo_h.jsp?cmd=flowMsg",data:"id="+t,success:function(i){var o=jm.parseJSON(i),n=jm("#flowDetailPanel"+t);if(null!=o.msgList&&0!==o.msgList.length&&o.success){var a=[],r=o.msgList.length;n.find(".flowDetail .flowDiv .flowPanel").eq(0).remove(),a.push("<div class='flowPanel'>");for(var s=0;s<r;s++)a.push("<div class='flowInfo'>"),a.push("<div class='flowFlag'></div>"),a.push("<div><span>"+o.msgList[s].context+"</span></div>"),a.push("<div><span "+(0==s?"":"class='flowTime'")+">"+o.msgList[s].time+"</span>"),0==s&&a.push("<span class='icon-flowCurrent'></span>"),a.push("</div>"),a.push("</div>"),a.push("<div class='seperate'></div>");a.push("</div>"),n.find(".flowDetail .flowDiv").eq(0).append(a.join(""))}else o.success?n.find(".flowDetail .flowDiv .noflowInfo").eq(0).show():(n.find(".flowDetail .flowDiv .flowErr").eq(0).show(),null!=o.msg&&Mobi.ing(o.msg));Mobi.showFlowDetailPanel(e,t)}})},100)},Mobi.initFlowDetailEvent=function(e,t){var i=jm("#flowDetailPanel"+t);moreButton=jm("#moreOrderProductList"+t),i.find(".loginHeader .g_close").eq(0).click(function(){Mobi.hideFlowDetailPanel(e,t)}),i.bind("scroll",function(e){e.stopPropagation(),e.cancelBubble=!0})},Mobi.showFlowDetailPanel=function(e,t){jm("#flowDetailPanel"+t).css("margin-left",0)},Mobi.hideFlowDetailPanel=function(e,t){jm("#flowDetailPanel"+t).css("margin-left","")},Mobi.moreOrderProductList=function(e,t){var i=jm("#orderProductList"+t),o=jm("#moreOrderProductList"+t),n=(jm("#flowDetailPanel"+t),2*(parseInt(i.find(".line_item").eq(0).height())+parseInt(i.find(".line_item").eq(0).css("padding-top")))),a=parseInt(i.find(".orderProductList_inner").eq(0).height());"0"==o.attr("type")?(i.css("height",a+"px"),o.attr("type","1"),"0"==o.attr("is_cn")?(o.removeClass("icon-more"),o.addClass("icon-less")):(o.find(".more").eq(0).hide(),o.find(".less").eq(0).show())):(i.css("height",n+"px"),o.attr("type","0"),"0"==o.attr("is_cn")?(o.removeClass("icon-less"),o.addClass("icon-more")):(o.find(".less").eq(0).hide(),o.find(".more").eq(0).show()))},Mobi.initFlowDetailHeight=function(e,t){var i=jm("#orderProductList"+t),o=jm("#flowDetailPanel"+t);if(i.css("height",""),o.css("height",""),o.attr("tmp_h",o.height()),i.find(".line_item").length>2){var n=jm("#moreOrderProductList"+t);n.attr("type","0"),"0"==n.attr("is_cn")?(n.removeClass("icon-less"),n.addClass("icon-more")):(n.find(".less").eq(0).hide(),n.find(".more").eq(0).show()),i.height(2*(parseInt(i.find(".line_item").eq(0).height())+parseInt(i.find(".line_item").eq(0).css("padding-top")))+"px")}},Mobi.initFlowButton=function(e){jm("#module"+e).find(".J-flowView").unbind().bind("click",function(){var t=jm(this).attr("_oid");Mobi.getAllFlowInfo(e,t)})},Mobi.initPayOrderImmediately=function(e){jm("#module"+e).find(".j-payOrderImmediately").unbind().bind("click",function(){var e=jm(this).attr("_oid");Mobi.mallSettle(e)})},Mobi.initOrderSureButton=function(e){jm("#module"+e).find(".J-orderSureRpt").unbind().bind("click",function(){var e=jm(this),t=(e.parent().parent(),e.attr("_oid")),i={content:LS.orderConfirmMsg,callback:function(){!function(e,t){jm.ajax({type:"post",url:"ajax/order_h.jsp",data:"cmd=setStatus&id="+t+"&status=20",error:function(){Mobi.ing(LS.js_systemError),Mobi.logMonitor(6027,!0)},success:function(e){var t=jm.parseJSON(e);t.success?(jm("#mobiPrompt").remove(),t.consumeEarnItg&&2052==Fai.top._lcid?Mobi.showItgRewardPop(t.itgName,3,t.consumeEarnItgNum,function(){setTimeout(function(){document.location.reload()},200)}):(Mobi.ing(LS.orderSureMsg,1),setTimeout(function(){document.location.reload()},200))):(Mobi.logMonitor(6027,!0),Mobi.ing(t.msg))}})}(0,t)}};jm.ajax({type:"post",url:"ajax/order_h.jsp",data:"cmd=orderHasBeenSigned&id="+t,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);t.success?t.hasSigned?(Mobi.ing(LS.orderSureMsg),setTimeout(function(){document.location.reload()},200)):Mobi.prompt(i):Mobi.ing(t.msg)}})})},Mobi.initOrderCancelButton=function(e){jm("#module"+e).find(".J-orderCancel").unbind().bind("click",function(){var e=jm(this),t=(e.parent().parent(),e.attr("_oid")),i={textClass:"confirm",content:LS.orderCancelMsg,callback:function(){!function(e,t){jm.ajax({type:"post",url:"ajax/order_h.jsp",data:"cmd=setStatus&id="+t+"&status=25",error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);t.success?(jm("#mobiPrompt").remove(),Mobi.ing(LS.js_orderCancel,1),setTimeout(function(){window.location.href="mlist.jsp"},200)):(Mobi.logMonitor(6026,!0),Mobi.ing(t.msg))}})}(0,t)}};Mobi.prompt(i)})},Mobi.initOrderDeleteButton=function(e){jm("#module"+e).find(".J-orderDelete").unbind().bind("click",function(){var e=jm(this).attr("_oid"),t={textClass:"confirm",content:LS.orderDeleteMsg,callback:function(){!function(e){jm.ajax({type:"post",url:"ajax/order_h.jsp",data:"cmd=memberDeleteOrder&id="+e,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);t.success?(jm("#mobiPrompt").remove(),Mobi.ing(LS.js_orderCancel,1),setTimeout(function(){window.location.href="mlist.jsp"},200)):Mobi.ing(t.msg)}})}(e)}};jm.ajax({type:"post",url:"ajax/order_h.jsp",data:"cmd=orderHasDelete&id="+e,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var i=jm.parseJSON(e);i.success?i.hasDelete?Mobi.ing(LS.mallStlSubmitNotFound):Mobi.prompt(t):Mobi.ing(i.msg)}})})},Mobi.initSelfRaisingVerification=function(e){var t=jm("#module"+e);t.find(".J-selfRaisingVerification").unbind().bind("click",function(){var e=jm(this),t=e.attr("_oid");"false"==(e.attr("_detail")||"false")?Mobi.logDog(201e3,1):Mobi.logDog(201e3,2);var i={triggerId:"selfRaisingVerification",pageBg:!0,pageHtml:Mobi.createSelfRaisingVerificationPop(),direction:"bottom",callback:function(){Mobi.drawSelfRaisingVerificationPop(t)},closeWebPage:"#selfRaisingVerificationBg"};Mobi.initWebPage(i),jm("#selfRaisingVerification").click()}),t.find(".J-groupBuySelfTaking").unbind().bind("click",function(){Mobi.ing("拼团成功后将生成提货凭证")})},Mobi.initIntegralMallConfirmButton=function(e,t){jm("#module"+e).find(".J_mallConfirmImSettle").unbind().bind("click",function(e){var t=jm(this),i=t.attr("_productName"),o=t.attr("_oid"),n=t.attr("_choiceCurrencyVal"),a=(t.attr("_integralMallType"),t.attr("_imUseItg")),r=t.attr("_itgName"),s=parseFloat(t.attr("_totalPrice"));isNaN(s)&&(s=0);var l={textClass:"confirm",content:"确定使用"+(s>0?n+s.toFixed(2)+"+":"")+a+r+(s>0?"换购商品":"兑换商品")+i+"?",callback:function(){window.location.href="onlinePayment.jsp?orderId="+o}};Mobi.prompt(l),e.stopPropagation()})},Mobi.initMerchantsButton=function(e){jm("#module"+e).find(".J_go2Merchant").unbind().bind("click",function(e){var t=jm(this).attr("_merchantId");window.location.href="subMerchantDetail.jsp?smId="+t,e.stopPropagation()})},Mobi.showBanksDetails=function(){if(Fai.top._banksList){var e=Fai.top._banksList,t="<div id='modifyBankList'  class='modifyBankList'>";t+="<div class='BanksDetailHeader webHeaderBg g_main_bgColor_v3'>",t+="<span class='g_close icon-gClose'></span><span class='title pageTitle'>"+LS.receAcctList,t+="</span></div>",t+="<div class='bankPanelDes'>"+LS.payTips+"</div>",t+="<div class='g_separator separatorLine'></div>";for(var i=0;i<e.length;i++){var o=e[i].acct,n=e[i].bank,a=e[i].name;leaveMsg=e[i].leaveMsg,t+="<div class='bankListArea'>",t+="<div class='bankList'>",t+="<table class='bankListTable'>",t+="<tbody>",t+="<tr>",t+="<td class='bankItemValue'>"+LS.js_orderDetailBank+"："+n+"</td>",t+="</tr>",t+="<tr>",t+="<td class='bankItemValue'>"+LS.js_orderDetailBankName+"："+a+"</td>",t+="</tr>",t+="<tr>",t+="<td class='bankItemValue'>"+LS.js_orderDetailBankAcct+"："+o+"</td>",t+="</tr>",t+="<td class='bankItemValue bankLeaveMsg' colspan='2'>"+leaveMsg+"</td>",t+="</tr>",t+="</tbody>",t+="</table>",t+="</div>",t+="</div>",i!=e.length-1&&(t+="<div class='g_breakline g_separator separatorLine'></div>")}return t+="</div>",Mobi.changeBankList(),t}},function(e,t,i){function o(){return{triggerId:"callPayListPanel",panelId:"payListPanel",callback:function(){Mobi.fixTouchPenetrate("payListPanel","callPayListPanel")},closeWebPage:"#pgListDiv .g_close",direction:"bottom",pageBg:!0}}e.initPayListPage=function(e){new Vue({el:"#payListPanel",data:function(){var t=parseInt(jm("#onlineBankType").attr("_paymode")),i=Fai.top._recomentPayMode;return{list:e,paymode:t,recomentPayMode:i}},template:"\n\t\t\t    <div id=\"payListPanel\" style=\"display:none\">\n                    <div class='pgListDiv' id='pgListDiv' style='background-color: inherit;'>\n\t\t\t\t\t\t<div class='g_close' style='width: 100%;height: 100%;'></div>\n\t\t\t\t\t\t<div id='onlinePayType' class='pgDetail onlinePayType' style=\"position: absolute;left: 0;bottom: 0;width: 100%;\">\n\t\t\t\t\t\t\t<div id='pgBox' class='pgBox' style='position: absolute;bottom: 0;z-index: 999;' @click=\"stopPropagation\">\n\t\t\t\t\t\t\t\t<div v-for=\"item in recomentPayList\" :id=\"genItemIdAttr(item)\" class='line payMode' @click='setPayOnlineType($event, item)' :_payMode='item.payMode' :_name='item.desc'>\n\t\t\t\t\t\t\t\t\t<div class='pgBoxItem'>\n\t\t\t\t\t\t\t\t\t\t<span :class='genIconCls(item)'></span>\n\t\t\t\t\t\t\t\t\t\t<a class='pgName'>{{item.desc}}\n\t\t\t\t\t\t\t\t\t\t\t<span class='icon-b0276' style='margin-left: 0.156rem;'></span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"genIconHtml(paymode, item)\"></span> \n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-for=\"item in secondList\" :id=\"genItemIdAttr(item)\" class='line payMode' @click='setPayOnlineType($event, item)' :_payMode='item.payMode' :_name='item.desc'>\n\t\t\t\t\t\t\t\t\t<div class='pgBoxItem'>\n\t\t\t\t\t\t\t\t\t\t<span :class='genIconCls(item)'></span>\n\t\t\t\t\t\t\t\t\t\t<a class='pgName'>{{item.desc}}</a>\n\t\t\t\t\t\t\t\t\t\t<span v-html=\"genIconHtml(paymode, item)\"></span> \n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t    </div>\n\t\t\t",mounted:function(){jm("#pay_line").off("click.showPayListPage").on("click.showPayListPage",function(){Mobi.showPayListPage()})},methods:{genIconHtml:function(e,t){return e==t.payMode?"<i class='faisco-icons-right g_color g_main_color_v3 J_selectPay' style='height: 2.5rem;line-height: 2.5rem;margin-left: 0.1rem;'></i>":"<i class='faisco-icons-shape11' style='font-size: 1rem;height: 2.5rem;line-height: 2.5rem;'></i>"},genItemIdAttr:function(e){return"group_"+e.payMode},setPayOnlineType:function(e,i){if(this.paymode!==i.paymode){var o=this.genItemIdAttr(i);this.paymode=i.payMode;var n=Fai.top._recomentPayMode,a=jm("#"+o),r="",s="",l=a.attr("_name");a.hasClass("payMode")?(r=a.attr("_payMode"),jm("#onlineBankType").attr("_payMode",r)):a.hasClass("bank")&&(r=a.attr("_payMode"),s=a.attr("_type"),jm("#onlineBankType").attr("_payMode",r),jm("#onlineBankType").attr("_type",s)),jm(".icon-selectedPayMode").removeAttr("class").attr("class","icon-selectedPayMode payMode"+(r>2?"Online":r)),jm("#onlineBankType").text(l),n==r?jm("#onlineBankTip").css("display","unset"):jm("#onlineBankTip").css("display","none"),jm("#pgListDiv .J_selectPay").removeAttr("style").attr("style","font-size:1rem;height:2.5rem;line-height:2.5rem;").removeAttr("class").attr("class","faisco-icons-shape11"),Mobi.hidePayListPage(),e.stopPropagation(),t("#g_body").css("overflow-y","")}},genIconCls:function(e){return"icon-payMode payMode"+(e.payMode>2?"Online":e.payMode)},stopPropagation:function(e){e.stopPropagation()}},computed:{recomentPayList:function(){this.paymode;for(var e=[],t=this.recomentPayMode,i=this.list,o=0;o<i.length;o++){var n=i[o];if(n.desc&&(1==i.length&&n.payMode,t==n.payMode||t>2&&n.payMode>2)){e.push(n);break}}return e},secondList:function(){this.paymode;for(var e=this.recomentPayMode,t=this.list,i=[],o=0;o<t.length;o++){var n=t[o];n.desc&&(e==n.payMode||e>2&&n.payMode>2||i.push(n))}return i}}})},e.showPayListPage=function(){var e=o();Mobi.showPageWithInit(e)},e.hidePayListPage=function(){var e=o();Mobi.hidePage(e)}}(Mobi,jm),function(e,t,i){e.initOrderPopUpPanel=function(){(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3||Fai.top._openThemeV3)&&jm("#assignItemline").length>0&&jm("#assignItemline").off("click.mall").on("click.mall",function(){jm("#linetitle1").click()}),commentOptions={triggerId:"selectSelfRaisingPoint",panelId:"editPointInfo",callback:function(){Mobi.fixTouchPenetrate("editPointInfo","editAddr")},closeWebPage:"#editPointInfo .g_close"},Mobi.initWebPage(commentOptions),commentOptions={triggerId:"MDSelfRaisingPointInfo",panelId:"showPointInfo",callback:function(){Mobi.fixTouchPenetrate("showPointInfo","editAddr"),jm("#showMapAuth").click()},closeWebPage:"#showPointInfo .g_close"},Mobi.initWebPage(commentOptions),commentOption={triggerId:"banks",panelId:"modifyBankList",pageHtml:Mobi.showBanksDetails(),callback:function(){Mobi.changeBankList(),Mobi.fixTouchPenetrate("modifyBankList","banks")},closeWebPage:"#modifyBankList .g_close"},Mobi.initWebPage(commentOption),commentOption={triggerId:"integralMallDeduction",panelId:"imPanelBox",pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#closeImPanelBox,#confirmBtn"},Mobi.initWebPage(commentOption),jm("#useItgLine .jz-switch").click(function(){var e=parseInt(jm("#useItg").attr("_maxUse"));jm(this).hasClass("jz-switch-checked")?(jm(this).removeClass("jz-switch-checked"),jm("#useItg").val(0)):(jm(this).addClass("jz-switch-checked"),jm("#useItg").val(e)),jm("#useItg").trigger("change"),Mobi.mallStlCalcTotal()}),null==document.querySelector(".mall_allPrice")||null==document.querySelector("#mstlBtn")||Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3||Fai.top._openThemeV3||document.querySelector(".mall_allPrice").offsetLeft==document.querySelector("#mstlBtn").offsetLeft&&jm(".orderSettle").css("margin-bottom","5.8rem")},e.fixTouchPenetrate=function(e,t){"editCusInfo"!=e&&"editAddrInfo"!=e||/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(jm("#"+e).find("input,select,textarea").bind("blur",function(){document.querySelector("body").scrollTop=0}),jm("#"+e).find("input,select,textarea").bind("focus",function(){jm("#"+e).attr("ontouchmove","return false;")}).bind("blur",function(){jm("#"+e).parent().css("position","fixed"),jm("#"+e).css("position",""),jm("#"+e).removeAttr("ontouchmove")}),jm("#areaBox").bind("touchmove",function(e){e.preventDefault()}),jm("#areaBox .J_areaHead").bind("touchmove",function(e){e.preventDefault()}),jm("#areaBox1").bind("touchmove",function(e){e.stopPropagation()}),jm("#areaBox2").bind("touchmove",function(e){e.stopPropagation()}));var i=Fai.top.document.querySelector("#"+e),o=Fai.top.document.querySelector("#webPagePanel"+t);window.ontouchmove=function(e){if(i.scrollHeight==i.offsetHeight&&"none"!=jm(o).css("display")){var t=e.target;jm(t).parents(".areaBox").length>0||jm(t).parents(".areaBox2").length>0||e.preventDefault()}};var n=1;requestAnimationFrame(function t(){var o=(i=Fai.top.document.querySelector("#"+e)).scrollHeight-i.clientHeight;o-0==n&&(n=.5);var a=i.scrollTop;0===a?i.scrollTop+=n:a===o&&(i.scrollTop-=n),requestAnimationFrame(t)})}}(Mobi,jm),Mobi,jm,jm(function(){Mobi.initAddrPropComp=function(e){new Vue({el:"#addrPropComp",template:'\n                    <div id="addrPropComp">\n                    \t<comp-addrpropitem :isAddAddr="false" :addrInfo="formAddrInfo" :item="item" v-for=\'item in addrPropInfoList\'></comp-addrpropitem>\n                    </div>\n\t\t\t\t',data:function(){return{addrPropList:[e],addrInfoList:Fai.top._addrInfoList,addrPropInfoList:Fai.top._addrPropInfoList}}})}}),Mobi.lazyLoadMDetailPdImg=function(){var e=0,t=navigator.userAgent.toLowerCase();-1!=t.indexOf("micromessenger")&&-1!=t.indexOf("iphone")&&(e=1e3),setTimeout(function(){jm(".J_lazyLoad").each(function(e,t){var i=jm(t).attr("lazy_src");jm(t).attr("src",i)})},e)},Mobi.toggleItemLine=function(e){var t=jm(e);if(t.hasClass("opened"))t.parent().find(".pgBox2Item").height(0),t.removeClass("opened");else{jm(".pgBox2Item").height(0),jm(".pgBoxItem").removeClass("opened");var i=jm(e).parent().find(".pgBox2Item .pgName").length,o=0;o=i>=6?"15rem":2.5*i+"rem",t.addClass("opened").parent().find(".pgBox2Item").height(o)}},Mobi.seeMoreGoodsInOrder=function(e){e?(jm(".vpdMoreGoods").toggle(),jm(".vpdSmText1").toggle(),jm(".vpdSmText2").toggle()):(jm(".moreGoods").toggle(),jm(".smText1").toggle(),jm(".smText2").toggle())},Mobi.seeMoreItemsInOrderList=function(e){jm(".moreGoods"+e).toggle(),jm(".smText1"+e).toggle(),jm(".smText2"+e).toggle()},Mobi.changePayMode=function(e,t){var i,o,n;commentOption={triggerId:"morePayMode",pageHtml:(i=t,o=jm("#morePayMode").attr("_paymode"),n=[],n.push("<div class='pgListDiv' id='pgListDiv' style='background-color: inherit;'>"),n.push("<div class='g_close' style='width: 100%;height: 100%;'></div>"),n.push("<div id='onlinePayType' class='pgDetail onlinePayType'>"),n.push("<div id='pgBox' class='pgBox' style='position: fixed;bottom: 0;'>"),jm.each(i,function(t){var a=i[t];if(!a.desc)return!0;n.push("<div class='line'>"),n.push("<div class='pgBoxItem' onclick='Mobi.changePayModeEvent(this);' _orderId='"+e+"' _payMode='"+a.payMode+"'><span class='icon-payMode payMode"+(a.payMode>2?"Online":a.payMode)+"'></span><a class='pgName payMode'>"+a.desc+"</a>"+(o==a.payMode?"<i class='faisco-icons-right g_color g_main_color_v3 J_selectPay' style='height: 2.5rem;line-height: 2.5rem;margin-left: 0.1rem;'></i>":"<i class='faisco-icons-shape11' style='font-size: 1rem;height: 2.5rem;line-height: 2.5rem;'></i>")+"</div>"),n.push("</div>")}),n.push("</div></div></div>"),n.join("")),callback:function(){},closeWebPage:"#pgListDiv .g_close",direction:"bottom",pageBg:!0},Mobi.initWebPage(commentOption)},Mobi.changePayModeEvent=function(e){var t=jm(e).attr("_payMode"),i=jm(e).attr("_orderId"),o={};isNaN(t)||(o.payMode=parseInt(t),jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setOrder",data:"id="+i+"&info="+jm.toJSON(o),dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(e){e.success?document.location.href="onlinePayment.jsp?orderId="+i:Mobi.ing(e.msg)}}))},Mobi.jumpToProductDetail=function(e,t){window.sessionStorage&&(window.sessionStorage._isJumpFromMlist=!0,window.sessionStorage._jumpMlistUrl=window.location.href,1==t&&Mobi.checkWindowSeStgValue(window.sessionStorage._commClickItemId)&&(window.sessionStorage._commClickItemId=!1)),window.location.href="pd.jsp?pid="+e},Mobi.setWebContainerBoxShow=function(){setTimeout(function(){jm("#footer").css("visibility","visible"),jm("#cusInfo").css("visibility","visible"),window.sessionStorage._backFromProDetail=!1},500)},Mobi.checkWindowSeStgValue=function(e){return!(!e||"false"==e)},Mobi.selectedOrderStatus=function(e,t){var i=jm("#module"+e);i.find(".orderStatusSelectDiv").click(function(){i.find(".orderStatusSelectDiv").addClass("oderStatusDivFontColor").removeClass("g_color g_main_color_v3").removeClass("g_bdColor g_main_bdColor_v3").removeClass("orderStatusBeenSelected");var o=jm(this),n=o.attr("status");o.removeClass("oderStatusDivFontColor").addClass("g_bdColor g_main_bdColor_v3").addClass("g_color g_bdColor").addClass("orderStatusBeenSelected"),Mobi.shanghuaLoading.initOrderListByStatus(e,t,n)})},Mobi.clickForSelectedOrderStatus=function(e,t){jm("#module"+e).find(".J-"+t).removeClass("oderStatusDivFontColor").addClass("g_color g_main_color_v3").addClass("g_bdColor g_main_bdColor_v3").addClass("orderStatusBeenSelected")},Mobi.initCommentBtn=function(e,t){t="true"==t;var i=jm("#module"+e),o=jm("#g_web");i.find(".J-comment").unbind().bind("click",function(){document.body.style.overflow="hidden";var e=jm(this),t=e.attr("_oid");window.sessionStorage&&(window.sessionStorage._commClickOrderId=t);var i=jm("#pd-ct-panel"+t);if(i.length>0)i.css("margin-left",0);else{var n=!1;window.sessionStorage&&Mobi.checkWindowSeStgValue(window.sessionStorage._backFromProDetail)&&(n=!0);var a={oid:t,marginFlag:n};jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getCtPanel",data:a,success:function(n){var a=jm.parseJSON(n);if(0==a.success)return Mobi.ing(a.msg),void setTimeout(function(){document.body.style.overflow="scroll"},1500);i=jm(a.html),o.append(i),setTimeout(function(){i.css("margin-left",0)},100),i.bind("scroll",function(e){e.stopPropagation(),e.cancelBubble=!0}),i.find(".loginHeader .g_close").eq(0).click(function(){0==i.find(".J-ct-item").length&&e.removeClass("orderButton").addClass("comment-txt  orderButtonHas orderButton").text(LS.commentExist),_hidePanel("pd-ct-panel"+t)}),i.find(".J-ct-item").click(function(){document.body.style.overflow="hidden";var e=jm(this),o=e.attr("_iid"),n=e.attr("_pid");window.sessionStorage&&(window.sessionStorage._commClickItemId=o);var a=jm("#pd-item-"+t+"-"+o);if(a.length>0){a.css("margin-left",0);var r=a.find(".J-ct-area");void 0!==r&&null!=r&&r.length>0&&r[0].focus()}else _initItemCommentPanel(t,o,e,i,n)}),i.find(".loginHeader.webHeaderBg").click(function(){document.body.style.overflow="scroll"}),window.sessionStorage&&Mobi.checkWindowSeStgValue(window.sessionStorage._commClickItemFlag)&&(Mobi.checkWindowSeStgValue(window.sessionStorage._commClickItemFlag),Mobi.checkWindowSeStgValue(window.sessionStorage._commClickItemId)&&setTimeout(function(){jm(".J-ct-item[_iid='"+window.sessionStorage._commClickItemId+"']").click()},30),window.sessionStorage._commClickItemFlag=!1)}})}}),window.sessionStorage&&Mobi.checkWindowSeStgValue(window.sessionStorage._backFromProDetail)?Mobi.checkWindowSeStgValue(window.sessionStorage._commClickOrderId)&&setTimeout(function(){jm(".J-comment[_oid='"+window.sessionStorage._commClickOrderId+"']").click(),window.sessionStorage._commClickItemFlag=!0,Mobi.setWebContainerBoxShow()},120):Mobi.setWebContainerBoxShow(),_hidePanel=function(e){jm("#"+e).css("margin-left","")},_initItemCommentPanel=function(e){function t(t,i,o,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,i,n,a,r){var s=n.attr("_iprice"),l=n.attr("_iname"),c=n.attr("_ipath"),d=n.attr("_maxlen"),m=n.attr("_minlen"),p=n.attr("_showflag"),u=n.attr("_comment"),h=n.attr("_pathList"),f=n.attr("_star"),g="' class='ct-panel order-ext-panel'>";if(window.sessionStorage&&Mobi.checkWindowSeStgValue(window.sessionStorage._backFromProDetail)&&(g="' class='ct-panel order-ext-panel' style='margin-left:0;'>",window.sessionStorage._backFromProDetail=!1),void 0!==p&&null!=p){void 0!==h&&null!=h&&(h=jm.parseJSON(h));var v=[],b="";if(void 0!==h&&null!=h&&h.length>0){v.push("<div class='ct-s-content-m'>"),v.push("<table>"),v.push("<tr>");for(var j=0;j<h.length;j++)v.push("<td class='s-img-f-tb'>"),v.push("<table class='s-img-tb' cellpadding='0' cellspacing='0'>"),v.push("<tr>"),v.push("<td class='s-img-bd' valign='middle'   align='center'>"),v.push("<img src='"+h[j].path+"'  class='s-img-set'>"),v.push("</td>"),v.push("</tr>"),v.push("</table>"),v.push("</td>");v.push("</tr>"),v.push("</table>"),v.push("</div>")}"[]"!=v&&(b=v.join(""));var _=[];if(t){_.push("<div class='l-comm-star'>");for(var M=0;M<5;M++)M<f?_.push("<li class='faisco-icons-star3 select_more'></li>"):_.push("<li class='faisco-icons-star3 select_less'></li>");_.push("</div>")}var y=["<div id='pd-item-",e,"-",i,g,"<div class='loginHeader webHeaderBg g_main_bgColor_v3'>","<span class='g_close icon-gClose'></span>","<span class='title  pageTitle' style='padding-right:0px;'>",LS.commentPub,"</span>","<span class='homeIcon icon-homeIcon' onclick='window.location.href=\"index.jsp\"'></span>","</div>","<div class='l-comm-item'>","<div class='d-click' onclick=Mobi.jumpToProductDetail('"+r+"',2)></div>","<div class='i-block1 i-block1-w'>","<img class='b-comm-img' src='",c,"' alt=''/>","</div>","<div class='i-block2'>","<div class='pd-n pd-n-p' >",jm.encodeHtml(l),"</div>","</div>","</div>","<div class='l-s-item'>","<div class='tipImg'>","</div>","<div class='ct-s-content'>",u,"</div>",b,_.join(""),"</div>","</div>"];y=jm(y.join("")),o.append(y),setTimeout(function(){y.css("margin-left",0);var e=y.find(".ct-s-content-m");if(void 0!==e&&null!=e)for(var t=0;t<e.length;t++){var i=e.eq(t)[0].querySelectorAll("img");void 0!==i&&null!=i&&i.length>0&&Mobi.bindCommImgShow(i,!1,0)}},100),y.bind("scroll",function(e){e.stopPropagation(),e.cancelBubble=!0}),y.find(".loginHeader .g_close").eq(0).click(function(){_hidePanel("pd-item-"+e+"-"+i)})}else{var S=5;"undefined"!=typeof _commUploadImgParam&&null!=_commUploadImgParam&&(S=_commUploadImgParam.upImgMaxNum);_=[];t&&(_=["<div class='l-star-list J-star-list'>","<li class='faisco-icons-star3'></li>","<li class='faisco-icons-star3'></li>","<li class='faisco-icons-star3'></li>","<li class='faisco-icons-star3'></li>","<li class='faisco-icons-star3'></li>","<li class='score-tip'></li>","</div>"]);y=["<div id='pd-item-",e,"-",i,g,"<div class='loginHeader webHeaderBg g_main_bgColor_v3'>","<span class='g_close icon-gClose'></span>","<span class='title  pageTitle' style='padding-right:0px;'>",LS.commentPub,"</span>","<span class='homeIcon icon-homeIcon' onclick='window.location.href=\"index.jsp\"'></span>","</div>","<div class='l-comm-item'>","<div class='d-click'  onclick=Mobi.jumpToProductDetail('"+r+"',2)></div>","<div class='i-block1 i-block1-w'>","<img class='b-comm-img' src='",c,"' alt=''/>","</div>","<div class='i-block2'>","<div class='pd-n pd-n-p'>",jm.encodeHtml(l),"</div>","</div>","</div>",_.join(""),"<div class='l-area-item'>","<div class='tipImg'></div>","<textarea class='J-ct-area g_textArea comm_input' placeholder='",LS.commentUpInTip,"' minlength='",m,"' maxlength='",d,"'></textarea>","</div>","<div class='img-area-item'>","<table cellpadding='0' cellspacing='0' id='msg_add_img_tb_"+_commUploadImgParam.countNumber+"' >","<tr>","<td id='msgBoardAddImgBtn_"+_commUploadImgParam.countNumber+"' class='comm-find-tb' maxNum='"+S+"'> ","<div  id='comm-img-swfu-placeholder-"+_commUploadImgParam.countNumber+"'>","</td> ","</tr>","</table>","</div>","<div class='l-sb-item'>","<div class='J-ct-submit g_button g_main_bgColor_v3'>",LS.commentSumit,"</div>","</div>","</div>"];if(y=jm(y.join("")),o.append(y),Mobi.setStarSelect(),setTimeout(function(){y.css("margin-left",0)},100),"true"==_commUploadImgParam.isIE){var I=_commUploadImgParam.countNumber;Mobi.mobiCommUploadImgSWF("comm-img-swfu-placeholder-"+_commUploadImgParam.countNumber,_commUploadImgParam.upImgMaxSize,_commUploadImgParam.imgType,_commUploadImgParam.upImgMaxNum,I)}else Mobi.mobiCommUploadImgHtml("comm-img-swfu-placeholder-"+_commUploadImgParam.countNumber,_commUploadImgParam.upImgMaxSize,_commUploadImgParam.imgType,_commUploadImgParam.siteMainDomain);y.bind("scroll",function(e){e.stopPropagation(),e.cancelBubble=!0}),y.find(".loginHeader .g_close").eq(0).click(function(){_hidePanel("pd-item-"+e+"-"+i)});var w=y.find(".J-ct-area");/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&jm(".J-ct-area").bind("focus",function(){jm("#pd-item-"+e+"-"+i).css("position","absolute"),jm("body").attr("ontouchmove","return false;")}).bind("blur",function(){jm("#pd-item-"+e+"-"+i).css("position",""),jm("body").removeAttr("ontouchmove")}),y.find(".J-ct-submit").click(function(){if(Fai.top._manageMode)Mobi.ing("您目前处于网站管理状态，请先退出再登录");else{var t=jm.trim(w.val());if("string"!=typeof t||""==t)return w[0].focus(),void Mobi.ing(LS.commentNotEmpty);var o=y.find(".img-area-item").find("img"),n=[];if(void 0!==o&&null!=o){var d=o.length;if(d>0)for(var m=0;m<d;m++){var p=o.eq(m);if(null!=p&&"undefined"!=p){var u={},h=p.attr("_id"),f=p.attr("_name"),g=p.attr("_file_size"),v=p.attr("_file_id"),b=Number(p.attr("_fileWidth")||0),j=Number(p.attr("_fileHeight")||0),_=Number(p.attr("_fileType")||0);u.imgId=h,u.imgName=f,u.imgSize=g,u.tempFileId=v,u.imgWidth=b,u.imgHeight=j,u.imgType=_,n.push(u)}}}var M=jm(".J-star-list").attr("_star");M||(M=5);var S={oid:e,iid:i,commImgList:JSON.stringify(n),comment:t,star:M};jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=addPC",data:S,error:function(){Mobi.ing(LS.js_systemError)},success:function(o){var n=jm.parseJSON(o);if(n.success)Mobi.ing(LS.submitSuccess,1),pdItem=a.find(".J-l-item-"+i),pdItem.find(".J-ct-item").remove(),pdItem.parent().find(".pd-comment-tipContainer").remove(),pdItem.append("<div class='orderButton' _star="+M+" _iid="+i+" _iprice='"+s+"' _ipath='"+c+"' _showFlag='check'  _iname='"+l+"' _pid='"+r+"'  _comment='"+jm.encodeHtml(t)+"' _pathList='"+n.imgsPathStr+"'>"+LS.commentView+"</div>"),pdItem.find(".orderButton").click(function(){var t=jm(this),i=t.attr("_iid"),o=t.attr("_pid"),n=jm("#pd-item-"+e+"-"+i);if(n.length>0){n.css("margin-left",0);var r=n.find(".J-ct-area");void 0!==r&&null!=r&&r.length>0&&r[0].focus()}else _initItemCommentPanel(e,i,t,a,o)}),y.remove(),n.commentEarnItg&&(n.autoOpenComm?Mobi.showItgRewardPop(n.itgName,2,n.commentEarnItgNum):Mobi.ing("<div style='text-align:center;'>评价成功！<br>待评价通过审核后,<br>即可获得奖励！</div>",-1));else{if(n.hasFW)return void Mobi.ing(n.msg);var d="";switch(n.rt){case 1:d=LS.commentError;break;case 2:d=LS.mallStlSubmitNotFound;break;case 3:d=LS.commentError;break;case 5:d=LS.paramError;break;case 7:d=LS.commentClosed;break;case 8:d=LS.commentExist;break;case 9:d=LS.commentCountLimit;break;default:d=LS.js_systemError}Mobi.ing(d)}}})}})}})},Mobi.initcommUploadImgParam=function(e,t,i,o,n,a,r,s){_commUploadImgParam={upImgMaxSize:e,imgType:t,upImgMaxNum:i,jsJquery:o,jsUpload:n,countNumber:2,swfUpload:r,isIE:s,swfObjList:[],siteMainDomain:a};var l=document.createElement("script");l.type="text/javascript",l.src=o,l.onload=function(){var e=document.createElement("script");e.src="true"==s?r:n,e.type="text/javascript",c.appendChild(e)};var c=document.documentElement||document.body;c.appendChild(l)},Mobi.showSingalInstCommImg=function(e){var t=jm("#msg_add_img_tb_"+e).eq(0)[0].querySelectorAll("img");void 0!==t&&null!=t&&t.length>0&&Mobi.bindCommImgShow(t,!0,e)},Mobi.mobiCommUploadImgSWF=function(e,t,i,o,n){var a=i.split(","),r={file_post_name:"Filedata",upload_url:"/ajax/commUpsiteimg_h.jsp",button_placeholder_id:e,file_size_limit:t+"MB",button_image_type:3,file_queue_limit:1,button_width:"50px",button_height:"50px",button_cursor:SWFUpload.CURSOR.HAND,button_image_url:_resRoot+"/image/mobi/msgUpImg/upload.png",requeue_on_error:!1,post_params:{ctrl:"Filedata",app:21,type:0,fileUploadLimit:o},file_types:a.join(";"),file_dialog_complete_handler:function(e){this._allSuccess=!1,this.startUpload()},file_queue_error_handler:function(e,t,i){switch(t){case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:Mobi.ing(LS.mobiFormSubmitCheckFileSizeErr,!0);break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:Mobi.ing(LS.mobiFormSubmitFileUploadNotAllow,!0);break;case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadOneTimeNum,"1"),!0);break;default:Mobi.ing(LS.mobiFormSubmitFileUploadReSelect,!0)}},upload_success_handler:function(e,t){var i=jQuery.parseJSON(t);this._allSuccess=i.success,this._sysResult=i.msg,i.success?(setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.onCommFileUploadEvent("upload",i,n)):Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg)},upload_error_handler:function(e,t,i){-280==t?Mobi.ing(LS.mobiFormSubmitFileUploadFileCancle,!1):-270==t?Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadFileExist,jm.encodeHtml(e.name)),!0):Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},upload_complete_handler:function(e){e.filestatus==SWFUpload.FILE_STATUS.COMPLETE?(void 0===_commUploadImgParam.swfObjList&&(_commUploadImgParam.swfObjList=[]),swfObj=_commUploadImgParam.swfObjList[n],setTimeout(function(){swfObj.startUpload()},swfObj.upload_delay)):e.filestatus==SWFUpload.FILE_STATUS.ERROR&&Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},upload_start_handler:function(e){Mobi.ing(LS.mobiFormSubmitFileUploadPrepare,!1)},view_progress:function(e,t,i,o){o=Math.ceil(t/i*100);isNaN(o)||(100==o?Mobi.ing(LS.mobiFormSubmitFileUploadIng+o+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+o+"%",!1))}};void 0===_commUploadImgParam.swfObjList&&(_commUploadImgParam.swfObjList=[]),_commUploadImgParam.swfObjList[n]=SWFUploadCreator.create(r),_commUploadImgParam.countNumber++},Mobi.mobiCommUploadImgHtml=function(e,t,i,o){var n=i.split(","),a=_commUploadImgParam.countNumber,r={siteFree:!1,updateUrlViewRes:"",auto:!0,fileTypeExts:n.join(";"),multi:!1,fileSizeLimit:1024*t*1024,breakPoints:!0,saveInfoLocal:!1,showUploadedPercent:!0,removeTimeout:9999999,getFileSizeUrlFlag:!0,post_params:{app:21,type:0,fileUploadLimit:t,isSiteForm:!0,_TOKEN:jm("#_TOKEN").attr("value")},isOrnotButton:!0,buttonText:"",uploader:'/ajax/commUpsiteimg_h.jsp?cmd="mobiUpload"',onUploadStart:function(e){_uTime=(new Date).getTime()},onUploadSuccess:function(e,t){var i=jm.parseJSON(t);i.success?(s({status:"end",id:e.id,title:"上传成功。"}),setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.onCommFileUploadEvent("upload",i,a)):(s({status:"end",id:e.id,title:i.msg}),Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg))},onUploadError:function(e,t){jm("#progressBody_ "+e.id).remove(),jm("#progressWrap_"+e.id).remove(),Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name))),_uTime=(new Date).getTime()-_uTime},view_progress:function(e){e=Math.ceil(e);isNaN(e)||(100==e?Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!1))}};function s(e){if(!isNaN(Math.round(e.percent)))if("start"==e.status){var t=['<div id="progressBody_'+e.id+'" class="bodyDisable"></div>','<div id="progressWrap_'+e.id+'" class="bodyProgressWrap">','<div class="progressCenter"></div>','<div class="progressIngBody">','<div id="progressTitle'+e.id+'" class="progressIngTitle">'+e.title+"</div>",'<div class="progressIngMission">','<div class="mission"><div id="progress'+e.id+'" class="progress" style="width:1%;"></div></div>','<div id="progressNum'+e.id+'" class="progressNum">0%</div>',"</div>",'<div class="progressInfo"><span id="progressTips'+e.id+'" class="progressFileSize"></span><a class="progressCancel" href="javascript:uploadCancel(\''+e.id+"');\">取消</a></div>","</div>","</div>"];jm("body").append(t.join(""))}else"ing"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progress"+e.id).css("width",Math.round(e.percent)+"%"),jm("#progressNum"+e.id).html(Math.round(e.percent)+"%")):"end"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progressBody_"+e.id).remove(),jm("#progressWrap_"+e.id).remove()):"error"==e.status&&jm("#progress"+e.id).addClass("progressError")}upload=jm("#"+e).uploadify(r);var l="file_upload_"+_commUploadImgParam.countNumber,c="select_btn_"+_commUploadImgParam.countNumber;jm("#file_upload_1-button").attr("id",l),jm("#select_btn_1").attr("id",c),_commUploadImgParam.countNumber++},Mobi.onCommFileUploadEvent=function(e,t,i){if("upload"==e){var o=t.id,n=t.name,a=t.size,r=t.path,s=(t.pathSmall,t.fileId),l=(t.width,t.height,t.type||0),c=t.width||0,d=t.height||0;Mobi.mListCommImgTableCtrl(r,n,o,a,s,i,l,c,d)}},Mobi.mListCommImgTableCtrl=function(e,t,i,o,n,a,r,s,l){var c=jm("#msg_add_img_tb_"+a).eq(0),d=c.find(".comm-find-tb").length,m=c.find(".comm-find-tb").eq(d-1),p=m.attr("maxNum");if(!(parseInt(d-1)>=p)){var u=[];u.push("<table style='width:100%; height:100%; table-layout:fixed;' cellpadding='0'  cellspacing='0'>"),u.push(" <tr>"),u.push("    <td valign='middle'   align='center' class='comm-show-td-bd'>"),u.push("      <img src='"+e+"'  alt=''  _name='"+t+"' _id='"+i+"' _file_size='"+o+"' _file_id='"+n+"'  _fileWidth='"+s+"'  _fileHeight='"+l+"'  _fileType='"+r+"' class='comm-up-set'>"),u.push("     </td>"),u.push(" </tr>"),u.push("</table>"),u.push("<div class='comm-up-div'>"),u.push("  <span onclick=Mobi.mListCommTableImgDelete(this,'"+a+"') class='comm-up-div-set'/>"),u.push("</div>");var h=jm(document.createElement("td"));h.addClass("comm-find-tb comm-find-tb-remove"),h.append(jm(u.join(""))),h.insertBefore(m),d=c.find(".comm-find-tb").length,parseInt(d-1)>=p&&m.css("display","none"),Mobi.showSingalInstCommImg(a)}},Mobi.mListCommTableImgDelete=function(e,t){for(var i=jm("#msg_add_img_tb_"+t).eq(0),o=i.find(".comm-find-tb").length,n=0;n<o;n++)if(i.find(".comm-find-tb").eq(n).find(".comm-up-div-set")[0]===e){i.find(".comm-find-tb").eq(n).remove();break}o=i.find(".comm-find-tb").length;var a=i.find(".comm-find-tb").eq(o-1);o<=a.attr("maxNum")&&a.css("display","block"),Mobi.showSingalInstCommImg(t)},Mobi.calculate=function(e,t,i){var o=0,n=0,a=0;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}switch(i){case 0:o=(e*(r=Math.pow(10,Math.max(n,a)))+t*r)/r;break;case 1:var r;o=((e*(r=Math.pow(10,Math.max(n,a)))-t*r)/r).toFixed(n>=a?n:a);break;case 2:o=s(e,t);break;case 3:o=s(Number(e.toString().replace(".",""))/Number(t.toString().replace(".","")),Math.pow(10,a-n))}return o;function s(e,t){var i=0;try{i+=e.toString().split(".")[1].length}catch(e){}try{i+=t.toString().split(".")[1].length}catch(e){}return Number(e.toString().replace(".",""))*Number(t.toString().replace(".",""))/Math.pow(10,i)}},Mobi.mallProductDetailFixedBar=function(){if(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3){jm("#fixedAreaBox").find(".productMallShop").remove(),jm(".productMallShop").appendTo(jm("#fixedAreaBox")),jm(".productNewDetailPanel .productDetailTabPanel .tabBody").css("padding-bottom","2rem");var e=Fai.top._onlineServiceJson.phone,t=Fai.top._onlineServiceJson.qq;Fai.top._onlineServiceJson.baiduBridge,e&&e.phoneInfo&&e.phoneInfo.length,t&&t.qqInfo&&t.qqInfo.length;jm("#serviceBtnOuter").show()}else Fai.top._manageMode&&jm("#serviceBtnOuter").length>0&&(jm("#fixedAreaBox").find(".productMallShop").remove(),jm("#serviceBtnOuter").appendTo(jm("#fixedAreaBox")),jm("#serviceBtnOuter").css("display","block"))},Mobi.refreshMallCartNum=function(){jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getMallCartProductNum",data:"",success:function(e){var t=jm.parseJSON(e);if(t.success){if(1==t.rt){var i=jm.trim(t.productAmount);if(i=i>99?"99+":i,jm("#mallCartIcon .proNum").text("("+i+")"),i>0||"99+"==i){jm(".j_mallCartProductNum").text(i),jm(".j_mallCartProductNum").show();var o=jm(".J_mall_cart_icon"),n=jm(".J_mall_cart_nav"),a="none"!=jm(".J_nav_icon_wrap").css("display");n.each(function(){0==o.length&&(a?(wrap=jm(this).find(".J_nav_icon_wrap"),wrap.append("<span class='u_nav_mall_cart_icon g_main_bgColor_v3 J_mall_cart_icon'>"+i+"</span>")):(wrap=jm(this).find(".J_text_wrap"),wrap.append("<span class='g_main_color_v3 J_mall_cart_icon u_nav_mall_cart_text'>("+i+")</span>"))),o.text(i),o.show()})}else jm(".j_mallCartProductNum").hide(),jm("#mallCartProductNumParent").hide()}}else jm(".j_mallCartProductNum").hide(),jm("#mallCartProductNumParent").hide()}})},Mobi.initRefundDetail=function(e,t,i,o){jm("#backToRemark").click(function(){jm("#editRemark").hide(),jm("#remarkListContainer").show()}),jm("#leaveMsgBtn").click(function(){jm("#remarkListContainer").hide(),jm("#editRemark").show()}),jm("#showRemark").click(function(){jm("#refundDetail").hide(),jm("#remarkListContainer").show()}),jm("#backToDetail").click(function(){jm("#remarkListContainer").hide(),jm("#refundDetail").show()}),jm("#refundEditFlow").click(function(){jm("#refundDetail").hide(),jm("#refundFlowEditContainer").show()}),jm("#flowBackToDetail").click(function(){jm("#refundFlowEditContainer").hide(),jm("#refundDetail").show()}),jm(".J_delBtn").on("click.delRefundIcon",function(){jm(this).parent().remove(),jm("#uploadRefundPicBtn").css("display","inline-block")});var n=!1;jm("#submitRemark").click(function(){if(!n){var o=jm("#refundRemarkArea").val();o.length>200?Mobi.ing(LS.refundRemarkTooLong):0!=o.length?(n=!0,Mobi.ing(LS.refundRemarkSubmiting),jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setRefundRemark",data:"orderId="+e+"&speaker=1&itemId="+t+"&remark="+jm.encodeUrl(o),error:function(){n=!1,Mobi.ing(LS.js_systemError)},success:function(e){if((e=jm.parseJSON(e)).success){Mobi.ing(LS.submitSuccess);var t=new Date(e.remarkTime),a=t.getFullYear(),r=t.getMonth()+1,s=t.getDate(),l=t.getHours(),c=t.getMinutes(),d=t.getSeconds(),m="";m+="<div class='refundItem memberContent'>",m+="<div class='icon-arrow'></div>",m+="<div class='remarkTitle'>",m+="<div class='item1'>"+i+"</div>",m+="<div class='item2'>"+(a+"-"+r+"-"+s+" "+l+":"+c+":"+d)+"</div>",m+="</div>",m+="<div class='remarkStatus'>"+jm.encodeHtml(o)+"</div>",m+="</div>",jm("#remarkList").prepend(m),jm("#editRemark").hide(),jm("#remarkListContainer").show(),jm("#refundRemarkArea").val(""),n=!1}else Mobi.ing(e.msg,!0),n=!1}})):Mobi.ing(LS.refundRemarkNotEmpty)}});var a={textClass:"confirm",content:LS.refundCancelTips,callback:function(){jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setRefundStatus&type=del&nowStatus="+o,data:"orderId="+e+"&itemId="+t,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){(e=jm.parseJSON(e)).success?location.reload():Mobi.ing(e.msg,!0)}})}};jm("#cancelRefund").click(function(){Mobi.prompt(a)});var r=!1;jm("#editRefundInfo").click(function(){r&&(jm("#refundEditContainer").show(),jm("#refundDetail").hide()),n||(n=!0,jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setRefundStatus&type=edit&nowStatus="+o,data:"orderId="+e+"&itemId="+t,error:function(){n=!1,Fai.ing(LS.js_systemError)},success:function(i){(i=jm.parseJSON(i)).success?(jm("#refundEditContainer").show(),jm("#refundDetail").hide(),r=!0,Mobi.refundDetailSubmit(e,t,15)):(Mobi.ing(i.msg,!0),n=!1)}}))}),jm("#refundFlowSub").click(function(){if(!n){var i=jm.trim(jm("#flowName").val());if(i)if(i.length>30)Mobi.ing(LS.refundFlowNameTooLong);else{var a=jm.trim(jm("#flowId").val());if(a)if(a.length>30)Mobi.ing(LS.refundFlowCodeTooLong);else{var r=jm.trim(jm("#refundPhone").val());if(r)if(r.length>30)Mobi.ing(LS.refundPhoneTooLong);else{var s=jm.trim(jm("#flowDetail").val());if(s.length>200)Mobi.ing(LS.refundFlowDetailTooLong);else{n=!0;var l={company:i,flowId:a,phone:r,refundArea:s};if(jm(".J_picDiv").length>0){for(var c=[],d=jm(".J_picDiv"),m=0;m<d.length;m++){var p=jm(d[m]),u=p.attr("_fileId");if(u){var h={ii:u},f=p.attr("_tmpFileId");f&&(h.in=p.attr("_fileName"),h.tfi=f,h.is=p.attr("_fileSize"),h.iw=Number(p.attr("_fileWidth")||0),h.ih=Number(p.attr("_fileHeight")||0),h.it=Number(p.attr("_fileType")||0)),c.push(h)}}c.length>0&&(l.flowImgList=c)}jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setRefundFlow&orderId="+e+"&itemId="+t+"&nowStatus="+o,data:"flowInfo="+jm.encodeUrl(jm.toJSON(l)),error:function(){n=!1,Mobi.ing(LS.js_systemError)},success:function(e){(e=jm.parseJSON(e)).success?(Mobi.ing(LS.submitSuccess),location.reload()):(Mobi.ing(e.msg),n=!1)}})}}else Mobi.ing(LS.refundNeedPhone)}else Mobi.ing(LS.js_refundEnterFlowCode)}else Mobi.ing(LS.refundEnterFlowName)}})},Mobi.initRefundPicUpload=function(e,t,i,o,n,a){var r=document.createElement("script");r.type="text/javascript",r.src=n;var s=document.documentElement||document.body;r.onload=function(){var n=document.createElement("script");n.src=a,n.type="text/javascript",s.appendChild(n),setTimeout(function(){Mobi.mobiRefundUpload(e,t,i,o)},1e3)},s.appendChild(r)},Mobi.mobiRefundUpload=function(e,t,i,o){var n={siteFree:!1,updateUrlViewRes:"",auto:!0,fileTypeExts:i.split(",").join(";"),multi:!1,fileSizeLimit:1024*t*1024,breakPoints:!0,saveInfoLocal:!1,showUploadedPercent:!0,removeTimeout:9999999,getFileSizeUrlFlag:!0,post_params:{app:21,type:0,fileUploadLimit:t,isSiteForm:!0,_TOKEN:jm("#_TOKEN").attr("value")},isOrnotButton:!0,buttonText:"",uploader:'ajax/commUpsiteimg_h.jsp?cmd="mobiUpload"',onUploadStart:function(e){_uTime=(new Date).getTime()},onUploadSuccess:function(e,t){var i=jm.parseJSON(t);i.success?(a({status:"end",id:e.id,title:"上传成功。"}),setTimeout(function(){Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSucess,jm.encodeHtml(e.name)),!0)},1800),Mobi.refundPicUploadCallBack(i)):(a({status:"end",id:e.id,title:i.msg}),Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg))},onUploadError:function(e,t){jm("#progressBody_ "+e.id).remove(),jm("#progressWrap_"+e.id).remove(),Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name))),_uTime=(new Date).getTime()-_uTime},view_progress:function(e){e=Math.ceil(e);isNaN(e)||(100==e?Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!1))}};function a(e){if(!isNaN(Math.round(e.percent)))if("start"==e.status){var t=['<div id="progressBody_'+e.id+'" class="bodyDisable"></div>','<div id="progressWrap_'+e.id+'" class="bodyProgressWrap">','<div class="progressCenter"></div>','<div class="progressIngBody">','<div id="progressTitle'+e.id+'" class="progressIngTitle">'+e.title+"</div>",'<div class="progressIngMission">','<div class="mission"><div id="progress'+e.id+'" class="progress" style="width:1%;"></div></div>','<div id="progressNum'+e.id+'" class="progressNum">0%</div>',"</div>",'<div class="progressInfo"><span id="progressTips'+e.id+'" class="progressFileSize"></span><a class="progressCancel" href="javascript:uploadCancel(\''+e.id+"');\">取消</a></div>","</div>","</div>"];jm("body").append(t.join(""))}else"ing"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progress"+e.id).css("width",Math.round(e.percent)+"%"),jm("#progressNum"+e.id).html(Math.round(e.percent)+"%")):"end"==e.status?(jm("#progressTitle"+e.id).text(e.title),jm("#progressBody_"+e.id).remove(),jm("#progressWrap_"+e.id).remove()):"error"==e.status&&jm("#progress"+e.id).addClass("progressError")}upload=jm("#"+e).uploadify(n)},Mobi.refundPicUploadCallBack=function(e){var t=e.id,i=e.name,o=e.size,n=e.path,a=(e.pathSmall,"");a+="<div class='picDiv J_picDiv' _tmpFileId='"+t+"' _fileName='"+i+"' _fileSize='"+o+"' _fileId='"+e.fileId+"'  _fileWidth='"+(e.width||0)+"'  _fileHeight='"+(e.height||0)+"'  _fileType='"+(e.type||0)+"'>",a+="<img src='"+n+"' class='refundImg'/>",a+="<span class='delBtn J_delBtn'>-</span>",a+="</div>";var r=jm(".J_picDiv").length;r>=4&&jm("#uploadRefundPicBtn").hide(),r<5&&jQuery("#uploadRefundPicBtn").before(a),jm(".J_delBtn").off("click.delRefundIcon").on("click.delRefundIcon",function(){jm(this).parent().remove(),jm("#uploadRefundPicBtn").css("display","inline-block")})},Mobi.refundDetailSubmit=function(e,t,i,o,n){var a;jm("#refundType").change(function(){var e=jm("#refundType").val();0==e?jm("#hasRecvGoodLine").show():1==e&&jm("#hasRecvGoodLine").hide()}),jm("#refundDetailSub").click(function(){if(!a){var r=jm("#refundPrice").val(),s=parseFloat(r);if(o){if(0==n){if(isNaN(s))return void Mobi.ing(LS.refundPriceErr);if(s<0)return void Mobi.ing(LS.refundPriceErr);if(parseFloat(jm("#refundPrice").attr("_max"))<s)return void Mobi.ing(LS.refundPriceTooMuchErr)}}else{if(isNaN(s))return void Mobi.ing(LS.refundPriceErr);if(s<0)return void Mobi.ing(LS.refundPriceErr);if(parseFloat(jm("#refundPrice").attr("_max"))<s)return void Mobi.ing(LS.refundPriceTooMuchErr)}var l=jm("#refundPhone").val();if(0!=jm.trim(l).length){var c=jm("#refundReason").val();if(0!=jm.trim(c).length){var d=jm("#refundType").val(),m={};m.refundType=parseInt(d),m.refundPrice=s,m.refundPhone=l,m.refundReason=c;var p=jm("#hasRecvGood");if(1==p.length&&"none"!=p.css("display")){var u=p.val();m.hasRecvGood="1"==u}if(jm(".J_picDiv").length>0){for(var h=[],f=jm(".J_picDiv"),g=0;g<f.length;g++){var v=jm(f[g]),b=v.attr("_fileId");if(b){var j={ii:b},_=v.attr("_tmpFileId");_&&(j.in=v.attr("_fileName"),j.tfi=_,j.is=v.attr("_fileSize"),j.iw=Number(v.attr("_fileWidth")||0),j.ih=Number(v.attr("_fileHeight")||0),j.it=Number(v.attr("_fileType")||0)),h.push(j)}}h.length>0&&(m.refundImgList=h)}a=!0,jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setOrderNoRefund&orderId="+e+"&itemId="+t+"&nowStatus="+i,data:"refundInfo="+jm.encodeUrl(jm.toJSON(m)),error:function(){a=!1,Mobi.ing(LS.js_systemError)},success:function(e){(e=jm.parseJSON(e)).success?location.reload():(Mobi.ing(e.msg,!0),a=!1)}})}else Mobi.ing(LS.refundEnterReason)}else Mobi.ing(LS.refundNeedPhone)}})},Mobi.initOrderPropDateType=function(e){var t=e.dateSetting,i=1==(null==t.type?0:t.type);if(Mobi.initmobiFormTimeBtn({moduleId:e.moduleId,siteFormItemId:e.siteFormItemId,minDate:new Date,yearChangeable:!0,monthChangeable:!0,swipeable:!0,placeholder:LS.mallPleaseChoose,dateSetting:t}),i&&jm("<span class='orderPropUtil' id='Mobi"+e.moduleId+"CalendarInput"+e.siteFormItemId+"'>"+LS.to+"</span>\n").insertAfter("#module"+e.moduleId+" #orderPropId"+e.siteFormItemId+" .fk-dateInputMaskWrap"),"mstl"==e.panel){var o=e.defaultDateTime,n="#Mobi"+e.moduleId+"Calendar"+e.siteFormItemId+"Pluginsinput",a="#Mobi"+e.moduleId+"Calendar"+e.siteFormItemId+"Plugins_endinput";jm(n).addClass("propItemValue g_input").css({border:"0",outline:"none",height:"2.25rem",color:"#333"}).val(o.s||""),i?jm(n).css("width","5rem"):jm(n).css("width","13rem"),jm(n).attr("proptype",9).attr("_required",e.required).attr("_field",e.field).attr("_prop",e.name).val(o.s||""),jm(a).addClass("g_input").css({width:"5rem",border:"0",outline:"none",height:"2.25rem",color:"#333"}).val(o.e||"")}else{n="#Mobi"+e.moduleId+"Calendar"+e.siteFormItemId+"Pluginsinput",a="#Mobi"+e.moduleId+"Calendar"+e.siteFormItemId+"Plugins_endinput";i?jm(n).addClass("g_input propItemValue").css("width","8rem"):jm(n).addClass("g_input propItemValue").css("width","12rem"),jm(n).attr("proptype",9).attr("_required",e.required).attr("_field",e.field).attr("_prop",e.name),jm(a).addClass("orderPropTimeEndInput")}jm(".editPanel .fk-dateInputMask,.noAddrPropInfoContain .fk-dateInputMask").css({position:"absolute",top:"0",height:"100%",width:"100%"})},Mobi.initNewGuestGiftInfo=function(e){jm.ajax({type:"post",url:"ajax/newGuestGift_h.jsp?cmd=loadModuleDom",data:"printerOptions="+jm.encodeUrl(jm.toJSON(e)),error:function(){},success:function(e){if((e=jm.parseJSON(e)).success){var t=jm.parseJSON(e.rtInfo);jm("#J_newGuestGiftBtn").children().remove(),t.dom.btn&&jm("#J_newGuestGiftBtn").append(t.dom.btn),jm("#J_newGuestGiftPage").children().remove(),t.dom.page&&jm("#J_newGuestGiftPage").append(t.dom.page),jm(".J_showGiftPage").bind("click",function(){jm(".newGuestGiftSreen").show(),jm(".newGuestGiftContainer").show()}),jm(".J_hiddenGiftPage").bind("click",function(){jm(".newGuestGiftSreen").hide(),jm(".newGuestGiftContainer").hide()}),jm(".J_receiveBtn").bind("click",function(){if(1==Fai.top._manageMode){var e=[];e.push('<div class="mobiCouponMsgPanl2">'),e.push('<div class="mobiCouponMsg">'),e.push('<div class="fTop">领取失败</div>'),e.push('<div class="fBottom">当前为管理状态!</div>'),e.push("</div>"),e.push("</div>"),popupCouponMsg(e.join(""))}else 0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+Fai.top.location.href)});var i=jm(".newGuestGiftContainer .giftItem").length||0;1==i?jm(".newGuestGiftContainer").css("top","14%"):2==i?jm(".newGuestGiftContainer").css("top","10%"):jm(".newGuestGiftContainer").css("top","3%"),jm(".newGuestGiftContainer .giftItem").each(function(){jm(this).bind("click",function(){if(Fai.top._manageMode)Mobi.ing("当前为管理状态");else{var e=jm(this).attr("couponid");Fai.top.location.href="pr.jsp?couponId="+e}})})}}})},Mobi.initPaymentGiftInfo=function(e){jm.ajax({type:"post",url:"ajax/paymentGift_h.jsp?cmd=loadModuleDom",data:"printerOptions="+jm.encodeUrl(jm.toJSON(e)),error:function(){},success:function(e){if((e=jm.parseJSON(e)).success){var t=jm.parseJSON(e.rtInfo);jm("#J_paymentGiftPage").children().remove(),t.dom.page&&jm("#J_paymentGiftPage").append(t.dom.page),jm(".paymentGiftiftPanelBg").bind("click",function(){jm(".paymentGiftiftPanelBg").hide(),jm(".paymentGiftiftPanel").hide()}),jm(".btn").bind("click",function(){jm(".paymentGiftiftPanelBg").hide(),jm(".paymentGiftiftPanel").hide()})}}})},Mobi.setCpTriangle=function(){var e=jm(".cpCurrPriceTip").css("background-color"),t=jm(".cpCurrPriceTip").css("width");t=parseFloat(t.substring(0,t.indexOf("p"))),t/=40;var i=parseFloat(t/2+.1);jm(".cpCurrPriceTipTriangle").css("border-top-color",e),jm(".cpCurrPriceTipTriangle").css("left",i+"rem"),jm(".cpCurrPriceTipTriangle").css("top",".9rem"),jm(".cpCurrPriceTipTriangle").css("display","inline-block")},Mobi.initCutPriceRibbon=function(e,t,i,o){setInterval(function(){var n=(new Date).getTime(),a=0==t?i-n:o-n,r=Mobi.translateDiffTime(a),s="距活动"+(0==t?"开始":"结束")+"仅剩："+r;jm(".imgRibbon"+e).find("span").text(s)},1e3)},Mobi.initCutPriceDetailCD=function(e,t,i){e<10?setInterval(function(){var o=(new Date).getTime(),n=0==e?t-o:i-o,a=Mobi.translateDiffTime(n),r="距活动"+(0==e?"开始":"结束")+"仅剩："+a;jm(".cpCountDown").text(r)},1e3):jm(".cpCountDown").text("活动已结束"),jm(".icon-cutPriceToIndex").bind("click",function(){Fai.top.document.location.href="/"})},Mobi.marketingPdInterval=null,Mobi.initMarketPdDetail=function(e,t,i,o,n,a){window.onload=function(){jm(".showSaleTimeImg").css("display","block")},0!=e?(jm(".J_salePromotionNewMessage").html(LS.salePromotionNewEndMessage),"secKill"==a&&jm(".J_salePromotionNewMessage").html("距秒杀结束还有：")):"secKill"==a&&jm(".J_salePromotionNewMessage").html("距秒杀开始还有："),(o||Fai.top._manageMode)&&1!=n&&(jm(".J_salePromotionDay").html(LS.salePromotionDay),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html(""));var r="",s="仅剩：";"cutPrice"==a?r="砍价":"secKill"==a&&(r="秒杀",s="还有：");var l=null;Mobi.marketingPdInterval&&clearInterval(Mobi.marketingPdInterval),Mobi.marketingPdInterval=setInterval(function(){var d=(new Date).getTime(),m=0==e?t-d:i-d,p=Mobi.translateDiffTime(m),u=0==e?"开始":"结束",h="距"+r+"活动"+u+s+p,f="距"+r+"活动"+u+"仅剩：";if(0==e&&(o||Fai.top._manageMode)&&1!=n&&(jm(".J_showCountDownClass").html("&nbsp;&nbsp;"+h),jm(".J_salePromotionNewMessage").html(f)),o&&!Fai.top._manageMode&&1!=n||jm(".showSaleTimeClass").html("&nbsp;&nbsp;"+h),(o||Fai.top._manageMode)&&1!=n){var g=p.split(/[^0-9]/gi),v=g[0],b=g[1],j=g[2],_=g[3];v<10&&(v="0"+v),b<10&&(b="0"+b),j<10&&(j="0"+j),_<10&&(_="0"+_),"secKill"==a?0==e?(jm(".J_salePromotionDay").html("天"),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html(""),jm(".J_salePromotionDayNum").html(v),jm(".J_salePromotionHourNum").html(b),jm(".J_salePromotionMinuteNum").html(j),jm(".J_salePromotionSecondNum").html(_),l&&clearInterval(l)):(jm(".J_salePromotionDay").html("天"),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html("."),jm(".J_salePromotionMilliSecond").html(""),jm(".J_salePromotionDayNum").html(v),jm(".J_salePromotionHourNum").html(b),jm(".J_salePromotionMinuteNum").html(j),jm(".J_salePromotionSecondNum").html(_),jm(".showNewThemeSaleTimeClass").hasClass("showMillisTime")||jm(".showNewThemeSaleTimeClass").addClass("showMillisTime"),c()):(jm(".J_salePromotionDayNum").html(v),jm(".J_salePromotionHourNum").html(b),jm(".J_salePromotionMinuteNum").html(j),jm(".J_salePromotionSecondNum").html(_)),"00"==v?(jm(".J_salePromotionDay").css("display","none"),jm(".J_salePromotionDayNum").css("display","none")):jm(".J_salePromotionDayNum").html(v)}m<=0&&"secKill"==a&&(window.location.reload(),clearInterval(Mobi.marketingPdInterval),l&&clearInterval(l))},1e3);var c=function(){var e=[9,8,7,6,5,4,3,2,1,0],t=0;l=setInterval(function(){jm(".J_salePromotionMilliSecondNum").html(e[t]),++t>=10&&(t=0)},100)}},Mobi.secKillModuleInterVal=null,Mobi.secKillModuleIdList=[],Mobi.initSecKillCountDown=function(e,t,i){var o="",n="",a=(new Date).getTime()-i;null!=Mobi.secKillModuleInterVal&&clearInterval(Mobi.secKillModuleInterVal),Mobi.secKillModuleIdList.push(e),Mobi.secKillModuleInterVal=setInterval(function(){for(var e=(new Date).getTime(),t=0;t<Mobi.secKillModuleIdList.length;t++){var i=Mobi.secKillModuleIdList[t];jm("#module"+i).find(".J_countTime").each(function(t,i){var r=jm(i).attr("startTime"),s=jm(i).attr("endTime"),l=jm(i).attr("moduleStyle");1==l||3==l?(o="%s开抢",n="%s结束"):2==l&&(o="距离活动开始：%s",n="距离活动结束：%s");var c=r-e>0?r-e:s-e;c-=a;var d=Mobi.translateDiffTime(c,["天",":",":",""],!0,!0);if(r-e>0)d=o.replace("%s",d),jm(i).hasClass("countTimeBg")||jm(i).addClass("countTimeBg");else if(s-e>0)d=n.replace("%s",d),jm(i).hasClass("countTimeBg")||jm(i).addClass("countTimeBg");else{if(!(s-e<=0))return;d="",jm(i).hasClass("countTimeBg")&&jm(i).removeClass("countTimeBg")}jm(i).html(d)})}},1e3)},Mobi.translateDiffTime=function(e,t,i,o){t&&4==t.length||(t=["天",":",":",""]);var n=[[t[0],864e5],[t[1],36e5],[t[2],6e4],[t[3],1e3]],a="";return jm.each(n,function(t,n){var r=Math.floor(e/n[1]);0==t&&o&&0==r||(a+=1==(r+"").length&&i?"0"+r+n[0]:r+n[0],e-=r*n[1])}),a},Mobi.cutPrice=function(e,t){var i="cpId="+e+"&pdId="+t,o=[],n=jm(".J-op"),a=!0;jm(n).each(function(){var e=jm(this),t=e.attr("option_name"),i=e.attr("data"),n=e.attr("type"),r=e.attr("option_data");if(isTime=e.attr("isTime"),"true"===isTime){var s=Mobi.priceCalendar.getSelected();if(null==s||""===s||void 0===s)return Mobi.ing(jm.format(LS.mallCartChoiceItemError,jm.encodeHtml(t))),a=!1,!1;(l={}).name=i,l.value=s,null!=n&&(l.name=i.replace(/^opIndept/,""),l.type=parseInt(n)),o.push(l)}else{if(!r)return Mobi.ing(jm.format(LS.mallCartChoiceItemError,jm.encodeHtml(t))),a=!1,!1;var l;(l={}).name=i,l.value=parseInt(r),null!=n&&(l.name=i.replace(/^opIndept/,""),l.type=parseInt(n)),o.push(l)}});var r="oldOptionsStr";if(r+=t,"null"!=Mobi.optionsStr[r]&&Mobi.optionsStr[r]){for(var s=Mobi.optionsStr[r].split("_"),l=[],c=0;c<s.length;c++)for(var d=0;d<o.length;d++)o[d].name==s[c]&&l.push(o[d]);o=l}if(!a)return Mobi.mallBuying[t]=!1,!1;o.length>0&&(i+="&optionList="+jm.encodeUrl(jm.toJSON(o))),jm.ajax({type:"post",url:"ajax/cutPrice_h.jsp?cmd=cutPrice",data:i,error:function(){Mobi.ing(LS.js_systemError)},success:function(i){if((i=jm.parseJSON(i)).success){var o=!0;i.alreadyHave&&(o=!1);var n=i.cpDetailId,a=i.memId;Mobi.setCpDetailCookie(e,n,a),location.href="cpDetail.jsp?cpId="+e+"&cpDetailId="+n+"&pdId="+t+"&isInit=true&showAnime="+o}else if(-100==i.rt){var r="login.jsp?returnUrl="+jm.encodeUrl(jm.getUrlRoot(location.href))+"&errno=11";location.href=r}else Mobi.ing(LS.js_argsError)}})},Mobi.showCutPriceAnime=function(e,t,i,o){Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight;var n="";n+="<div style='display: flex; flex-flow: column; justify-content: center; align-items: center; margin: 0 auto; width: 13rem; height: 13rem; z-index: 9999; background: url("+_resRoot+"/image/cutPricePopup.png) no-repeat; background-size: contain;'>",n+="    <div style='display: flex; flex-flow: column; margin-top: 6rem; margin-bottom: 1.5rem;'>",n+="        <div style='display: inline-block; font-size: .75rem; color: #333; text-align: center;'>厉害了！你一出手</div>";var a="自己";e||(a="好友"),n+="        <div style='display: inline-block; font-size: .75rem; color: #333; text-align: center; line-height: 1.2rem;'>就帮"+a+"砍掉了<span style='display: inline-block; font-size: .9rem; color: #ff4444; position: relative; top: .08rem;'>"+o+i+"</span></div>",n+="    </div>";var r=function(){};e?(n+="    <div class='J-prompt-callback' style='display: inline-block; width: 7.605rem; height: 3rem; z-index: 9999; text-align: center; background: url("+_resRoot+"/image/initCpBtn.png) no-repeat; background-size: contain; cursor: pointer;'></div>",r=function(){jm(".J_cpInvite").click()}):(n+="    <div class='J-prompt-callback' style='display: inline-block; width: 7.605rem; height: 3rem; z-index: 9999; text-align: center; background: url("+_resRoot+"/image/partiCpBtn.png) no-repeat; background-size: contain; cursor: pointer;'></div>",r=function(){location.href="pd.jsp?pid="+t}),n+="</div>",n+="<div class='J-prompt-cancel' style='display: inline-block; width: 2rem; height: 2rem; margin-top: 1rem; z-index: 9999; cursor: pointer;'>",n+="    <img src='"+_resRoot+"/image/hdCouponClose.png'>",n+="</div>";var s="",l={prelude:s+="<div style='display: inline-block; width: 14rem; height: 16rem; margin-top: 5rem; z-index: 9999; background: url("+_resRoot+"/image/cutPriceGif.gif) no-repeat; background-size: contain;'></div>",content:n,mainFrameTimeout:1e3,callback:r,cancelCallback:function(){var e=location.href;e.indexOf("&showAnime")>0&&(e=e.substring(0,e.indexOf("&showAnime"))),e.indexOf("&cutWhenBack")>0&&(e=e.substring(0,e.indexOf("&cutWhenBack"))),location.href=e}};Mobi.customPopup(l)},Mobi.cutPriceImmeBuy=function(e,t,i,o){var n={isCutPrice:!0};n.cutPriceId=e,n.cutPriceDetailId=t,void 0===Mobi.mallBuying[i]&&(Mobi.mallBuying[i]=!1);var a=!1;if(jm.each(Mobi.mallBuying,function(e,t){if(t)return a=!0,!1}),!a){Mobi.mallBuying[i]=!0;var r="id="+i+"&fromDetail=true";o&&(r+="&optionList="+jm.encodeUrl(jm.toJSON(o))),r+="&amount=1";var s={pid:i,amount:1,optList:o,isCutPrice:!0,cutPriceId:e,cutPriceDetailId:t};null!=s.optList&&0!=s.optList.length&&s.optList&&"null"!=s.optList||(s.optList=jm.toJSON([])),r+="&codata="+jm.toJSON(s),jm.ajax({type:"post",url:"ajax/order_h.jsp?cmd=addIme",data:r,error:function(){Mobi.ing(LS.js_systemError),Mobi.mallBuying[i]=!1,Mobi.logMonitor(6160,!0)},success:function(o){var n=jm.parseJSON(o);if(n.success){var a="";a+="&isCutPrice="+!0,a+="&cutPriceId="+e,a+="&cutPriceDetailId="+t,window.self!=window.top&&/(iPhone|iPad|iPod|safari)/i.test(navigator.userAgent.toLowerCase())?location.href="mstl.jsp?immeData="+jm.encodeUrl(jm.toJSON(s))+a:location.href="mstl.jsp?imme"+a,Mobi.mallBuying[i]=!1}else n.rt==Mobi.MallAjaxErrno.authMemberNotAllow?Mobi.ing(n.data+LS.authLevelBuy):n.rt==Mobi.MallAjaxErrno.login?Mobi.ing(LS.memberLoginFirst):(n.rt==Mobi.MallAjaxErrno.error&&Mobi.logMonitor(6160,!0),Mobi.returnMallErrorMsg(n.rt)),Mobi.mallBuying[i]=!1}})}},Mobi.setCpDetailCookie=function(e,t,i){jm.cookie("cp_"+e+"_cpDetail_"+t,!0,{path:"/"})},Mobi.setCpDetailCookieBeforeHand=function(e,t,i){null!=(i=jm.cookie("cp_"+e+"_cpDetail_"+t))&&void 0!==i||jm.cookie("cp_"+e+"_cpDetail_"+t,!1,{path:"/"})},Mobi.checkCpDetailCookie=function(e,t,i){return!!jm.cookie("cp_"+e+"_cpDetail_"+t)},Mobi.helpCutPriceLock=!1,Mobi.helpCutPrice=function(e,t,i,o){if(1!=Mobi.helpCutPriceLock){Mobi.helpCutPriceLock=!0;var n=jm.cookie("cp_"+e+"_cpDetail_"+t);return null==n?(Mobi.helpCutPriceLock=!1,Mobi.ing("您的浏览器暂不支持砍价功能")):"true"===n?(Mobi.helpCutPriceLock=!1,Mobi.ing("您已经砍过价了")):void jm.ajax({type:"post",url:"ajax/cutPrice_h.jsp?cmd=helpCutPrice&cpId="+e+"&cpDetailId="+t+"&pdId="+i,error:function(){Mobi.ing(LS.js_systemError)},success:function(i){if((i=jm.parseJSON(i)).success)Mobi.setCpDetailCookie(e,t,o),Mobi.showCutPriceAnime(!1,i.pdId,i.reducedMoney,i.choiceCurrencyVal);else if(-100==i.rt){var n=jm.getUrlRoot(location.href);n.indexOf("?")>0?n+="&cutWhenBack=true":n+="?cutWhenBack=true";var a="login.jsp?returnUrl="+jm.encodeUrl(n)+"&errno=11";location.href=a}else Mobi.ing(i.msg)},complete:function(){Mobi.helpCutPriceLock=!1}})}},Mobi.getProductVideo=function(e){jm(".productBullet").hide(),jm(".productDetailHeader").hide(),jm(".productDetailHeaderV3").hide();var t=document.getElementById("productVideoMask"),i=document.getElementById("productVideo");t.style.display="block",i.play()},Mobi.setMarketingProPdStyle=function(e,t){"style1"==e&&(jm("#memberPricePd").css("background","#fff"),jm("#memberPricePd").find(".p1").css("background","#fff"),jm("#memberPricePd").find(".p3").css("background","#fff")),"style3"==e&&(jm("#memberPricePd").find(".p1").css("display","none"),jm("#memberPricePd").find(".p3").css("display","none"),jm("#memberPricePd").css("border","none"),jm(".productPrice .backMoneyBg").css("height","18.8px"),jm(".productPrice .backMoneyBg").css("top","-6px"),jm(".productPrice .backMoney").css({top:"-6px",position:"absolute",padding:"3px 4px"}),jm(".memberPricePd").css("left","2px"),jm(".productPrice .memberPricePd").css("position","absolute"),jm(".productPrice .memberPricePd").css("text-align","center"),jm(".productPrice .memberPricePd").css("top","-5px"),jm(".productPrice .memberPricePd").css("white-space","nowrap"),jm(".productPrice .memberPricePd").css("padding","6px 5px"),jm(".productPrice .backMoney").css("margin-left","78px"),jm(".productPrice .style3.backMoneyBg").css("margin-left","78px"))},Mobi.videoQuit=function(){document.getElementById("productVideoMask").style.display="none",document.getElementById("productVideo").load(),jm(".productBullet").show(),2!=Fai.top._other.templateInfo.templateDesignType&&jm(".productDetailHeader").show(),Fai.top._openThemeV3&&jm(".productDetailHeaderV3").show()},Mobi.initVideo=function(e){jm(".bullets").find("li").eq(0).css("height","12px"),jm(".bullets").find("li").eq(0).css("width","12px");jm(".bullets").find("li").eq(0).append("<span class='bfFont faisco-icons-'></span>"),jm(".bullets").css("margin-top","-20px"),jm(jm(".proDetailImg ")[0]).removeAttr("onclick"),jm(jm(".proDetailImg ")[0]).click(function(){Mobi.getProductVideo(e)})},Mobi.clipboard=function(e){e=jm.extend({selector:"",sucTxt:"复制成功",failTxt:"复制失败",icon:!1,sucCallback:null,failCallback:null},e);var t=new ClipboardJS(e.selector),i=LS.replicationSuccess;t.on("success",function(e){Mobi.ing(i,1),t.destroy(),e.clearSelection()}),t.on("error",function(e){navigator.userAgent.indexOf("UCBrowser")>-1?Mobi.ing(i,1):Mobi.ingTigs("该浏览器不支持复制链接的功能，请手动复制"),t.destroy()})},Mobi.clickClipboard=function(e){e||(e=".copyTextBtn");new ClipboardJS(e,{text:function(e){var t=$(e).attr("data-clipboard-target");return $(t).text()}});Mobi.clipboard({selector:e,icon:!0})},Mobi.calculateIntraCityShipDistanceKm=function(e,t){var i=Mobi.syncComputeDistanceBetween({latitude:t.lat,longitude:t.lng},{latitude:e.lat,longitude:e.lng});return Math.round(i/1e3*100)/100},Mobi.initOrderDetailIntraCityShipInfo=function(){new Vue({el:"#intraCityOrderInfo",template:'\n\t\t\t<div id="intraCityOrderInfo" class="fk_orderDetail_intraCityInfo">\n\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship">\n\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_line">\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_icon_label">\n\t\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_icon">\n\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v36 fk_orderDetail_intraCityInfo_ship_icon_svg">\n\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v36"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_label">配送方式</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_value">{{shipName}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_line" v-if="isShipTimeVisible">\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_icon_label">\n\t\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_icon">\n\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v40 fk_orderDetail_intraCityInfo_ship_icon_svg">\n\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v40"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_label">期望送达</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_value">{{shipTimeText}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="fk_orderDetail_intraCityInfo_accepter">\n\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_line">\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_icon_label">\n\t\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_icon">\n\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v39 fk_orderDetail_intraCityInfo_ship_icon_svg">\n\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v39"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_label">{{order.name}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_value">{{order.mobile}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_ship_line" v-if="order.addr">\n\t\t\t\t\t\t<div class="fk_orderDetail_intraCityInfo_addr">{{order.addr}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t',data:function(){return{order:Fai.top._order,intraCityShipConf:Fai.top._intraCityShipConf}},methods:{},computed:{shipName:function(){return this.intraCityShipConf.cn||"同城配送"},isShipTimeVisible:function(){return this.intraCityShipData&&this.intraCityShipData.irs},intraCityShipData:function(){return this.order.addrInfo.icsd},shipTimeText:function(){if(this.isOpenTimeSegment){if(0===this.intraCityShipData.tst){var e="";return 0===this.intraCityShipData.tp?e="上午":1===this.intraCityShipData.tp?e="下午":2===this.intraCityShipData.tp&&(e="晚上"),this.intraCityShipData.st+" "+e}var t=this.checkedList[this.intraCityShipData.tp].timestamp;return this.intraCityShipData.st+" "+Mobi.DateUtil.getHourAndMinStr(t)}return this.intraCityShipData.st+" 全天"},timeSetting:function(){return this.intraCityShipConf.ts},isOpenTimeSegment:function(){return 1===this.intraCityShipData.iots},ONE_THIRD_DAY_LIST:function(){return this.timeSetting.maes},HALF_HOUR_LIST:function(){return this.timeSetting.hohs},HOUR_LIST:function(){return this.timeSetting.hs},checkedList:function(){var e=[],t=new Date(this.intraCityShipData.st.replace(/-/g,"/")+" 00:00:00").getTime();if(this.isOpenTimeSegment){if(0===this.intraCityShipData.tst)e=[{id:0,text:"上午",timestamp:t+12*Mobi.DateUtil.HOUR_UNIT-1},{id:1,text:"下午",timestamp:t+18*Mobi.DateUtil.HOUR_UNIT-1},{id:2,text:"晚上",timestamp:t+24*Mobi.DateUtil.HOUR_UNIT-1}];else if(1===this.intraCityShipData.tst)for(var i=0;i<24;i++){var o=t+i*Mobi.DateUtil.HOUR_UNIT,n=Mobi.DateUtil.getHourAndMinStr(o);e.push({id:i,text:n,timestamp:o})}else if(2===this.intraCityShipData.tst)for(var a=0;a<48;a++){var r=t+a*Mobi.DateUtil.HALF_HOUR_UNIT,s=Mobi.DateUtil.getHourAndMinStr(r);e.push({id:a,text:s,timestamp:r})}}else e=[{id:0,text:"全天",timestamp:t}];return e}}})},Mobi.initMstlSubmitBtnWrap=function(mstlBtnData){Fai.top.intraCityShipBottomTipVm=new Vue({el:"#mstlBtnWrap",template:'\n\t\t\t<div class="fk_mstlBtnWrap" id="mstlBtnWrap">\n\t\t\t\t<div v-if="disabled" class="fk_mstlBottomTip">{{tipText}}</div>\n\t\t\t\t<input type=\'button\' id=\'mstlBtn\' :disabled="disabled" :class=\'btnCls\' :value=\'mstlBtnData.mallStlSubmit\' @click="clickHandler" />\n\t\t\t</div>\n\t\t',data:function(){return{intraCityShipConf:Fai.top._intraCityShipConf,propList:Fai.top._addrPropInfoList,order:Fai.top._order,tipText:"",shipTimeItem:null,openIntraCityShip:Fai.top._openIntraCityShip,mstlBtnData:mstlBtnData}},created:function(){Mobi.$Bus.$off("onShipTimePanelConfirm",this.onShipTimePanelConfirm).$on("onShipTimePanelConfirm",this.onShipTimePanelConfirm)},methods:{clickHandler:function clickHandler(){eval(this.mstlBtnData.clickJsString)},tipOverShipDistance:function(){this.tipText="配送地址超出商家配送范围，请重新选择再提交订单。"},tipFillOrderInfo:function(){this.tipText="订单信息尚未完善，请补充完整后再提交。"},tipServiceStop:function(){var e=this.intraCityShipConf.cn||"同城配送";this.tipText="".concat(e,"服务已暂停，暂时无法提交订单。")},tipPriceLow:function(){var e=Fai.top._currencyVal,t=this.minPrice;this.tipText="商品总额需满".concat(e).concat(t,"才能起送")},clearTip:function(){this.tipText=""},onShipTimePanelConfirm:function(e){this.shipTimeItem=e},tipShipTimeUnChecked:function(){this.tipText="请选择送达时间"},tipShipTimeOver:function(){this.tipText="当前送达时间已过期，请重新选择"}},computed:{btnCls:function(){return["g_button",this.mstlBtnData.bgColor,"fk_mstlSubmitBtn"]},disabled:function(){if(this.clearTip(),3!==(Fai.top.shipTabListVm||{}).checkedId)return!1;if(!this.isOpenIntraCityShip)return this.tipServiceStop(),!0;if(this.isAddrEmpty||this.isVagueAddr)return this.tipFillOrderInfo(),!0;if(this.isOverShipDistance)return this.tipOverShipDistance(),!0;if(!Fai.top._isSettleUnCheckMarketType&&this.isPriceLimit)return this.tipPriceLow(),!0;if(this.isAddressError)return this.tipFillOrderInfo(),!0;if(this.isOpenTimeSetting){if(this.isShipTimeOver)return this.tipServiceStop(),!0;if(this.isShipTimeUnChecked)return this.tipShipTimeUnChecked(),!0;if(this.isShipTimeCheckedOver)return this.tipShipTimeOver(),!0}return!1},isOpenIntraCityShip:function(){return this.openIntraCityShip},isAddrEmpty:function(){return!this.addrInfo},isVagueAddr:function(){return!(this.addrInfo&&this.addrInfo.addr_info&&this.addrInfo.addr_info.pos)},isAddressError:function(){return Mobi.Address.getErrProp({addrInfo:this.addrInfo,propList:this.propList})},addrInfo:function(){return Fai.top.intraCityShipPanelVm.addrInfo},isPriceLimit:function(){var e=0;return this.order.itemList.forEach(function(t){e+=t.amount*t.price}),e<this.minPrice},isOverShipDistance:function(){var e=this.intraCityShipConf.sr.dr;return this.shipDistance>e},minPrice:function(){return this.intraCityShipConf.spd.gsp.mpfd},shipDistance:function(){var e=this.intraCityShipConf.pua.p,t=this.addrInfo.addr_info.pos;return Mobi.calculateIntraCityShipDistanceKm(e,t)},isShipTimeUnChecked:function(){return!!this.isOpenTimeSetting&&-1===this.shipTime},timeSetting:function(){return this.intraCityShipConf.ts},isOpenTimeSetting:function(){return 1===this.timeSetting.ota},isShipTimeOver:function(){return!(!Fai.top.intraCityShipTimePanelVM||!Fai.top.intraCityShipTimePanelVM.isTimeOver)},isShipTimeCheckedOver:function(){return this.shipTime<(new Date).getTime()||!!this.shipTimeItem.disabled},shipTime:function(){return this.shipTimeItem?this.shipTimeItem.timestamp:-1}}})},function(e,t,o){Mobi.initMstlIntraCityTimeShip=function(){Fai.top.intraCityShipTimePanelVM=new Vue({el:"#mstlIncraCityTimeShip",data:function(){return this.changeWebContainOverflow(!1),{values:[0,0,0],savedValues:[],isDetail:!1,visible:!1,intraCityShipConf:Fai.top._intraCityShipConf}},watch:{visible:function(e){this.changeWebContainOverflow(e)}},template:'\n\t\t\t\t<div id=\'mstlIncraCityTimeShip\' class="fk_intraCityTimeShip" @click="onCancel" v-show="visible">\n\t\t\t\t    <div class="fk_intraCityTimeShip_mask" @touchmove.prevent="stopPropagation"></div>\n\t\t\t\t\t<div class="fk_intraCityTimeShip_panel" @click.prevent="stopPropagation">\n\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_header">选择送达时间</div>\n\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section">\n\t\t\t\t\t\t\t<div v-if="isDetail">\n\t\t\t\t\t\t\t\t<picker-view>\n\t\t\t\t\t\t\t\t\t<picker-view-column :list="yearList" :checkedIndex="values[0]" @change="onYearChange"></picker-view-column>\n\t\t\t\t\t\t\t\t\t<picker-view-column :list="dayList"  :checkedIndex="values[1]" @change="onDayChange"></picker-view-column>\n\t\t\t\t\t\t\t\t\t<picker-view-column :list="timeList" :checkedIndex="values[2]" @change="onTimeChange"></picker-view-column>\n\t\t\t\t\t\t\t\t</picker-view>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple" v-else >\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_dayList">\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_dayItem" :disabled="item.disabled" :active="values[1]===index" @click="onCheckedSimpleDayItem($event, index)" v-for="(item, index) in topSevenDayList">{{item.text}}</div>\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_dayItem" @click="callDetailPanel" v-if="dayList.length>7">更多日期</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_timeList">\n\t\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_timeItem" @click="onCheckedSimpleTimeItem($event, index)" :disabled="item.disabled" :active="values[2]===index" v-for="(item, index) in timeList">\n\t\t\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_timeItem_text">{{item.text}}</div>\n\t\t\t\t\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_section_simple_timeItem_icon">\n\t\t\t\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v41 fk_mstl_icon_tick">\n\t\t\t\t\t\t\t\t\t\t\t  <use xlink:href="#jzm-v41"></use>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="fk_intraCityTimeShip_panel_footer" @click="onConfirm">确定</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',created:function(){Mobi.$Bus.$off("onShipTimePanelOpen",this.show).$on("onShipTimePanelOpen",this.show),Mobi.$Bus.$off("onShipTimePanelHide",this.hide).$on("onShipTimePanelHide",this.hide),this.initValues()},methods:{initValues:function(){for(var e=0,t=0,i=0,o=0;o<this.yearList.length;o++)if(!this.yearList[o].disabled){e=o;break}for(var n=0;n<this.dayList.length;n++)if(!this.dayList[n].disabled){t=n;break}for(var a=0;a<this.timeList.length;a++)if(!this.timeList[a].disabled){i=a;break}this.values=[e,t,i],this.$forceUpdate()},callDetailPanel:function(e){this.isDetail=!0},onCheckedSimpleTimeItem:function(e,t){if(!this.timeList[t].disabled){var i=_toConsumableArray(this.values);i[2]=t,this.values=i}},onCheckedSimpleDayItem:function(e,t){if(!this.dayList[t].disabled){var i=_toConsumableArray(this.values);i[1]=t,this.values=i}},changeWebContainOverflow:function(e){e?jm("body").css("overflow","hidden"):jm("body").css("overflow","")},show:function(){this.visible=!0,this.savedValues.length>0?this.values=_toConsumableArray(this.savedValues):this.initValues(),t("html,body").addClass("fk_intraCityTimeShip_banMove")},hide:function(){this.visible=!1,t("html,body").removeClass("fk_intraCityTimeShip_banMove")},stopPropagation:function(e){e.stopPropagation()},setTimeDisabled:function(e,t){var i=this;e.forEach(function(e){var o=!t.includes(e.id);e.timestamp<i.START_TIME&&(o=!0),e.disabled=o})},setDayDisabled:function(e){var t=this;return e.forEach(function(e){var i=Mobi.DateUtil.getIndexOfWeek(e.timestamp),o=!t.WEEKTH_LIST.includes(i);e.disabled=o}),e},removeEdgeDisabledItem:function(e){for(var t=_toConsumableArray(e);t.length>0&&t[0].disabled;)t.shift();for(t.reverse();t.length>0&&t[0].disabled;)t.shift();return t.reverse(),t},onYearChange:function(e){this.values[0]=e;var t=parseInt(this.yearList[e].text),i=(this.yearList[this.values[0]],_toConsumableArray(this.values));if(this.getYear()===t)i[1]=0;else for(var o=0;o<this.dayList.length;o++){var n=this.dayList[o];if(this.getYear(n.timestamp)===t){i[1]=o;break}}i[0]=e,this.values=i},onDayChange:function(e){var t=e,o=this.values[1],n=_toConsumableArray(this.values);if(this.dayList[t].disabled)if(t>o){for(i=t;i<this.dayList.length;i++)if(!this.dayList[i].disabled){t=i;break}}else for(i=t;i>=0;i--)if(!this.dayList[i].disabled){t=i;break}var a=Mobi.DateUtil.getYear(this.dayList[t].timestamp),r=Mobi.DateUtil.getYear(this.yearList[n[0]].timestamp);a!=r&&this.yearList.forEach(function(e,t){Mobi.DateUtil.getYear(e.timestamp)==a&&(n[0]=t)}),n[1]=t,this.values=n},onTimeChange:function(e){var t=_toConsumableArray(this.values),o=this.values[2],n=e;if(this.timeList[n].disabled)if(n<o){for(i=n;i>=0;i--)if(!this.timeList[i].disabled){n=i;break}}else for(i=n;i<this.timeList.length;i++)if(!this.timeList[i].disabled){n=i;break}t[2]=n,this.values=t},onCancel:function(){this.hide()},onConfirm:function(){this.hide(),this.savedValues=_toConsumableArray(this.values),Mobi.$Bus.$emit("onShipTimePanelConfirm",Mobi.deepCopy(this.checkedTimeItem))}},computed:{isTimeOver:function(){return this.START_TIME>=this.END_TIME||0===this.dayList.length},checkedTimestamp:function(){var e=this.checkedTimeItem;return e?e.timestamp:-1},checkedTimeItem:function(){return 0===this.savedValues.length?null:Mobi.deepCopy(this.timeList[this.savedValues[2]])},topSevenDayList:function(){return this.dayList.slice(0,7)},yearList:function(){for(var e=this.START_TIME,t=this.END_TIME,i=Mobi.DateUtil.getYear(e),o=Mobi.DateUtil.getYear(t),n=[],a=0;a<=o-i;a++){var r=i+a;n.push({text:r,timestamp:new Date(r+"-01-01 00:00:00").getTime()})}return n},dayList:function(){for(var e=this.START_TIME,t=this.END_TIME,i=[],o=this.DAY_UNIT,n=Mobi.DateUtil.getZeroTime(e),a=Mobi.DateUtil.getZeroTime(t),r=0;r<=(a-n)/o;r++){var s=n+o*r,l=Mobi.DateUtil.getDayTextForNow(s);i.push({text:l,timestamp:s})}return i=this.setDayDisabled(i),i=this.removeEdgeDisabledItem(i),i},timeList:function(){var e=this,t=[],i=this.dayList[this.values[1]];if(i){var o=i.timestamp;if(this.isOpenTimeSegment){if(0===this.timeSetting.tst)t=[{id:0,text:"上午",timestamp:o+12*this.HOUR_UNIT-1},{id:1,text:"下午",timestamp:o+18*this.HOUR_UNIT-1},{id:2,text:"晚上",timestamp:o+24*this.HOUR_UNIT-1}],this.setTimeDisabled(t,this.ONE_THIRD_DAY_LIST);else if(1===this.timeSetting.tst){for(var n=0;n<24;n++){var a=o+n*this.HOUR_UNIT,r=Mobi.DateUtil.getHourAndMinStr(a);t.push({id:n,text:r,timestamp:a})}this.setTimeDisabled(t,this.HOUR_LIST)}else if(2===this.timeSetting.tst){for(var s=0;s<48;s++){var l=o+s*this.HALF_HOUR_UNIT,c=Mobi.DateUtil.getHourAndMinStr(l);t.push({id:s,text:c,timestamp:l})}this.setTimeDisabled(t,this.HALF_HOUR_LIST)}t.forEach(function(t){t.timestamp<e.NOW_TIME&&(t.disabled=!0)}),t=this.removeEdgeDisabledItem(t)}else t=[{id:1,timestamp:o+this.DAY_UNIT-1,text:"全天"}]}else t=[];return t},timeSetting:function(){return this.intraCityShipConf.ts},WEEKTH_LIST:function(){return this.timeSetting.sdl},ONE_THIRD_DAY_LIST:function(){return this.timeSetting.maes},HALF_HOUR_LIST:function(){return this.timeSetting.hohs},HOUR_LIST:function(){return this.timeSetting.hs},NOW_TIME:function(){return(new Date).getTime()},NOW_ZERO_TIME:function(){return Mobi.DateUtil.getZeroTime(this.NOW_TIME)},START_TIME:function(){return this.isOpenPreBooking?this.isOpenPreBookingDay?this.NOW_ZERO_TIME+this.PRE_BOOKING_TIME_RANGE:this.NOW_TIME+this.PRE_BOOKING_TIME_RANGE:this.NOW_TIME},END_TIME:function(){return this.isOpenLastBooking?this.NOW_ZERO_TIME+this.LAST_BOOKING_TIME_RANGE-1:this.NOW_ZERO_TIME+Mobi.DateUtil.DAY_UNIT-1},isOpenPreBookingDay:function(){return 1===this.timeSetting.bt},PRE_BOOKING_TIME_RANGE:function(){return this.isOpenPreBooking?(this.timeSetting.bt,0)+(this.isOpenPreBookingDay?this.timeSetting.bd*this.DAY_UNIT:0)+(2===this.timeSetting.bt?this.timeSetting.bh*this.HOUR_UNIT:0)+(3===this.timeSetting.bt?this.timeSetting.bm*this.MINUTE_UNIT:0):0},LAST_BOOKING_TIME_RANGE:function(){return this.isOpenLastBooking?this.timeSetting.ld*this.DAY_UNIT:this.DAY_UNIT},isOpenTimeSegment:function(){return 1===this.timeSetting.iots},isOpenTimeSetting:function(){return 1===this.timeSetting.ota},isOpenPreBooking:function(){return 0!==this.timeSetting.bt},isOpenLastBooking:function(){return 1===this.timeSetting.ltt},DAY_UNIT:function(){return 864e5},HOUR_UNIT:function(){return 36e5},HALF_HOUR_UNIT:function(){return 18e5},MINUTE_UNIT:function(){return 6e4}}})}}(Mobi,jm),Mobi.deepCopy=function(e){var t,i=Mobi,o=i.typeOf(e);if("array"===o)t=[];else{if("object"!==o)return e;t={}}if("array"===o)for(var n=0;n<e.length;n++)t.push(i.deepCopy(e[n]));else if("object"===o)for(var n in e)t[n]=i.deepCopy(e[n]);return t},Mobi.typeOf=function(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]},Mobi.replaceCusDateStrToObj=function(e){e=Mobi.deepCopy(e);return Fai.top._addrPropList.forEach(function(t){if(t.type===Fai.top._OrderPropTypeDef.CUS_DATE){var i=e[t.fieldKey];"string"===Mobi.typeOf(i)&&(i=""===i.trim()?{}:JSON.parse(i)),e[t.fieldKey]=i}}),e},Mobi.initMerchantsApplyScripts=function(e,t,i){var o=document.createElement("script");o.type="text/javascript",o.src=t;var n=document.documentElement||document.body;o.onload=function(){var e=document.createElement("script");e.src=i,e.type="text/javascript",n.appendChild(e),setTimeout(function(){var e={},t=["*.jpg","*.jpeg","*.bmp","*.gif","*.png"],i=jm("#_TOKEN").attr("value");jm(".uploadBtn").on("click",function(o){jm(o.target).attr("id");var n=jm(o.target).attr("fieldKey"),a=1024*jm("#J_mctProp_"+n).attr("data:max-size")*1024,r="#addFileBtn_"+n;e[r]&&jm(r).find(".selectbtn").remove(),e[r]=!0;var s={siteFree:!1,updateUrlViewRes:"",auto:!0,fileTypeExts:t.join(";"),multi:!1,fileSizeLimit:5242880,breakPoints:!0,saveInfoLocal:!1,showUploadedPercent:!0,removeTimeout:9999999,isDefinedButton:!0,getFileSizeUrlFlag:!0,post_params:{app:21,type:0,fileUploadLimit:10,isSiteForm:!0},isOrnotButton:!0,buttonText:"",uploader:"../ajax/imgUpload_h.jsp?_TOKEN="+i,onUploadStart:function(e){jm("#progressBody_ "+e.id).remove(),jm("#progressWrap_"+e.id).remove()},onUploadSuccess:function(e,t){var i=jm.parseJSON(t);i.success?(jm("#J_mctProp_"+n).attr("placeholder",i.name),jm("#J_mctProp_"+n).attr("uploadPathId",i.id),Mobi.ing("上传成功",!0)):Mobi.ing(LS.mobiFormSubmitFileUploadFile+e.name+"   "+i.msg)},onUploadError:function(e,t){jm("#progressWrap_"+e.id).remove(),Mobi.ing(jm.format(LS.mobiFormSubmitFileUploadSvrBusy,jm.encodeHtml(e.name)))},view_progress:function(e){e=Math.ceil(e);isNaN(e)||(100==e?Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!0):Mobi.ing(LS.mobiFormSubmitFileUploadIng+e+"%",!1))}};s.fileSizeLimit=a,upload=jm(r).uploadify(s),jm(r).find(".selectbtn")[0].click()}),Mobi.clickClipboard(".copyBtn")},1e3)},n.appendChild(o),Mobi.initMerchantsApply(e)},Mobi.initMerchantsApply=function(e){jm(".J_toIndexBtn").click(function(){location.href="index.jsp"}),jm(".J_applyBtn").click(function(){var t="a=1",i=!1;e.forEach(function(e){var o,n=e.fieldKey||"",a=e.name||"",r=e.flag||0,s=e.type||1,l=Mobi.checkBit(r,2);if(o=e&&e.other&&3===e.other.type?(o=jm("#J_mctProp_"+n).attr("uploadPathId"))||"":jm("#J_mctProp_"+n).val(),l&&(null===o||""===o))return Mobi.ing("'"+a+"'为必填项"),i=!0,!1;if(""!=o&&5==s&&!jm.isNationMobile(o))return Mobi.ing(jm.format(LS.newMobileNumRegular,11)),i=!0,!1;if(""!=o&&9==s&&!jm.isCardNo(o))return Mobi.ing("请输入正确的身份证号"),i=!0,!1;if(""!=o&&8==s){var c=o.length||0;if(c<15||c>19)return Mobi.ing("请输入正确的银行卡号"),i=!0,!1}t+="&"+n+"="+o}),i||jm("#protocolCheck").prop("checked")||(Mobi.ing("请先勾选同意入驻协议"),i=!0),i||jm.ajax({type:"post",url:"ajax/mallMerchants_h.jsp?cmd=applyMerchant",data:t,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){if((e=jm.parseJSON(e)).success){Mobi.logDog(201326,2);var t=e.rtStatus;jm(".J_merchantApplyContainer .panel").hide(),jm(".J_merchantApplyContainer .panel"+t).show()}else Mobi.ing(e.msg||"系统错误")}})}),jm("#J_applyAgainForDelete").click(function(){jm(".merchantApplyContainer .panel").removeClass("show"),jm(".merchantApplyContainer .panel.panel0").addClass("show")}),jm("#J_applyAgain").click(function(){jm(".merchantApplyContainer .panel").removeClass("show"),jm(".merchantApplyContainer .panel.panel0").addClass("show")}),jm(".merchantApplyContainer #showJoinProtocol").click(function(){jm(".merchantApplyContainer #J_joinProtocol").show(),jm(".merchantApplyContainer .maskLayer").show();var e=jm("#J_joinProtocol")[0].offsetHeight,t=jm("#J_joinProtocol")[0].offsetWidth,i=jm("#g_web")[0].offsetWidth,o=(document.body.clientHeight-e)/2,n=(i-t)/2;jm("#J_joinProtocol").css({top:o+"px",left:n+"px"})}),jm(".merchantApplyContainer .confirmBtn").click(function(){jm(".merchantApplyContainer #J_joinProtocol").hide(),jm(".merchantApplyContainer .maskLayer").hide()})},function(e,t,i){e.initOrderDetailBottomBar=function(){t(".orderDetail").attr("bottom-bar",!0)}}(Mobi,jm),function(e,t,i){e.mstlCommVueData={merchant:{merchantIndex:-1,shipIndex:0}},e.initMstlItemListByGroup=function(t,i,o,n){var a={props:{list:Array},data:function(){return{isOpen:!1,selfSaleInfo:n}},template:'\n\t\t\t    <div  class="orderSettle fk_mstl_orderSettle_line_selfSale" v-if="list">\n\t\t\t\t\t<div class="fk_mstl_orderSettle_line_selfSale_header" style="display:flex;" v-if="mallMerchantsOpen()">\n\t\t\t\t\t\t<div class="fk_mstl_merchant_item_header_icon">\n\t\t\t\t\t\t\t<img :src="selfSaleInfo.logoPath" alt="" style="width:100%;height:100%">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="fk_mstl_merchant_item_header_text">{{selfSaleInfo.name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="fk_mstl_orderSettle_line_selfSale_listWrap" :data-active="isOpen">\n\t\t\t\t\t\t<template  v-for="(item, index) in list">\n\t\t\t\t\t\t\t<div class=\'orderSettle_line\'>\n\t\t\t\t\t\t\t\t<div :class=\' (index>2?"moreGoods":"") + " mall_product" +  " itemLine" + index \' :price=\'item.price\' jqmoldstyle>\n\t\t\t\t\t\t\t\t\t<div class=\'left\'>\n\t\t\t\t\t\t\t\t\t\t<a :href=\'"pd.jsp?pid="+item.productId\' class="mall_product_link">\n\t\t\t\t\t\t\t\t\t\t\t<span class=\'imageMiddle\'></span>\n\t\t\t\t\t\t\t\t\t\t\t<img class=\'imgClass\' :src=\'item.path\' :alt=\'item.productName\'/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\'right flex1\'>\n\t\t\t\t\t\t\t\t\t\t<div class=\'product_name\'>\n\t\t\t\t\t\t\t\t\t\t\t<a :href=\'"pd.jsp?pid=" + item.productId\'>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\'J_productName\'>{{item.productName}}</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div :class=\' "product_attr "+item.productAttrClass\'>{{item.chooseStr}}</div>\n\t\t\t\t\t\t\t\t\t\t<div v-if="item.isEarnestSale" class=\'earnestSaleshipDays\'>{{item.earnestSaleshipDaysText}}</div>\n\x3c!--\t\t\t\t\t\t\t\t\t\t<div class=\'product_price\' :class="fColor">{{item.priceText}}</div>--\x3e\n\t\t\t\t\t\t\t\t\t\t<div class=\'product_price\'>\n\t\t\t\t\t\t\t\t\t\t\t<fai-price-comp :class="fColor" :currency="currencyVal" :number="item.priceValue"></fai-price-comp>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\'product_amount\'>×{{item.amount}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t<div style="text-align: center;padding-top:0.95rem;"  v-if="list.length>3">\n\t\t\t\t\t\t<div style="display:inline-block">\n\t\t\t\t\t\t\t<div class="fk_mstl_merchant_seedProductBtn" :data-active="isOpen" @click="openOtherProducts">\n\t\t\t\t\t\t\t\t<span>{{isOpen ? "收起" : ("还有" + (list.length-3) + "件商品") }} </span>\n\t\t\t\t\t\t\t\t<svg class="fk_mstl_merchant_seedProductBtn_arrow jzm-v2 fk_mstl_icon" role=\'img\' ><use xlink:href=\'#jzm-v2\'></use></svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t<NormalItemLeaveMsg></NormalItemLeaveMsg>\n\n\t\t\t\t</div>\n\t\t\t',components:{NormalItemLeaveMsg:{template:"\n\t\t\t\t<div class='fk_mstl_merchant_item_msg' v-if=\"orderMessageData.orderMessageOpen\">\n\t\t\t\t\t<span class='levelMsgTitle'>{{orderMessageData.buyerMsg}}</span>\n\t\t\t\t\t<input  type='text' id='orderLeveaMsgIn' class='g_input propItemValue lvMsgValue'  :maxLength='orderMessageData.msgMaxLength' :placeholder='orderMessageData.orderLeveaMsg'>\n\t\t\t\t</div>\n\t\t\t",data:function(){return{orderMessageData:o}},mounted:function(){Mobi.initOrderLvMsgPrm(this.orderMessageData,this.orderMessageData.msgMaxLength)}}},computed:{fColor:function(){return Fai.top._fColor},currencyVal:function(){return Fai.top._currencyVal}},methods:{openOtherProducts:function(){this.isOpen=!this.isOpen},mallMerchantsOpen:function(){return Fai.top._mallMerchantsOpen}}};Fai.top._mstlMerchantProductListVm=new Vue({el:"#merchantProductList",data:function(){return{listByGroup:t,merchantListByGroupSetting:this.getMerchantListByGroupSetting(t,i),mstlCommVueData:e.mstlCommVueData,orderMessageData:o}},watch:{mstlCommVueData:{deep:!0,handler:function(){Vue.nextTick(function(){Mobi.mallStlCalcTotal()})}},"mstlCommVueData.merchant.merchantIndex":function(){this.mstlCommVueData.merchant.shipIndex=0},"mstlCommVueData.merchant.shipIndex":function(e){var t=this.merchantListByGroupSetting[this.mstlCommVueData.merchant.merchantIndex],i=t.subMerchantInfo.other.mallShipList[this.mstlCommVueData.merchant.shipIndex];t.shipInfo.shipType=i.type,t.shipInfo.shipSort=i.sort,t.shipInfo.shipPrice=i.price,t.shipIndex=e,Vue.nextTick(function(){Mobi.recheckItg()})}},computed:{fColor:function(){return Fai.top._fColor}},components:{NormalItemList:a},methods:{totalShipPrice:function(){var e=0;return Fai.top.shipTabListVm&&1===Fai.top.shipTabListVm.checkedId?(this.merchantListByGroupSetting.forEach(function(t){e+=t.shipInfo.shipPrice}),e):0},isSelfSaleEmpty:function(){return!this.listByGroup[0]||0===this.listByGroup[0].length},isMerchantProductExist:function(){return this.getMerchantsShipList().length>0},isMerchantExpire:function(){return this.merchantListByGroupSetting.some(function(e){return 0!==e.subMerchantInfo.subOpenStatus})},isMulProductsExist:function(){return this.getMerchantsShipList().length>0&&!this.isSelfSaleEmpty()||this.getMerchantsShipList().length>1},getMerchantListByGroupSetting:function(e,t){var i=this;return Object.keys(e).filter(function(e){return 0!=e}).map(function(o){var n=i.getSubMerchantInfo(o,t),a=0,r=n.other.mallShipList[0];return n.other.mallShipList.some(function(e,t){return a=t,r=e,e.show}),{id:o,subMerchantInfo:n,list:e[o],shipInfo:{mctId:parseInt(o),shipType:r.type,shipSort:r.sort,shipPrice:r.price,remark:""},shipIndex:a,isOpen:!1}})},getMerchantsShipList:function(){return this.merchantListByGroupSetting.map(function(e){return{mctId:e.shipInfo.mctId,shipSort:e.shipInfo.shipSort,shipPrice:e.shipInfo.shipPrice,remark:e.shipInfo.remark,shipType:e.shipIndex}})},getSubMerchantInfo:function(e,t){return t.filter(function(t){return t.id==e})[0]},callShipPanel:function(t){this.mstlCommVueData.merchant.merchantIndex=t;var i=this.merchantListByGroupSetting[this.mstlCommVueData.merchant.merchantIndex];this.mstlCommVueData.merchant.shipIndex=i.shipIndex,e.showMerchantShipPanel(i.subMerchantInfo.other.mallShipList)},openOtherProducts:function(e){this.merchantListByGroupSetting[e].isOpen=!this.merchantListByGroupSetting[e].isOpen},getShipText:function(e){return(e.shipInfo.shipType||"")+" "+Fai.top._currencyVal+e.shipInfo.shipPrice},_currencyVal:function(){return Fai.top._currencyVal},openExpressDelivery:function(){return Fai.top._openExpressDelivery},isCombinedPurchaseFreeShopping:function(){return Fai.top._isCombinedPurchaseFreeShopping},mallMerchantsOpen:function(){return Fai.top._mallMerchantsOpen}},template:'\n\t\t\t\t<div id="merchantProductList" class="fk_merchant_orderSettle">\n\t\t\t\t    <div class="fk_mstl_merchant_list">\n                        <div class="fk_mstl_merchant_item" :data-disabled="item.subMerchantInfo.subOpenStatus!==0" v-for="(item, index) in merchantListByGroupSetting">\n                            <div class="fk_mstl_merchant_item_header" v-if="mallMerchantsOpen()">\n                            \t<a class="fk_mstl_merchant_item_header_content" style="display:flex;align-items:center;">\n                            \t\t<div class="fk_mstl_merchant_item_header_icon">\n\t\t\t\t\t\t\t\t\t\t<img :src="item.subMerchantInfo.other.logo.imgPath" alt="" style="width:100%;height:100%">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_item_header_text">{{item.subMerchantInfo.shopName}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\'fk_mdetail_merchant_shop_header_status\' v-if="item.subMerchantInfo.subOpenStatus!==0" style="margin-left:0.35rem;">\n\t\t\t\t\t\t\t\t\t\t<svg role=\'img\' class=\'fk_mdetail_icon\'><use xlink:href=\'#jzm-vicon_doorplate\'></use></svg>\n\t\t\t\t\t\t\t\t\t\t<span style=\'position:relative;z-index:10\'>{{item.subMerchantInfo.subOpenStatusName}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</a>\n                            </div>\n                            \n                            <div class="fk_mstl_merchant_item_info" v-if="item.isOpen || pIndex<3" v-for="(productItem, pIndex) in item.list">\n                                <div class="fk_mstl_merchant_item_info_img">\n                                \t<img :src="productItem.path" style="width:100;height:100%" :alt="productItem.productName">\n\t\t\t\t\t\t\t\t</div>\n                                <div class="fk_mstl_merchant_item_info_content">\n                                    <div class="fk_mstl_merchant_item_info_content_top">\n                                    \t<div class="fk_mstl_merchant_item_info_content_title J_productName">{{productItem.productName}}</div>\n\t\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_item_info_content_options">{{productItem.chooseStr}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_item_info_content_bottom">\n\t\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_item_info_content_prop">\n\t\t\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_item_info_content_prop_price" :class="fColor">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--<span v-show="false">{{productItem.priceText}}</span>--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<fai-price-comp :currency="_currencyVal()" :class="fColor" :number="productItem.priceValue"></fai-price-comp>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_item_info_content_prop_num">x{{productItem.amount}}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n                                </div>\n                            </div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div style="text-align: center;padding-top:0.95rem;"  v-if="item.list.length>3">\n\t\t\t\t\t\t\t\t<div style="display:inline-block">\n\t\t\t\t\t\t\t\t\t<div class="fk_mstl_merchant_seedProductBtn" :data-active="item.isOpen" @click="openOtherProducts(index)">\n\t\t\t\t\t\t\t\t\t\t<span>{{item.isOpen ? "收起" : ("还有" + (item.list.length-3) + "件商品") }} </span>\n\t\t\t\t\t\t\t\t\t\t<svg class="fk_mstl_merchant_seedProductBtn_arrow jzm-v2 fk_mstl_icon" role=\'img\' ><use xlink:href=\'#jzm-v2\'></use></svg>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n                            <div class="fk_mstl_merchant_item_ship" v-if="openExpressDelivery() && !isCombinedPurchaseFreeShopping()">\n                                <div class="fk_mstl_merchant_item_ship_label">配送方式</div> \n                                <div class="fk_mstl_merchant_item_ship_value" @click="callShipPanel(index)">\n                                    <div class="fk_mstl_merchant_item_ship_value_name">\n                                    \t<span style="    \n                                    \t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\tmax-width: 3rem;\n\t\t\t\t\t\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\t\t\t\t\ttext-overflow: ellipsis;\n    \t\t\t\t\t\t\t\t\t">{{item.shipInfo.shipType || \'\'}}</span>\n                                    \t<fai-price-comp :number="item.shipInfo.shipPrice" size="small"></fai-price-comp>\n                                    </div>\n                                    <div></div>\n                                    <div class="fk_mstl_merchant_item_ship_value_arrow">\n                                        <svg role=\'img\' class=\'jzm-v2 fk_mstl_icon\'><use xlink:href=\'#jzm-v2\'></use></svg>\n                                    </div>\n                                </div> \n                            </div>\n                            <div class="fk_mstl_merchant_item_msg" v-if="orderMessageData.orderMessageOpen">\n                                <div class="fk_mstl_merchant_item_msg_label">买家留言</div> \n                                <div class="fk_mstl_merchant_item_msg_value"><input placeholder="给卖家留言" v-model="item.shipInfo.remark" style="border:none;outline:none;font-size:0.55rem" maxlength="100"/></div> \n                            </div>\n                        </div>\n                    </div>\n                    \n                    <NormalItemList :list="listByGroup[0]" style="margin-top:0.35rem;"></NormalItemList>\n                </div>\n\t\t\t</div>\n\t\t\t'})}}(Mobi,jm),function(e,t){jm(function(){jm("#g_web").append("<div id='mstlShipPanel'></div>");Fai.top._merchantShipPanelVm=new Vue({el:"#mstlShipPanel",data:function(){return{shipList:[],checkedIndex:-1,visible:!1,mstlCommVueData:e.mstlCommVueData}},template:'\n\t\t\t\t<div class="fk_mstlShipPanel" v-if="visible" @click="hide">\n\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel" @click="stopPropacaion">\n\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_header">配送方式</div>\n\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_section">\n\t\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_shipItem" v-for="(item, i) in shipList" v-show="item.show" @click="checkedHandler(i)">\n\t\t\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_shipItem_info">\n\t\t\t\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_shipItem_info_type" style="\n\t\t\t\t\t\t\t\t\t\t white-space: nowrap;\n\t\t\t\t\t\t\t\t\t\t  overflow: hidden;\n\t\t\t\t\t\t\t\t\t\t  text-overflow: ellipsis;\n\t\t\t\t\t\t\t\t\t">{{item.type}}</div>\n\t\t\t\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_shipItem_info_price">{{item.price}}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="fk_mstlShipPanel_shipPanel_shipItem_radio" style="line-height: 1;">\n\t\t\t\t\t\t\t\t\t<span class="faisco-icons-right" :class="fColor" v-if="mstlCommVueData.merchant.shipIndex===i"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',methods:{checkedHandler:function(e){this.mstlCommVueData.merchant.shipIndex=e,this.hide()},stopPropacaion:function(e){return e.stopPropagation(),!1},hide:function(){e.hideMerchantShipPanel()}},computed:{fColor:function(){return Fai.top._fColor}}})}),e.showMerchantShipPanel=function(e){var t=Fai.top._merchantShipPanelVm;t.shipList=e,t.visible=!0},e.hideMerchantShipPanel=function(){Fai.top._merchantShipPanelVm.visible=!1}}(Mobi),function(e,t,i){e.initMstlCoupon=function(e,t){new Vue({el:"#couponLine",data:function(){return{couponLineData:t}},template:"\n\t\t\t\t<div>\n\t\t\t\t\t<div class='coupon_line' id='couponLine'>\n\t\t\t\t\t\t<div class='count_line wekitBox'>\n\t\t\t\t\t\t\t<div class='linetitle'>\n\t\t\t\t\t\t\t\t<span>{{couponLineData.coupons}}</span>\n\t\t\t\t\t\t\t\t<span class='small-font' id='showCouponCount' style='display:none;' v-html=\"couponLineData.showCouponCountHtml\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='select_line flex1'>\n\t\t\t\t\t\t\t\t<span id='couponOffsetMoney' >{{couponLineData.mobi_notUse}}</span>\n\t\t\t\t\t\t\t\t<span style='font-size:0.65rem;'><svg class=\"jzm-v2 fk_mstl_icon\" role='img' ><use xlink:href='#jzm-v2'></use></svg></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='couponListPanel'></div>\n\t\t\t\t</div>\n\t\t\t",mounted:function(){Vue.nextTick(function(){Mobi.initUseCoupon(Fai.top._couponList),Mobi.initCouponPanel(Fai.top._couponList)})},methods:{isMulProductsExist:function(){return Fai.top._mstlMerchantProductListVm.isMulProductsExist()}}})}}(Mobi,jm),function(e,t,i){jm(function(){Vue.component("fai-price-comp",{props:{number:Number,currency:{type:String,value:""},size:String},template:"\n\t\t\t\t<div class='fk_priceComp' :data-size=\"size\">\n\t\t\t\t\t<div class='fk_priceComp_currency'>{{currency}}</div>\n\t\t\t\t\t<div class='fk_priceComp_numberInt'>{{numberInt}}</div>\n\t\t\t\t\t<div class='fk_priceComp_numberFloat'>{{numberFloatWithDot}}</div>\n\t\t\t\t</div>\n\t\t\t",computed:{numberInt:function(){return parseInt(this.number)},numberFloatWithDot:function(){return"."+(this.number.toFixed(2)+"").split(".")[1]}}})}),e.initPriceComp=function(e,t,i,o){new Vue({el:"#"+e,template:'\n\t\t\t\t<fai-price-comp :number="number" :class="fColor" :currency="_currencyVal" :size="size"></fai-price-comp>\n\t\t\t',data:function(){return{size:i||"",number:t,fColor:o}},computed:{_currencyVal:function(){return Fai.top._currencyVal}}})}}(Mobi),Mobi.newsCommentAddCom=function(){var e=jm.trim(jm("#newsCommentCreator").val()),t=(jm("#newsCommentCreator").attr("minlength"),jm("#newsCommentInput").val()),i=jm("#newsCommentInput").attr("minlength"),o=jm("#validateCodeInput").val(),n=jm("#newsCommentInput").attr("newsId");if("string"==typeof e)if("string"==typeof t&&""!=t)if(t.length<i)Mobi.ing(jm.format(LS.commentLenTips,jm.encodeHtml(i)));else if(jm(".J_newsCommentCaptcha").hasClass("captchaHide")||"string"==typeof o&&""!=o){var a={validateCode:o,newsId:n,creator:e,comment:t};Mobi.ing(LS.siteFormSubmitIng),jm.ajax({type:"POST",url:"ajax/newsComment_h.jsp?cmd=submitComment",data:a,error:function(){Mobi.ing(LS.js_systemError),jm("#captchaChange").click()},success:function(e){var t=jm.parseJSON(e);if(t&&t.success||jm("#captchaChange").click(),t.hasFW)Mobi.ing(t.msg);else switch(t.msg){case 1:Mobi.ing(LS.js_captchaError);break;case 2:Mobi.ing(LS.creatorError);break;case 3:Mobi.ing(LS.commentError);break;case 4:Mobi.getCommentDiv("news",n),t.autoOpenComm||null==t.autoOpenComm?Mobi.ing(LS.commentSuccess,1):Mobi.ing(LS.commentSuccessNeedReview,1);break;case 5:Mobi.ing(LS.paramError);break;case 6:var i=jm.encodeUrl(window.location.href);window.location.href="login.jsp?returnUrl="+i+"&errno=11";break;case 7:Mobi.ing(LS.commentClosed);break;case 8:Mobi.ing(LS.commentSubmitError);break;case 9:Mobi.ing(LS.commentCountLimit);break;case 10:Mobi.ing(LS.msgBoardInputValidateCode),t.needCode&&jm(".J_newsCommentCaptcha").removeClass("captchaHide")}}})}else Mobi.ing(LS.memberInputCaptcha);else Mobi.ing(LS.commentNotEmpty);else Mobi.ing(LS.creatorTips)},Mobi.initMixNews=function(e){var t=jm("#newsList"+e.moduleId).children().eq(0),i=t.find(".mixNewsStyleTitleContainer  a"),o=parseInt(t.width())-parseInt(e.imgWidth)-48;i.css({width:o+"px"})},Mobi.showMore=function(){var e=document.getElementById("sharePanel"),t=document.getElementById("showOrHide");e&&e.style&&("auto"==e.style.height?(e.style.height="",t.className=t.className.replace("hideIcon","showIcon"),e.style.background=""):(e.style.height="auto",t.className=t.className.replace("showIcon","hideIcon")))},Mobi.showBg=function(){Mobi.mobiHideScroll();var e=document.body.clientHeight,t=document.body.clientWidth,i=document.body,o=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div");o.id="shareParentDiv",n.id="shareFullbg",n.className="shareFullbg",a.id="shareTipsDiv",a.className="shareTips",i.appendChild(o);var r=document.getElementById("shareParentDiv");r.appendChild(n),r.appendChild(a);var s=document.getElementById("shareFullbg");document.getElementById("shareTipsDiv");s.style.height=e+"px",s.style.width=t+"px",s.style.position="fixed",s.onclick=function(){var e=document.getElementById("shareParentDiv");Mobi.mobiShowScroll(),e.parentNode.removeChild(e)}},Mobi.initNewsEvent=function(e,t,i,o){if(e){var n=document.getElementById("productDetailHeader"+e),a=(document.getElementById("newsDetailShare"),n.querySelector(".icon-gClose")),r={triggerId:Fai.top._openThemeV3?"newsDetailShare":2===o?"newsDetailV3Share":"newsDetailShare",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareData),direction:"bottom",callback:function(){Mobi.showCommSharePanel("shareListShowSwipe","news")},closeWebPage:".shareListPanelBg"};Mobi.initWebPage(r),jm(a).bind("click",function(){if(Fai.top._isExternalLinks=!1,window.history.length<=1)window.location.href="/";else if(i&&i.length>0)window.location.href=i;else if(Fai.top._manageMode)sessionStorage.getItem("historyList")?jm(Fai.top.document.getElementById("jz_designerOperate").querySelector(".j_designerBack")).click():window.location.href="/";else{if(navigator.userAgent.toLocaleLowerCase().includes("ucbrowser")&&history.length<=2)return void(window.location.href="/");history.back()}return!1}),Fai.top._openThemeV3?Mobi.scrollFadeInV3("productDetailHeader"+e,"newsFigure"+e,t):Mobi.scrollFadeIn("productDetailHeader"+e,"newsFigure"+e,t);var s={triggerId:"postComment",panelId:"userCommentPanel",callback:function(){Mobi.postUserComment("ajax/newsComment_h.jsp?cmd=submitNewComment",1)},closeWebPage:"#userCommentPanel .userCommentGoBack"};Mobi.initWebPage(s);var l=jm("#newsDetailPanel").find("video"),c=l.length;if(c>0&&jm("#postComment").on("click",function(){for(var e=0;e<c;e++)l[e].pause();jm.os.android&&(l.hide(),Mobi.bindTouchAndClickEvent(jm("#userCommentPanel .userCommentGoBack"),function(){l.show()}))}),Mobi.hidePlaceholder(),Fai.top._openThemeV3&&28==Fai.top._pageId){var d=jm("#webHeader_v3").hasClass("J_header_is_hide");jm("body").hasClass("regularHeadStyle")&&!d&&jm("#newsDetailPanel").find(".title-textStyle").css("margin-top","0");var m=jm(".productDetailHeader");d&&""==m.html()&&(m.hide(),jm("#newsDetailPanel").find(".title-textStyle").css("margin-top","0"))}}},Mobi.setNewDetailPanelHeight=function(){var e=jm("#newsDetailPanel")[0].offsetHeight,t=0;if(jm(".newsBottom").length>0)t=jm(".newsBottom")[0].offsetHeight;else{var i=jm("#g_web").css("paddingTop");i&&(i=Number(i.substring(0,i.length-2)),isNaN(i)||(e-=i))}jm(".formMiddle").css({height:e+"px",paddingBottom:"0",border:"none"}),jm(".newsDetail").css({height:e-t+"px"})},Mobi.getCommentsInfo=function(e,t,i,o){if(e)if(isNaN(t))Mobi.ing(LS.mallStlSubmitError);else{var n="id="+t;isNaN(i)||(jm(".getMoreComments").remove(),n+="&pageno="+i),"newsV3"==e&&(n+="&loadingPath="+Fai.top._loadingPath),Mobi.showLoading(),jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd="+e,data:n,error:function(){Mobi.closeLoading(),Mobi.ing(LS.js_systemError)},success:function(t){var i=jm.parseJSON(t);if(i.success&&(jm("#newsDetailPanel").append(i.html),"newsV3"==e&&setTimeout(function(){Mobi.bindImgLazyLoad("newsDetailPanel")},0)),Mobi.closeLoading(),Mobi.hidePlaceholder(),"newsV3"!==e&&jm("#postComment").length>0&&jm("#module"+o).length>0){var n=jm("#g_web").height();n-jm("#webContainerBox").height()>5&&(jm("#webContainerBox").css("height",n+"px"),jm("#module"+o).css("height",n+"px").find(".formMiddle").css("height",n+"px"))}}})}else Mobi.ing(LS.mallStlSubmitError)},Mobi.getCommentsTotalSize=function(e,t,i,o){if(e)if(isNaN(t))Mobi.ing(LS.mallStlSubmitError);else{var n="id="+t;isNaN(i)||(jm(".getMoreComments").remove(),n+="&pageno="+i),n+="&loadingPath="+Fai.top._loadingPath,jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd=newsV3",data:n,error:function(){Mobi.closeLoading(),Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);if(t.success){var i=parseInt(t.totalSize);jm("#postComment");if(jm("body").find("#newsDetailShare").length?jm("<span id='newsDatailComment' class='icon-comment'></span>").insertBefore("#newsDetailShare"):jm(".newsBottom").append("<span id='newsDatailComment' class='icon-comment'></span>"),i>0){var o=i<10?"circle_size":" ";jm("#newsDatailComment").append("<span class='comment_totalSize "+o+"'>"+i+"</span>");var n=0;jm("#newsDatailComment").bind("click",function(){jm("body").hasClass("regularHeadStyle")&&(n=jm(".productDetailHeader").height());var e=jm(".commentBox").offset().top-n,t=parseInt(e)-10,i=parseInt(e)+10;if(!(document.documentElement.scrollTop>t&&document.documentElement.scrollTop<i)){var o,a,r=e,s=0;a=setInterval(function(t){o=r/4,e=parseInt(s+o),s=e,document.body.scrollTop=e,document.documentElement.scrollTop=e,e>=r-o&&clearInterval(a)},1e3/60)}})}}Mobi.closeLoading(),Mobi.hidePlaceholder()}})}else Mobi.ing(LS.mallStlSubmitError)},Mobi.appendShareIcon=function(){var e=jm(".newsBottom");jm("body").find(".newsBottom").length?e.append("<span id='newsDetailShare' class='icon-share g_iconMiddle g_round newsShare icon-defaultColor'></span>"):(jm("#newsDetailPanel").append("<div class='only_share'>"),jm(".only_share").append("<span id='newsDetailShare' class='icon-share g_iconMiddle g_round newsShare icon-defaultColor'></span></div>"))},Mobi.changeIconBg=function(){jm("body").find("#newsDetailPanel.pageStyle1").length?(jm(".jz_themeV3 .newsDetailV3Panel .newsBack, .jz_themeV3 .newsNewDetailPanel .newsHome").css("background-color","#ffffff"),jm(".jz_themeV3 .newsDetailV3Panel .newsBack, .jz_themeV3 .newsNewDetailPanel .newsHome").addClass("newsIconBlack")):jm("body").find("#newsDetailPanel.pageStyle0").length&&jm(".jz_themeV3 .newsDetailV3Panel .newsBack, .jz_themeV3 .newsNewDetailPanel .newsHome").addClass("newsIconWhite")},Mobi.newsGroupHeaderBorder=function(e){jm("body").find(".jz_themeV3 .newsDetailV3Panel .title-textStyle")&&jm(".jz_themeV3 .productDetailHeader").css("border-bottom","0.025rem solid #eeeeee")},Mobi.newsDisabledLink=function(){0!=jm(".newsNext .prevNextContent").find("span").length&&jm(".newsNext .prevNextContent").css("color","#b3b3b3"),0!=jm(".newsPrev .prevNextContent").find("span").length&&jm(".newsPrev .prevNextContent").css("color","#b3b3b3")},Mobi.getNewsCommentAjaxPagenation=function(e,t,i){if(e){var o="id="+e+"&pageno="+t+"&ajaxPage="+!0;jm.ajax({type:"post",url:"ajax/other_h.jsp?cmd="+i,data:o,error:function(){Mobi.ing("error")},success:function(e){var t=jm.parseJSON(e);t.html||(t.html=""),jm("#newsDetailPanel .commentBox").remove(),jm("#newsDetailPanel").append(t.html),Mobi.bindImgLazyLoad("newsDetailPanel");var i=parseInt(jm("#newsDetailPanel .commentBox").offset().top),o=0,n=jm(".productDetailHeader");o="none"==n.css("display")?i:i-parseInt(n.height()),window.scrollTo(0,o)}})}},Mobi.changeTheUrlToAdaptApple=function(e,t){var i;if(""!=e&&null!=e){var o=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(o)?""!=t&&null!=t&&(i=t):i=e,window.location.href=i}},Mobi.initModuleCardGraphicNewsList=function(e){var t,i,o,n,a,r,s,l,c,d,m,p,u,h,f,g,v=e.moduleId,b=jm("#newsList"+v),j=b.width(),_=e.picNum,M=0,y=0,S=jm(window),I=jm("body");function w(e){document.documentElement.scrollLeft||document.body.scrollLeft,e=e||window.event;var t=(m=e.pageX)-d,i=parseInt(F.css("left")||0)+t,o=s-r,n=parseInt(b.offset().left);i>0?i=0:i<o&&(i=o),0==b.find(".J_newsListSlideCover").length?k.append("<div class='J_newsListSlideCover' style='position:absolute;left:0;width:"+a+"px;height:"+M+"px;z-index:2;'></div>"):b.find(".J_newsListSlideCover").show(),F.css("left",i+"px"),d=m,640==parseInt(j)?(m<=n||m>=s+n)&&(S.off("mousemove.newsListSlide"),S.off("mouseup.newsListSlide"),d=null,m=null,b.find(".J_newsListSlideCover").hide()):(m<=0||m>=s)&&(S.off("mousemove.newsListSlide"),S.off("mouseup.newsListSlide"),d=null,m=null,b.find(".J_newsListSlideCover").hide()),e.preventDefault()}function C(e){e=e||window.event;S.off("mousemove.newsListSlide"),S.off("mouseup.newsListSlide"),d=null,m=null,b.find(".J_newsListSlideCover").hide(),e.preventDefault()}function P(e){var t=(e=e||window.event).changedTouches.length>0?e.changedTouches[0]:e.touches[0];return{pageX:t.pageX,pageY:t.pageY}}function x(e){var t=P(e);h=t.pageX,f=t.pageY,void 0===g&&void 0!==p&&void 0!==u&&void 0!==p&&(g=function(e,t,i,o){var n=Math.abs(e-i),a=Math.abs(t-o);if(0!==n||0!==a)return 0===n&&a>0||!(0===a&&n>0)&&a/n>1}(p,u,h,f)),void 0!==g&&F.off("touchmove.newlist"),p=t.pageX,u=t.pageY}function L(e){g=void 0,F.off("touchmove.newlist"),F.off("touchend.newlist")}if(0!=b.length&&5==_){for(var k=jm(b).find(".J_newsListPanel"),F=jm(b).find(".J_newsListSlidePanel"),T=jm(b).find(".J_cardGraphicNewsStyle"),B=jm(b).find(".J_mixNewsStyleTitleContainer5"),A=0;A<(c=T.length);A++){if(t=jm(T[A]),i=parseInt(t.height()),o=parseInt(t.width()),a=c*o,l=parseInt(T.find(".lineBody").eq(0).css("padding-left").replace("px","")),r=a+l,1==c)return F.css({right:"0",margin:"0 auto",width:r+"px"}),void k.css("height",i+"px");i>M&&(M=i),(n=parseInt(t.find(".J_mixNewsStyleTitleContainer5").height()))>y&&(y=n)}k.css("height",M+"px"),T.css("height",M+"px"),F.css("height",M+"px").css("width",r+"px"),B.css("height",y+"px"),(s=k.width())<a&&(Mobi.isPC()?F.off("mousedown.newsListSlide").on("mousedown.newsListSlide",function(e){e=e||window.event,d=e.pageX,S.off("mousemove.newsListSlide").on("mousemove.newsListSlide",w),S.off("mouseup.newsListSlide").on("mouseup.newsListSlide",C),e.preventDefault()}):(new iScroll("J_newsListPanel"+v,{onBeforeScrollStart:null}),I.off("touchmove.newlist"+v).on("touchmove.newlist"+v,function(e){!1===g&&e.preventDefault()}),T.off("touchmove.newlist").on("touchmove.newlist",function(e){!0===g&&e.stopPropagation()}),F.off("touchstart.newlist").on("touchstart.newlist",function(e){var t=P(e);h=p=t.pageX,f=u=t.pageY,F.off("touchmove.newlist").on("touchmove.newlist",x),F.off("touchend.newlist").on("touchend.newlist",L)})))}},Mobi.initModuletimeAxisNewsList=function(e){var t=e.moduleId,i=jm("#newsList"+t),o=e.picNum;if(0!=i.length&&7==o)for(var n=i.find(".J_newsTitlePic"),a=parseInt(n.width()),r=parseInt(n.height()),s=Math.ceil(.04*a)+" 0"+","+(a+" 0")+","+(a+" "+r)+","+(Math.ceil(.04*a)+" "+r)+","+(Math.ceil(.04*a)+" "+Math.ceil(.38*r))+","+(Math.ceil(.01*a)+" "+Math.ceil(.33*r))+","+(Math.ceil(.04*a)+" "+Math.ceil(.27*r)),l=0;l<n.length;l++)jm(n[l]).find("polygon").attr("points",s),jm(n[l]).find("svg").attr("width",a).attr("height",r),jm(n[l]).find("image").attr("width",a).attr("height",r)},Mobi.fixIphoneMargin=function(e){var t=e.moduleId,i=jm("#newsList"+t);0!=i.length&&/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(i.find(".J_newsElementsPanel .ne_separatorLine").css("vertical-align","middle").css("padding-top","0.05rem"),i.find(".J_newsElementsPanel .ne_newsSort").css("vertical-align","middle"),i.find(".J_newsElementsPanel .ne_newsTime").css("vertical-align","middle"))},Mobi.fixFormMiddleContentBottom=function(e,t){var i=jm("#module"+e);if(0!==i.length){var o=i.find(".formMiddleContent");t?o.removeAttr("style"):o.css("margin-bottom",0)}},Mobi.fixModuleTop=function(e){var t=jm("#module"+e);0!==t.length&&(parseInt(t.css("top"))>0&&t.css("top",0),parseInt(t.css("border-radius"))>0&&t.css("border-radius",0))},Mobi.vote=function(e,t,i,o,n){if(Fai.top.isJuly3FreeUser)return Mobi.logDog(200964,7),void Mobi.ing("免费版暂不支持此功能");var a=!0,r=new Array;jm(".voteItems"+e+t).each(function(){var e={},t=new Array;if(jm(this).find(".voteItems").find("input:checked").each(function(){var e=jm(this).val();isNaN(e)||t.push(parseInt(e))}),0==t.length)return Mobi.ing(LS.voteNotSelect),void(a=!1);e.itemList=t,r.push(e)});parseInt(jm.getCookie("vote"+e));if(a){var s=!1,l="",c=jm("#M"+t+"V"+e+"voteValidateCode"),d=c.val();if(n){if(""==d)return void Mobi.ing(jm.format(c.attr("msg")))}else if(s="none"!=jm("#voteCodePanel"+e+t).css("display"),l=jm("#needVoteCode"+e+t).val(),s&&""==l)return void jm("#needVoteCode"+e+t).css("border-color","#ff0000");Mobi.ing(LS.voteBeing,-1),jm("#vote"+e+t).attr("disabled",!0),jm(".voteCodePic").attr("src","validateCode.jsp?"+1e3*Math.random()+"&validateCodeRegType=3"),jm.ajax({type:"post",url:"ajax/vote_h.jsp?cmd=voteItem",data:"vid="+e+"&list="+jm.encodeUrl(jm.toJSON(r))+"&vCodeId="+t+e+"&validateCode="+d+"&openValidate="+n+"&verificationCode="+jm.encodeUrl(l),error:function(){Mobi.ing(LS.voteError),setTimeout(function(){jm("#vote"+e+t).removeAttr("disabled")},3e3)},success:function(o){var n=jm.parseJSON(o);if(n.success)if(jm("#needVoteCode"+e+t).val(""),Mobi.ing(LS.voteSuccess,1),jm(".voteItems"+e+t).find(".voteItems").find("input:checked").each(function(){jm(this).attr("checked",!1)}),i>0){if(""===jm.getCookie("vote"+e)||"null"===jm.getCookie("vote"+e)){var a=new Date;a.setHours(a.getHours()+i),jm.setCookie("vote"+e,i,{expires:a})}}else 0==i?jm.setCookie("vote"+e,null):jm.setCookie("vote"+e,-1,{expires:30});else n.login?Mobi.ing(LS.voteErrorByNotLogin):n.validateCodeErr?(Mobi.ing(n.msg),jm("#M"+t+"V"+e+"voteValidateCode").val(""),Mobi.voteValidation(e,t)):(Mobi.ing(n.msg),n.needCode?jm("#voteCodePanel"+e+t).show():n.codeErr&&jm("#needVoteCode"+e+t).css("border-color","#ff0000"));setTimeout(function(){jm("#vote"+e+t).removeAttr("disabled")},3e3)}})}},Mobi.initModuleVote=function(e){var t=e.id,i=e.delay,o=e.mid,n=e.isVoted,a=e.openValidate;if(0==i)jm.setCookie("vote"+t,null);else if(-1==i)"null"===jm.getCookie("vote"+t)&&jm.setCookie("vote"+t,-1,{expires:30});else if("-1"===jm.getCookie("vote"+t)&&jm.setCookie("vote"+t,null),""!==jm.getCookie("vote"+t)&&parseInt(jm.getCookie("vote"+t))!=i){var r=new Date;r.setHours(r.getHours()+i),jm.setCookie("vote"+t,i,{expires:r})}jm("#vote"+t+o).click(function(){Mobi.vote(t,o,i,n,a)})},Mobi.initModuleVoteManage=function(){Mobi.ing("管理态不支持提交投票.")},Mobi.showVoteResult=function(e,t){var i=new Array;jm("#vote"+t).find("input:checked").each(function(){var e=jm(this).val();isNaN(e)||i.push(parseInt(e))}),jm("#voteResult").addClass("showFullScreen"),jm("#voteResult").length>0&&jm("#voteResult").remove(),jm("#fullScreenDivCotainer").append("<div id='voteResult'  class=' webBackground webContainerBox voteResultDiv moduleContent fk-body-bg' style='overflow-y:auto; position: fixed !important;'></div>"),jm.ajax({type:"post",url:"ajax/vote_h.jsp?cmd=voteResult",data:"id="+e+"&list="+i,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e),i=t.msg;t.success&&(jm("#voteResult").append(t.html),jm("#voteResult").addClass("showVoteResult"),i.length>0&&Mobi.ing(i))}})},Mobi.closeVoteResult=function(){jm("#voteResult").removeClass("showVoteResult"),setTimeout(function(){jm("#voteResult").remove()},600)},Mobi.voteValidation=function(e,t){jm("#M"+t+"V"+e+"validateCodeImg").attr("src","validateCode.jsp?"+parseInt(1e3*Math.random())+"&vCodeId="+t+e)},Mobi.popupSearch=function(e){if(e&&_typeof(e.hotTopic)){var t;"string"==typeof e.hotTopic&&e.hotTopic&&(e.hotTopic=JSON.parse(e.hotTopic)),e.searchProduct?jm.getCookie("productSearchHistory")&&(t=JSON.parse(jm.getCookie("productSearchHistory"))):jm.getCookie("searchHistory")&&(t=JSON.parse(jm.getCookie("searchHistory")));var i;e.isSysProductGroupCol&&"icon-offSearch";var o=[];if(o.push('<div id="searchWindow" class="searchWindow newSearchWindow">'),o.push('\t<div class="searchInputBar">'),o.push('\t\t<div class="popupSearchWrap newPopupSearchWrap">'),o.push('\t\t\t<svg class="searchSvg" id="icon-searchSubmit">'),o.push('\t\t\t\t<use xlink:href="#jzm-v19" :fill="#868686" style="fill:#868686"></use>'),o.push("\t\t\t</svg>"),o.push('\t\t\t<form><input id="searchInput" class="popupSearchInput newSearchInput" placeholder='.concat(Mobi.decodeHtml(e.searchTip),"></form>")),o.push('\t\t\t<svg class="icon-delete" id="icon-delete">'),o.push('\t\t\t\t<use xlink:href="#jzm-v25" :fill="#ffffff" style="color:#cccccc; fill:#ffffff;"></use>'),o.push("\t\t\t</svg>"),o.push('\t\t\t<div id="icon-closeSearch" class="icon-closeSearch">'+LS.cancel+"</div>"),o.push("\t\t</div>"),o.push("\t</div>"),e&&e.hotTopic&&e.hotTopic.length){o.push('\t<div class="hotTopicWrap">'),o.push("\t\t<h3>"+LS.hostSearch+"</h3>");for(var n=0,a=e.hotTopic.length;n<a;n++)o.push('<span class="topicItem">'+Mobi.encodeHtml(e.hotTopic[n])+"</span>");o.push("\t</div>")}if(e.historySearch&&t){if(o.push('<div class="historyTopicWrap">'),o.push('\t\t\t<svg class="deleteSvg" id="clearHistoryBtn">'),o.push('\t\t\t\t<use xlink:href="#jzm-v18" :fill="#2E2D2D" style="fill:#2E2D2D"></use>'),o.push("\t\t\t</svg>"),o.push("\t\t<h3>"+LS.historySearch+"</h3>"),t)for(n=0,a=t.length;n<a;n++)o.push('<span class="topicItem">'+Mobi.encodeHtml(t[n])+"</span>");o.push("</div>")}o.push("</div>");var r=jm(o.join(""));jm("#g_web").append(r),jm("#icon-closeSearch").on("click",function(){jm("#searchWindow").on("animationend webkitAnimationEnd msAnimationEnd oAnimationEnd oanimationend",function(){jm("#searchWindow").remove(),jm(this).off("animationend webkitAnimationEnd msAnimationEnd oAnimationEnd oanimationend")}),jm("#searchWindow").addClass("searchWindowOff"),jm(this).off("click")}),jm("#icon-searchSubmit").on("click",function(){if(""==(i=jm.trim(jm("#searchInput").val())))return jm("#searchInput").get(0).focus(),void Mobi.ing("请输入搜索内容");Mobi.searchInMobi(i,e)}),jm("#icon-delete").on("click",function(){jm(searchInput).val(""),jm("#icon-delete").hide()}),jm(".newSearchInput").on("input",function(){""!=jm(this).val()?jm("#icon-delete").show():jm("#icon-delete").hide()}),jm("#searchWindow").on("keypress","#searchInput",function(t){if(13===t.which)return""==(i=jm.trim(jm("#searchInput").val()))?(Mobi.ing("请输入搜索内容"),jm("#searchInput").get(0).blur(),jm("#searchInput").get(0).focus(),!1):(Mobi.searchInMobi(i,e),!1)}),jm("#searchWindow").on("click",".topicItem",function(){i=jm(this).text(),Mobi.searchInMobi(i,e),jm(".topicItem").off("click")}),jm("#searchWindow").on("click","#clearHistoryBtn",function(){jm(".historyTopicWrap").remove(),jm(this).remove(),e.searchProduct?jm.setCookie("productSearchHistory","",-1):jm.setCookie("searchHistory","",-1)}),jm("#searchInput").get(0).focus()}},Mobi.searchInMobi=function(e,t){if(Fai.top._manageMode&&Fai.top.Mobi.checkSaveBar())return!1;Fai.top._manageMode&&Fai.top.mobiDesigner.designerClose();var i=t.moduleId,o=(t.lanCode,e),n=t.nSL,a=t.rangeType;if(window.localStorage&&window.localStorage.getItem&&window.localStorage.getItem("totalSearchRange"+i)&&Fai.top._manageMode&&(n=JSON.parse(window.localStorage.getItem("totalSearchRange"+i)).nSL,a=JSON.parse(window.localStorage.getItem("totalSearchRange"+i)).rangeType),!t.searchProduct&&"object"===_typeof(JSON.parse(jm.toJSON(n)))){var r=[];for(k in JSON.parse(jm.toJSON(n)))r[k]=JSON.parse(jm.toJSON(n))[k];n=r}0===a&&(n=[]),void 0===i&&(i=-1);var s="searchResult.jsp?searchword="+jm.encodeUrl(jm.trim(o))+"&nSL="+jm.encodeUrl(jm.toJSON(n))+"&searchModuleId="+i;1==t.searchProduct&&(s="pr.jsp?psId="+i+"&searchword="+jm.encodeUrl(jm.trim(o))),window.location.href=s;var l=[];t.searchProduct?jm.getCookie("productSearchHistory")&&(l=JSON.parse(jm.getCookie("productSearchHistory"))||[]):jm.getCookie("searchHistory")&&(l=JSON.parse(jm.getCookie("searchHistory"))||[]),-1===l.indexOf(o)&&(l.unshift(o),l=l.slice(0,10),t.searchProduct?jm.setCookie("productSearchHistory",jm.toJSON(l),7):jm.setCookie("searchHistory",jm.toJSON(l),7))},Mobi.bindTopSearch=function(e){e&&jm(".header_v3 .topSearch").off("click.search").bind("click.search",function(){Mobi.popupSearch(e)})},function(e,t,i){var o=[];t.ExposureQueue={add:function(e){-1===t.ExposureQueue.indexOf(e.name)&&o.push(e)},remove:function(e){var i=t.ExposureQueue.indexOf(e);i>-1&&o.splice(i,1)},indexOf:function(e){var t=-1;return o.forEach(function(i,o){i.name===e&&(t=o)}),t},init:function(){t.ExposureQueue.listen()},listen:function(){var i=e(window),o=t.throttle(t.ExposureQueue.exposure);t.ExposureQueue.exposure(),i.off("resize.exposureList").on("resize.exposureList",o).off("scroll.exposureList").on("scroll.exposureList",o)},exposure:function(){o.forEach(function(e){jm.isFunction(e.onTrigger)&&e.onTrigger()})}},e(function(){t.ExposureQueue.init()})}(jm,Mobi),function(e,t,i){t.bindTabEvent=function(i,o,n){var a=e(i);if(t.isPC()){var r="click."+o;a.off(r).on(r,n)}else{var s="touchstart."+o,l="touchmove."+o,c="touchend."+o;a.off(s).on(s,function(){var e=!1;a.off(l).on(l,function(){e=!0}),a.off(c).on(c,function(){if(a.off(c).off(l),!e)return n.apply(this,arguments)})})}}}(jm,Mobi),function(e,t,i){t.manageFaiscoAd=function(e){var i=!0!==Fai.top._manageMode,o=!0===Fai.top._isFreeVer||Fai.top.checkUPlanAcct;i&&o&&t.initCornerAd(e)},t.initCornerAd=function(i){var o=e("#mobiCornerAd");o.length>0&&(o.show(),function(){if(Mobi.isPC()){var i=e(window),o=function(){var t=e(".webRight").width();e("#mobiCornerAd").css({right:t+"px"})},n=t.throttle(o);o(),i.off("resize.adjustAdPos").on("resize.adjustAdPos",n)}}(),function(t){var i=e("#webCustomerServiceBox");i.length;"none"!==i.css("display")&&t.addClass("fk_mobiCornerAd_hasBottomMenu")}(o),function(e){var i=e.find(".J_close");t.bindTabEvent(i,"close",function(t){e.hide(),t.stopPropagation()})}(o),function(e){t.WeChatAd.init();var i=e.find(".J_link");i.removeAttr("href"),t.bindTabEvent(i,"callWeChat",function(){t.WeChatAd.show()})}(o),t.ExposureQueue.add({name:"freeAdAbTest",onTrigger:function(){var i=e("#mobiCornerAd"),o=e(window);if(t.isInViewArea(o,i)){var n=t.isWechat()?16:14;void 0!==n&&t.logDog(200625,n),t.ExposureQueue.remove(this.name)}}}),t.ExposureQueue.exposure())}}(jm,Mobi),function(e,t,i){var o=200010,n={NORMAL_EXPOSURE_FREE:10,NORMAL_CLICK_FREE:11,WECHAT_EXPOSURE_FREE:12,WECHAT_CLICK_FREE:13};function a(){s()&&t.logDog(o,n.NORMAL_CLICK_FREE),r()&&t.logDog(o,n.WECHAT_CLICK_FREE)}function r(){return t.isWechat()}function s(){return!r()}t.initAdvertisement=function(){var i=e("#mobiAdvertisement_box");0!==i.length&&(!function(i){var o=e("#mobiAdvertisement_adImg"),n="click.logAdv";t.isPC()||(n="touchend.logAdv");o.off(n).on(n,a)}(),t.ExposureQueue.add({name:"bottomAd",onTrigger:function(){var i=e("#mobiAdvertisement_adImg");$window=e(window);var a=t.isInViewArea($window,i);a&&(s()&&t.logDog(o,n.NORMAL_EXPOSURE_FREE),r()&&t.logDog(o,n.WECHAT_EXPOSURE_FREE),t.ExposureQueue.remove(this.name))}}))}}(jm,Mobi),function(e,t,i){t.WeChatAd={$dom:e({}),init:function(){var i,o,n=e("#popupWXQrCode");if(0===n.length){var a=(i=2==Fai.top._siteType?"免费商城":"免费建站",o=2==Fai.top._siteType?"mobiMallFooterWechatQrCode.gif":"mobiFooterWechatQrCode.gif",["<div class='popupWXQrCode' id='popupWXQrCode' >","<div class='wxQrBg J_close'></div>","<img class='J_bigPic bgPic' src='"+Fai.top._resRoot+"/image/wx/wxQrCodeBack.png'/>","<div class='wxQrTip'>"+i+"</div>","<img class='wxQrCodePic' src='"+Fai.top._resRoot+"/image/"+o+"'/>","</div>"].join(""));n=e(a),e("body").append(n)}t.WeChatAd.$dom=n,t.WeChatAd.bindEvent()},show:function(){t.WeChatAd.$dom.show()},hide:function(){t.WeChatAd.$dom.hide()},bindEvent:function(){var e=t.WeChatAd.$dom.find(".J_close");t.bindTabEvent(e,"close",function(){t.WeChatAd.hide()}),t.WeChatAd.listenLongPress()},listenLongPress:function(){var e=t.WeChatAd.$dom.find(".J_bigPic"),i=500,o=null;function n(){return(new Date).getTime()}e.off("touchstart.longPress").on("touchstart.longPress",function(){o=n()}),e.off("touchend.longPress").on("touchend.longPress",function(){(function(e){return e>i})(n()-o)&&function(){if(t.isWechat()){t.logDog(200010,14)}}()})}}}(jm,Mobi),Mobi.logoSizeCompressByMargin=function(){if(!(jm("#pageLogo").length<1)){var e=jm("#pageLogo"),t=jm("#webHeader");if("none"!=t.css("display")){e.height(0);var i,o,n=parseFloat(e.css("margin-top").replace("px","")),a=parseFloat(e.css("margin-bottom").replace("px","")),r=parseFloat(e.css("margin-left").replace("px","")),s=parseFloat(e.css("margin-right").replace("px","")),l=(parseFloat(e.height()),parseInt(e.attr("sid"))),c=parseInt(e.attr("pw")),d=parseInt(e.attr("ph")),m=parseFloat(t.height());i=Math.floor(m-n-a),e.height(i+"px"),0!=l?e.width(parseInt(e.height())+"px"):(o=(o=parseInt(e.height())*c/d)>t.width()?t.width()-r-s:o,e.width(o+"px")),jm("#webHeaderBox #header").removeClass("header-forLogo"),e.css("visibility","visible")}}},Mobi.titlePositionRefreshByLogo=function(){if(!(jm("#pageLogo").length<1)){var e=jm("#pageLogo"),t=jm("#header"),i=jm("#pageTitle");if("none"!=jm("#webHeader").css("display")){e.css({position:"",float:"",left:"",right:""});var o="right";0==Fai.top._mobiSiteTitle.align?o="":1==Fai.top._mobiSiteTitle.align?o="left":2==Fai.top._mobiSiteTitle.align&&(o="center"),t.css("text-align",o),t.css("padding",""),i.css("max-width","");var n=parseInt(t.width());if(logoWidth=parseInt(e.width()),logoMarginLeft=parseInt(e.css("margin-left").replace("px","")),logoMarginRight=parseInt(e.css("margin-right").replace("px","")),headerPaddingLeft=parseInt(t.css("padding-left").replace("px","")),headerPaddingRight=parseInt(t.css("padding-right").replace("px","")),titlePaddingLeft=parseInt(i.css("padding-left").replace("px","")),titlePaddingRight=parseInt(i.css("padding-right").replace("px","")),"none"!=e.css("display")){if(i.css("max-width",n-logoWidth-logoMarginLeft-logoMarginRight-titlePaddingLeft-titlePaddingRight-10+"px"),"center"==t.css("text-align")&&(e.hasClass("left")||e.hasClass("right")))e.css({position:"absolute",float:"none"}),t.css("padding",0),e.hasClass("left")?(headerPaddingLeft>0?e.css("left",headerPaddingLeft+"px"):e.css("left",0),""!=jm("#pageTitle").text()&&i.offset().left<e.offset().left+logoWidth&&(t.css("padding","0 0 0 "+(headerPaddingLeft+logoMarginLeft+logoMarginRight+logoWidth)+"px"),t.css("text-align","left"))):e.hasClass("right")&&(headerPaddingRight>0?e.css("right",headerPaddingRight+"px"):e.css("right",0),""!=jm("#pageTitle").text()&&i.offset().left+parseInt(i.width())>e.offset().left&&(t.css("padding","0 "+(headerPaddingRight+logoMarginLeft+logoMarginRight+logoWidth)+"px 0 0"),t.css("text-align","right")));else if("center"==t.css("text-align"))if(t.css("padding",0),headerPaddingLeft>0){var a=e.offset().left<=t.offset().left+headerPaddingLeft,r=i.offset().left<=t.offset().left+headerPaddingLeft;"none"===i.css("display")&&(r=!1),(a||r)&&(t.css("padding",""),t.css("text-align","left"))}else headerPaddingRight>0&&(e.offset().left+logoWidth>=t.offset().left+n||i.offset().left+parseInt(i.width())>=t.offset().left+n)&&(t.css("padding",""),t.css("text-align","right"));e.height()<=i.offset().top&&""==i.text()?(i.addClass("fk-pageTitleFix"),Fai.top._manageMode&&Mobi.autoFixGWebTop(Fai.top._templateLayoutId)):i.removeClass("fk-pageTitleFix")}else i.css("max-width",n-titlePaddingLeft-titlePaddingRight+"px"),"center"==t.css("text-align")&&(t.css("padding",0),headerPaddingLeft>0&&i.offset().left<=t.offset().left+headerPaddingLeft?t.css("padding",""):headerPaddingRight>0&&parseInt(i.width())>=t.offset().left+n-headerPaddingRight&&t.css("padding-right","1.5rem"))}}},Mobi.countSiteTitleBgHeiht=0,Mobi.changeTempCountSiteBgHeight=function(){if(!(Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3||jm("#headerBg").length<1)){var e=jm("#headerBg"),t=jm("#headerWhiteBg"),i=(jm("#navButton"),jm("#webHeader")),o=parseFloat(i.height()),n=parseFloat(i.css("padding-top")),a=parseFloat(i.css("padding-bottom")),r=o+n+a+parseFloat(i.css("border-top-width"))+parseFloat(i.css("border-bottom-width")),s=r.toString()+"px";e.css("height",r/_htmlFontSize+"rem"),a>0&&e.css("padding-bottom",a/_htmlFontSize+"rem"),t.css("height",r/_htmlFontSize+"rem"),Mobi.countSiteTitleBgHeiht=s,"undefined"!==Mobi.showSiteTitleBgGloable.bgType&&"null"!=Mobi.showSiteTitleBgGloable.bgType&&Mobi.changeSiteTitleBg(Mobi.showSiteTitleBgGloable.bgType,Mobi.showSiteTitleBgGloable.bgImgStyle,Mobi.showSiteTitleBgGloable.bgFontColor,Mobi.showSiteTitleBgGloable.bgFontAlpha,Mobi.showSiteTitleBgGloable.linkCoverPreViewPath)}},Mobi.showSiteTitleBgGloable={},Mobi.showSiteTitleBgGloable.showSiteTitleBgFlag=!1,Mobi.setShowSiteTitleBgFlag=function(e){var t=jm("#webHeader");Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3||(0==e?(Mobi.showSiteTitleBgGloable.showSiteTitleBgFlag=!0,t.removeClass("mobiTitleClose")):(Mobi.showSiteTitleBgGloable.showSiteTitleBgFlag=!1,t.addClass("mobiTitleClose")),setTimeout(function(){Mobi.changeTempCountSiteBgHeight()},1e3))},Mobi.changeSiteTitleBg=function(e,t,i,o,n){Mobi.showSiteTitleBgGloable.bgType=e,Mobi.showSiteTitleBgGloable.bgImgStyle=t,Mobi.showSiteTitleBgGloable.bgFontColor=i,Mobi.showSiteTitleBgGloable.bgFontAlpha=o,Mobi.showSiteTitleBgGloable.linkCoverPreViewPath=n;var a=jm("#headerBg"),r=jm("#webHeader"),s=jm("#headerWhiteBg");jm("#webHeaderBox");if(null!=e&&""!=e)if(1==e)a.css("background","transparent"),a.css("background-color","#fff"),a.css("opacity","1"),a.css("filter",opacity="100"),Mobi.showSiteTitleBgGloable.showSiteTitleBgFlag?(a.css("display","block"),s.css("display","block")):(a.css("display","none"),s.css("display","none"));else if(2==e){a.css("background-position",""),a.css("background-size",""),a.css("background-repeat",""),a.css("background-color",""),a.css("background-image","");var l="string"==typeof i&&i.indexOf("linear-gradient")>=0;null!=n&&""!=n&&a.css("background-image","url("+n+")"),l&&null!=n&&""!=n?a.css("background-image","url("+n+"),"+i):l?a.css("background-image",i):a.css("background-color",i),2==t?(a.css("opacity",o/100),a.css("background-size","cover"),a.css("background-repeat","inherit"),a.css("filter",opacity=o)):3==t?(a.css("opacity",o/100),a.css("background-size","100% 100%"),a.css("background-repeat","inherit"),a.css("filter",opacity=o)):4==t?(a.css("opacity",o/100),a.css("background-size","inherit"),a.css("background-repeat","repeat"),a.css("filter",opacity=o)):5==t?(a.css("opacity",o/100),a.css("background-size","inherit"),a.css("background-repeat","no-repeat"),a.css("filter",opacity=o)):6==t?(a.css("background-repeat","no-repeat"),a.css("background-position","center center"),a.css("background-size","contain"),a.css("filter",opacity=o)):7==t?(a.css("background-repeat","repeat-x"),a.css("background-position","center top"),a.css("filter",opacity=o)):8==t?(a.css("background-repeat","repeat-x"),a.css("background-position","center center"),a.css("filter",opacity=o)):9==t?(a.css("background-repeat","repeat-x"),a.css("background-position","center bottom"),a.css("filter",opacity=o)):10==t?(a.css("background-repeat","repeat-y"),a.css("background-position","left center"),a.css("filter",opacity=o)):11==t?(a.css("background-repeat","repeat-y"),a.css("background-position","center center"),a.css("filter",opacity=o)):12==t?(a.css("background-repeat","repeat-y"),a.css("background-position","right center"),a.css("filter",opacity=o)):13==t?(a.css("background-repeat","no-repeat"),a.css("background-position","center top"),a.css("background-size","100% 100%"),a.css("filter",opacity=o)):14==t?(a.css("background-repeat","no-repeat"),a.css("background-position","center center"),a.css("filter",opacity=o)):15==t?(a.css("background-repeat","no-repeat"),a.css("background-position","left top"),a.css("filter",opacity=o)):16==t?(a.css("background-repeat","no-repeat"),a.css("background-position","center top"),a.css("filter",opacity=o)):17==t?(a.css("background-repeat","no-repeat"),a.css("background-position","right top"),a.css("filter",opacity=o)):18==t?(a.css("background-repeat","no-repeat"),a.css("background-position","left center"),a.css("filter",opacity=o)):19==t?(a.css("background-repeat","no-repeat"),a.css("background-position","right center"),a.css("filter",opacity=o)):20==t?(a.css("background-repeat","no-repeat"),a.css("background-position","left bottom"),a.css("filter",opacity=o)):21==t?(a.css("background-repeat","no-repeat"),a.css("background-position","center bottom"),a.css("filter",opacity=o)):22==t?(a.css("background-repeat","no-repeat"),a.css("background-position","right bottom"),a.css("filter",opacity=o)):(!l&&a.css("background-image","none"),a.css("filter",opacity=o),a.css("opacity",o/100)),Mobi.showSiteTitleBgGloable.showSiteTitleBgFlag?(a.css("display","block"),s.css("display","block")):(a.css("display","none"),s.css("display","none"))}else a.css("display","none"),s.css("display","none"),r.css("background-image",""),r.css("background-color","");Fai.top._templateFrameId>=2e3&&Fai.top._templateFrameId<3e3||(window.onload=function(){Mobi.changeTempCountSiteBgHeight()},Mobi.countSiteTitleBgHeiht=r.height(),a.css("height",Mobi.countSiteTitleBgHeiht/_htmlFontSize+"rem"),s.css("height",Mobi.countSiteTitleBgHeiht/_htmlFontSize+"rem"))},Mobi.bindTopIconBack=function(){if(2004===Fai.top._templateFrameId){var e=jm(".J_to_back");if(!e.length)return;e.off("click.tb").on("click.tb",function(){Fai.top._manageMode?jm(Fai.top.document.getElementById("jz_designerOperate").querySelector(".j_designerBack")).click():window.history.length<=1?window.location.href="index.jsp":window.history.back()})}},Mobi.logoV3StyleAdjust=function(e,t,i){var o=jm("#header_v3"),n=jm("#headIcon_v3"),a=t.li.ow||160,r=t.li.oh||160,s=(jm("#headTitle_v3"),jm(o).find(".functional_group"));s.length>0&&(parseFloat(Mobi.getStyle(s[0],"width").replace("px","")),parseFloat(Mobi.getStyle(s[0],"padding-right").replace("px",""))),n.attr("style"," "),o.removeClass("logoPos0 logoPos1 logoPos2 logoPos3"),o.removeClass("titleAlign1 titleAlign2 titleAlign3");var l="",c="";if(3==e||4==e){if(c="titleAlign"+i.align,0==i.align&&(c="titleAlign2"),1==t.st){if(0!=t.li.ow&&0!=t.li.oh&&t.li.ow!=t.li.oh&&n.css("width",n.height()*a/r+"px"),1==t.m.type){n.css("margin-top",t.m.mt+"rem").css("margin-right",t.m.mr+"rem").css("margin-bottom",t.m.mb+"rem").css("margin-left",t.m.ml+"rem");var d=o.height()-parseInt(Mobi.getStyle(n[0],"margin-top").replace("px",""))-parseInt(Mobi.getStyle(n[0],"margin-bottom").replace("px",""));n.css("height",d-1+"px"),n.css("width",n.height()*a/r+"px"),n.height()*a/r+parseInt(Mobi.getStyle(n[0],"margin-left").replace("px",""))+parseInt(Mobi.getStyle(n[0],"margin-right").replace("px",""))}l="logoPos"+t.lp}else n.css("display","none");o.addClass(l),o.addClass(c),o.css("opacity",1)}},Mobi.headBoxFixedV3=function(e){function t(){var e,t,i,o=jm("#webHeader_v3.headStyle2"),n=jm("#webBanner"),a=function(){var e=g_body;document.documentElement&&document.documentElement.scrollTop>0&&(e=document.documentElement);return e.scrollTop}(),r=jm("#navbar"),s=r.length&&3==r.attr("type")&&1==r.attr("navPos")&&"none"!=r.css("display");if(o.length)if(e=o.find(".headBg_v3"),t=parseInt(Mobi.getStyle(o[0],"height").replace("px","")),!n.length||s)e.css("background-color","rgba(255,255,255,1)"),o.addClass("turnDefault");else if(i=parseInt(Mobi.getStyle(n[0],"height").replace("px",""))){if(t){var l=(a-i+t)/t;l<0&&(l=0),e.css("background-color","rgba(255,255,255,"+l+")"),a>i?o.addClass("turnDefault"):o.removeClass("turnDefault")}}else e.css("background-color","rgba(255,255,255,1)"),o.addClass("turnDefault")}e&&(jm(document).off("touchstart.hbf").on("touchstart.hbf",t),jm(document).off("touchmove.hbf").on("touchmove.hbf",t),jm(document).off("touchend.hbf").on("touchend.hbf",t),jm(document).off("touchcancel.hbf").on("touchcancel.hbf",t),jm(document).off("scroll.hbf").on("scroll.hbf",t)),t()},Mobi.setTitleIsEditable=function(e,t,i){if(t){var o=jm("#"+e),n=jm("#webHeader_v3"),a=o.find("input"),r=o.find("h1"),s=o.find("a"),l=o.find("span"),c=(n.hasClass("innerHeadStyle"),jm("#headTitle_v3")),d="",m=null;o.length>0&&(d=s.attr("href"),s.attr("href","#"),r.unbind("mouseover.titleInputV3Edit").bind("mouseover.titleInputV3Edit",function(e){"none"==a.css("display")&&(u(0),l.css("display","inline-block"))}),r.unbind("mouseleave.titleInputV3Edit").bind("mouseleave.titleInputV3Edit",function(e){"none"==a.css("display")&&(u(2),l.css("display","none"))}),r.unbind("dblclick.titleInputV3Edit").bind("dblclick.titleInputV3Edit",p),r.unbind("click.titleInputV3Edit").bind("click.titleInputV3Edit",function(e){e.stopPropagation(),"none"==a.css("display")&&(window.clearTimeout(m),"#"!=s.attr("href")&&(d=s.attr("href"),s.attr("href","#")),m=window.setTimeout(function(){if(null!=d&&""!=d)if(-1===d.indexOf("http")){if(Fai.top._changeStyleNum>0)return void Fai.top.Mobi.popupStyleChangeBodyWindow("您的网站设计已经更改，是否立即保存？");window.location.href=d}else top.Fai.ing("管理态不支持跳转外部链接，请通过“预览”进行访问",!0)},200));return e.preventDefault(),!1}),l.unbind("click.titleEditPen").bind("click.titleEditPen",p),a.unbind("input.titleEditInput").bind("input.titleEditInput",function(e){Fai.top._pattern.hs.t.name=a.val(),Fai.top._patternChange++,top.Fai.top.Mobi.styleChanged()}),a.unbind("focusout.titleEditInputBlur").bind("focusout.titleEditInputBlur",function(e){if(u(2),"none"!=a.css("display")){s.css("display","inline"),a.css("display","none");var t={},i={};t.value=top.Fai.decodeHtml(s.html()),i.value=a.val(),s.html(top.Fai.encodeHtml(a.val())),t.value!=i.value&&top.Fai.top.Mobi.undoRun(function(e){s.html(top.Fai.encodeHtml(e.value)),top.Fai.top._pattern.hs.t.name=e.value,e.value?c.removeClass("noneStr"):c.addClass("noneStr")},{doArgs:[i],undoArgs:[t]})}l.css("display","none")}))}function p(e){e.stopPropagation(),window.clearTimeout(m),Mobi.logDog(200739,12),u(1),s.css("display","none"),a.val(s.text()),a.css({display:"inline-block"}),a.length>0&&a[0].focus(),l.css("display","none")}function u(e){var t=o.find("h1");switch(e){case 0:t.removeClass("edit_h1_v3"),t.addClass("focus_h1_v3");break;case 1:t.removeClass("focus_h1_v3"),t.addClass("edit_h1_v3");break;case 2:t.removeClass("focus_h1_v3"),t.removeClass("edit_h1_v3")}}},Mobi.setTitleIsEditableV2=function(e,t){},Mobi.bindSearch=function(e){e&&jm("#topSearch").off("click.search").bind("click.search",function(){Mobi.popupSearch(e)})},Mobi.iframeToEmbed=function(e,t,i){var o,n=jm("#"+e+" iframe");if(jm.os.ie||navigator.userAgent.toLocaleLowerCase().indexOf("chrome/63.0")>-1){if("v.youku.com"==i||"player.youku.com"==i)o="http://player.youku.com/player.php/sid/"+t+"/v.swf";else{if("v.qq.com"!=i&&"static.video.qq.com"!=i)return!1;o="http://static.video.qq.com/TPout.swf?vid="+t+"&auto=0"}jm("<embed class='mobiVideoOnlineIframe' src='"+o+"' allowFullScreen='true' wmode='Opaque' quality='high'  align='middle' allowScriptAccess='always' type='application/x-shockwave-flash'></embed>").insertBefore(n),jm(n).remove()}},Mobi.videoPoster=function(e,t){var i=jm("#"+e);i[0].addEventListener("loadedmetadata",function(){var e=i.height(),t=i.width(),o=(_htmlFontSize,t/_htmlFontSize);i.css("max-height","20rem").css("max-width",o+"rem")})},Mobi.videoDialog=function(e,t,i){var o;o=i?"cmd=getMobiVideoDialog&moduleId="+e+"&content="+jm.encodeUrl(jm.toJSON(t)):"cmd=getFLvDialog&moduleId="+e,jm.ajax({type:"post",url:"ajax/flv_h.jsp",data:o,success:function(t){t=jm.parseJSON(t);var i="<div class='videoDialog' id='videoDialog'><div class=\"cancelVideo faisco-icons-\" onclick=\"Mobi.cancelVideoDialog("+e+')"></div>'+t.data+"</div>";jm("#g_body").append(i),document.getElementById("g_body").style.overflowY="hidden"}})},Mobi.cancelVideoDialog=function(e){jm("#videoDialog").remove(),document.getElementById("g_body").style.overflowY=""},Mobi.initModuleCubeNavItemHeight=function(e,t){setTimeout(function(){if(5!=e&&6!=e&&8!=e&&11!=e&&15!=e&&16!=e){var i=".cubeLink_row";14==e&&(i=".cubeLink_row_head");var o=jm("#module"+t).find(i);o.length>0&&o.each(function(){var t=jm(this).find(".cubeLink"),i=0;t.each(function(){var e=Number(jm(this).height());e>i&&(i=e)}),0==i&&(i=4.7*_htmlFontSize),jm(this).find(".cubeLink_a").css("height",i+"px"),13!=e&&14!=e&&t.css("height",i+"px")})}},0)},Mobi.initBackTop=function(e){var t=jm("#backTop"),i=document.body.offsetHeight;function o(){var e=jm("#J_showGiftPage");document.body.scrollTop>i||document.documentElement.scrollTop>i?(t.show(),null!=e&&(Fai.top._openThemeV3?e.css("bottom","5.6rem"):e.css("bottom","4.8rem"))):(t.hide(),null!=e&&(Fai.top._openThemeV3?e.css("bottom","3.8rem"):e.css("bottom","2.8rem")))}Mobi.initBackToprManage&&Mobi.initBackToprManage(),e||(document.body.scrollTop<i||document.documentElement.scrollTop<i)&&t.hide(),document.addEventListener("touchmove",o),document.addEventListener("scroll",o),t.on("click",function(){var e,t=document.body.scrollTop+document.documentElement.scrollTop;e=setInterval(function(i){t=parseInt(t-t/4),document.body.scrollTop=t,document.documentElement.scrollTop=t,t<=0&&clearInterval(e)},1e3/60)})},Mobi.initBgm=function(e){var t,i=jm("#bgmAudio"),o=Mobi.getPreviewWindow();if(i.attr("src",e),jm("#bgMusic").bind("click",function(){jm("#bgMusic .bgm_icon_inner").hasClass("bgm_on")?(Mobi.bgmPause(),jm.cookie("_bgmIsPause",1),t=!1):(Mobi.bgmPlay(),jm.cookie("_bgmIsPause",0),t=!0)}),jm(o).off("beforeunload.bgMusic").on("beforeunload.bgMusic",function(){o.Mobi.recordLastPlayerTime("bgmAudio","bgplayerTime")}),i.off("ended.bgm").on("ended.bgm",function(e){jm("#bgMusic .bgm_icon_inner").removeClass("bgm_on")}),i.off("durationchange.bgm").on("durationchange.bgm",function(){var e=Mobi.callLastPlayerTime("bgplayerTime",0);this.duration>=e&&(this.currentTime=e)}),jm.cookie("_bgmIsPause"))1==parseInt(jm.cookie("_bgmIsPause"))?(Mobi.bgmPause(),t=!1):(Mobi.bgmPlay(),t=!0);else if(jm("#bgmAudio").attr("autoplay")){var n=navigator.userAgent;if(/(iPhone|iPad|iPod|Android)/i.test(n)){var a=jm("#bgMusic .bgm_icon_inner");jm("body").off("touchstart.bgm").on("touchstart.bgm",function(e){parseInt(jm.cookie("_bgmIsPause"))||e.target==a[0]||Mobi.bgmPlay()}),jm("#bgmAudio").attr("loop")||jm("#bgmAudio").off("playing.bgm").on("playing.bgm",function(e){jm("body").off("touchstart.bgm")})}Mobi.bgmPlay(),t=!0}Mobi.initBgmPosition(),Mobi.bindBodyScrollEvent(),document.addEventListener("play",function(e){!!jm(e.target).parents("#bgMusic").length||(Mobi.bgmPause(),jm.cookie("_bgmIsPause",1))},!0),document.addEventListener("pause",function(e){!!jm(e.target).parents("#bgMusic").length||t&&(Mobi.bgmPlay(),jm.cookie("_bgmIsPause",0))},!0)},Mobi.initBgmPosition=function(){var e=jm("#bgMusic .bgm_icon");if(!(e.length<1)){var t=0;e.css({top:"",bottom:""}),e.hasClass("bgm_rightUp")||e.hasClass("bgm_leftUp")?Mobi.scrollBgmPosition():(e.hasClass("bgm_rightDown")||e.hasClass("bgm_leftDown"))&&(t=jm("#customerServiceDiv").length<1||jm("#customerServiceDiv").find(".service").length<1?20:parseInt(jm("#customerServiceDiv").height())+20,e.css("bottom",t+"px"))}},Mobi.scrollBgmPosition=function(){if(Fai.top._openThemeV3)Mobi.scrollBgmPositionV3();else{var e=jm("#bgMusic .bgm_icon"),t=jm("#webMultilingualArea"),i=jm("#webHeaderBox"),o=jm(".loginHeader.webHeaderBg"),n=parseInt(i.height()),a=jm("body"),r=Fai.top._templateFrameId,s=0,l=10,c=document.documentElement.scrollTop||document.body.scrollTop;if(e.hasClass("bgm_rightUp")||e.hasClass("bgm_leftUp")){if(!(s=t.length>0?t.offset().top+parseInt(t.height())-c:i.offset().top+n-c))return a.hasClass("mobiCol20")||a.hasClass("mobiCol21")||a.hasClass("mobiCol24")||a.hasClass("mobiCol28")?r>=2e3?s=n+10:jm(".productDetailHeader").height()>0?s=parseInt(jm(".productDetailHeader").height())+10:jm(".photoGroupDetailHeader").height()>0&&(s=parseInt(jm(".photoGroupDetailHeader").height())+10):(o.length>0&&(s=o.offset().top+parseInt(o.height())-c+10),s=s>0?s:10,2004===r&&(s+=n)),void e.css("top",s+"px");"fixed"==i.css("position")?l=s>=n?s+10:n+10:s>=0&&(l=s+10),e.css("top",l+"px")}}},Mobi.scrollBgmPositionV3=function(){var e=jm("#bgMusic .bgm_icon"),t=jm("#webHeader_v3"),i=t.attr("styleId"),o=jm(".loginHeader.webHeaderBg"),n=parseInt((t[0]||{}).offsetHeight)||0,a=jm("body"),r=0,s=document.documentElement.scrollTop||document.body.scrollTop;if(e.hasClass("bgm_rightUp")||e.hasClass("bgm_leftUp")){if(0==n)return a.hasClass("mobiCol20")||a.hasClass("mobiCol21")||a.hasClass("mobiCol24")||a.hasClass("mobiCol28")?jm(".productDetailHeaderV3").height()>0?r=parseInt(jm(".productDetailHeaderV3").height())+10:jm(".photoGroupDetailHeader").height()>0&&(r=parseInt(jm(".photoGroupDetailHeader").height())+10):(o.length>0&&(r=o.offset().top+parseInt(o.height())-s+10),r=r>0?r:10),void e.css("top",r+"px");(r=i<5?n:0)<0&&(r=0),e.css("top",r+10+"px")}},Mobi.initBgmCookie=function(){jm.cookie("_bgmIsPause",null)},Mobi.resetBgmCookie=function(){jm("#bgMusic .bgm_icon_inner").hasClass("bgm_on")?jm.cookie("_bgmIsPause",0):jm.cookie("_bgmIsPause",1)},Mobi.bgmPause=function(){var e=jm("#bgMusic .bgm_icon_inner");document.getElementById("bgmAudio").pause(),e.removeClass("bgm_on")},Mobi.bgmPlay=function(){var e=jm("#bgMusic .bgm_icon_inner"),t=document.getElementById("bgmAudio");""!=t.getAttribute("src")&&t.play(),e.addClass("bgm_on")},Mobi.recordLastPlayerTime=function(e,t){var i=Mobi.getPreviewObject(e),o=parseFloat(i?i.currentTime:defaultTime);sessionStorage[t]=o},Mobi.callLastPlayerTime=function(e,t){var i=parseFloat(sessionStorage[e]);return i>=0?i:t},Mobi.checkBrowser=function(){var e=["animation","MozAnimation","webkitAnimation","msAnimation","OAnimation"],t=["transform","MozTransform","webkitTransform","msTransform","OTransform"],i=["opacity","MozOpacity","webkitOpacity","msOpacity","OOpacity"],o=document.createElement("div"),n={};return function(a){if("boolean"==typeof n[a])return n[a];switch(a){case"animation":props=e;break;case"transform":props=t;break;case"opacity":props=i;break;default:props=e}for(var r=0,s=props.length;r<s;r++)if(void 0!==o.style[props[r]])return n[a]=!0,n[a];return n[a]=!1,n[a]}}(),Mobi.initBannerDefaultDom=function(e){e.et;var t,i,o=e.b,n=o.length,a=[],r=e.sd;for(a.push("<div id='bannerSwipe' class='swipe'>"),a.push("<div id='bannerSwipeContainer' class='bannerSwipeContainer defaultBanner'>"),t=0;t<n;t++){var s=o[t].i,l=o[t].lt,c=o[t].w,d=o[t].h,m=o[t].t,p=o[t].p,u=o[t].aj,h=o[t].des;a.push("<div id='bannerItem"+s+"'>"),a.push('<a href="'+(0!=l?jm.encodeHtmlAttr(u):"javascript:;")+"\" vheight='"+d+"' vwidth='"+c+"' class='bannerImageDiv J_img_lazyload "+(0==m?"systemtBanner":"customBanner")+"' style='display:block;background-image:url("+Fai.top._loadingPath+")' src-original='"+p+"'></a>"),r&&a.push("<div class='bannerDescription'><div class='description'>"+f(h)+"</div></div>"),a.push("</div>")}if(a.push("</div>"),r?a.push("<div id='bannerBullet' class='bannerBullet2'>"):a.push("<div id='bannerBullet' class='bannerBullet'>"),a.push("<ul id='bullets' class='bullets'>"),n>1)for(i=0;i<n;i++)a.push("<li "+(0==i?"class='on'":"")+"></li>");function f(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e}a.push("</ul>"),a.push("</div>"),a.push("</div>"),jm("#webBanner").html("").append(a.join(""))},Mobi.initSwipe=function(e,t,i){var o=Mobi.getJQMobi(),n=document.querySelector("#"+e),a=jm("#webBanner")[0],r=jm("#webBanner").find(".J_pageLoading");if(n){jm._swipehandle&&jm._swipehandle.kill();for(var s,l,c=n.querySelectorAll(".bannerImageDiv.customBanner"),d=n.querySelectorAll(".bannerImageDiv"),m=c.length,p=d.length,u=n.offsetWidth,h="",f=0,g=0;g<m;g++)s=parseInt(c[g].getAttribute("vwidth")),(l=parseInt(c[g].getAttribute("vheight"))/s)>f&&(f=l);if(0===p){var v=300*u/640;n.querySelector(".defaultBanner").style.height=v+"px"}else h=function(){var e=0;e=p-m>0&&u*f<300*u/640?Mobi.preciseDecimal(300*u/640,2):Mobi.preciseDecimal(u*f,2);return e}()/Fai.top._htmlFontSize,n.style.height=h+"rem",a.style.height=h+"rem";if(r.length&&r.hide(),Fai.top._openThemeV3&&Mobi.headBoxFixedV3(!1),i)Mobi.bindImgLazyLoad("webBanner");else{if(Mobi.checkBrowser()&&1!=t.et){n.style.visibility="visible";for(var b=n.getBoundingClientRect().width,j=n.children[0].children,_=j.length;_--;)j[_].style.width=b+"px"}else jm._swipehandle=o("#"+e).swipehandle(n,{auto:3e3,continuous:!0,bulletsClick:!0,speed:100*t.st,callback:function(e){for(var t=M.length;t--;)M[t].className=" ";M[e]?M[e].className="on":M[e-M.length].className="on"}});if(m<3?Mobi.bindImgLazyLoad("webBanner",{loadExistImg:!0}):Mobi.bindImgLazyLoad("webBanner"),!n.querySelector(".bullets"))return;var M=n.querySelector(".bullets").getElementsByTagName("li")}}},Mobi.bannerAnimate={},function(e,t,i){var o,n,a,r,s,l=1,c=0,d=-1,m=!1,p=!0,u=0,h={duration:3e3},f={},v=0,b=0,j=e("#bannerSwipe"),_=j.find(".bannerSwipeContainer"),M=_.find(".billboard_item");u=M.length;function y(e){e!=i&&(n=e,f.effectType=e.et,f.switchingTime=100*e.st,f.duration=h.duration,l=e.et,showDesc=e.sd),0==f.effectType&&(l=function(e,t){var i=t-e+1,o=0;for(;0==o;)o=Math.floor(Math.random()*i+e);return o}(0,13))}function S(t){j=e("#bannerSwipe"),_=j.find(".bannerSwipeContainer"),M=_.find(".billboard_item"),u=M.length;var i=e("#bullets").find("li");i.removeClass("on"),i.eq(c).addClass("on")}function I(t){var i,o,n=l,a=(t.w,t.h,t.b),r=a.length,s=0;switch(n){case 9:case 10:s=4;break;case 11:case 12:case 13:s=5;break;default:s=0}var d,m,p,u,h,f,g,v,b,j=[];for(j.push("<div id='bannerSwipe' class='swipe'>"),j.push("<div id='bannerSwipeContainer' class='bannerSwipeContainer defaultBanner billboard billboard"+n+"'>"),i=0;i<r;i++){if(d=a[i].i,m=a[i].lt,"",p=a[i].w,u=a[i].h,h=a[i].t,f=a[i].p,g=a[i].aj,v=1,b=1,des=a[i].des,0==s)j.push("<div id='bannerItem"+d+"' class='billboardAnim billboard_item "+(0!=s?"billboard_item"+i:"")+"  billboardItem_"+n+"' _des='"+des+"'>"),j.push('<a href="'+(0!=m?e.encodeHtmlAttr(g):"javascript:;")+"\" vheight='"+u+"' vwidth='"+p+"' class='bannerImageDiv J_img_lazyload "+(0==h?"systemtBanner":"customBanner")+"' style='display:block;background-image:url("+Fai.top._loadingPath+")' src-original='"+f+"'></a>");else if(4==s)for(j.push("<div class='billboard_item billboardItem_"+n+" billboardItem_"+n+"_"+(i+1)+"' _des='"+des+"'>"),b=1;b<s;b++)j.push("<div class='billboardTile billboardTile_"+b+" billboardAnim'>"),j.push("<div class='billboardImg'>"),j.push("<a class='J_img_lazyload bannerImageDiv J_bannerItem systemtBanner billboardImgInner "+(0==h?"systemtBanner":"customBanner")+"' hidefocus='true' title='' href=\""+(0!=m?e.encodeHtmlAttr(g):"javascript:;")+"\" vheight='"+u+"' vwidth='"+p+"' target='' style='overflow: hidden; display: block; outline: none; margin: 0px auto; position: relative; z-index: 1;background-image:url("+Fai.top._loadingPath+"); background-position: 50% 50%; background-repeat: no-repeat;' src-original='"+f+"'>"),j.push("</a>"),j.push("</div>"),j.push("</div>");else for(j.push("<div class='billboard_item billboardItem_"+n+" billboardItem_"+n+"_"+(i+1)+"' _des='"+des+"'>"),v=1;v<s;v++)j.push("<div class='billboardTile billboardTile_"+v+"'>"),j.push("<div class='billboardAnim billboardTileImg'>"),j.push("<div class='billboardImg'>"),j.push("<a class='J_img_lazyload bannerImageDiv J_bannerItem systemtBanner billboardImgInner "+(0==h?"systemtBanner":"customBanner")+"' hidefocus='true' title='' href=\""+(0!=m?e.encodeHtmlAttr(g):"javascript:;")+"\" vheight='"+u+"' vwidth='"+p+"' target='' style='overflow: hidden; display: block; outline: none; margin: 0px auto; position: relative; z-index: 1;background-image:url("+Fai.top._loadingPath+"); background-position: 50% 50%; background-repeat: no-repeat;' src-original='"+f+"'>"),j.push("</a>"),j.push("</div>"),j.push("</div>"),j.push("</div>");showDesc&&j.push("<div class='bannerDescription'><div class='description'>"+k(des)+"</div></div>"),j.push("</div>")}for(j.push("</div>"),showDesc?j.push("<div id='bannerBullet' class='bannerBullet2' style='"+(r<2?"display:none;":"")+"' >"):j.push("<div id='bannerBullet' class='bannerBullet' style='"+(r<2?"display:none;":"")+"' >"),j.push("<ul id='bullets' class='bullets'>"),o=0;o<r;o++)j.push("<li "+(o==c?"class='on'":"")+"></li>");j.push("</ul>"),j.push("</div>"),j.push("</div>"),e("#webBanner").html(j.join(""))}function w(){var t;!function(){v=_.width()||0,b=e("#webBanner").height()||0,itemMaxHeight1=e("#bannerSwipe").height()||0;var t,i,o=M.eq(c);o.addClass("billboardItem_"+l+"_start"),0==f.effectIndex&&_.addClass("billboard"+effectIndex);for(var n=0;n<M.length;n++)switch(A(t=M.eq(n),"animationDuration",f.switchingTime+"ms"),i=t.find(".billboardAnim"),l){case 3:A(t,"transformOrigin","50% 50% "+-v/2+"px");break;case 4:A(t,"transformOrigin","50% 50% "+-b/2+"px");break;case 9:A(i,"transformOrigin","50% 50% "+-v/2+"px"),A(i,"animationDuration",f.switchingTime+"ms");break;case 10:A(i,"transformOrigin","50% 50% "+-t.find(".billboardAnim").height()/2+"px"),A(i,"animationDuration",f.switchingTime+"ms"),t.css("height",itemMaxHeight1);break;case 11:case 12:case 13:if(A(i,"animationDuration",f.switchingTime+"ms"),11===l||12===l){var a=navigator.userAgent.toLowerCase();(a.indexOf("se 2.x")>-1||a.indexOf("36")>-1)&&A(i.find(".customBanner"),"backgroundSize","contain")}}M.css("display","none"),o.css("display","block")}(),(t=e("#bannerBullet").find("li")).click(function(e){e.stopPropagation();var i=t.index(this);g=i,p&&clearTimeout(o),P(i)}),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&_[0].addEventListener("touchstart",F,!1),C()}function C(){var e=h.duration;n.atOnce&&0!=n.et&&(e=1e3),n.atOnce=!1,m||(clearTimeout(o),o=setTimeout(L,e))}function P(t,i){if(!(isNaN(t)||t>=u||t<0||t==c||m)){if(void 0===i)i=!(t>c);var o,n,a=M.eq(t);!function(t){var i=e("#bullets").find("li");i.removeClass("on"),i.eq(t).addClass("on")}(t),function(e,t){var i=M.eq(c),o=M.eq(e);o.css("display","block"),showDesc&&(i.find(".bannerDescription").css("display","none"),o.find(".bannerDescription").css("display","block")),i.removeClass("billboardItem_"+l+"_on billboardItem_"+l+"_on_reverse").addClass("billboardItem_"+l+"_off"),o.removeClass("billboardItem_"+l+"_off billboardItem_"+l+"_off_reverse").addClass("billboardItem_"+l+"_on"),t&&(i.addClass("billboardItem_"+l+"_off_reverse"),o.addClass("billboardItem_"+l+"_on_reverse"))}(t,i),d=c,c=t,m=!0,o=a[0],n=x,o.addEventListener("animationend",n,!1),o.addEventListener("webkitAnimationEnd",n,!1),o.addEventListener("oAnimationEnd",n,!1),o.addEventListener("oanimationend",n,!1),o.addEventListener("msAnimationEnd",n,!1)}}function x(){var e,t;e=M.eq(c)[0],t=x,e.removeEventListener("animationend",t,!1),e.removeEventListener("webkitAnimationEnd",t,!1),e.removeEventListener("oAnimationEnd",t,!1),e.removeEventListener("oanimationend",t,!1),e.removeEventListener("msAnimationEnd",t,!1),m=!1,M.eq(d).css("display","none"),showDesc&&M.eq(d).find(".bannerDescription").css("display","none"),p?(clearTimeout(o),0==f.effectType?D():o=setTimeout(function(){L()},h.duration)):0==f.effectType&&D()}function L(){var e=c+1;e>=M.length&&(e=0),P(e,!1)}function k(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e}function F(e){var t=e.targetTouches[0];a=0,r={x:t.pageX,y:t.pageY,time:+new Date},_[0].addEventListener("touchmove",T,!1),_[0].addEventListener("touchend",B,!1)}function T(e){if(!(e.targetTouches.length>1||e.scale&&1!==e.scale)){var t=e.targetTouches[0];s={x:t.pageX-r.x,y:t.pageY-r.y,time:+new Date},a=Math.abs(s.x)<Math.abs(s.y)?1:0}}function B(e){var t;new Date,r.time;0===a&&(Number(s.x)>10&&Number(s.y)<40?((t=c-1)<0&&(t=M.length-1),P(t,!0)):Number(s.x)<-10&&Number(s.y)<40&&L()),_[0].removeEventListener("touchmove",this,!1),_[0].removeEventListener("touchend",this,!1)}function A(e,t,i){var o=t.substring(0,1).toUpperCase()+t.substring(1);e.css("Webkit"+o,i),e.css("Moz"+o,i),e.css("ms"+o,i),e.css("O"+o,i),e.css(t,i)}function D(){y(n),I(n),Mobi.initSwipe("bannerSwipe",n),S(),w()}t.init=function(t){var i,n=t;if(!(e("#webBanner").length<1)&&(!(n.b.length<2)&&3!=n.showType))return!(!Mobi.checkBrowser()||1==n.et)&&(clearTimeout(o),c=0,m=!1,y(n),I(n),Mobi.initSwipe("bannerSwipe",n),S(n),w(),i=e("#webBanner").height()||0,0==f.effectType&&0!=i?e("#webBanner").css("height",i+"px"):e("#webBanner").css("height",""),!0)}}(jm,Mobi.bannerAnimate);var couponClickLock=!0;function popupCouponMsg(e){var t=jm(".mobiCouponMsgBox");t.remove(),jm("<div class='mobiCouponMsgBox'></div>").appendTo("body"),t=jm(".mobiCouponMsgBox"),jm(e).appendTo(t),window.setTimeout(function(){t.css("visibility","hidden"),t.css("opacity","0")},1500)}function receiveCoupon(e,t){jm.ajax({type:"post",url:"ajax/mallCoupon_h.jsp",data:"cmd=receiveCoupon&bgId="+t+"&cid="+e,dataType:"json",success:function(e){if(e.success){Mobi.logDog(200984,5);e.coupon;(t=[]).push('<div class="mobiCouponMsgPanl">'),t.push('<div class="mobiCouponMsg">'),t.push('<div class="sTop">'+LS.successGet+"</div>"),t.push("</div>"),t.push("</div>"),popupCouponMsg(t.join("")),window.setTimeout(function(){location.reload(!0)},1500)}else{Mobi.logDog(200984,6);var t,i=e.rt;(t=[]).push('<div class="mobiCouponMsgPanl2">'),t.push('<div class="mobiCouponMsg">'),-23==i?Fai.top.location.href="login.jsp":-4==i?t.push('<div class="fBottom">'+LS.overGet+"</div>"):-701==i?t.push(jm.format(LS.receiveCouponAuth,e.authMemberLvName)):t.push('<div class="fBottom">'+LS.isNoneCoupon+"</div>"),t.push("</div>"),t.push("</div>"),popupCouponMsg(t.join(""))}},error:function(){Mobi.ing(LS.js_systemError)}})}Mobi.initMallCoupon=function(e){var t=jm("#couponList"+e);if(2052!=Fai.top._lcid&&t.find(".couponPrice2").length>0&&jm.each(t.find(".couponPrice2"),function(e,i){jm.isInteger(e)&&4==t.find(".couponPrice2").eq(e).html().length&&(t.find(".couponSavePrice2").eq(e).css("margin-left","0").css("margin-right","0.75rem"),t.find(".couponPrice2").eq(e).css("font-size","1.4rem"))}),0!=(window.chrome||0)&&window.frames.length!=parent.frames.length){if(t.find(".couponUseCondition2up").css("-webkit-transform","scale(0.8)"),t.find(".couponUseCondition2low").css("-webkit-transform","scale(0.8)"),t.find(".off2").css("-webkit-transform","scale(0.8)"),t.find(".validTime2").length>0)for(var i=0;i<t.find(".validTime2").length;i++)t.find(".validTime2")[i].innerHTML.indexOf("-")<=0||t.find(".validTime2").eq(i).css("-webkit-transform","scale(0.8)").css("margin-left","-0.7rem");2052!=Fai.top._lcid&&(t.find(".couponSavePrice2").css("margin-right","0.2rem"),jm.each(t.find(".couponPrice2"),function(e,i){jm.isInteger(e)&&4==t.find(".couponPrice2").eq(e).html().length&&(t.find(".couponSavePrice2").eq(e).css("margin-left","-0.3rem").css("margin-right","0.6rem"),t.find(".couponPrice2").eq(e).css("font-size","1.4rem"))}))}t.find(".buttonWords").bind("click",function(){couponClickLock&&Mobi.clickCoupon(jm(this).parents(".coupon3"))}),t.find(".coupon1, .coupon2, .coupon3,.couponItem").bind("click",function(){couponClickLock&&Mobi.clickCoupon(this)})},Mobi.dealReceiveMessage=function(e){var t=jm("#couponList"+e);t.find(".coupon1").each(function(e,t){var i=jm(t).find(".scale_coupon_receive"),o=jm(t).find(".coupon_content_right"),n=parseInt(i.width());parseInt(o.width());n>12&&(2052!=Fai.top._lcid?i.css("line-height","1"):i.css("-webkit-transform","unset"),i.css("letter-spacing","0.075rem"))}),t.find(".coupon3").each(function(e,t){var i=jm(t).find(".couponUseTime"),o=jm(t).find(".conditionContain");parseInt(i.width())>parseInt(o.width())&&(o.css("-webkit-transform","scale(.90)"),o.css("margin-left","0"))})},Mobi.clickCoupon=function(e){if(couponClickLock){couponClickLock=!1;var t=jm(e).attr("received")||!1;t="true"==t;var i=jm(e).attr("couponId"),o=jm(e).attr("bgId");if(1==Fai.top._manageMode){var n=[];n.push('<div class="mobiCouponMsgPanl2">'),n.push('<div class="mobiCouponMsg">'),n.push('<div class="fTop">领取失败</div>'),n.push('<div class="fBottom">当前为管理状态!</div>'),n.push("</div>"),n.push("</div>"),popupCouponMsg(n.join(""))}else 0==Fai.top.sessionMemberId?(Mobi.storageReturnUrl(Fai.top.location.href),Fai.top.location.href="login.jsp"):t?Fai.top.location.href="pr.jsp?couponId="+i:receiveCoupon(i,o);window.setTimeout(function(){couponClickLock=!0},1600)}},Mobi.initCouponPromotion=function(e){Mobi.logDog(200984,4);var t=jm("#module"+e);jm(t).find(".formMiddleContent").css("margin-bottom","0");var i=jm(t).find(".couponReceive");jm(i).bind("click",function(){var e=jm(this).attr("couponId");e>0&&(0==Fai.top.sessionMemberId?Fai.top.location.href="login.jsp?returnUrl="+Fai.top.location.href:receiveCoupon(e,0))});var o=jm(t).find(".J_received");jm(o).bind("click",function(){var e=jm(this).attr("couponId");Fai.top.location.href="pr.jsp?couponId="+e}),jm(t).find(".toMallIndex,.toMallIndexContent").bind("click",function(){Fai.top.location.href="index.jsp"})},Mobi.removeFrameBottomMargin=function(e){var t=jm("#module"+e);jm(t).find(".formMiddleContent").css("margin-bottom","0")},Mobi.receiveCouponFromHd=function(e){jm.cookie("hdCoupon")&&(e&&(jm.cookie("hdCoupon",null),jm.ajax({type:"post",url:"ajax/mallCoupon_h.jsp",data:"cmd=receiveCoupon&fromHd=true&bgId=0&cid="+jm.cookie("hdCouponId"),dataType:"json",success:function(e){if(jm.cookie("hdCouponId",null),e.success){e.coupon;(t=[]).push('<div class="mobiCouponMsgPanl">'),t.push('<div class="mobiCouponMsg">'),t.push('<div class="sTop">'+LS.successGet+"</div>"),t.push("</div>"),t.push("</div>"),popupCouponMsg(t.join("")),window.setTimeout(function(){Fai.top.location.href="/"},1500)}else{var t,i=e.rt;(t=[]).push('<div class="mobiCouponMsgPanl2">'),t.push('<div class="mobiCouponMsg">'),-23==i?(Fai.top.location.href="login.jsp",jm.cookie("hdCoupon",!0)):-4==i?t.push('<div class="fBottom">'+LS.overGet+"</div>"):-701==i?t.push('<div class="fBottom">'+jm.format(LS.receiveCouponAuth,e.authMemberLvName)+"</div>"):t.push('<div class="fBottom">'+LS.isNoneCoupon+"</div>"),t.push("</div>"),t.push("</div>"),popupCouponMsg(t.join(""))}},error:function(){Mobi.ing(LS.js_systemError)}})))},Mobi.receiveCouponFromHdPopup=function(e,t,i){if(e){Fai.top.document.body.clientWidth,Fai.top.document.body.clientHeight;var o=[];o.push("<div style='display: inline-block; width: 18rem; height: 18rem; position: fixed; top: -12rem; left: -2.2rem; z-index: 9999;'>"),o.push("<img src='"+_resRoot+"/image/hdCoupon.png'>"),o.push("<div style='display: inline-block; width: 7.2rem; height: 2.5rem; position: fixed; top: -1.5rem; left: 2.2rem; z-index: 9999; text-align: center;'>"),o.push("<span style='font-size: 2.2rem; color: #ff4c38; font-weight: bold;'>"+i+"</span>"),o.push("<span style='font-size: 1rem; color: #ff4c38; position: relative; top: -5px; left: 3px;'>元</span>"),o.push("</div>"),o.push("<div class='J-prompt-callback' style='display: inline-block; width: 5.2rem; height: 1.5rem; position: fixed; top: 1.8rem; left: 4.35rem; z-index: 9999; text-align: center;'></div>"),o.push("</div>"),o.push("<div class='J-prompt-cancel' style='display: inline-block; width: 2rem; height: 2rem; position: fixed; top: 6rem; left: 5.925rem; z-index: 9999;'>"),o.push("<img src='"+_resRoot+"/image/hdCouponClose.png'>"),o.push("</div>");var n={content:o.join(""),callback:function(){jm.ajax({type:"post",url:"ajax/mallCoupon_h.jsp",data:"cmd=receiveCoupon&fromHd=true&bgId=0&cid="+t,dataType:"json",success:function(e){if(e.success){e.coupon;(o=[]).push('<div class="mobiCouponMsgPanl">'),o.push('<div class="mobiCouponMsg">'),o.push('<div class="sTop">'+LS.successGet+"</div>"),o.push("</div>"),o.push("</div>"),popupCouponMsg(o.join("")),window.setTimeout(function(){Fai.top.location.href="/"},1500)}else{var i=e.rt;if(-23==i)Fai.top.location.href="login.jsp",jm.cookie("hdCoupon",!0),jm.cookie("hdCouponId",t);else if(-4==i){(o=[]).push('<div class="mobiCouponMsgPanl2">'),o.push('<div class="mobiCouponMsg">'),o.push('<div class="fBottom">'+LS.overGet+"</div>"),o.push("</div>"),o.push("</div>"),popupCouponMsg(o.join(""))}else{var o;(o=[]).push('<div class="mobiCouponMsgPanl2">'),o.push('<div class="mobiCouponMsg">'),o.push('<div class="fBottom">'+LS.isNoneCoupon+"</div>"),o.push("</div>"),o.push("</div>"),popupCouponMsg(o.join(""))}}},error:function(){Mobi.ing(LS.js_systemError)}})}};Mobi.customPopup(n)}},function(e,t,i,o){function n(e,t,i){for(var o=["","-webkit-","-moz-","-ms-"],n=o.length;n;)n--,e.css(o[n]+t,i)}i.init=function(i,o,a){var r=5,s=t.getPreviewObject("module"+i),l=s.querySelectorAll(o+i+"")[0],c=s.querySelectorAll(".J_marqueeContainer"+i)[0];if("object"==_typeof(s)&&"object"==_typeof(l)&&"object"==_typeof(c)){var d={s:!0,d:"up",sp:"normal",mm:!0,i:!0};e.extend(d,a),r="normal"==d.sp?"up"==d.d||"down"==d.d?5*l.offsetWidth/s.offsetWidth*(l.offsetHeight/l.offsetWidth):5*l.offsetWidth/s.offsetWidth:"slow"==d.sp?"up"==d.d||"down"==d.d?10*l.offsetWidth/s.offsetWidth*(l.offsetHeight/l.offsetWidth):10*l.offsetWidth/s.offsetWidth:"up"==d.d||"down"==d.d?2.5*l.offsetWidth/s.offsetWidth*(l.offsetHeight/l.offsetWidth):2.5*l.offsetWidth/s.offsetWidth,e.extend(d,{sp:r});var m,p,u=l.className,h=t.createElementByHtml("<div class='J_contentPanelCopy"+i+" f-contentPanel "+u+"'></div>"),f=l.parentNode,g=e(l).offset(),v="infinite",b="",j=1,_=navigator.userAgent;if(e(c).css({width:g.width+"px"}),"up"==d.d)m="buttomToTop";else if("down"==d.d)m="topToButtom";else if("left"==d.d||"right"==d.d){m="left"==d.d?"rightToLeft":"leftToRight";var M={width:g.width+"px",height:"auto",position:"absolute",left:g.width+"px",top:0};41==d.styleId&&Object.assign(M,{display:"flex",overflow:"initial"}),e(h).css(M)}d.i&&(h.innerHTML=l.innerHTML,f.appendChild(h)),d.mm||e(f).one("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(){e(f).removeClass("fk-marqueeMoveInStyle")}),!d.mm&&d.i?(b="_moveIn",v=1,j=1):d.mm&&!d.i?(b+="_discontinuous",v=1,j=2):d.mm&&d.i?b="":d.mm||d.i||(b="_moveIn_discontinuous"),p=m+b+" "+d.sp/j+"s linear "+v,Fai.top.Fai.isIE10&&d.mm&&d.i&&("down"==d.d||"right"==d.d)?setTimeout(function(){n(e(f),"animation",p)},0):n(e(f),"animation",p),!d.mm&&d.i?e(f).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p=m+" "+d.sp+"s linear infinite",n(e(f),"animation",p)}):d.mm&&!d.i&&e(f).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){p=m+"_moveIn_discontinuous "+d.sp+"s linear infinite",n(e(f),"animation",p)}),/(iPhone|iPad|iPod|Android)/i.test(_)?e(s).on("touchstart",function(){n(e(f),"animation-play-state","paused")}).on("touchend",function(){n(e(f),"animation-play-state","running")}):e(s).on("mouseover",function(){n(e(f),"animation-play-state","paused")}).on("mouseout",function(){n(e(f),"animation-play-state","running")})}}}(jm,Mobi,Mobi.richMarquee||(Mobi.richMarquee={utils:{},event:{},dom:{},data:{}})),Mobi.shanghuaLoading={},function(e,t,i){var o,n,a,r,s=new Array,l=0,c=0,d=0,m=0,p="",u="",h="",f=0;function g(){if(o.find(".orderList").empty(),s.length>c){0!=s[c].length&&(e.each(s[c],function(e,t){l=e,o.find(".orderList").append(t)}),l++),j();var t=o.find(".orderList_line").length;t<=100&&100*c+t==m?(o.find(".orderList").append("<div class='pagenation'><div class='pagePrev icon-pagePrev icon-cnListP'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pagePrev").unbind().bind("click",function(){c--,v()})):100==t&&t<m&&0!=c?b():o.find("#cusInfo").append(p),window.scrollTo(0,6e4)}else e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getMInfo",data:"page="+c,error:function(){Mobi.ing(LS.js_systemError)},success:function(t){var i=e.parseJSON(t);if(i.success){s.push(i.data),d=s[c].length,0!=s[c].length&&(e.each(s[c],function(e,t){if(10==e)return!1;l=e,o.find(".orderList").append(t)}),l++),j(),window.scrollTo(0,0);var n=o.find(".orderList_line").length;n<=10&&n==d?(o.find(".orderList").append("<div class='pagenation'><div class='pagePrev icon-pagePrev icon-cnListP'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pagePrev").unbind().bind("click",function(){c--,v()})):o.find("#cusInfo").eq(1).append(p)}else o.find(".orderList").append(i.data);Mobi.initEarnestSaleStyle()}})}function v(){if(o.find(".orderList").empty(),0!=s[c].length){e.each(s[c],function(e,t){l=e,o.find(".orderList").append(t)}),l++,j();var t=o.find(".orderList_line").length;100==t&&t<m&&0==c?(o.find(".orderList").append("<div class='pagenation'><div class='pageNext icon-pageNext icon-cnListN'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pageNext").unbind().bind("click",function(){c++,g()})):100==t&&t<m&&0!=c&&b()}j(),window.scrollTo(0,6e4)}function b(){o.find(".orderList").append("<div class='pagenation'><div class='pagePrev icon-pagePrev icon-cnListP'></div>"+u+"<div class='pageNext icon-pageNext icon-cnListN'></div></div>"),o.find(".pageSelect").val(c),o.find(".pagePrev").unbind().bind("click",function(){c--,v()}),o.find(".pageNext").unbind().bind("click",function(){c++,g()})}function j(){Mobi.initOrderDeleteButton(n),Mobi.initPayOrderImmediately(n),Mobi.initOrderCancelButton(n),Mobi.initOrderSureButton(n),Mobi.initFlowButton(n),Mobi.initCommentBtn(n,a),Mobi.initSelfRaisingVerification(n),Mobi.initIntegralMallConfirmButton(n,"List"),Mobi.initMerchantsButton(n),o.find(".payButton").unbind().bind("click",function(){var t=e(this).attr("_href");if(t){var i,o=e(this).attr("_orderId");void 0!==o&&null!=o&&(i=o);var n=Mobi.checkOrderPayLimit(i);if(""==n){var a="WXPAY"==t,r=e(this).attr("_appId"),s=function(t,i,o,n){var a=!0;return e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=checkOrder",data:"orderId="+t+"&isWX="+i,async:!1,dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(r){if(!r.success)if(a=!1,-3==r.rt)Mobi.ing(LS.mallStlSubmitNotFound);else if(-9==r.rt)Mobi.ing(LS.mallStlSubmitStatusError);else if(r.rt==Mobi.MallAjaxErrno.mallAmountZero)Mobi.ing(e.format(LS.oAmountIsZero));else if(r.rt==Mobi.MallAjaxErrno.outOfMallAmount)Mobi.ing(e.format(LS.outOfMallAmount));else if(r.rt==Mobi.MallAjaxErrno.OutOfAllowAmount)Mobi.ing(e.format(LS.allowAmountOverNameList,Mobi.encodeHtml(r.productsName)));else if(r.rt==Mobi.MallAjaxErrno.payDomainError)Mobi.ing(e.format(LS.mallPayDomainError));else if(r.rt==Mobi.MallAjaxErrno.notAdded)Mobi.ing(e.format(LS.mallProductNotAdded));else if(r.rt<=-600&&r.rt>=-609){var s;-608==r.rt?(s={textClass:"goToPay",cancelClass:"giveUpJoin",content:"非常抱歉，该团已满，继续支付会自动为您开新团",callback:function(){e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setOrderNewGroupBuyDetail",data:"orderId="+t,dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(e){e.success?i?Mobi.getWxpayUrl(o,t):document.location.href=n:-9==e.rt?window.location.reload():Mobi.ing("当前网络异常，请刷新后重试")}})}},Mobi.prompt(s)):-605==r.rt?(s={textClass:"goToPay",cancelClass:"giveUpJoin",content:"不好意思，已经超出成团时间，继续支付将自动为您开新团",callback:function(){e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=setOrderNewGroupBuyDetail",data:"orderId="+t,dataType:"json",error:function(){Mobi.ing(LS.mallStlSubmitError)},success:function(e){e.success?i?Mobi.getWxpayUrl(o,t):document.location.href=n:-9==e.rt?window.location.reload():Mobi.ing("当前网络异常，请刷新后重试")}})}},Mobi.prompt(s)):-604==r.rt?Mobi.ing("不好意思，活动已结束"):-609==r.rt?Mobi.ing("不好意思，您已经参与该团"):Mobi.ing("参团失败，请稍后再试")}else Mobi.ing(LS.mallStlSubmitError)}}),a}(i,a,r,t);s&&(a?Mobi.getWxpayUrl(r,i):document.location.href=t)}else Mobi.ing(n)}})}t.init=function(t,i,_){return o=e("#module"+(n=t)),a=i,f=parseInt(_)||0,p="<div class='getMInfo'><div class='mListLoadingPic'><img src="+Fai.top._resRoot+"/image/loading/loading_2.gif?v=201509211806></div><div class='mListLoadingTxt'>正在加载更多订单</div></div>",function(t){var i={page:c,orderStatus:f};e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getMInfo&moduleId="+t,data:i,error:function(){Mobi.ing(LS.js_systemError)},success:function(t){var i=e.parseJSON(t);if(i.success){s.push(i.data),m=i.totalSize,h=Math.ceil(m/100),u="<div class='pagenationSelectDiv'><select class='pageSelect' onchange='Mobi.shanghuaLoading.jump(this.options[this.selectedIndex].value)'>";for(var n=0;n<h;n++){var a=n+1+"/"+h;u+="<option class='pageOptions' value="+n+">"+a+"</option>"}u+="</select></div>",d=s[c].length,0!=s[c].length&&(e.each(s[c],function(e,t){if(10==e)return!1;l=e,o.find(".orderList").append(t)}),l++),function(){m>10?o.find("#cusInfo").append(p):(o.find(".orderList").append("<div class='pagenation'>"+u+"</div>"),o.find(".pageSelect").val(c));window.onscroll=function(){0==c&&o.find(".orderList_line").length>=d||100*c+o.find(".orderList_line").length>=100*c+d?o.find(".getMInfo").remove():(r=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o.find(".getMInfo").offset().top-r<=740&&(o.find(".getMInfo").remove(),function(){var t=l+10;e.each(s[c],function(e,i){return e<l||!(e>=t)&&(l=e,void o.find(".orderList").append(i))}),l++;var i=o.find(".orderList_line").length;100==i&&i<m&&0==c?(o.find(".orderList").append("<div class='pagenation'><div class='pageNext icon-pageNext icon-cnListN'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pageNext").unbind().bind("click",function(){c++,g()})):i<=100&&0==c&&i==d?(o.find(".orderList").append("<div class='pagenation'>"+u+"</div>"),o.find(".pageSelect").val(c)):i<=100&&100*c+i==m&&i==d?(o.find(".orderList").append("<div class='pagenation'><div class='pagePrev icon-pagePrev icon-cnListP'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pagePrev").unbind().bind("click",function(){c--,v()})):100==i&&i<m&&0!=c?b():o.find("#cusInfo").append(p)}(),j()))}}(),j(),e("#webFooter").css("height",0),Mobi.initEarnestSaleStyle()}else o.find(".orderList").append(i.data);Mobi.initFooterHeight()}})}(n),!0},t.jump=function(t){o.find(".orderList").empty(),t>c&&t>=s.length?(c++,function t(i){e.ajax({type:"post",url:"ajax/order_h.jsp?cmd=getMInfo&moduleId="+n,data:"page="+c,error:function(){Mobi.ing(LS.js_systemError)},success:function(n){var a=e.parseJSON(n);if(a.success?(s.push(a.data.split("|")),d=s[c].length):o.find(".orderList").append(a.data),i>c)c++,t(i);else{0!=s[c].length&&(e.each(s[c],function(e,t){if(10==e)return!1;l=e,o.find(".orderList").append(t)}),l++);var r=o.find(".orderList_line").length;r<=10&&r==d?(o.find(".orderList").append("<div class='pagenation'><div class='pagePrev icon-pagePrev icon-cnListP'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pagePrev").unbind().bind("click",function(){c--,v()})):o.find("#cusInfo").append(p)}Mobi.initEarnestSaleStyle()}})}(t)):t>c&&t<s.length?function(t){d=s[c=t].length,0!=s[c].length&&(e.each(s[c],function(e,t){if(10==e)return!1;l=e,o.find(".orderList").append(t)}),l++);var i=o.find(".orderList_line").length;i<=10&&i==d?(o.find(".orderList").append("<div class='pagenation'><div class='pagePrev icon-pagePrev icon-cnListP'></div>"+u+"</div>"),o.find(".pageSelect").val(c),o.find(".pagePrev").unbind().bind("click",function(){c--,v()})):o.find("#cusInfo").append(p)}(t):function(t){c=t,0!=s[t].length&&(d=s[t].length,e.each(s[t],function(e,t){if(10==e)return!1;l=e,o.find(".orderList").append(t)}),l++);o.find("#cusInfo").append(p)}(t),j(),window.scrollTo(0,0)}}(jm,Mobi.shanghuaLoading),Mobi.initShare=function(e,t,i){var o=e;jm("#"+o).unbind("click").bind("click",function(){var e;Mobi.isWechat()?((e=[]).push("<div class='shareCover'>"),e.push("\t\t<img class='shareCoverImg' src='"+Fai.top._resRoot+"/image/v2/shareTip.png?v=201703240921'/>"),e.push("</div>"),0==jm(".shareCover").length&&(jm("#g_web").append(e.join("")),jm(".shareCover").bind("click",function(){jm(".shareCover").unbind().remove()}))):((e=[]).push("<div class='shareCover' style='background-color:white;opacity:1;'>"),e.push("\t\t<img class='shareCoverIcon shareCoverContent' src='"+Fai.top._resRoot+"/image/v2/shareIcon.png?v=201703240921'/>"),e.push("\t\t<div class='shareCoverTip shareCoverContent'>请使用浏览器的分享功能分享到微信</div>"),e.push("\t\t<div class='shareCoverBtn shareCoverContent'>知道了</div>"),e.push("</div>"),0==jm(".shareCover").length&&(jm("#g_web").append(e.join("")),jm(".shareCoverBtn").bind("click",function(){jm(".shareCoverBtn").unbind(),jm(".shareCover").remove()})))}),null!=t&&(o=t,jm("#"+o).unbind("click").bind("click",function(){window.open("http://service.weibo.com/share/share.php?title= &url=http%3A%2F%2Fm.jack.iii.cc.jack.dev.cc%2Fpd.jsp%3Fpid%3D123%26_sc%3D2&pic=")}),o=i,jm("#"+o).unbind("click").bind("click",function(){var e;Mobi.isQQ()?((e=[]).push("<div class='shareCover'>"),e.push("\t\t<img class='shareCoverImg' src='"+Fai.top._resRoot+"/image/v2/shareTip02.png?v=201703240921' style=''/>"),e.push("</div>"),0==jm(".shareCover").length&&(jm("#g_web").append(e.join("")),jm(".shareCover").bind("click",function(){jm(".shareCover").unbind().remove()}))):((e=[]).push("<div class='shareCover' style='background-color:white;opacity:1;'>"),e.push("\t\t<img class='shareCoverIcon shareCoverContent' src='"+Fai.top._resRoot+"/image/v2/shareIcon.png?v=201703240921'/>"),e.push("\t\t<div class='shareCoverTip shareCoverContent'>请使用浏览器的分享功能分享到QQ</div>"),e.push("\t\t<div class='shareCoverBtn shareCoverContent'>知道了</div>"),e.push("</div>"),0==jm(".shareCover").length&&(jm("#g_web").append(e.join("")),jm(".shareCoverBtn").bind("click",function(){jm(".shareCoverBtn").unbind(),jm(".shareCover").remove()})))}))},Mobi.initFixAreaEvent=function(){var e=0,t=jm(".J_mallNavBtn");t.on("click.clickAnimate",function(){var i=jm(this);return t.removeClass("f-navCheck"),t.find(".J_clickAnimate").css("opacity","0"),i.addClass("f-navCheck"),i.find(".clickAnimate").css("opacity","0.2").css("transform","scale(1.4)"),i.find(".mallNavText").addClass("mallTextAnimate"),i.find(".icon-navItemIcon").addClass("iconAnimate"),event.stopPropagation(),e>1&&(window.location.href=jm(this).attr("href")),!1}),t.off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend").on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(t){var i=jm(this);if(i.find(".J_clickAnimate").css("opacity","0"),!(++e>1)){var o=jm(this).attr("href");if("string"!=typeof o||"javascript:;"!=o)if(Fai.top._manageMode&&Fai.top._changeStyleNum>0){i.attr("id").replace("mallNavItem_");Fai.top.Mobi.checkSaveBar()}else window.location.href=o}})},function(e,t,i){t.initFooter=function(){var i=Fai.top._openThemeV3?e("#webFooter_v3"):e("#webFooterBox"),o=200039,n={CLICK_FREE:3,CLICK_PAY:4,EXPOSURE_FREE:5,EXPOSURE_PAY:6};function a(){var e=!0!==Fai.top._oem,t=!r();return e&&t}function r(){return!0!==Fai.top._oem&&!0===Fai.top._isFreeVer}!function(e){if(Fai.top._oem||Fai.top._isMall)return;var t=e.find(".J_supportLink"),i=Fai.top._mjzHomeHost,o=!0===Fai.top._isFreeVer,n="//"+i+"/pro8.html?_ta="+(o?2508:2509);t.attr("href",n)}(i),function(e){var i=e.find(".J_supportLink"),s="touchend.logClick";t.isPC()||(s="click.logClick");i.off(s).on(s,function(e){a()&&t.logDog(o,n.CLICK_PAY);r()&&t.logDog(o,n.CLICK_FREE)})}(i),function(i){var s=i.find(".J_supportLink");if(0===s.length)return;var l=e(window),c="scroll.footerSupportLinkExposure",d="resize.footerSupportLinkExposure",m=t.throttle(p);function p(){var e=t.isInViewArea(l,s);e&&(a()&&t.logDog(o,n.EXPOSURE_PAY),r()&&t.logDog(o,n.EXPOSURE_FREE),l.off(c).off(d))}l.off(c).on(c,m),l.off(d).on(d,m),p()}(i)},t.throttle=function(e,t){return e._throttleTime=t||300,function(){clearTimeout(e._throttleTimer),e._throttleTimer=setTimeout(function(){e.apply(this,arguments)},e._throttleTime)}},t.isInViewArea=function(t,i){if(0===i.length)return!1;var o=i[0],n=e("#fixedAreaBox").offset().height,a=o.getBoundingClientRect(),r=a.top,s=a.bottom-a.height/2,l=a.left,c=a.right,d=e("#g_web").offset(),m=d.width,p=e("body").offset().height-n,u=d.left,h=!1;return l>=u&&c<=u+m&&(r>=0&&s<p)&&(h=!0),h}}(jm,Mobi),Mobi.initFooterLanguageEventV3=function(){var e=jm("#webFooter_v3"),t=e.find(".languageVis"),i=e.find(".languageFullBg"),o=e.find(".languageListPanel");1==e.find(".langItem").length&&e.find(".footLanguageItem").hide(),t.off("click.lang").on("click.lang",function(){i.show(),o.addClass("langPanelUp")}),i.off("click.lang").on("click.lang",function(){jm(this).hide(),o.removeClass("langPanelUp")});var n=e.find(".langItem[currentlan='"+Fai.top._lcid+"']").text();e.find(".languageVis a").eq(0).text(2052==Fai.top._lcid?"中文版":n),jm(".langItem").click(function(e){e.stopPropagation(),document.location.href=jm(this).attr("value")})},Mobi.fixFooterDividingV3=function(e){if(Fai.top._manageMode){var t=Fai.top._pattern.fs,i=jm("#webFooter_v3"),o=(i.find(".footer_menu"),i.find(".other_item"));1==e?(1==t.se?o.find(".J_siteEntrance ").addClass("hideDivding"):o.find(".J_siteEntrance ").removeClass("hideDivding"),1!=t.se?o.find(".J_support").addClass("hideDivding"):o.find(".J_support").removeClass("hideDivding"),1!=t.se&&1!=t.fs?o.find(".rep").addClass("hideDivding"):o.find(".rep").removeClass("hideDivding")):o.find(".J_support").addClass("hideDivding")}},Mobi.initTabModuleStyle=function(e,t){var i,o,n,a=jm("#module"+e),r=a.find(".J_formTabButtonWrap"),s=r.find(".J_formTabButtonList"),l=r.parent(),c=s.find(".J_formTabButton"),d=(a.find(".J_formTabContent"),a.find(".J_formTabModuleContent")),m="true"===a.find(".J_tabModule").attr("_arrowopen")||!jm.os.supportsTouch,p=(r.offset(),0),u=0,h=0;if(Fai.top.Mobi.getPreviewDocument().URL.length>0){var f,g,v,b=Fai.top.Mobi.getPreviewDocument().location.search,j=b.indexOf("pageno");j>-1&&(f=(v=b.substring(0,j).split("").reverse().join("")).indexOf("m"),(g=parseInt(v.substring(0,f).split("").reverse().join("")))>0&&c.each(function(e,t){if(parseInt(jm(this).attr("tabmoduleid"))==g)return e,!1}))}if(l.hasClass("wrapOpen")||2==t)return d.find(".J_preBtn").hide(),d.find(".J_nextBtn").hide(),s.css("width","100%"),void s.css("left","");if(d.find(".J_preBtn").show(),d.find(".J_nextBtn").show(),c.each(function(e,t){u=t.offsetWidth,h+=u+1,u>p&&(p=u)}),s.width(h+"px"),i=r.width(),h<=i)return s.css("width","100%"),d.find(".J_preBtn").hide(),void d.find(".J_nextBtn").hide();function _(){var e=s.find(".J_formTabButton"),t=e.eq(e.length-1).offset(),i=e.eq(0).offset(),o=r.offset(),n=d.find(".J_nextBtn"),a=d.find(".J_preBtn");t.right>o.right?n.show():n.hide(),i.left<o.left?a.show():a.hide()}d.find(".J_preBtn").length>0||!m||(jm("<div class='J_preBtn f-preBtn faisco-icons'></div><div class='J_nextBtn f-nextBtn faisco-icons'></div>").appendTo(d),o=r.offset(),d.find(".J_preBtn").on("click",function(e){if(e.stopPropagation(),preBtn=jm(this),!(preBtn.hasClass("disable")||(n=preBtn.siblings(".J_nextBtn"),c=s.find(".J_formTabButton"),c.eq(0).offset().left>=o.left))){var t,i=r[0].scrollLeft,a=i-p;t=setInterval(function(){a<i?(i-=2,r[0].scrollLeft=i):clearInterval(t)},1),preBtn.addClass("disable"),n.addClass("disable"),setTimeout(function(){preBtn.removeClass("disable"),n.removeClass("disable"),_()},450)}}),d.find(".J_nextBtn").on("click",function(e){if(e.stopPropagation(),n=jm(this),preBtn=n.siblings(".J_preBtn"),!(n.hasClass("disable")||(c=s.find(".J_formTabButton"),c.eq(c.length-1).offset().right<=o.right))){var t,i=r[0].scrollLeft,a=r[0].scrollLeft+p;t=setInterval(function(){i<a?(i+=2,r[0].scrollLeft=i):clearInterval(t)},1),preBtn.addClass("disable"),n.addClass("disable"),setTimeout(function(){preBtn.removeClass("disable"),n.removeClass("disable"),_()},450)}}),_(),r.on("scroll",Mobi.debounce(_,300)))},Mobi.getHideDivOffset=function(e){var t,i,o={position:"absolute",visibility:"hidden",display:"block"},n={};if(e){for(i in o)n[i]=e.style[i],e.style[i]=o[i];for(i in t={offsetHeight:e.offsetHeight||0,offsetWidth:e.offsetWidth||0},o)e.style[i]=n[i];return t}},Mobi.inTabMaqueeHelper={setInTabMarquee:function(e){var t=e.moduleId,i=e.funcName,o=e.args||[],n=e.runTime||1;if("string"==typeof i){var a=Fai.top.inTabMaqueeHelper;(a[t]instanceof Array?a[t]:a[t]=[]).push({funcName:i,args:o,runTime:n,hasRunTime:0})}},runInTabMarquee:function(e){var t=Fai.top.inTabMaqueeHelper;if(e in t){var i,o,n,a=t[e];for(n=0;n<a.length;n++)i=a[n].funcName,o=a[n].args,"function"==typeof Mobi[i]&&(a[n].hasRunTime<a[n].runTime||-1==a.runTime)&&(Mobi[i].apply(Mobi[i],o),a[n].hasRunTime++)}}},function(e,t,i){t.initTabCallBack=function(e){e.find(".J_formTabContent").each(function(e,t){var i=jm(t);setTimeout(function(){i.addClass("f-formTabContent").removeClass("f-hideTabModule")},500)})},t.autoMoveTabPos=function(e,t){var i,o,n=t.find(".J_formTabButtonWrap"),a=e.offset(),r=parseInt(e.width()),s=a.left,l=s+r,c=n[0].offsetWidth;l>=c?(o=-Math.ceil(l-c),i=setInterval(function(){o<0?(o+=2,n[0].scrollLeft+=2):clearInterval(i)},1)):s<=0&&(o=n[0].scrollLeft>=r?r:n[0].scrollLeft,i=setInterval(function(){o>0?(o-=2,n[0].scrollLeft-=2):clearInterval(i)},1))}}(jm,Mobi.tabModuleHelper||(Mobi.tabModuleHelper={})),Mobi.initSimpleTextContent=function(e,t,i){var o=jm("#module"+e),n=(o.attr("_inpopupzone"),o.find(".fkEditor")),a=o.find(".simpleText"),r=(parseInt(o.css("top")||0),parseInt(o.css("left")||0),i||_htmlFontSize),s=o.width().replace("rem",""),l=Fai.top._manageMode;if(element="",cloneModule="",AJump=n.find("a"),Fai.top._manageMode){var c=Fai.top.Mobi.getPopupZone();c&&"preview"==c.enterState&&(l=!1)}element=l?n:a,1!=t&&2!=t?o.is(":visible")?(o.css("height","auto"),o.css("height",o.height())):(l?parseInt(n.attr("_autowidth")||1)&&(s=parseInt(n.attr("_width")||180)/r):parseInt(o.attr("_autowidth")||1)&&(s=180/r),o.find(".fk-editor").css({height:"auto",width:s+"rem"}),o.css({height:"auto",width:s+"rem"}),l&&o.find(".fk-editor").css("height",o.height())):(!l||1!=t&&2!=t||1==parseInt(n.attr("_autowidth")||1)&&o.find(".fk-editor").css("width","auto"),!l&&o.css("overflow","visible")&&o.find(".formMiddle").css("overflow","visible")),l?AJump.each(function(e,t){var i=jm(t).attr("href");i&&(-1!=i.indexOf("Mobi.openLinkFlv")||-1==i.indexOf("http")&&-1==i.indexOf("https")||jm(t).click(function(){return Fai.top.Fai.ing("管理态不支持跳转外部链接，请通过“预览”进行访问",!0),!1}))}):o.find(".fk-editor a").each(function(e,t){var i=jm(t).attr("_href");i&&jm(t).attr("href",i)}),checkNode.traverseTagStyle(element,r)};var checkNode={defaultPropertyValue:["font-size","line-height","top","left","height","width"],isToRem:!0,_htmlFontSize:_htmlFontSize,setPropertyValue:function(e){this.defaultPropertyValue=e},getPropertyValue:function(){return this.defaultPropertyValue},setIstoRem:function(e){this.isToRem=e},getIstoRem:function(){return this.isToRem},resetValue:function(){this.defaultPropertyValue=["font-size","line-height","top","left","height","width"],this.isToRem=!0},returnChangeUnit:function(e,t){var i=t||Mobi.getRootFontSize();return this.getIstoRem()?e.indexOf("px")>=0?parseInt(e)/i+"rem":e:e.indexOf("rem")>=0?Math.round(e.replace("rem","")*i)+"px":e},checkInArray:function(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},checkCurrentTagStyle:function(e,t){var i=this.getPropertyValue(),o="",n=[],a="",r="",s="",l=0;if((o=e.attr("style"))&&!((n=o.split(";")).length<=0))for(l=0;l<n.length;l++)null!=_typeof(a=n[l].split(":"))&&2==a.length&&(r=jm.trim(a[0]),s=jm.trim(a[1]),this.checkInArray(i,r)&&null!=s&&e.css(r,this.returnChangeUnit(s,t)))},traverseTagStyle:function(e,t){if(e.length){this.checkCurrentTagStyle(e,t);var i=e.children(),o=0;if(i.length<=0)this.resetValue();else for(o=0;o<i.length;o++)this.traverseTagStyle(jm(i[o]),t)}}};function lazyLoadProductList_2(e,t,i){var o;e&&"number"==typeof e||(e=jm(window).height()),t&&(o=2==i?jm("#module"+t).find(".mProductList img.style3Img"):jm("#module"+t).find(".mProductList img.style1Img")),o.lazyload({threshold:e,load:null})}function lazyLoadProductList_10(e,t){var i;e&&"number"==typeof e||(e=jm(window).height()),t&&(i=jm("#module"+t).find(".mProductList .style1Img")),i.lazyload({threshold:e,load:null})}function lazyLoadProductList_7(e,t){e&&"number"==typeof e||(e=jm(window).width()),(t?jm("#module"+t).find(".mProductList div.style7Img"):jm(".mProductList div.style7Img")).lazyload({threshold:e,w_threshold:0,otherEvent:"slidePic",load_in_viewport:!0,load:null})}function lazyLoadProductList_8(e,t){e&&"number"==typeof e||(e=jm(window).height()),(t?jm("#module"+t).find(".mProductList div.style8Img"):jm(".mProductList div.style8Img")).lazyload({threshold:e,failure_limit:2,loadingClass:"loading-for-lazyload",load:null})}function lazyLoadProductList_9(e,t){e&&"number"==typeof e||(e=jm(window).width()),(t?jm("#module"+t).find(".mProductList div.style9Img"):jm(".mProductList div.style9Img")).lazyload({threshold:e,w_threshold:e,otherEvent:"horizonScroll",load_in_viewport:!0,load:null})}function lazyloadCubeNavigation(e,t){e&&"number"==typeof e||(e=jm(window).height()),(t?jm("#module"+t).find(".cubeNavigationArea div.J_cubeLink_bg"):jm(".cubeNavigationArea div.J_cubeLink_bg")).lazyload({threshold:parseInt(e/2),loadingClass:"",load:null})}function lazyloadMultiPhotoList_3(e,t){e&&"number"==typeof e||(e=jm(window).width()),(t?jm("#module"+t).find(".J_imgContainer img"):jm(".J_cardContainer .J_imgContainer img")).lazyload({threshold:e,w_threshold:0,load:null,justBind:!0})}Mobi.simpletext={checkNode:checkNode},Mobi.hexToRgba=function(e,t){return"rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")"},Mobi.rgbToRgba=function(e){var t=e.split(",");return-1!=e.indexOf("rgb(")&&3==t.length?"rgba("+t[0].substr(4)+","+t[1].substr(0)+","+t[2].substr(0,t[2].length-1)+",1)":e},Mobi.getGradientColor=function(e,t){if(""===e)return"";if(-1!==e.indexOf("#")&&(e=Mobi.hexToRgba(e,1)),-1!==e.indexOf("rgb(")&&(e=Mobi.rgbToRgba(e)),-1!==e.indexOf("transparent"))return e;var i=e.split(","),o=[];o.push(i[0].substr(5)),o.push(i[1].substr(0)),o.push(i[2].substr(0)),o.push(i[3].substr(0,i[3].length-1));for(var n=0;n<3;n++)o[n]=Math.floor((255-parseInt(o[n]))*t+parseInt(o[n]));return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},Mobi.adjustFlBtnPos=function(e){jm("#module"+e).css({border:"10px solid transparent","margin-top":"-10px","margin-left":"-10px"})},Mobi.initFoldModuleStyle=function(e,t){var i=jm("#module"+e),o=i.find(".J_formFoldButton"),n=i.find(".J_formFoldContentList"),a=jm(n).attr("_display"),r=jm(n).attr("styleId");parseInt(jm("html").css("fontSize"));function s(e){var t=e.parent(),o=t.find(".J_formFoldContent"),n=o.find(".form").length?parseInt(o.find(".form")[0].offsetHeight):parseInt(o.find(".emptyLabel")[0].offsetHeight),a=(parseInt(i.height()),t.attr("id").replace("formFoldButton",""));function s(){e.hasClass("active")&&(o.off("transitionend",s),o.off("webkitTransitionEnd",s),o.css("height","auto"))}e.addClass("active"),o.css("height",n+"px"),2==r?e.addClass("g_main_bgColor_v3"):e.addClass("g_main_color_v3"),o.one("transitionend",s),o.one("webkitTransitionEnd",s),a>0&&Mobi.moduleAnimation.publishOne(a)}function l(e){if(e.hasClass("active")){var t=e.parent().find(".J_formFoldContent"),i=t.find(".form").length?parseInt(t.find(".form")[0].offsetHeight):parseInt(t.find(".emptyLabel")[0].offsetHeight);t.css("height",i+"px"),setTimeout(function(){e.removeClass("active g_main_color_v3 g_main_bgColor_v3"),t.css("height",0)})}}function c(e){e.find(".form").find(".mobiVideo").css("display","block")}function d(e,t){1==e?(i.find(".form").find(".mobiVideo").each(function(e,t){t.pause()}),t.find(".form").hasClass("formStyle30")&&t.find(".form").find(".mobiVideo").css("display","none")):(i.find(".form").find(".mobiVideo").css("display","none"),i.find(".form").find(".mobiVideo").each(function(e,t){t.pause()}))}0==a?o.off("click.action").on("click.action",function(){var e=jm(this),t=e.parent(),o=e.parent().find(".J_formFoldContent");parseInt(o[0].offsetHeight),parseInt(i.height());d(a,o),e.hasClass("active")?l(e):(o.find(".form").hasClass("formStyle30")&&c(o),t.parent().find(".J_formFoldButton").each(function(e,t){jm(t).hasClass("active")&&l(jm(t))}),s(e))}):1==a&&o.off("click.action").on("click.action",function(){var e=jm(this),t=(e.parent(),e.parent().find(".J_formFoldContent"));d(a,t),e.hasClass("active")?l(e):(t.find(".form").hasClass("formStyle30")&&c(t),s(e))}),o.length>0&&i.find(".J_formFoldItem").length>0&&n.find(".J_formFoldItem").each(function(e,t){var i=jm(this).find(".J_formFoldButton");"true"==jm(this).attr("defaultopen")?s(i):l(i)})},function(e,t,i,o){function n(t){this.moduleId=t.moduleId,this.pgType=t.pgType,this.moduleStyle=t.moduleStyle,this.type=t.type,this.manageMode=t.manageMode,this.$module=e("#module"+this.moduleId),this.$firstGrouplistDom=this.$module.find(".J_first_grouplist"),this.$firstGroupItemDom=this.$firstGrouplistDom.find(".J_first_groupitem"),this.grouplistHeight=this.$module.find(".J_first_grouplist")[0].clientHeight,this.firstGroupItemMarginWidth=parseInt(this.$firstGroupItemDom.css("margin-right"))+1,this.firstGroupAllWidth=0,this.init(t)}(Mobi.initModuleProductGroup||(Mobi.initModuleProductGroup={})).init=function(e){new n(e)},n.prototype={constructor:n,init:function(i){if(this.type.length)if("Product"===this.type){var o=parseInt(e.getCookie("pg_startX"))||0;4===this.moduleStyle&&(this.initFirstGroupAllWidth(),this.initSlide(o)),function(i){var o,n,a,r=i.moduleId,s=i.moduleStyle,l=i.pgType,c=i.$module.find("#productList"+r)[0].clientHeight,d=i.$module.find("#productList"+r),m=i.$firstGrouplistDom,p=!1,u=0,h=3,f=0;try{h=t.top._colInfo.id,f=t.top._colInfo.extId}catch(e){h=3,f=0}i.initFirstGroupHeight("J_verticalGroupHasProduct",c,i.grouplistHeight);var g="onmouseup"in document?"mouseup":"click";m.off(g+".J_first_groupitem").on(g+".J_first_groupitem",".J_first_groupitem",function(t){e(this).hasClass("selected")||(4===s&&(u=parseInt(m.css("transform").match(/translate3d\((.*)\)/)[1].split(",")[0]),e.setCookie("pg_startX",u)),m.find(".J_first_groupitem").removeClass("selected"),e(this).addClass("selected"),0===l||1===l?(o=parseInt(e(this).attr("data-id")),d.find('div[gid="'+o+'"]'),a="index.jsp?groupId="+o):2===l&&(n=e(this).attr("data-cn"),d.find("div[gcn="+n+"]"),a="index.jsp?groupName="+n),d.find(".J_groupItem").hide(),setTimeout(function(){p||i.showLoading()},1e3),e.ajax({type:"post",url:"ajax/ajaxLoadModuleDom_h.jsp",data:"cmd=getAjaxPageModuleInfo&_colId="+h+"&_extId="+f+"&moduleId="+r+"&href="+e.encodeUrl(a),error:function(e){Mobi.ing(LS.js_systemError)},success:function(t,o,n){var a=n.getResponseHeader("wafUpdate");a&&"true"==a&&window.location.reload(),p=!0,i.closeLoading(r);var t=e.parseJSON(t);if(t.success){var s=e(t.domStr).find(".middleCenter"+r).html(),l=e("#module"+r).find(".middleCenter"+r);l.html(s),e.fkEval.call(window,t.scripts)}else Mobi.ing(t.msg)}}))})}(this)}else if("Photo"===this.type){var n=parseInt(e.getCookie("pg_startX_photo"))||0;6===this.moduleStyle&&(this.initFirstGroupAllWidth(),this.initSlide(n)),function(i){var o=i.$module,n=i.moduleStyle,a=i.pgType,r=i.$firstGrouplistDom,s=i.moduleId,l=o.find("#groupList"+s)[0].clientHeight,c=o.find("#groupList"+s),d=c.attr("_prUrl")||"",m="onmouseup"in document?"mouseup":"click";i.initFirstGroupHeight("J_verticalGroupHasPhoto",l,i.grouplistHeight),r.off(m+".J_first_groupitem").on(m+".J_first_groupitem",".J_first_groupitem",function(t){var c,m,p,u,h=0;if(4===n&&(h=parseInt(r.css("transform").match(/translate3d\((.*)\)/)[1].split(",")[0]),e.setCookie("pg_startX_photo",h)),0===a?(c=parseInt(e(this).attr("data-id")),u=o.find("#sed_"+c)):2===a&&(m=e(this).attr("data-cn"),u=o.find(".J_secondGroupPanel[gcn='"+m+"']")),p=o.find(".J_secondGroupPanel"),!u.html().trim()&&d)return window.location.href=d+"?groupId="+c,!1;r.find(".J_first_groupitem").removeClass("selected g_main_color_v3"),e(this).addClass("selected g_main_color_v3"),p.removeClass("selected g_main_color_v3"),u.addClass("selected g_main_color_v3"),l=o.find("#groupList"+s)[0].clientHeight,i.initFirstGroupHeight("J_verticalGroupHasPhoto",l,i.grouplistHeight)}),function(i,o){if(!o.manageMode||7===o.moduleStyle)return;var n={key:"productGroup",targets:i.find(".J_groupItem"),type:Mobi.QuickIn.TYPE.FU,popupWindowOption:{settings:{title:"添加图片",maxSize:5,type:["jpg","jpeg","bmp","png","gif"],imgMode:2,maxChoiceList:1,netFileMode:!0,openIcon:!0,tabIndex:0},closeFunc:function(i,o){if(0==i.length||!o.fileId||0==o.fileId.length)return;var n=parseInt(e(i).parent().attr("data-id")),a=o.fileId,r=o.filePath,s=o.isDefaultColor,l=o.color,c="ajax/productGroup_h.jsp?cmd=setSingle&id="+n+"&mIcon="+a;s||(c=c+"&mIconColor="+t.top.Fai.encodeUrl(l));e.ajax({url:c,type:"get",error:function(){top.Fai.ing("服务繁忙，请稍候重试",!1)},success:function(t){var n=e.parseJSON(t);if(n.success){var c=e(i).parent().find(".J_itemImage"),d=e(c).parent();d.empty(),top.Fai.isFontIcon(a)?s?d.append("<span class='J_itemImage isFontIcon f-itemImg "+r+"'></span>"):d.append("<span class='J_itemImage isFontIcon f-itemImg "+r+"' style='color:"+l+"'></span>"):d.append("<div class='J_itemImage f-itemImg' style='background-image: url("+r+");' data-w='"+o.fileWidth+"' data-h='"+o.fileHeight+"' />"),top.Fai.ing(n.msg,!0)}else top.Fai.ing(n.msg,!0)}})}}};Mobi.QuickIn.__createInstance(n)}(c,this)}(this)}},initFirstGroupAllWidth:function(){var t=this;this.$firstGroupItemDom.each(function(i,o){t.firstGroupAllWidth+=Math.ceil(e(o).width())+t.firstGroupItemMarginWidth}),this.$firstGrouplistDom.css("width",t.firstGroupAllWidth+"px")},initSlide:function(e){new iScroll("J_first_group_"+this.moduleId,{x:e||0,scrollX:!0,scrollY:!1,mouseWheel:!0,remarkXCoordinate:!0,onBeforeScrollStart:null,onScrollMove:null,onBeforeScrollEnd:null})},initFirstGroupHeight:function(e,t,i){t>i&&this.$module.find("."+e+" .J_first_group").css({height:t+"px"})},showLoading:function(){var e=this.moduleId;this.$module.find(".productList"+e).empty().append("<div class='pageLoading J_pageLoading'><div class='fk-circle'><div class='fk-circle1 fk-child'></div><div class='fk-circle2 fk-child'></div><div class='fk-circle3 fk-child'></div><div class='fk-circle4 fk-child'></div><div class='fk-circle5 fk-child'></div><div class='fk-circle6 fk-child'></div><div class='fk-circle7 fk-child'></div><div class='fk-circle8 fk-child'></div><div class='fk-circle9 fk-child'></div></div></div>").css("height",this.grouplistHeight+"px")},closeLoading:function(){this.$module.find(".J_pageLoading").remove()}}}(jm,Fai),function(e,t,i){var o=!1;t.PopupZone=function(t,i,o,n,a){i=i||t&&t.attr("id").replace("module",""),t=t||i&&e("#module"+i);this.id=i,this.module=t,this.moduleInfo=a||{},this.create=n||!1,this.funPanel=null,this.enterState=o||"readOnly",this.allPopupZoneList=[],this.historyModules=[],this.inModuleListInfo=[],this.delModuleIdList=[],this.switchActive=!1,this.hasSave=!1},t.closeZone=function(){var e=t.pZone;if(e){if(Fai.top._manageMode){if(e&&"edit"==e.enterState)return;e.stateClassDeal()}e&&e.destroy(),t.pZone=null}},t.open=function(e,i,o){t.pZone&&t.pZone.destroy(),o=o||(Fai.top._manageMode?"preview":"readOnly"),t.pZone=new t.PopupZone(null,e,o);var n=t.pZone;n.initDom(i,n.show,!0),t.id=t.pZone.id},t.PopupZone.prototype.show=function(){"readOnly"==this.enterState?this.openPopupZone():"edit"==this.enterState?this.goEdit(this.module):"preview"==this.enterState&&this.goPreview(this.module),this.bindClikckMaskToClose()},t.PopupZone.prototype.openPopupZone=function(){t.pZone&&t.pZone.destroy();var i,o,n,a,r="";r+="<div class='jz_popupZone_wrap'>",r+="<div class='jz_popupZone_content'>",r+=this.module[0].outerHTML,r+="</div>",r+="</div>",e("#g_web").append(r),e("#g_body").addClass("jz_popupZoneShow"),e("html").addClass("jz_popupZoneShow2"),jm.fkEval.call(window,this.script),i=t.pZone,o=jm(".jz_popupZone_wrap").offset().top,n=parseInt(jm("body").height()),a=0,e("#module"+i.id).find(".form").each(function(t,i){var o=e(i).offset().bottom;a=o>a?o:a}),(a-=o)>n&&e(".J_formPopupZoneContent").height(a+"px"),this.initCloseBtn(),this.bindBeforeUnload()},t.PopupZone.prototype.initDom=function(t,i,o,n){t?(this.module=e(t),i.apply(this)):this.ajaxDom(i,o,n)},t.PopupZone.prototype.ajaxDom=function(i,n,a){if(!o){o=!0;var r=[];r.push("cmd=","getPopupZoneModule"),r.push("&_fresh=","false"),r.push("&_colId=",Fai.top._pageId),r.push("&_extId=",Fai.top._extId),r.push("&popupZoneId=",this.id),r.push("&manageMode=",Fai.top._manageMode),r.push("&onlyLoadVisitScript=",!!n),a&&(a.lType&&r.push("lType=",a.lType),a.lName&&r.push("lName=",a.lName)),jm.ajax({type:"post",url:"ajax/mobimodule_h.jsp",data:r.join(""),error:function(){Fai.top.Fai.ing("系统异常，请稍后重试",!0)},success:function(n){var a=jm.parseJSON(n),r=jm.parseJSON(a.rtInfo),s=t.pZone;if(r){if(s.module=e(r.dom),s.moduleInfo=r.moduleInfo,s.script=r.script,Fai.top._manageMode){for(var l in s.inModuleListInfo=r.inZoneModuleInfoList,r.inModuleAttr)Fai.top.moduleAttr[l]=r.inModuleAttr[l],Fai.top._openThemeV3&&(Fai.top._allAttrV3[l]=r.inModuleAttr[l]);s.clickToClose=!Fai.top.Fai.checkBit(r.moduleInfo.flag,1)}i&&i.apply(s),o=!1}}})}},t.PopupZone.prototype.destroy=function(){e(".jz_popupZone_wrap").remove(),e("#g_body").removeClass("jz_popupZoneShow"),e("html").removeClass("jz_popupZoneShow2"),Fai.top._manageMode&&this.manageDestroy()},t.PopupZone.prototype.bindClikckMaskToClose=function(){var i=!function(e,t){var i=!0;(e>2147483647||e<0||t>2147483647||t<0)&&(i=!1);if(i)return(e&t)==t;var o,n,a,r,s,l,c=e.toString(2),d=t.toString(2);if(c.length>62||d.length>62)return alert("Does not support more than 62 bit. flagBinary.length="+c.length+",bitFlagBinary.length"+d.length+"."),!1;r=o=n=a=0,c.length>31?(l=c.slice(0,c.length-31),s=c.slice(c.length-31),r=parseInt(l,"2"),o=parseInt(s,"2")):o=parseInt(c.slice(0,c.length),"2");d.length>31?(l=d.slice(0,d.length-31),s=d.slice(d.length-31),n=parseInt(l,"2"),a=parseInt(s,"2")):a=parseInt(d.slice(0,d.length),"2");var m=(o&a)==a;m&&(m=(r&n)==n);return m}(this.moduleInfo.flag,1),o=e(".jz_popupZone_wrap");o.off("click.close"),i&&o.on("click.close",function(i){var o=e(i.target);!o.hasClass("J_formPopupZoneContent")&&o.closest(".J_formPopupZoneContent").length>0||t.closeZone()})},t.PopupZone.prototype.initCloseBtn=function(){var t=this.moduleInfo.content.cmi;e("#module"+this.id).find("#module"+t).removeClass("popupZoneCloseBtn").addClass("popupZoneCloseBtn")},t.PopupZone.prototype.bindBeforeUnload=function(){Fai.top._manageMode||e("#module"+this.id).find("a").off("click.zone").on("click.zone",function(){var i=e(this).attr("href");i&&""!=i&&"javascript:void(0)"!=i&&"javascript: void(0)"!=i&&"javascript:;"!=i&&t.closeZone()})}}(jm,Mobi._popupZone||(Mobi._popupZone={})),function(e,t,i){var o;t.googleMapList=[],t.hasLoadGoogleApiSuccess=!1,t.LoadingGoogleApi=!1,Fai.top.Fai.mapList=[],Fai.top.Fai.gMapList=[],t.initBaiDuMap=function(i,n,a,r){try{var s=new BMap.Map(i),l=new BMap.Point(n.x,n.y);s.centerAndZoom(l,n.z),s.enableDoubleClickZoom(),s.enablePinchToZoom();var c=new BMap.Icon(Fai.top._resRoot+"/image/onlineMap/marker_red_sprite.png?v=201809101152",new BMap.Size(22,25),{anchor:new BMap.Size(10,25)}),d=new BMap.Marker(l,{icon:c});s.addOverlay(d);var m=new BMap.NavigationControl;s.addControl(m),o||(o=t.addComplexCustomOverlay(BMap));e("#"+i);var p=new o({point:l,content:'<div class="msg">'+a+"</div>",boxClass:"msgBox",arrowClass:"arrow",zIndex:1,offset:{x:0,y:-35}}),u=document.getElementById(i);Fai.top._manageMode&&e(u).on("mousedown",function(e){e.stopPropagation()}),s.addEventListener("zoomend",function(){p.reDraw()}),s.addOverlay(p),t.initMapEvent(s,i,d,l,p,r);var h={map:s,point:l,myIcon:c,marker:d};Fai.top.Fai.mapList[i]=h}catch(e){t.loadMapFailure(i,e.name)}},t.initGoogleMap=function(i,o,n,a){try{var r=window.google;if(!(r&&r.maps&&r.maps.LatLng)){var s={id:i,googleMapPos:o,googleNote:n,module:a};return t.googleMapList.push(s),void t.loadGoogleAPi()}var l=document.getElementById(i),c=new google.maps.LatLng(o.x,o.y),d=new google.maps.LatLng(o.ox,o.oy),m=new google.maps.Map(l,{draggable:!0,scrollwheel:!1,zoom:o.z,streetViewControl:!1,center:d,scaleControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,clickableIcons:!Fai.top._manageMode}),p={url:Fai.top._resRoot+"/image/onlineMap/marker_red_sprite.png?v=201809101152",size:new google.maps.Size(22,25),anchor:new google.maps.Point(10,25),scaledSize:new google.maps.Size(22,25)};Fai.top._manageMode&&e(l).on("mousedown",function(e){e.stopPropagation()});var u=new google.maps.Marker({map:m,position:c,animation:google.maps.Animation.DROP,icon:p});u.setMap(m);var h=new google.maps.InfoWindow({content:n,width:"auto",height:"auto"});h.open(m,u),google.maps.event.addListener(u,"click",function(){new google.maps.InfoWindow({content:n,width:"auto",height:"auto"}).open(m,u)});var f={googleMap:m,marker:u,infoWin:h};Fai.top.Fai.gMapList[i]=f,Fai.top._manageMode&&t.initGoogleEvent(m,u,h,i,a)}catch(e){t.loadMapFailure(i,e.name)}},t.loadGoogleAPi=function(){t.LoadingGoogleApi||t.hasLoadGoogleApiSuccess||(t.LoadingGoogleApi=!0,"complete"==document.readyState?i():e(window).on("load",function(){i()}));function i(){Mobi.loadFile(document,{src:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCQ8IYEmOy-pXjctSJAYGQsV997OgeXLzU",tag:"script",type:"text/javascript",defer:"defer"},function(){t.googleMapList.length>0&&t.initGoogleMapList(),t.hasLoadGoogleApiSuccess=!0,t.LoadingGoogleApi=!1},function(){t.googleMapList.length>0&&t.initGoogleMapFailure(),t.LoadingGoogleApi=!1})}},t.initGoogleMapList=function(){var i=t.googleMapList;i.length>0&&(e(i).each(function(e,i){t.initGoogleMap(i.id,i.googleMapPos,i.googleNote,i.module)}),t.googleMapList=[])},t.initGoogleMapFailure=function(){var i=t.googleMapList;i.length>0&&(e(i).each(function(e,i){t.loadMapFailure(i.id,"地图加载超时")}),t.googleMapList=[])},t.baiduSearch=function(e,i,o,n,a,r){r=r||!0;t.fuzzilySearch({province:o,address:n,mapZoom:a,module:i,node:e,isSearch:r,failCallback:function(){t.exactlySearch({province:o,address:n,mapZoom:a,module:i,node:e,isSearch:r})}})},t.changeNoteInfo=function(e,i,o){var n=Fai.top.Fai.mapList[e].map,a=new BMap.Point(n.getCenter().lng,n.getCenter().lat);t.refreshMarker(e,i,a,o)},t.refreshGoogleWinInfo=function(e,i,o){var n=Fai.top.Fai.gMapList[e].googleMap,a=Fai.top.Fai.gMapList[e].marker,r=Fai.top.Fai.gMapList[e].infoWin;r.close(),(r=new google.maps.InfoWindow({content:t.encodeHtml(o),width:"auto",height:"auto"})).open(n,a),Fai.top.Fai.gMapList[e].infoWin=r},t.refreshMarker=function(e,i,n,a){var r,s=i.content.mi,l=Fai.top.Fai.mapList[e].map;l.clearOverlays();var c=new BMap.Icon(Fai.top._resRoot+"/image/onlineMap/marker_red_sprite.png?v=201809101152",new BMap.Size(22,25),{anchor:new BMap.Size(10,25)}),d=new BMap.Marker(n,{icon:c,enableDragging:!0});l.addOverlay(d),l.panTo(n),!a||"-"!=s&&""!=s||(s=a),r=t.encodeHtml(s);var m=new o({point:n,content:'<div class="msg">'+r+"</div>",boxClass:"msgBox",arrowClass:"arrow",zIndex:1,offset:{x:0,y:-35}});l.addOverlay(m),setTimeout(function(){},10)},t.exactlySearch=function(e){var i=new BMap.Geocoder,o=e.address,n=e.province,a=e.mapZoom,r=e.node,s=e.module,l=e.isSearch,c=Fai.top.Fai.mapList[r].map;i.getPoint(o,function(i){i?(c.centerAndZoom(i,a),t.refreshMarker(r,s,i),t.setBaiduMap(e.node,e.module,i),l&&t.callSearchEnd(),t.callSearchForExactSearch()):t.callSearchFail()},n)},t.fuzzilySearch=function(i){var o=i.province,n=i.address,a=i.failCallback,r=i.mapZoom,s=i.module,l=i.isSearch,c=i.node;e.isFunction(a)||(a=function(){}),void 0===Fai.top.Fai.mapList[i.node]&&t.initBaiDuMap(i.node,i.module.content.mp,i.module.content.mi);var d,m=Fai.top.Fai.mapList[i.node].map,p={onSearchComplete:function(e){if(d.getStatus()==BMAP_STATUS_SUCCESS)if(e.getCurrentNumPois()<=0)t.callSearchFail();else{var o,n=e.getPoi(0);m.centerAndZoom(n.point,r),o=n.title+"\n",o+="地址："+n.address,t.refreshMarker(c,s,n.point,o),!o||"-"!=i.module.content.mi&&""!=i.module.content.mi||(i.module.content.mi=o),t.setBaiduMap(i.node,i.module,n.point),l&&t.callSearchEnd(),d.enableAutoViewport()}else a()}};(d=new BMap.LocalSearch(o,p)).search(o+n)},t.doGoogleSearch=function(e,i,o,n,a,r){r=r||!0;if(""!=o)if(""!=n){void 0===Fai.top.Fai.gMapList[e]&&t.initGoogleMap(e,i.content.gmp,i.content.mi,i);var s=Fai.top.Fai.gMapList[e].googleMap,l=Fai.top.Fai.gMapList[e].marker,c=(l.getPosition(),s.getCenter(),i.content.gmp,new google.maps.Geocoder),d=o+n;c.geocode({address:d},function(o,a){if(a==google.maps.GeocoderStatus.OK){var c=(o=o[0]).geometry.viewport;s.fitBounds(c),l.setPosition(o.geometry.location),l.setTitle(n),t.setGoogleMap(e,i),info=d+"\n",info+="地址："+o.formatted_address,"-"!=i.content.mi&&""!=i.content.mi.trim()||(i.content.mi=info,t.refreshGoogleWinInfo(e,i,info)),r&&t.callSearchEnd()}else t.callSearchFail(),t.setGoogleDefaultPoint(i)})}else Fai.top.Fai.ing("搜索的地址不能为空。",!0);else Fai.top.Fai.ing("搜索的省市不能为空。",!0)},t.initMapEvent=function(i,o,n,a,r,s){var l=e("#"+o);Fai.top._manageMode||l.on("click",function(e){e.stopPropagation()}),i.addEventListener("click",function(e){if(Fai.top._manageMode){var i=new BMap.Point(e.point.lng,e.point.lat);t.refreshMarker(o,s,i,s.content.mi),t.setBaiduMap(o,s,i)}}),n.addEventListener("click",function(){i.clearOverlays(),i.addOverlay(r),i.addOverlay(n),i.panTo(a)})},t.initGoogleEvent=function(i,o,n,a,r){i.addListener("click",function(e){r.content.mi,Fai.top.Fai.gMapList[a].infoWin,Fai.top.Fai.gMapList[a].googleMap;Fai.top.Fai.gMapList[a].marker.setPosition(e.latLng),t.setGoogleMap(a,r)}),Fai.top._manageMode&&e("#"+a).on("mousedown",function(e){e.stopPropagation()})},t.loadMapFailure=function(t,i){if(0!=e("#"+t).attr("type")){var o="<div class='mapLoadError'><div class='errorMsgBox'><div class='errName'>"+i+"</div><div class='errorImg'></div><div class='errorMsg'>地图加载失败</div></div></div>";e("#"+t).html(o)}},t.loadMapFailure2=function(t,i){if(0!=e("#"+t).attr("type")){var o="<div class='mapLoadError'><div class='errorMsgBox'><div class='errName'>"+i+"</div><div class='errorImg'></div><div class='errorMsg'>地图加载失败</div></div></div>";e("#"+t).html(o);var n=window.google;n&&n.maps&&n.maps.LatLng||Fai.top.Fai.ing("当前网络不支持访问，谷歌地图在中国大陆地区已被屏蔽，可切换使用百度地图",!1)}},t.loadingMap=function(t){e("#"+t).html("<div class='mapLoadingBox'></div>")},t.setGoogleDefaultPoint=function(e){e.content.gmp.ox=23.133158856784426,e.content.gmp.oy=113.33254255767213,e.content.gmp.x=23.133158856784426,e.content.gmp.y=113.33254255767213,e.content.gmp.z=17},t.setBaiduMap=function(e,t,i){var o,n=Fai.top.Fai.mapList[e].map;if(n&&(o=n.getOverlays()),o&&o.length>0){var a=o[0].point;n.getCenter();t.content.mp.ox=a.lng,t.content.mp.oy=a.lat,t.content.mp.x=i.lng,t.content.mp.y=i.lat,t.content.mp.z=n.getZoom()}else t.content.ox=113.333394,t.content.oy=23.139114,t.content.x=113.333394,t.content.y=23.139114,t.content.z=17},t.setGoogleMap=function(e,t){var i=Fai.top.Fai.gMapList[e].googleMap,o=Fai.top.Fai.gMapList[e].marker.getPosition(),n=i.getCenter();o?(t.content.gmp.ox=n.lat(),t.content.gmp.oy=n.lng(),t.content.gmp.x=o.lat(),t.content.gmp.y=o.lng(),t.content.gmp.z=i.getZoom()):(t.content.gmp.ox=23.133158856784426,t.content.gmp.oy=113.33254255767213,t.content.gmp.x=23.133158856784426,t.content.gmp.y=113.33254255767213,t.content.gmp.z=17)},t.callSearchEnd=function(){Fai.top.Fai.ing("搜索结束。",!0),this.searchDone=!0},t.callSearchForExactSearch=function(){Fai.top.Fai.ing("搜索结束。若定位有误，建议先确认地址是否已被百度地图标注，或重新输入正确地址搜索。"),this.searchDone=!0},t.callSearchFail=function(){Fai.top.Fai.ing("未能找到搜索的省市地址。"),this.searchDone=!0},t.encodeHtml=function(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e},t.addComplexCustomOverlay=function(e){function t(e){this.point=e.point,this.content=e.content||"",this.zIndex=e.zIndex||1,this.boxClass=e.boxClass||"",this.boxStyle=n(e.boxStyle),this.arrowClass=e.arrowClass||"",this.arrowStyle=n(e.arrowStyle),this.offset=e.offset||{x:0,y:0}}function i(e){var t=e.map.pointToOverlayPixel(e.point);e.box.style.left=t.x-parseInt(o(e.box,"width"))/2-(parseInt(o(e.box,"padding-left"))+parseInt(o(e.box,"padding-right")))/2+e.offset.x+"px",e.box.style.bottom=-t.y+parseInt(o(e.arrow,"height"))-e.offset.y+"px",e.arrow.style.left=parseInt(o(e.box,"width"))/2+9+"px"}function o(e,t){if("undefined"!=typeof getComputedStyle){var i=getComputedStyle(e,null).getPropertyValue(t);return"opacity"==t?100*i:i}if(void 0!==e.currentStyle)return"opacity"==t?Number(e.currentStyle.getAttribute("filter").match(/(?:opacity[=:])(\d+)/)[1]):e.currentStyle.getAttribute(t)}function n(e){var t="";if("string"==typeof e)t=e;else if("object"==_typeof(e))for(var i in e)t+=i+":"+e[i]+";";return t}return t.prototype=new e.Overlay,t.prototype.initialize=function(e){return this.map=e,this.box=document.createElement("div"),this.box.className=this.boxClass,this.box.style.cssText=this.boxStyle,this.box.innerHTML=this.content,this.close=document.createElement("div"),this.close.className="close",this.arrow=document.createElement("div"),this.arrow.className=this.arrowClass,this.arrow.style.cssText=this.arrowStyle,this.box.appendChild(this.arrow),this.box.appendChild(this.close),e.getPanes().labelPane.appendChild(this.box),this.initDefaultEvent(e),this.box},t.prototype.addEventListener=function(e,t){this.box.addEventListener(e,t)},t.prototype.initDefaultEvent=function(e){var t=this;this.addEventListener("mousedown",function(e){e.stopPropagation()}),this.addEventListener("click",function(e){e.stopPropagation()}),this.addEventListener("touchmove",function(e){e.stopPropagation()}),this.addEventListener("touchstart",function(i){-1!=i.target.getAttribute("class").indexOf("close")&&e.removeOverlay(t)}),this.addEventListener("mousedown",function(i){-1!=i.target.getAttribute("class").indexOf("close")&&e.removeOverlay(t)})},t.prototype.draw=function(){i(this)},t.prototype.hide=function(){this.box.style.display="none"},t.prototype.reDraw=function(){i(this)},t}}(jm,Mobi.mobiMapModule||(Mobi.mobiMapModule={})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var a=t[n];if(e.call(o,a,n,t))return a;n++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var a=t[n];if(e.call(o,a,n,t))return n;n++}return-1}}),function(e,t,i){var o={};Fai.top.Fai.bMapCache=o,Fai.top.Fai.gMapCache={},t.initBMap=function(i,n){var a={enableMapClick:!Fai.top._manageMode},r=new BMap.Map(i,a);o[i]={map:r};var s=new BMap.NavigationControl;r.addControl(s);var l=document.getElementById(i);return Fai.top._manageMode&&e(l).on("mousedown",function(e){e.stopPropagation()}),r.addEventListener("click",function(e){if(Fai.top._manageMode&&(0!==Fai.top.vue_utils.findComponentsDownward(Fai.top.mobiDesigner,"jzOnlineMapEditItem").length&&!Fai.top.vue_utils.findComponentsDownward(Fai.top.mobiDesigner,"jzOnlineMapEditItem")[0]._inactive)){e.domEvent.stopPropagation();var o=e.point,a={x:o.lng,y:o.lat},r=Fai.top._rootStore.state.curOnlineMapItemEdit.itemId,s=n.content.locationList;s.find(function(e){return e.id===r}).bmp=a,t.repaintMapIcon(i,s,n,!0)}}),r},t.getBMapInfoById=function(e){return o[e]||t.initBMap(e),o[e]},t.bMapSearch=function(e,t,i,o,n){return new Promise(function(e,t){var n={onSearchComplete:function(i){if(a.getStatus()==BMAP_STATUS_SUCCESS)if(i.getCurrentNumPois()<=0)t();else{var o=i.getPoi(0);e(o)}else t()}},a=new BMap.LocalSearch(i,n);a.search(i+o)})},t.genBMapIcon=function(e,i){var o=t.getBMapInfoById(e).map,n=new BMap.Icon(Fai.top._resRoot+"/image/onlineMap/marker_red_sprite.png?v=201809101152",new BMap.Size(22,25),{anchor:new BMap.Size(10,25)});i=new BMap.Point(i.lng,i.lat);var a=new BMap.Marker(i,{icon:n});return o.addOverlay(a),a},t.encodeHtml=function(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e},t.repaintMapIcon=function(e,i,o,n){var a=t.getBMapInfoById(e).map,r=[],s=t.addComplexCustomOverlay(BMap),l=[];if(a.clearOverlays(),i.forEach(function(i,n){var c=i.bmp,d={lng:c.x,lat:c.y},m=new BMap.Point(d.lng,d.lat);r.push(m);var p=t.genBMapIcon(e,d),u=o.content.isNew,h=u&&i.name,f=!u&&""!==i.name&&"新增地址"!==i.name,g=h||f,v='<div class="name">'.concat(i.name,"</div>"),b='<div class="address">'.concat(LS.js_onlineMapAddressTip,"：").concat(i.detail,"</div>"),j=' <div class="tel">'.concat(LS.js_onlineMapPhoneTip,"：").concat(i.tel,"</div>"),_=' <div class="other">'.concat(t.encodeHtml(i.other),"</div>"),M="\n                ".concat(g?v:""," \n                ").concat(i.detail?b:""," \n                ").concat(i.tel?j:""," \n                ").concat(i.other?_:""," \n            "),y=new s({point:d,content:'<div class="msg">'+M+"</div>",boxClass:"msgBox",arrowClass:"arrow",zIndex:9,offset:{x:0,y:-35}});l[n]=y,p.addEventListener("click",function(e){e.domEvent.stopPropagation(),l.forEach(function(e,t){a.removeOverlay(l[t])}),a.panTo(m),a.addOverlay(y),y.addEventListener("click",function(e){e.stopPropagation(),t.openOnlineMapEditPanel(o.id,i.id)})})}),n){var c=Fai.top._rootStore.state.curOnlineMapItemEdit,d=c.moduleId,m=c.itemId,p=i.findIndex(function(e){return e.id===m}),u=i.find(function(e){return e.id===m}).bmp,h=u.x,f=u.y,g=new BMap.Point(h,f);a.addOverlay(l[p]),a.panTo(g),l[p].addEventListener("click",function(e){e.stopPropagation(),t.openOnlineMapEditPanel(d,m)})}if(!n){var v=l[0];a.addOverlay(v),v.addEventListener("click",function(e){e.stopPropagation();var n=i[0].id;t.openOnlineMapEditPanel(o.id,n)});var b=a.getViewport(r),j=b.center,_=b.zoom;a.centerAndZoom(j,_)}},t.getBMAPCurPositionPoint=function(){var e=new BMap.Geolocation;return new Promise(function(t,i){e.getCurrentPosition(function(e){this.getStatus()==BMAP_STATUS_SUCCESS?t({x:e.point.lng,y:e.point.lat}):i()})})},t.getBMAPtoPointDistance=function(e,i,o){e=new BMap.Point(e.x,e.y),i=new BMap.Point(i.x,i.y);var n=t.getBMapInfoById(o).map;return String(n.getDistance(e,i))},t.deleteLocationById=function(e,t){Mobi.logDog(200648,8);var i=Fai.top._rootStore.getters.getModuleById(e),o=i.content.locationList,n=o.findIndex(function(e){return e.id===t});o.splice(n,1),i.content.locationList=_toConsumableArray(i.content.locationList),i.content.isEdit=!0},t.openOnlineMapEditPanel=function(e,t){Mobi.logDog(200648,7),Fai.top.Mobi.closeDesigner(),Object.assign(Fai.top._rootStore.state.curOnlineMapItemEdit,{moduleId:e,itemId:t});setTimeout(function(){Fai.top.Mobi.openDesigner("jzOnlineMapEditItem")},200)},t.sortListByDistanceASC=function(e){return e.sort(function(e,t){return Number(e.distance)-Number(t.distance)})}}(jm,Mobi.mobiMapModule||(Mobi.mobiMapModule={})),Mobi.showSaleTimeTypeV3=function(e,t,i){if(t){if(e||1==i)return jm(".isShowOldSaleCountDown").each(function(e,t){jm(t).hasClass("proCommProperty")&&!jm(t).children().length?jm(t).hide():jm(t).show()}),void jm(".isShowNewSaleCountDown").hide();jm(".isShowOldSaleCountDown").hide(),jm(".isShowNewSaleCountDown").show()}},Mobi.showSaleTimeCountDownV3=function(e,t,i,o,n,a){jm.ajax({url:"ajax/mall_h.jsp?cmd=getSystemTime",success:function(n){if((n=jm.parseJSON(n)).success){var r=n.now||0,s=0,l=0,c=0;e-(r/=1e3)>0?(s=e-r,l=t-e,c=1):t-r>0&&(s=e-r,l=t-r,c=2);var d="",m=LS.salePromotionBegin,p=LS.salePromotionEnd,u=0;Mobi.salePromotionDetail.showType=c,Mobi.salePromotionDetail.showSaleTime=!0,1==c?(d=m,u=s,jm(".J_salePromotionNewMessage").html("距活动开始仅剩")):(d=p,u=l,jm(".J_salePromotionNewMessage").html(LS.salePromotionNewEndMessage)),1!=a&&(jm(".J_salePromotionDay").html(LS.salePromotionDay),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html("")),window.onload=function(){jm(".showSaleTimeImg").css("display","block")},clearInterval(Mobi.salePromotionDetail.saleCountTimeInterval),Mobi.salePromotionDetail.saleCountTimeInterval=setInterval(function(){var e=parseInt(u/86400),t=parseInt(u/3600)-24*e,n=parseInt(u/60)-24*e*60-60*t,r=parseInt(u%60);if(2052!=Fai.top._lcid&&1028!=Fai.top._lcid&&(t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r)),--u<=0&&Fai.top.location.reload(),1==c&&1!=a&&jm(".J_showCountDownClass").html("&nbsp;&nbsp;"+jm.format(d,e,t,n,r)),1!=i||!Fai.top._manageMode&&1!=a||jm(".showSaleTimeClass").html("&nbsp;&nbsp;"+jm.format(d,e,t,n,r)),1==i&&1!=a&&(e<10&&(e="0"+e),t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),"00"==e?(jm(".J_salePromotionDay").css("display","none"),jm(".J_salePromotionDayNum").css("display","none")):jm(".J_salePromotionDayNum").html(e),jm(".J_salePromotionHourNum").html(t),jm(".J_salePromotionMinuteNum").html(n),jm(".J_salePromotionSecondNum").html(r)),u<0)if(1==c)u=l,d=p,c=2,Mobi.salePromotionDetail.showType=2,Mobi.showSalePromotionDl(Mobi.salePromotionDetail.salePromotionParam,Mobi.salePromotionDetail.styleType,Mobi.salePromotionDetail.saleReSalePriceHtml);else{if(clearInterval(Mobi.salePromotionDetail.saleCountTimeInterval),Mobi.salePromotionDetail.showType=1,"1"==Mobi.salePromotionDetail.salePromotionParam.saleType){var s=jm(".J_salePrePrice").html();null!=s&&jm(".J_saleMallPrice").html(s)}jm(".J_salePromotionRemove").remove(),1==o?jm(".productPrice").css("height","3.75rem"):jm(".productPrice").css("height","2.75rem")}},1e3)}}})},Mobi.showGbTimeCountDownV3=function(e,t,i){jm.ajax({url:"ajax/mall_h.jsp?cmd=getSystemTime",success:function(o){if((o=jm.parseJSON(o)).success){var n=o.now||0,a=0,r=0,s=0;e-(n/=1e3)>0?(a=e-n,r=t-e,s=1):t-n>0&&(a=e-n,r=t-n,s=2);var l="",c=0;1==s?(l="距拼团活动开始仅剩：{0}天{1}小时{2}分{3}秒",c=a):(l="距拼团活动结束仅剩：{0}天{1}小时{2}分{3}秒",c=r,jm(".J_salePromotionNewMessage").html(LS.salePromotionNewEndMessage)),1!=i&&(jm(".J_salePromotionDay").html(LS.salePromotionDay),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html("")),window.onload=function(){jm(".showSaleTimeImg").css("display","block")},clearInterval(Mobi.gbCountTimeInterval),Mobi.gbCountTimeInterval=setInterval(function(){var e=parseInt(c/86400),t=parseInt(c/3600)-24*e,o=parseInt(c/60)-24*e*60-60*t,n=parseInt(c%60);2052!=Fai.top._lcid&&1028!=Fai.top._lcid&&(t<10&&(t="0"+t),o<10&&(o="0"+o),n<10&&(n="0"+n)),--c<=0&&Fai.top.location.reload(),1==s&&1!=i&&jm(".J_showCountDownClass").html("&nbsp;&nbsp;"+jm.format(l,e,t,o,n)),(Fai.top._manageMode||1==i)&&jm(".showSaleTimeClass").html("&nbsp;&nbsp;"+jm.format(l,e,t,o,n)),1!=i&&(e<10&&(e="0"+e),t<10&&(t="0"+t),o<10&&(o="0"+o),n<10&&(n="0"+n),jm(".J_salePromotionDayNum").html(e),jm(".J_salePromotionHourNum").html(t),jm(".J_salePromotionMinuteNum").html(o),jm(".J_salePromotionSecondNum").html(n)),c<0&&clearInterval(Mobi.gbCountTimeInterval)},1e3)}}})},Mobi.marketingPdIntervalV3=null,Mobi.initMarketPdDetailV3=function(e,t,i,o,n){window.onload=function(){jm(".showSaleTimeImg").css("display","block")},0!=e?(jm(".J_salePromotionNewMessage").html(LS.salePromotionNewEndMessage),"secKill"==n&&jm(".J_salePromotionNewMessage").html("距秒杀结束还有：")):"secKill"==n&&jm(".J_salePromotionNewMessage").html("距秒杀开始还有："),1!=o&&(jm(".J_salePromotionDay").html(LS.salePromotionDay),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html(""));var a="",r="仅剩：";"cutPrice"==n?a="砍价":"secKill"==n&&(a="秒杀",r="还有：");var s=null;Mobi.marketingPdIntervalV3&&clearInterval(Mobi.marketingPdIntervalV3),Mobi.marketingPdIntervalV3=setInterval(function(){var c=(new Date).getTime(),d=0==e?t-c:i-c,m=Mobi.translateDiffTime(d),p=0==e?"开始":"结束",u="距"+a+"活动"+p+r+m,h="距"+a+"活动"+p+"仅剩：";if(0==e&&1!=o&&(jm(".J_showCountDownClass").html("&nbsp;&nbsp;"+u),jm(".J_salePromotionNewMessage").html(h)),(Fai.top._manageMode||1==o)&&jm(".showSaleTimeClass").html("&nbsp;&nbsp;"+u),1!=o){var f=m.split(/[^0-9]/gi),g=f[0],v=f[1],b=f[2],j=f[3];g<10&&(g="0"+g),v<10&&(v="0"+v),b<10&&(b="0"+b),j<10&&(j="0"+j),"secKill"==n?0==e?(jm(".J_salePromotionDay").html("天"),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html(""),jm(".J_salePromotionDayNum").html(g),jm(".J_salePromotionHourNum").html(v),jm(".J_salePromotionMinuteNum").html(b),jm(".J_salePromotionSecondNum").html(j),s&&clearInterval(s)):(jm(".J_salePromotionDay").html("天"),jm(".J_salePromotionHour").html(":"),jm(".J_salePromotionMinute").html(":"),jm(".J_salePromotionSecond").html("."),jm(".J_salePromotionMilliSecond").html(""),jm(".J_salePromotionDayNum").html(g),jm(".J_salePromotionHourNum").html(v),jm(".J_salePromotionMinuteNum").html(b),jm(".J_salePromotionSecondNum").html(j),jm(".showNewThemeSaleTimeClass").hasClass("showMillisTime")||jm(".showNewThemeSaleTimeClass").addClass("showMillisTime"),l()):(jm(".J_salePromotionDayNum").html(g),jm(".J_salePromotionHourNum").html(v),jm(".J_salePromotionMinuteNum").html(b),jm(".J_salePromotionSecondNum").html(j))}d<=0&&"secKill"==n&&(window.location.reload(),clearInterval(Mobi.marketingPdIntervalV3),s&&clearInterval(s))},1e3);var l=function(){var e=[9,8,7,6,5,4,3,2,1,0],t=0;s=setInterval(function(){jm(".J_salePromotionMilliSecondNum").html(e[t]),++t>=10&&(t=0)},100)}},Mobi.initProductRestrictV3=function(e,t,i,o){if(e){var n=0;null!=o.count&&(n=o.count);var a=i-n;jm.fkEval(a)<0&&(a=-1);var r=1,s=-1;t>1&&0!=i?(jm("#limitAmountDiv").text("( "+LS.minAmount+" : "+t+" ; "+LS.maxAmount+" : "+a+" )"),r=t,s=a):1==t&&0!=i?(jm("#limitAmountDiv").text("( "+LS.maxAmount+" : "+a+" )"),s=a):t>1&&0==i&&(jm("#limitAmountDiv").text("( "+LS.minAmount+" : "+t+" )"),r=t),jm("#productNum").val(r).unbind("change").change(function(){var e=l();e<r||e==r?(e=r,jm("#g_decrease").addClass("disabled"),jm("#g_increase").removeClass("disabled"),(s<r||s==r)&&jm("#g_increase").addClass("disabled")):-1!=s&&(e>s||e==s)?(e=s,jm("#g_decrease").removeClass("disabled"),jm("#g_increase").addClass("disabled")):e>9999998?(e=9999999,jm("#g_decrease").removeClass("disabled"),jm("#g_increase").addClass("disabled")):jm("#g_decrease, #g_increase").removeClass("disabled"),jm(this).val(e)}).change(),jm("#g_decrease").click(function(){l()<r+1&&jm("#productNum").val(r),jm("#productNum").change()}),jm("#g_increase").click(function(){l()>s-1&&-1!=s&&jm("#productNum").val(s>r?s:r),jm("#productNum").change()})}function l(){var e=jm("#productNum").val(),t=1;return jm.isInteger(e)&&(t=parseInt(e)),t}},Mobi.productNewDetailEventInitV3=function(e){if("inline-block"==jm(".J_salePrePrice").css("display")&&jm(".marketPriceV3").css("display","none"),e){var t=e.moduleId,i=e.productId,o=e.mallOptionsOpen;pageStyle=e.pageStyle,returnUrl=e.returnUrl||"",isGroupBuy=e.isGroupBuy||!1,groupBuyId=e.groupBuyId||0,groupBuyDetailId=e.groupBuyDetailId||0,groupPriceStr=e.groupPriceStr||"",isCutPrice=e.isCutPrice||!1,cutPriceId=e.cutPriceId||0,cutPriceDetailId=e.cutPriceDetailId||0,cpPriceStr=e.cpPriceStr||"",isSecKill=e.isSecKill||!1,secKillId=e.secKillId||0,isPtLimitBuy=e.isPtLimitBuy||0,pt_productRestrictInfo=e.pt_productRestrictInfo||0,isIntegralMall=e.isIntegralMall||!1,integralMallId=e.integralMallId||0,integtalMallType=e.integtalMallType||0,imMinPrice=e.imMinPrice||{},isImLimitBuy=e.isImLimitBuy||0,isEarnestSale=e.isEarnestSale||!1,earnestSaleId=e.earnestSaleId||0,pd_optionsAmountInfo=e.pd_optionsAmountInfo||{},pd_showOptionList=e.pd_showOptionList||[],mkt_optionsAmountInfo=e.mkt_optionsAmountInfo||{},mkt_showOptionList=e.mkt_showOptionList||[],openPriceCalendar=e.openPriceCalendar,themeV3=e.themeV3||!1,isUseSwipe=e.isUseSwipe,"undefined"==typeof isUseSwipe&&(isUseSwipe=!0);var n=groupBuyDetailId;Mobi.scrollFadeInV3("productDetailHeader"+t,"productNewDetailSwipe"+t,pageStyle),Mobi.initAjaxTab({pid:i,moduleId:t,themeV3:themeV3,isUseSwipe:isUseSwipe});var a=document.getElementById("productDetailHeader"+t),r=document.getElementById("productNewDetailPanel"+t),s=(r.querySelector(".productNewDetail .productInfoSize"),a.querySelector(".icon-gClose.proBack")),l=(a.querySelector(".icon-noProduct.proShopping"),a.querySelector(".tabBody .userCommentInfo"),a.querySelector(".icon-gOther.proOther")),c=(a.querySelector(".icon-share.proShare"),a.querySelector(".proOtherPanel")),d=r.querySelector(".J_productImmediatelyBug"),m=r.querySelector(".J_groupBuyBtn"),p=r.querySelector(".J_cpButton"),u=r.querySelector(".J_integralMallBtn"),h=r.querySelector(".J_earnestSaleBtn"),f=(r.querySelector(".productMallBuy"),r.querySelector(".productMallShop"),r.querySelector("#productTabUl"),document.getElementById("productNewDetailSwipe"+t)),g=jm("#productDetailV3_title"+t),v=!1;if(window.sessionStorage){v=Mobi.checkWindowSeStgValue(window.sessionStorage._isJumpFromMlist);try{window.sessionStorage._isJumpFromMlist=!1}catch(e){}}var b;if(b=jm.getCookie("_fromCollect"),jm.setCookie("_fromCollect","",-1),jm(s).bind("click",function(){if(window.sessionStorage){if(v)window.sessionStorage._jumpMlistUrl.indexOf("?")<=-1?window.location.href=window.sessionStorage._jumpMlistUrl+"?commHideFlag=true":window.sessionStorage._jumpMlistUrl.indexOf("commHideFlag")<=-1?window.location.href=window.sessionStorage._jumpMlistUrl+"&commHideFlag=true":window.location.href=window.sessionStorage._jumpMlistUrl,window.sessionStorage._backFromProDetail=!0;else if(b)jm.setCookie("_openCollect",!0),window.location.href="profile.jsp";else if(window.history.length<=1)window.location.href="index.jsp";else if(returnUrl.length>0)window.location.href=returnUrl;else if(Fai.top._manageMode)sessionStorage.getItem("historyList")?jm(Fai.top.document.getElementById("jz_designerOperate").querySelector(".j_designerBack")).click():window.location.href="index.jsp";else{if(navigator.userAgent.toLocaleLowerCase().includes("ucbrowser")&&history.length<=2)return void(window.location.href="/");history.back()}return!1}return window.history.length<=1?window.location.href="index.jsp":(window.location.href=document.referrer,setTimeout(function(){window.location.href=document.referrer;setTimeout(function(){window.location.href="index.jsp",null},500)},300)),!1}),jm(r).bind("click",function(){jm(c).hasClass("proOtherPanelOpen")&&jm(c).removeClass("proOtherPanelOpen")}),jm(l).bind("click",function(e){jm(c).hasClass("proOtherPanelOpen")?jm(c).removeClass("proOtherPanelOpen"):jm(c).addClass("proOtherPanelOpen"),e.stopPropagation()}),g){var j=function(){document.body.scrollTop>f.clientHeight||document.documentElement.scrollTop>f.clientHeight?g.show():g.hide()};document.addEventListener("touchmove",j),document.addEventListener("scroll",j)}var _=jm(".productMallShop").html(),M=jm(".productMallBuyPanel").html(),y=Mobi.initWebPage({triggerId:"productInfoSize",panelId:"productMallOptionPanel",callback:function(){Mobi.deviceTypeIsMobi()&&jm("#mallOptionAndNumContainer").length>0&&(Mobi.productNewDetailIScrollObj=new iScroll("mallOptionAndNumContainer",{onBeforeScrollStart:function(e){for(var t=e.target;1!=t.nodeType;)t=t.parentNode;"INPUT"!=t.tagName&&e.preventDefault()}}));I||(e=document.getElementById("productMallOptionPanel"),document.getElementById("g_body").clientHeight,e.querySelector(".productMallOptionContentPanel"),e.querySelector(".productMallOptionContent"),e.querySelector(".productMallOptionMargin"),e.querySelectorAll(".productMallOptionContent>div"));var e;return!1},pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#productMallOptionPanel .productDetailClose.icon-Off",closeCallBack:function(){jm(".productMallOptionPanel .productMallOptionContentPanel").removeClass("mallThemeProductContentPanel"),jm(".productMallBuyPanel").css("display","flex"),jm("video").css("display","block")}});jm("#productInfoSize").bind("click",function(){null!=_&&""!=_&&(jm(".productMallBuyPanel").html(_),jm(".productMallBuyPanel .productAddMall").css("color",jm(".productNewDetailPanel .productAddMall").css("color")).css("border-color",jm(".productNewDetailPanel .productAddMall").css("border-left-color")),jm(".productMallBuyPanel .productImmediatelyBug").css("background-color",jm(".productNewDetailPanel .productImmediatelyBug").css("background-color")).css("border-color",jm(".productNewDetailPanel .productImmediatelyBug").css("border-left-color")),jm(".productMallOptionPanel .productMallOptionContentPanel").css("overflow","hidden").addClass("mallThemeProductContentPanel"),jm(".productMallBuyPanel .J_productAddMall").bind("click",function(){Mobi.mallBuy(i,0)}),jm(".productMallBuyPanel .J_productImmediatelyBug").unbind("click").bind("click",function(){isSecKill?Mobi.mallBuy(i,1,null,null,null,null,{isSecKill:isSecKill,secKillId:secKillId}):Mobi.mallBuy(i,1)}),jm(".productMallBuyPanel .J_groupBuyBtn").unbind("click").bind("click",function(){Mobi.mallBuy(i,1,null,null,null,null,{isGroupBuy:isGroupBuy,groupBuyId:groupBuyId,groupBuyDetailId:groupBuyDetailId})}),jm(".productMallBuyPanel .J_cpButton").unbind("click").bind("click",function(){Mobi.logDog(200535,0),Mobi.cutPrice(cutPriceId,i)}),jm(".productMallBuyPanel .serviceBtn").off("click.pp").on("click.pp",function(){Mobi.createMallServicePanel()}),jm(".productMallBuyPanel .J_integralMallBtn").unbind("click").bind("click",function(){Mobi.mallBuy(i,1,null,null,null,null,{isIntegralMall:isIntegralMall,integralMallId:integralMallId})}),jm(".productMallBuyPanel .J_earnestSaleBtn").unbind("click").bind("click",function(){Mobi.mallBuy(i,1,null,null,null,null,{isEarnestSale:isEarnestSale,earnestSaleId:earnestSaleId})}))});var S,I=!1;jm("#productNewDetailPanel"+t+" .J_productAddMall").bind("click",function(){jm(".productMallBuyPanel").html(M),S=0,Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!1,y()}),jm(".J_pdJoinGroupBuyBtn").bind("click",function(){if(0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(Fai.top.location.href)),groupBuyDetailId=jm(this).attr("_groupBuyDetailId"),"true"===jm(this).attr("_oldMemberBlock")){var e="";return e+="<div style='width: 11.9rem; height: 10.476rem; background: rgba(255,255,255,1); border-radius: .357rem; margin: 0 auto; position: relative; top: -3rem; display: flex; flex-direction: column; align-items: center; padding: 1.05rem; box-sizing: border-box;'>",e+="<div style='width: 8.12rem; height: 4.69rem; overflow: hidden; margin-bottom: .84rem;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/gbNewMemOnly.png' style='width: 8.12rem; height: 4.69rem;'>",e+="</div>",e+="<div style='font-size: .62rem; color:rgba(0,0,0,1); margin-bottom: .857rem;'>仅限新客参团，老客可以开团</div>",e+="<div class='J-prompt-callback' style='width: 5.714rem; height: 1.43rem; background: rgba(242,48,48,1); border-radius: .1429rem; color: #fff; margin: 0 auto; font-size: .62rem; display: flex; align-items: center; justify-content: center; cursor: pointer;'>去开新团</div>",e+="</div>",e+="<div class='J-prompt-cancel' style='display: inline-block; width: 1.67rem; height: 1.67rem; z-index: 9999; margin: 0 auto; cursor: pointer;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/hdCouponClose.png'>",e+="</div>",void Mobi.customPopup({content:e,callback:function(){isGroupBuy&&jm("#mallPrice").html(groupPriceStr),jm(".productMallBuyPanel").html(M),S=2,groupBuyDetailId=0,Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0,y()}})}S=2,y(),L(),jm("#mallPrice").html(groupPriceStr),Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0}),jm(".productMallBuyPanel").delegate(".productMallBuy","click",function(){1==S?isSecKill?Mobi.mallBuy(i,1,null,null,null,null,{isSecKill:isSecKill,secKillId:secKillId}):Mobi.mallBuy(i,S):2==S?Mobi.mallBuy(i,1,null,null,null,null,{isGroupBuy:isGroupBuy,groupBuyId:groupBuyId,groupBuyDetailId:groupBuyDetailId}):3==S?Mobi.cutPrice(cutPriceId,i):4==S?(0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(Fai.top.location.href)),Mobi.mallBuy(i,1,null,null,null,null,{isIntegralMall:isIntegralMall,integralMallId:integralMallId})):5==S?Mobi.mallBuy(i,1,null,null,null,null,{isEarnestSale:isEarnestSale,earnestSaleId:earnestSaleId}):Mobi.mallBuy(i,S)});var w=jm("#mallPrice").html()||"";jm(d).bind("click",function(){jm(".productMallBuyPanel").html(M),S=1,Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!1,y(),L(),k(),F(),T(),isGroupBuy&&(jm("#mallPrice").html(w),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click()),isIntegralMall&&(jm("#mallPrice").html(w),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click(),jm("#integral").hide(),jm("#itgName").hide(),jm("#plus").hide()),isEarnestSale&&(jm("#mallPrice").html(w),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click())}),jm(m).bind("click",function(){if(0==Fai.top.sessionMemberId&&(Fai.top.location.href="login.jsp?returnUrl="+jm.encodeUrl(Fai.top.location.href)),jm(this).find("._oldMemberBlock").length>0){var e="";return e+="<div style='width: 11.9rem; height: 10.476rem; background: rgba(255,255,255,1); border-radius: .357rem; margin: 0 auto; position: relative; top: -3rem; display: flex; flex-direction: column; align-items: center; padding: 1.05rem; box-sizing: border-box;'>",e+="<div style='width: 8.12rem; height: 4.69rem; overflow: hidden; margin-bottom: .84rem;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/gbNewMemOnly.png' style='width: 8.12rem; height: 4.69rem;'>",e+="</div>",e+="<div style='font-size: .62rem; color:rgba(0,0,0,1); margin-bottom: .857rem;'>仅限新客参团，老客可以开团</div>",e+="<div class='J-prompt-callback' style='width: 5.714rem; height: 1.43rem; background: rgba(242,48,48,1); border-radius: .1429rem; color: #fff; margin: 0 auto; font-size: .62rem; display: flex; align-items: center; justify-content: center; cursor: pointer;'>去开新团</div>",e+="</div>",e+="<div class='J-prompt-cancel' style='display: inline-block; width: 1.67rem; height: 1.67rem; z-index: 9999; margin: 0 auto; cursor: pointer;'>",e+="<img src='"+Fai.top._resImageRoot+"/image/hdCouponClose.png'>",e+="</div>",void Mobi.customPopup({content:e,callback:function(){isGroupBuy&&jm("#mallPrice").html(groupPriceStr),jm(".productMallBuyPanel").html(M),S=2,groupBuyDetailId=0,Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0,y()}})}isGroupBuy&&jm("#mallPrice").html(groupPriceStr),jm(".productMallBuyPanel").html(M),S=2,groupBuyDetailId=n,Mobi.isPtBtn=!0,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!0,y(),L(),T()}),jm(p).bind("click",function(){o?(isCutPrice&&jm("#mallPrice").html(cpPriceStr),jm(".productMallBuyPanel").html(M),S=3,Mobi.isPtBtn=!1,Mobi.isImBtn=!1,Mobi.isMarketingBtn=!1,y()):Mobi.cutPrice(cutPriceId,i)}),jm(u).bind("click",function(){if(jm(".productMallBuyPanel").html(M),S=4,Mobi.isImBtn=!0,Mobi.isMarketingBtn=!0,y(),k(),T(),isIntegralMall){var e=jm(".J-op-box").find(".J-op"),t=jm(".J-op-box").find(".optionSelected");(0==e.length||e.length>0&&t.length<e.length)&&(jm("#integral").html(imMinPrice.minIntegral),jm("#mallPrice").html(parseFloat(imMinPrice.minPrice).toFixed(2))),1==integtalMallType&&(jm("#choiceCurrencyVal").hide(),jm("#mallPrice").hide()),jm("#integral").show(),jm("#itgName").show(),jm("#plus").show(),jm(jm("#productMallOptionPanel .optionSelected")[0]).click().click()}}),jm(h).bind("click",function(){jm(".productMallBuyPanel").html(M),S=5,Mobi.isImBtn=!1,Mobi.isPtBtn=!1,Mobi.isEsBtn=!0,Mobi.isMarketingBtn=!0,y(),F(),isEarnestSale});var C=JSON.parse(JSON.stringify(Fai.top._shareDataProdectDetail));jm.parseJSON(C.shareLinkList);C.shareLinkList='[{"url":"?","icon":"Weixin"}]';var P={triggerId:"productDetailShare",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareDataProdectDetail),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P);P={triggerId:"productDetailShare2",pageBg:!0,pageHtml:Mobi.sharePage(Fai.top._shareDataProdectDetail),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P);P={triggerId:"promoShareIconForNotOpenShare",pageBg:!0,pageHtml:Mobi.sharePage(C),direction:"bottom",callback:function(){Mobi.initProductSwipe("shareListShowSwipe")},closeWebPage:"#shareListPanelBg"};Mobi.initWebPage(P);var x={triggerId:"showCouponList",pageBg:!0,pageHtml:Mobi.couponPage(Fai.top._couponInfo),direction:"bottom",closeWebPage:"#contentBottomPanel,#closeCouponListBottomPanel",callback:function(){jm("#couponListBottomPanel").bind("click mousedown touchstart",function(e){e.stopPropagation()}),jm("#contentBottomPanel").show(),jm(".toUseCoupon").bind("click",function(e){var t=jm(this).parents(".couponItem").attr("couponid");Fai.top.location.href="pr.jsp?couponId="+t,e.stopPropagation()})}};Mobi.initWebPage(x),Mobi.hidePlaceholder()}function L(){isPtLimitBuy&&(Mobi.isPtBtn?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_pt").show(),jm(".J_productNumberContent_pt").show()):(jm("#limitAmountDiv_pt").hide(),jm(".J_productNumberContent_pt").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()))}function k(){isImLimitBuy&&(Mobi.isImBtn?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_im").show(),jm(".J_productNumberContent_im").show()):(jm("#limitAmountDiv_im").hide(),jm(".J_productNumberContent_im").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()))}function F(){Mobi.isEsBtn&&jm(".productName").hide()}function T(){var e={},t=[];if(Mobi.isMarketingBtn?(e=mkt_optionsAmountInfo,t=mkt_showOptionList):(e=pd_optionsAmountInfo,t=pd_showOptionList),!(t.length<=0))for(var i=(e.t||"").split("_"),o=e.d||[],n=0,a=0;a<t.length;a++){for(var r=t[a],s=r.items||[],l=r.fieldKey||"",c=0;c<i.length;c++)l==i[c]&&(n=c);4==r.type&&(l="opIndept"+l),s.length>0&&!openPriceCalendar&&(jm.each(s,function(e,t){var i=t.i,a=!1;jm.each(o,function(e,t){var o=t.t2,r=null===t.flag?1:t.flag,s=o.split("_");if(1==r&&n<s.length&&parseInt(s[n])==i)return a=!0,!1}),a?jm(".g_mallLabel[for='"+l+i+"']").show():jm(".g_mallLabel[for='"+l+i+"']").hide()}),n++)}}},Mobi.scrollFadeInV3=function(e,t,i){t=document.getElementById(t),e=document.getElementById(e);var o=document.getElementById("g_body");if(e){var n=e.clientHeight,a=t&&t.clientHeight,r=jm(e).find(".g_round");jm(document).off("touchstart.hfi").on("touchstart.hfi",s),jm(document).off("touchmove.hfi").on("touchmove",s),jm(document).off("touchend.hfi").on("touchend",s),jm(document).off("touchcancel.hfi").on("touchcancel.hfi",s),jm(document).off("scroll.hfi").on("scroll.hfi",s),s()}function s(){var t=function(){var e=o;document.documentElement&&document.documentElement.scrollTop>0&&(e=document.documentElement);return e.scrollTop}();if(1!=i){if(t<a+1){var s=1*t/(a-2*n);e.style.background="rgba(255,255,255,"+s+")",e.style.borderBottom="";var l=.4*(1-3*s),c=parseInt(255*(1-s));c<51&&(c=51),r.css("background","rgba(0,0,0,"+l+")"),r.css("color","rgb("+c+","+c+","+c+")")}t>a-2*n&&(e.style.background="rgba(255,255,255,0.99)",e.style.borderBottom="1px solid #e5e5e5")}}},Mobi.showMallCartScreenV3=function(e,t,i,o,n){var a=jm(".productMallOptionPanel");jm("#module"+e+" .J_fk-mallCart").off("click.cart").bind("click.cart",function(){var t=n&&n.replace?n.replace(/&nbsp;/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/g,">").replace(/&#92;/gi,"\\").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/\<br\/\>/gi,"\n").replace(/&amp;/gi,"&"):n;jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent").append(t),a=jm(".productMallOptionPanel");var o=jm(this).attr("id")||"",l=!1,c={},d="",m="",p={},u=!1,h=!1;return jm.each(Mobi.showProductCacheList,function(e,t){if(t.id==o)return l=!0,c=t.pinfo,d=t.showOptionHtml,m=t.script,p=t.otherHtml,u=t.isPtLimitBuy,h=t.isImLimitBuy,t.isEarnestSale,!1}),r(),jm("#productMallOptionPanel_mcs_"+e).find(".productMallOptionPanel").hide(),l?s(c,d,m,p,u,h):jm.ajax({type:"POST",url:"ajax/product_h.jsp?cmd=getProductInfoAndDomV3",data:{pid:o,moduleId:e,mallShoppingOptions:i},error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);if(t.success){var i=t.pinfo,n=t.showOptionHtml,a=t.script,r=t.otherHtml,l=t.isPtLimitBuy,c=t.isImLimitBuy,d=t.isEarnestSale;Mobi.showProductCacheList.push({id:o,pinfo:i,showOptionHtml:n,script:a,otherHtml:r,isPtLimitBuy:l,isImLimitBuy:c,isEarnestSale:d}),s(i,n,a,r,l,c,d)}}}),!1});var r=Mobi.initWebPage({triggerId:"f"+e,panelId:"productMallOptionPanel_mcs_"+e,pageBg:!0,returnSeltFun:!0,direction:"bottom",closeWebPage:"#productMallOptionPanel_mcs_"+e+" .productDetailClose.icon-Off",closeCallBack:function(){jm(".productMallOptionPanel .productMallOptionContentPanel").removeClass("mallThemeProductContentPanel"),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .productMallOptionHead").remove(),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .mallOptionAndNumBox").remove(),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .productMallShop").remove(),jm("#productMallOptionPanel_mcs_"+e+" .productMallOptionContent .separatorLine").remove()}});function s(n,r,s,l,c,d,m){a=jm(".productMallOptionPanel");var p=n.id;a.attr("id","productMallOptionPanel"+p);var u=l.mallAmountHtml||"",h=l.mallWeightHtml||"",f=l.mallPriceHtml||"",g=l.productMallShopHtml||"",v=n.mallPrice.toFixed(2),b=v,j="",_="";if(n.openPriceCalendar?(a.addClass("withPriceCalendar"),a.find(".productMallOptionHead .productMallOptionImage").hide(),a.find(".productMallOptionHead .mallOptionImg").hide(),a.find(".productMallOptionHead .productDetail").hide(),a.find(".productMallOptionHead").append("<div class='indicator'>请选择</div>")):a.removeClass("withPriceCalendar"),i){var M=v,y=v,S=(n.optionsAmountList||{}).d||[];jm.each(S,function(e,t){var i=t,o=i.oPrice;if(null!=o&&""!=o&&0!=(i.flag||0)){var n=o||0;M=M<n?M:n,y=y>n?y:n,M=parseFloat(M)||0,y=parseFloat(y)||0,M==y?v=M.toFixed(2):(v=M.toFixed(2)+"~"+y.toFixed(2),j=y.toFixed(2),_=M.toFixed(2))}})}if(""!=_||""!=j){var I=parseFloat(j)*o*.01;b=parseFloat(_)*o*.01+"~"+I}jm("#choiceCurrency").text(t),jm("#mallPrice").text(b),a.find(".mallOptionImg").css("background-image","url("+n.picPath+")").attr("src",n.picPath),a.find(".productMallAmount").html(u),a.find(".productMallWeight").html(h),a.find(".productDetailPrice").html(f),a.find(".J-op-box").html(r),a.find(".btnGroup").html(g);var w=c?"_pt":d?"_im":"";jm("#g_increase"+w).unbind("click.ic").bind("click.ic",function(){Mobi.decrease2(p,w)}),jm("#g_decrease"+w).unbind("click.dc").bind("click.dc",function(){Mobi.increase2(p,w)});var C=document.createElement("script");C.type="text/javascript",C.innerHTML=s,C.id="opScript_"+e,document.getElementById("productMallOptionPanel_mcs_"+e).appendChild(C),jm("#opScript_"+e).remove(),c?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_pt").show(),jm(".J_productNumberContent_pt").show()):(jm("#limitAmountDiv_pt").hide(),jm(".J_productNumberContent_pt").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()),d?(jm("#limitAmountDiv").hide(),jm(".J_productNumberContent_simple").hide(),jm("#limitAmountDiv_im").show(),jm(".J_productNumberContent_im").show()):(jm("#limitAmountDiv_im").hide(),jm(".J_productNumberContent_im").hide(),jm("#limitAmountDiv").show(),jm(".J_productNumberContent_simple").show()),jm("#productMallOptionPanel_mcs_"+e+" #productBuy").unbind("click.msc").bind("click.msc",function(){Mobi.mallBuy(p,0,1,e)}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmediatelyBug").unbind("click.msc").bind("click.msc",function(){Mobi.mallBuy(p,1,1,e)}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeSecKill").unbind("click.msc").bind("click.msc",function(){var t=parseInt(jm(this).attr("secKillId")||0);Mobi.mallBuy(p,1,null,e,null,null,{isSecKill:!0,secKillId:t})}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeGroupBuy").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("groupBuyId")||0);Mobi.mallBuy(p,1,null,null,null,null,{isGroupBuy:!0,groupBuyId:e,groupBuyDetailId:0})}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeCutPrice").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("cutPriceId")||0);Mobi.cutPrice(e,p)}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeIntegralMall").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("integralMallId")||0);Mobi.mallBuy(p,1,null,null,null,null,{isIntegralMall:!0,integralMallId:e})}),jm("#productMallOptionPanel_mcs_"+e+" .J_productImmeEarnestSale").unbind("click.msc").bind("click.msc",function(){var e=parseInt(jm(this).attr("earnestSaleId")||0);Mobi.mallBuy(p,1,null,null,null,null,{isEarnestSale:!0,earnestSaleId:e})}),jm("#productMallOptionPanel_mcs_"+e).find(".mallOptionImg").click(function(){var t=jm(this).attr("src");jm("#module"+e).find("#J_acct_pic").attr("src",t).click()}),jm("#productMallOptionPanel_mcs_"+e).find(".productMallOptionPanel").show();var P=document.createElement("script");P.type="text/javascript",P.innerHTML='jm(window).bind("pageshow", function(){jm("#productNum'+w+'").change();});',P.id="opScript2_"+e,document.getElementById("productMallOptionPanel_mcs_"+e).appendChild(P)}},Mobi.addTheNewCommentV3=function(e){var t=[],i="VIP";if(null!=e.newsId){0==e.memberId&&(i=LS.Incognito);var o=new Date(e.createTime);o=Mobi.formatDate(o),t.push("<div class='msgArea'>"),t.push("  <div class='msgTitle'>"),t.push("  <div class='userInfoBox'>"),t.push("    <div class='msgUser'><span class='g_mainColor g_main_color_v3'>["+i+"]</span>"+e.creator+"</div>"),t.push("  </div>"),t.push("  <div class='msgTime'>"+o+"</div>"),t.push("  </div>"),t.push("  <div class='msgContent'>"+e.comment+"</div>"),t.push("</div>"),0!=jm(".nnewsComHeader").length?jm(t.join("")).insertAfter(jm(".nnewsComHeader")):location.reload()}else{i=0==e.memberId?LS.Incognito:e.level;o=new Date(e.createTime);o=Mobi.formatDate(o);var n=jm("html").css("font-size");n=n.substring(0,n.length-2);var a=e.headPic;if(t.push("<div class='msgArea ct-panel productCommentPanel'>"),t.push("<div class='pdMsgTitle'>"),t.push('<div class="msgUserHeacPic"><img src="'+a.path+'" '),a.thumbId){var r=a.width,s=a.left,l=a.top,c=a.imgW,d=a.imgH,m=r/(1.25*n);t.push('style="top:'+-l/m+"px; left:"+-s/m+"px; width:"+c/m+"px; height:"+d/m+'px"')}else t.push('style="height:'+1.25*n+'px"');if(t.push(" /></div>"),t.push("<div class='msgCenterBox'>"),t.push("<div class='userInfoBox'>"),t.push("<div class='msgUser g_mirrorColor'>&nbsp;"+e.creator+"</div>"),t.push("<span class='msgLevalUser'></span>"),t.push("</div>"),"star"in e){t.push("<div class='fk-star-list'>");for(var p=Number(e.star),u=0;u<5;u++)u<p?t.push("<li class='faisco-icons-star3 select_more'></li>"):t.push("<li class='faisco-icons-star3 select_less'></li>");if(t.push("</div>"),1==p){var h=Number(jm(".fk-right-statisBox .badComm").text());jm(".fk-right-statisBox .badComm").text(h+1)}else if(p>3){h=Number(jm(".fk-right-statisBox .hignComm").text());jm(".fk-right-statisBox .hignComm").text(h+1)}else{h=Number(jm(".fk-right-statisBox .middComm").text());jm(".fk-right-statisBox .middComm").text(h+1)}var f=jm(".fk-comm-avgScore"),g=Number(f.attr("_tc"))+p,v=Number(f.attr("_ts"))+1,b=g/v;f.text(b.toFixed(1)),f.attr("_tc",g),f.attr("_ts",v)}if(t.push("</div>"),t.push("<div class='msgTime g_mirrorColor'>"+o+"</div>"),t.push("</div>"),t.push("<div class='msgContent g_defaultColor'>"+e.comment+"</div>"),void 0!==e.commImgList&&"null"!=e.commImgList){var j=jm.parseJSON(e.commImgList);if(null!=j&&j.length>0){t.push("<div class='ct-s-content-m'>"),t.push("<ul style='line-height:0'>");for(u=0;u<j.length;u++)t.push("<li class='s-img-f-tb'>"),t.push("<table class='s-img-tb' cellpadding='0' cellspacing='0'>"),t.push("<tr>"),t.push("<td class='s-img-bd' valign='middle'   align='center'>"),t.push("<img src='"+j[u].path+"' alt='' class='s-img-set'>"),t.push("</td>"),t.push("</tr>"),t.push("</table>"),t.push("</li>");t.push("</ul>"),t.push("</div>")}}t.push("</div>"),null!=jm("#tabPanel3 .msgArea")[0]?(jm(t.join("")).insertBefore(jm("#tabPanel3 .msgArea")[0]),Mobi.setNewCommImgBindShow(),jm("#tabPanel3 .noCommentListDescribe").length&&jm("#tabPanel3 .noCommentListDescribe").parent().remove()):location.reload()}jm("#userCommentPanel .userCommentGoBack").click()},Mobi.getCommentAjaxPagenationV3=function(e,t){if(e){var i=jm("html").css("font-size"),o="pid="+e+"&pageno="+t+"&ajaxPage="+!0+"&rem="+(i=i.substring(0,i.length-2))+"&loadingPath="+Fai.top._loadingPath;jm.ajax({type:"post",url:"ajax/product_h.jsp?cmd=getProductInfoCommentV3",data:o,error:function(){Mobi.ing(LS.js_systemError)},success:function(e){var t=jm.parseJSON(e);t.html||(t.html=""),jm("#tabPanel3 .commentBoxPanel").remove(),document.getElementById("tabPanel3").insertBefore(jm(t.html)[0],jm("#tabPanel3 .userCommentBox")[0]),setTimeout(function(){Mobi.bindImgLazyLoad("tabPanel3")},0),Mobi.setCommImgBindShow()}})}},Mobi.initTemplate2=function(e){Mobi.getJQMobi();var t=e.layout,i=e.moduleStyle,o=e.designType,n=Mobi.getPreviewObject("navbar"),a=Mobi.getPreviewObject("navbarList");n&&n.setAttribute("style",""),a&&a.setAttribute("style",""),jm(Mobi.getPreviewObject("webTop")).css("height",""),Mobi.removeAllSwipeMenuClass(),1==t?(jm(Mobi.getPreviewObject("webFooterBox")).append(Mobi.getPreviewObject("navbar")),Mobi.showNavItemContainer(),1===o&&Mobi.navSwipeMenu(t)):2==t||4==t||5==t||7==t?(5!==t&&7!==t?Mobi.getPreviewObject("webTop").appendChild(Mobi.getPreviewObject("navbar")):Mobi.getPreviewObject("webHeaderBox").appendChild(Mobi.getPreviewObject("navbar")),Mobi.autoSetNavBarBottom(t),Mobi.navSwipeMenu(t)):3==t||0==t||8==t?(jm(Mobi.getPreviewObject("webHeaderBox")).append(Mobi.getPreviewObject("navbar")),0==t?Mobi.showNavItemContainer():8==t?(Mobi.showNavItemContainer(),Mobi.navSwipeMenu(t)):1===o&&Mobi.navSwipeMenu(t)):6==t&&(jm(Mobi.getPreviewObject("webBannerBox")).append(Mobi.getPreviewObject("navbar")),Mobi.showNavItemContainer()),Mobi.autoSetNavBarBottom(t),Mobi.autoFixGWebTop(t),Mobi.topTipMarquee(),Mobi.getPreviewObject("webMultilingualArea")&&(4==t?jm(Mobi.getPreviewObject("webHeaderBox")).append(Mobi.getPreviewObject("webMultilingualArea")):jm(Mobi.getPreviewObject("webBannerBox")).prepend(Mobi.getPreviewObject("webMultilingualArea"))),1005!==Fai.top._templateFrameId&&1004!==Fai.top._templateFrameId&&1019!==Fai.top._templateFrameId&&1023!==Fai.top._templateFrameId&&1024!==Fai.top._templateFrameId&&1021!==Fai.top._templateFrameId||(Mobi.scrollNavFix(),jm(window).bind("load",function(){Mobi.scrollNavFix()})),Mobi.getPreviewObject("navButton")&&(1004===Fai.top._templateFrameId||1023===Fai.top._templateFrameId?jm(Mobi.getPreviewObject("navbar")).append(Mobi.getPreviewObject("navButton")):jm(Mobi.getPreviewObject("webHeaderBox")).prepend(Mobi.getPreviewObject("navButton"))),Mobi.scrollHeaderTop(),Mobi.changeMorePosition(i),0==jm("#fixedAreaBox").height()&&jm(".J_area_box_wrap").addClass("fixedAreaBoxEmpty")},Mobi.changeMorePosition=function(e){if(!Fai.top._openThemeV3){var t=document.querySelectorAll("#webModuleContainer>.form"),i=t.length;if(1===e)for(var o=0;o<i;o++){var n=(a=t[o]).id||"";(s=a.querySelector(".formBannerMore"+n.replace("module","")))&&a.appendChild(s)}else for(o=0;o<i;o++){var a,r=(a=t[o]).querySelector(".formBannerTitle>.titleCenter"),s=(n=a.id||"",a.querySelector(".formBannerMore"+n.replace("module","")));r&&r.appendChild(s)}}},Mobi.scrollHeaderTop=function(){function e(){if(document.getElementsByClassName("J_registerHeader").length){var e=document.getElementById("g_body"),t=document.getElementsByClassName("J_registerHeader")[0],i=!1,o=t.offsetTop,n=t.clientHeight,a=e.scrollTop;(a>o||a<o)&&!i&&(jm(t).addClass("headerScroll_fix"),i=!0),a-n<o&&i&&(jm(t).removeClass("headerScroll_fix"),i=!1)}}document.addEventListener("touchstart",function(t){e()},!1),document.addEventListener("touchmove",function(t){e()},!1),document.addEventListener("touchend",function(t){e()},!1),document.addEventListener("touchcancel",function(t){e()},!1),document.addEventListener("scroll",function(){e()},!1)},Mobi.scrollNavFix=function(e){var t=document.getElementById("navbar"),i=document.getElementById("g_body"),o=(t.clientHeight,t.offsetTop,i.scrollTop),n=jm("#webHeader_v3"),a=jm(".J_marqueeContainer").length?parseInt(jm(".J_marqueeContainer").height()):0,r=jm(".fk-mobiTips").length?parseInt(jm(".fk-mobiTips").height()):0,s=parseInt(n.height())||0;function l(){Fai.top._openThemeV3?function(){var i=document.documentElement.scrollTop||document.body.scrollTop,l=document.getElementById("webContainerBox").offsetTop-i,c=jm(t),d="none"!=n.css("display"),m=parseInt(a+r),p=m>0,u=0;Fai.top._manageMode?(e=Fai.top._pattern.hs.styleId||Fai.top._defaultPattern.hs.styleId||4,s=parseInt(n.height())||0):e=e||4;i>o?l<0&&(n.length>0&&d&&(1==e||2==e||3==e||4==e)&&(u+=s),p&&(u+=m),c.addClass("scroll_fix")):l>=0?(c.removeClass("scroll_fix"),u=0):(n.length>0&&d&&(1==e||2==e||3==e||4==e)&&(u+=s),p&&(u+=m));(d||p)&&c.css("top",u+"px");o=i}():function(){var e=document.documentElement.scrollTop||document.body.scrollTop,i=document.getElementById("webContainerBox").offsetTop-e;e>o?i<0&&jm(t).addClass("scroll_fix"):i>=0&&jm(t).removeClass("scroll_fix");o=e}()}t.parentNode,document.getElementById("webBannerBox"),jm(document).off("touchstart.nav").on("touchstart.nav",function(e){l()},!1),jm(document).off("touchmove.nav").on("touchmove.nav",function(e){l()},!1),jm(document).off("touchend.nav").on("touchend.nav",function(e){l()},!1),jm(document).off("touchcancel.nav").on("touchcancel.nav",function(e){l()},!1),jm(document).off("scroll.nav").on("scroll.nav",function(){l()},!1)},Mobi.initFooterHeight=function(){},Mobi.jumpAnchorModule=function(e){if(e&&jm("#module"+e).length){var t,i=parseInt(jm("#module"+e).offset().top),o=parseInt(jm("#module"+e).offset().height),n=parseInt(jm("body").height()),a=parseInt(n/2);t=a>i?0:n>i?i-a+o:i-a+parseInt(o/2),document.body.scrollTop=t,document.documentElement.scrollTop=t}},Mobi.autoSetNavBarHeight=function(e){Mobi.getPreviewObject("webHeader").offsetHeight;var t=Mobi.getPreviewObject("webTips")?Mobi.getPreviewObject("webTips").offsetHeight:0,i=0,o=Fai.top._openOnlineService?parseInt(jm("#customerServiceDiv").height()):0,n=4+parseInt(jm(Mobi.getPreviewObject("navbar")).css("bottom").replace("px",""));(jm.os.iphone?4==e&&(n=Fai.top._openOnlineService?parseInt(jm("#customerServiceDiv").height())+35:n,i=Mobi.getPreviewWindow().innerHeight-n-t-o):jm.os.android?(i=Mobi.getPreviewWindow().screen.height/Mobi.getPreviewWindow().devicePixelRatio-Mobi.getPreviewWindow().screenTop,4==e&&(n=Fai.top._openOnlineService?parseInt(jm("#customerServiceDiv").height())+35:n,i=Mobi.getPreviewWindow().innerHeight-n-o)):jm.os.supportsTouch||(i=Mobi.getPreviewWindow().innerHeight-t,4==e&&(n=Fai.top._openOnlineService?parseInt(jm("#customerServiceDiv").height())+35:n,i=Mobi.getPreviewWindow().innerHeight-n-o)),i>0)&&(4==e?parseInt(jm("#navbarList").height())+parseInt(jm("#navbarList").css("padding-bottom").replace("px",""))>i&&jm("#navbar").css("height",i+"px"):jm("#navbar").css("height",i+"px"))},Mobi.autoSetNavBarBottom=function(e){var t,i=jm("#navbar");4==e?Fai.top._openOnlineService?(jm("#navButton").css("bottom",(parseInt(jm("#customerServiceDiv").height())+15)/_htmlFontSize+"rem"),i.css("bottom",(parseInt(jm("#customerServiceDiv").height())+35)/_htmlFontSize+"rem")):(/height/.test(i.attr("style"))?(t=i.height(),i.removeAttr("style"),i.css("height",t+"px")):i.removeAttr("style"),jm("#navButton").removeAttr("style")):(jm("#navButton").removeAttr("style"),i.removeAttr("style"))},Mobi.handlePirtureSize=function(){var e=document.getElementById("webContainerBox");if(e)for(var t=e.querySelectorAll("img"),i=0;i<t.length;i++)(t[i].offsetWidth<=0||t[i].offsetHeight<=0)&&(t[i].style.visibility="hidden"),t[i].onload=function(){this.style.visibility="visible"}},Mobi.fixImageHeight=function(e,t){if(e){var i=document.getElementById(e);if(i){for(var o=i.querySelectorAll("img"),n=1,a=0,r=o.length,s=0;s<r;s++)!function(e){var t=new Image;if(t.src=o[e].src,t.onload=function(){t.height>a&&(a=t.height),l()},0!=t.height&&t.height>a&&(a=t.height),n%2==0||e===o.length-1){if(a>0&&a<160&&(n%2==1&&e===o.length-1&&(o[e].parentNode.style.height=a/_htmlFontSize+"rem"),n%2==0))for(var i=0;i<2;i++)o[e+i-1].parentNode.style.height=a/_htmlFontSize+"rem";a=0}++n}(s);t&&l()}}function l(){var t=0,i=0,o=jm("#"+e).find(".photoListImg"),n=jm("#"+e).find(".imgClass_160");o.each(function(){(i=parseInt(jm(this).height()))>t&&(t=i)}),0!=t&&n.css("height",t/_htmlFontSize+"rem")}},Mobi.fixImageHeightPhoList=function(e,t,i){if(e){var o=document.getElementById(e);if(o){var n=jm("#"+e).find(".photoDiv"),a=jm("#"+e).find(".imgClass_160"),r=parseInt(a.eq(0).width()),s=o.querySelectorAll("img"),l=s.length,c=(jm("#"+e).find(".imgName"),jm("#"+e).find(".imageMiddle"));!function(){jm("#"+e).find(".photoListImg");var o=jm("#"+e).find(".imgClass_160");1!=t&&o.css("height",r*i+"px")}();for(var d=0;d<l;d++){var m=jm(s[d]).attr("vwidth"),p=jm(s[d]).attr("vheight");if(2==t)for(var u=0;u<l;u++){var h=r,f=a.eq(0).height(),g=m/p;h/f<=g?(jm(s[d]).css("width",g*f+"px"),jm(s[d]).css("height",f+"px"),jm(s[d]).css("maxWidth","initial"),jm(a[d]).css("marginLeft",(h-g*f)/2+"px"),jm(n[d]).css({position:"relative",overflow:"hidden"}),jm(c[d]).css("display","none")):(jm(s[d]).css("height",h/g+"px"),jm(s[d]).css("width",h+"px"),jm(s[d]).css("marginTop",(f-h/g)/2+"px"),jm(a[d]).css("overflow","hidden"),jm(c[d]).css("display","none"))}}}}},Mobi.defImageHeightType2=function(e,t){if(e){var i=document.getElementById(e);if(i){for(var o=jm("#"+e).find(".photoCrossedSlideSec"),n=jm("#"+e).find(".imgClass_160"),a=i.querySelectorAll("img"),r=1,s=0,l=a.length,c=i.querySelectorAll(".imageMiddle"),d=(i.querySelectorAll(".imgName"),0),m=0;m<l;m++)!function(e){var i=new Image;if(i.src=jm(a[e]).attr("src"),i.onload=function(){if(i.height>s&&(s=i.height),p(),2==t&&d==l)for(var e=0;e<l;e++){var r=i.width,m=i.height,u=n.eq(0).width(),h=n.eq(0).height(),f=r/m;u/h<=f?(jm(a[e]).css("width",f*h+"px"),jm(a[e]).css("height",h+"px"),jm(a[e]).css("maxWidth","initial"),jm(a[e]).css("marginLeft",(u-f*h)/2+"px"),jm(o[e]).css({position:"relative",overflow:"hidden"}),jm(c[e]).css("display","none")):(jm(a[e]).css("height",u/f+"px"),jm(a[e]).css("width",u+"px"),jm(a[e]).css("marginTop",(h-u/f)/2+"px"),jm(c[e]).css("display","none"))}},0!=i.height&&i.height>s&&(s=i.height),r%2==0||e===a.length-1){if(s>0&&s<160&&(r%2==1&&e===a.length-1&&(a[e].parentNode.style.height=s/_htmlFontSize+"rem"),r%2==0))for(var m=0;m<2;m++)a[e+m-1].parentNode.style.height=s/_htmlFontSize+"rem";s=0}++r}(m);0==t&&p()}}function p(){var i=0,o=0,n=jm("#"+e).find(".photoListImg"),a=jm("#"+e).find(".imgClass_160");divWidth=a.eq(0).width(),divHeight=a.eq(0).height(),n.each(function(){o=parseInt(jm(this).height()),imgClassW=parseInt(jm(this).width()),o>i&&(i=o)}),2==t?a.css("height",divWidth*(i/imgClassW)+"px"):0!=i&&a.css("height",i/_htmlFontSize+"rem"),d++}},Mobi.initTemplate=function(e){Mobi.getJQMobi();0==e||1==e||6==e?Mobi.showNavItemContainer():2!=e&&4!=e&&5!=e||(Mobi.autoSetNavBarBottom(e),Mobi.navSwipeMenu(e)),Mobi.handlePirtureSize()},Mobi.fixGwebHieght=function(){var e=Mobi.getPreviewWindow().innerHeight,t=Mobi.getPreviewObject("g_web");e>t.offsetHeight&&(t.style.height=e+"px")},Mobi.initMobiPage=function(e){if(jm.os.supportsTouch||Mobi.resetHtmlFontSize(),Fai.top._openThemeV3||Mobi.initTemplate2(e),Fai.top._manageMode&&Mobi.initLocater(),Mobi.unloadForATag(),Mobi.initOnlineServiceWidth(),jm(document).ready(function(){var e=jm(window).width(),t=null;Fai.top.window.onresize=function(){jm(window).width()!=e&&(e=jm(window).width(),clearTimeout(t),t=setTimeout(function(){Mobi.bannerAnimate.init(Fai.top._bannerData)||(Mobi.initBannerDefaultDom(Fai.top._bannerData),Mobi.initSwipe("bannerSwipe",Fai.top._bannerData)),clearTimeout(t),t=null},500),Mobi.resetHtmlFontSize(),Fai.top._openThemeV3||(Mobi.logoSizeCompressByMargin(),Mobi.titlePositionRefreshByLogo()),Mobi.autoFixGWebTop(Fai.top._templateLayoutId),Mobi.initBgmPosition())}}),Fai.top._openThemeV3||(Mobi.fixFontSizeDeviation(),Mobi.initForms()),Mobi.onlineServiceInputWord(),Mobi.closeLoading(),Mobi.bindBodyScrollTypeWritingEvent(),Mobi.initMobiPageWithLogDog(),setTimeout(function(){jm("#jiaxin-mcs-fixed-btn").off("click.log").on("click.log",function(){Mobi.logDog(200171,6)})},1e3),window.Fai&&(window.Fai.top._popupZone={}),window.Fai&&(window.Fai.top._popupZone.openZone=function(){}),null==_typeof(window.Site)&&(window.Site={}),window.Site&&(window.Site.openSiteForm=function(){}),!Fai.top.Mobi.getPreviewWindow()._hmt&&jm("a[href*='Mobi.showBaiduBridge']").length>0){jm("#g_body").append("<div id='baiduBridgeScript'></div>");var t=Fai.top.Mobi.getPreviewWindow()._baiduBridgeCodes||Fai.top._onlineServiceJson.baiduBridge.codes;t&&(jm("#baiduBridgeScript").append(t),jm.fkEval.call(window,jm("#baiduBridgeScript script").html()))}Mobi.fixJzmHomeIframeNest(),Mobi.checkFaiAnchor(),Mobi.fixIphoneXFooter()},Mobi.initMobiPageWithLogDog=function(){!function(){var e,t,i,o,n,a=Fai.top.devicePixelRatio,r=Fai.top.screen;if(localStorage.getItem("fkLogDog-screenResolution"))return;t={"1920*1080":1,"1366*768":2,"1440*900":3,"1600*900":4,other:5,"1680*1050":6,"1280*800":7,"1280*1024":8,"1360*768":9,"1280*720":10,"1024*768":11,"1280*768":12,"1600*1200":13,"1600*1024":14},i={"1080*1920":15,"720*1280":16,"480*854":17,"540*960":18,"1080*1812":19,"720*1184":20,"1080*1776":21,"1080*1794":22,"750*1334":23,"1242*2208":24,"640*960":25,"768*1024":26,"1125*2001":27,other:28,"640*1136":29,"1440*2560":30,"1140*2960":31},o=Fai.top._manageMode?t:i,e=r.width*a*(r.height*a),o=function(e){var t,i,o;for(t in e)t.indexOf("*")>-1&&(i=t.split("*"),o=i[0]*i[1],e[o]=e[t],delete e[t]);return e}(o),n=o[e]||o.other,Mobi.isPC()&&!Fai.top._manageMode&&(n=o.other);if(n)try{localStorage.setItem("fkLogDog-screenResolution",!0),Mobi.logDog(200100,n)}catch(e){}}()},Mobi.isFromJzmHomeIframe=function(){return"true"==Mobi.getUrlParam(window.location.href,"_fromJzmHome")},Mobi.fixJzmHomeIframeNest=function(){Mobi.isFromJzmHomeIframe()&&(jm("#mobiCornerAd").addClass("jz_foreHideCornerAd"),jm("#g_body").delegate("a","click",function(e){var t=jm(this);Mobi.fixJzmHomeIframeParam(t,t.attr("href"))}))},Mobi.fixJzmHomeIframeParam=function(e,t){if(!Mobi.isFromJzmHomeIframe())return t;if("string"!=typeof t)return t;if(t.indexOf("mailto")>=0||t.indexOf("sms")>=0||"#"==t||t.indexOf("javascript:")>=0||t.indexOf("tel")>=0)return t;var i=t.indexOf("?")<0?"?":"&",o=t+i+"_fromJzmHome=true";return e.attr("href",o),o},Mobi.bindBodyScrollTypeWritingEvent=function(){function e(e,t){t=t||100;if(0!=e.length){var i=function i(o){o.target!=e&&"INPUT"!=o.target.tagName&&"TEXTAREA"!=o.target.tagName&&setTimeout(function(){e.blur(),document.removeEventListener("touchstart",i,!1)},t)};e.addEventListener("focus",function(){document.addEventListener("touchstart",i,!1)},!1)}}for(var t=document.querySelectorAll("input,textarea"),i=0;i<t.length;i++){new e(t[i]);null}},Mobi.resetHtmlFontSize=function(){var e=document.documentElement?document.documentElement.clientWidth:document.body.clientWidth,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;8===Mobi.getMobiOSType()&&4===Mobi.getBrowserType()&&(t=document.documentElement.clientWidth||document.body.clientWidth),t>768&&t<1280?e=768:t>=1280&&(e=512),document.documentElement.style.fontSize=1*e/16+"px",_htmlFontSize=1*e/16},Mobi.closeLoading=function(){var e=document.getElementById("webLoading");e&&(e.style.display="none")},Mobi.showLoading=function(){var e=document.getElementById("webLoading");e&&(e.style.display="block")},Mobi.MobiOSType={UNKNOWN:0,IPHONE:1,IPAD:2,WEBOS:3,ANDROID:4,ANDROIDICS:5,BLACKBERRY:6,WINDOW_DESKTOP:7,MAC:8,ANDROID_2_3:9,ANDROID_4_0:10,ANDROID_4_1:11,ANDROID_4_2:12,ANDROID_4_3:13,ANDROID_4_4:14,ANDROID_5_0:15,IOS_5_0:16,IOS_5_1:17,IOS_6_0:18,IOS_6_1:19,IOS_7_0:20,IOS_7_1:21,IOS_8_0:22,IOS_8_1:23},Mobi.getMobiOSType=function(){return jm.os.IOS_5_0?Mobi.MobiOSType.IOS_5_0:jm.os.IOS_5_1?Mobi.MobiOSType.IOS_5_1:jm.os.IOS_6_0?Mobi.MobiOSType.IOS_6_0:jm.os.IOS_6_1?Mobi.MobiOSType.IOS_6_1:jm.os.IOS_7_0?Mobi.MobiOSType.IOS_7_0:jm.os.IOS_7_1?Mobi.MobiOSType.IOS_7_1:jm.os.IOS_8_0?Mobi.MobiOSType.IOS_8_0:jm.os.IOS_8_1?Mobi.MobiOSType.IOS_8_1:jm.os.ANDROID_2_3?Mobi.MobiOSType.ANDROID_2_3:jm.os.ANDROID_4_0?Mobi.MobiOSType.ANDROID_4_0:jm.os.ANDROID_4_1?Mobi.MobiOSType.ANDROID_4_1:jm.os.ANDROID_4_2?Mobi.MobiOSType.ANDROID_4_2:jm.os.ANDROID_4_3?Mobi.MobiOSType.ANDROID_4_3:jm.os.ANDROID_4_4?Mobi.MobiOSType.ANDROID_4_4:jm.os.ANDROID_5_0?Mobi.MobiOSType.ANDROID_5_0:jm.os.iphone?Mobi.MobiOSType.IPHONE:jm.os.ipad?Mobi.MobiOSType.IPAD:jm.os.webos?Mobi.MobiOSType.WEBOS:jm.os.androidICS?Mobi.MobiOSType.ANDROIDICS:jm.os.android?Mobi.MobiOSType.ANDROID:jm.os.blackberry?Mobi.MobiOSType.BLACKBERRY:jm.os.WINDOW_DESKTOP?Mobi.MobiOSType.WINDOW_DESKTOP:jm.os.MAC?Mobi.MobiOSType.MAC:Mobi.MobiOSType.UNKNOWN},Mobi.BrowserType={UNKNOWN:0,CHROME:1,FIREFOX:2,MSIE10:3,WEBKIT:4,MSIE9:5,MSIE11:6,OPERA:7,WX_BROWSER:8,UC_BROWSER:9,QQ_BROWSER:10,B360_BROWSER:11,BD_BROWSER:12,SG_BROWSER:13,LB_BROWSER:14,SAFARI:15},Mobi.getBrowserType=function(){return jm.os.WXBrowser?Mobi.BrowserType.WX_BROWSER:jm.os.UCBrowser?Mobi.BrowserType.UC_BROWSER:jm.os.MQQBrowser?Mobi.BrowserType.QQ_BROWSER:jm.os.LieBaoFast?Mobi.BrowserType.LB_BROWSER:jm.os.BaiDuBrowser?Mobi.BrowserType.BD_BROWSER:jm.os.Sougou?Mobi.BrowserType.SG_BROWSER:jm.os.B360Browser?Mobi.BrowserType.B360_BROWSER:jm.os.ie10?Mobi.BrowserType.MSIE10:jm.os.chrome?Mobi.BrowserType.CHROME:jm.os.fennec?Mobi.BrowserType.FIREFOX:jm.os.safari?Mobi.BrowserType.SAFARI:jm.os.ie9?Mobi.BrowserType.MSIE9:jm.os.ie11?Mobi.BrowserType.MSIE11:jm.os.opera?Mobi.BrowserType.OPERA:jm.os.webkit?Mobi.BrowserType.WEBKIT:Mobi.BrowserType.UNKNOWN},Mobi.Screen=function(){var e=window.devicePixelRatio||1;return{width:window.screen.width*e,height:window.screen.height*e}},Mobi.ScreenType={OTHER:0,W320H480:1,W480H800:2,W480H854:3,W720H1280:4,WINDOW_SCREEN:5,W240H320:6,W600H800:7,W540H960:8,W640H960:9,W768H1024:10,W640H1136:11,W720H1184:12,W1440H2560:13,W800H1280:14,W750H1334:15,W1080H1776:16,W1080H1920:17,W1536H2048:18,W1280H720:19},Mobi.showLoginTip=function(e){Mobi.ing(e,!0)},Mobi.returnBack=function(){""===document.referrer&&(location.href="/"),document.referrer.indexOf("login.jsp")>0?history.go(-2):(history.go(-1),Fai.top._manageMode&&setTimeout(function(){history.go(-1)},100))},Mobi.getScreenType=function(e,t){return 320==e&&480==t?Mobi.ScreenType.W320H480:480==e&&800==t?Mobi.ScreenType.W480H800:480==e&&854==t?Mobi.ScreenType.W480H854:720==e&&1280==t?Mobi.ScreenType.W1720H1280:240==e&&320==t?Mobi.ScreenType.W240H320:600==e&&800==t?Mobi.ScreenType.W600H800:540==e&&960==t?Mobi.ScreenType.W540H960:640==e&&960==t?Mobi.ScreenType.W640H960:768==e&&1024==t?Mobi.ScreenType.W768H1024:640==e&&1136==t?Mobi.ScreenType.W640H1136:720==e&&1184==t?Mobi.ScreenType.W720H1184:1440==e&&2560==t?Mobi.ScreenType.W1440H2560:800==e&&1280==t?Mobi.ScreenType.W800H1280:750==e&&1334==t?Mobi.ScreenType.W750H1334:1080==e&&1776==t?Mobi.ScreenType.W1080H1776:1080==e&&1920==t?Mobi.ScreenType.W1080H1920:1536==e&&2048==t?Mobi.ScreenType.W1536H2048:1280==e&&720==t?Mobi.ScreenType.W1280H720:Mobi.ScreenType.OTHER},Mobi.getWXShareData=function(e,t){var i=[];i.push("&url="+jm.encodeUrl(e));var o={};jm.ajax({url:"ajax/wx_h.jsp?cmd=getWXShareData",type:"post",cache:!1,data:i.join(""),async:!1,success:function(e){var i=jm.parseJSON(e);i.success&&(o.noncestr=i.noncestr,o.timestamp=i.timestamp,o.signature=i.signature,t(o))}})},Mobi.getGuanZhuData=function(e,t){var i=[];e=jm.getCookie(t)||e||"",i.push("&wxOpenId="+e),jm.ajax({url:"ajax/wx_h.jsp?cmd=getGuanZhuData",type:"post",cache:!1,data:i.join(""),async:!1,success:function(e){var t=jm.parseJSON(e);t.success&&jm(document).ready(function(){jm("#g_body").append(t.guanzhuDom),jm.fkEval.call(window,t.guanzhuScripts)})}})},Mobi.statisticalMobiVisitors=function(e){if(e){var t=jm.extend({},{colId:-1,pdId:-1,ndId:-1},e);(null==t.colId||""==t.colId||t.colId<0)&&(t.colId=-1),(null==t.pdId||""==t.pdId||t.pdId<0)&&(t.pdId=-1),(null==t.ndId||""==t.ndId||t.ndId<0)&&(t.ndId=-1);var i="",o=navigator.userAgent;i=o.match(/AppleWebKit.*Mobile.*/)||o.match(/ipad/i)?o.match(/ipad/i)?"ipad":o.match(/android/i)?"android":o.match(/iphone/i)?"iphone":"other":"pc";var n,a,r=[],s=!1;Fai.top._manageMode?(n=Fai.top.Fai.getBrowserType(),a=Fai.top.Fai.getScreenType(Fai.top.Fai.Screen().width,Fai.top.Fai.Screen().height)):(n=Mobi.getBrowserType(),a=Mobi.getScreenType(Mobi.Screen().width,Mobi.Screen().height),s=jm.os.WINDOW_DESKTOP),r.push("&colId="+t.colId),r.push("&pdId="+t.pdId),r.push("&ndId="+t.ndId),r.push("&windowDesktop="+s),r.push("&mobiOSType="+Mobi.getMobiOSType()),r.push("&browserType="+n),r.push("&screenType="+a),r.push("&rf="+jm.encodeUrl(t.rf)),r.push("&sc="+t.sc),r.push("&visitUrl="+jm.encodeUrl(document.location.href)),r.push("&visitEquipment="+i),r.push("&statId="+t.statId),jm.ajax({type:"post",url:"ajax/mobistatistics_h.jsp?cmd=visited",data:r.join(""),success:function(e){}})}},Mobi.mobiStatVisitTime=function(){window.onbeforeunload=function(e){var t=e.timeStamp,i=[];i.push("unloadTime="+t),jm.ajax({url:"ajax/mobistatistics_h.jsp?cmd=visitTime",type:"post",cache:!1,data:i.join(""),success:function(e){}})}},Mobi.printBaiduPushJs=function(){jm.ajax({type:"post",url:"ajax/mobi_h.jsp",data:"cmd=checkBaiduAutomaticPush",dataType:"json",success:function(e){if(e.printBaiduPushJs){var t=document.createElement("script"),i=window.location.protocol.split(":")[0];t.src="https"===i?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o)}}})},Mobi.report=function(e){setTimeout(function(){if(window.performance){var e=performance.timing,t=(e.fetchStart,e.navigationStart,e.redirectEnd,e.redirectStart,e.domainLookupStart,e.fetchStart,e.unloadEventEnd,e.unloadEventStart,e.domainLookupEnd-e.domainLookupStart),i=e.connectEnd-e.connectStart,o=e.responseEnd-e.requestStart,n=e.domInteractive-e.responseEnd,a=e.domComplete-e.domInteractive,r=(e.loadEventEnd,e.loadEventStart,e.loadEventEnd,e.navigationStart,[]);r.push("&dt="+t),r.push("&ct="+i),r.push("&rt="+o),r.push("&wt="+n),r.push("&pt="+a),r.push("&bt="+Mobi.getBrowserType());jm.ajax({url:"ajax/mobistatistics_h.jsp?cmd=report",type:"post",cache:!1,data:r.join(""),success:function(e){}})}},500)},Mobi.scrollToTop=function(e){var t=document.getElementById("g_body"),i=t.scrollTop,o=document.createElement("div");o.setAttribute("id","scrollHideDiv"),o.style.cssText="position:absolute;width:100%;height:100%;top:0;z-index:9999;",jm("#navbar").hasClass("scroll_fix")&&jm("#navbar").removeClass("scroll_fix"),t.style.marginTop=-i+"px",window.scrollTo(0,0),t.appendChild(o),t.style[jm.feat.cssPrefix+"Transition"]="margin-top 1500ms cubic-bezier(0.175, 0.885, 0.320, 1.025)",t.style.marginTop="0px",setTimeout(function(){t.style[jm.feat.cssPrefix+"Transition"]="none";var e=document.getElementById("scrollHideDiv");t.removeChild(e)},1500),Mobi.scrollBgmPosition()},Mobi.logDog=function(e,t){var i=[];i.push("dogId="+jm.encodeUrl(e)),i.push("&dogSrc="+jm.encodeUrl(t)),jm.ajax({type:"post",url:"/ajax/log_h.jsp?cmd=dog",data:i.join("")})},Mobi.logCorpDog=function(e,t){jm.ajax({type:"get",url:"/ajax/log_h.jsp?cmd=logCorpDog&dogId="+jm.encodeUrl(e)+"&dogSrc="+jm.encodeUrl(t)})},Mobi.mobiHideScroll=function(){var e=document.getElementById("g_body"),t=document.getElementsByTagName("html")[0];if(e.style.overflowY="hidden",t.style.overflowY="hidden",Fai.top._manageMode){iFrameObj=window.parent.document.getElementById("mobiReviewPageFrame");var i=Fai.top.Fai.getScrollWidth();iFrameObj.clientWidth}},Mobi.mobiShowScroll=function(){var e=document.getElementById("g_body"),t=document.getElementsByTagName("html")[0];e.style.overflowY="",t.style.overflowY="",Fai.top._manageMode&&(iFrameObj=window.parent.document.getElementById("mobiReviewPageFrame"),iFrameObj.style.position="",iFrameObj.style.left="",iFrameObj.setAttribute("width","100%"))},Mobi.bindBodyScrollEvent=function(){window.onscroll=null,window.onscroll=function(){Mobi.scrollBgmPosition()}},Mobi.isWechat=function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},Mobi.isQQ=function(){var e=window.navigator.userAgent.toLowerCase();return["qq"].some(function(t){return e.indexOf(t)>-1})},Mobi.isMX=function(){var e=window.navigator.userAgent.toLowerCase();return["mx4 pro"].some(function(t){return e.indexOf(t)>-1})},Mobi.isPC=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){i=!1;break}return i},Mobi.setCtrlStyle=function(e,t){var i=jm("#"+e),o=new Array;if(1==i.length){var n=i.html();o=(n=n.replace(/{\r\n/g,"{").replace(/\t/g,"").replace(/\r\n}/g,";}")).split("\n"),i.remove()}o.push(t),jm("head").append('<style type="text/css" id="'+e+'">'+o.join("\n")+"</style>")},Mobi.setCtrlStyleCssList=function(e,t,i,o){var n=jm,a=n("#"+e),r=new Array;if(1==a.length){var s=a.html();r=(s=s.replace(/{\r\n/g,"{").replace(/\t/g,"").replace(/\r\n}/g,";}")).split("\n"),a.remove()}for(var l=r.length-1;l>=0;--l)for(var c=r[l],d=0;d<i.length;++d){var m=i[d].cls,p=i[d].key,u=new RegExp("#"+t+" +"+Mobi.fixRegSpecialCharacter(m)+" *{ *"+p+"s*:[^;]*;","gi");if(""!=t&&"undefined"!=t||(u=new RegExp(Mobi.fixRegSpecialCharacter(m)+" *{ *"+p+"s*:[^;]*;","gi")),0==c.length||/^\s$/.test(c)||u.test(c)){r.splice(l,1);break}}for(d=0;d<i.length;++d)""==t||"undefined"==t?r.push(i[d].cls+"{"+i[d].key+":"+i[d].value+";}"):r.push("#"+t+" "+i[d].cls+"{"+i[d].key+":"+i[d].value+";}");o&&o.rev&&r.reverse(),n("head").append('<style type="text/css" id="'+e+'">'+r.join("\n")+"</style>")},Mobi.removeCtrlStyleCssList=function(e,t,i){var o=jm,n=o("#"+e),a=new Array;if(1==n.length){var r=n.html();a=(r=r.replace(/{\r\n/g,"{").replace(/\t/g,"").replace(/\r\n}/g,";}")).split("\n"),n.remove()}for(var s=a.length-1;s>=0;--s)for(var l=a[s],c=0;c<i.length;++c){var d=i[c].cls,m=i[c].key,p=new RegExp("#"+t+" +"+Mobi.fixRegSpecialCharacter(d)+" *{ *"+m+"s*:[^;]*;","gi");if(""!=t&&"undefined"!=t||(p=new RegExp(Mobi.fixRegSpecialCharacter(d)+" *{ *"+m+"s*:[^;]*;","gi")),0==l.length||/^\s$/.test(l)||p.test(l)){a.splice(s,1);break}}o("head").append('<style type="text/css" id="'+e+'">'+a.join("\n")+"</style>")},Mobi.removeCtrlStyleCssList2=function(e,t,i){var o=jm,n=o("#"+e),a=new Array;if(1==n.length){var r=n.html();a=(r=r.replace(/{\r\n/g,"{").replace(/\t/g,"").replace(/\r\n}/g,";}")).split("\n"),n.remove()}for(var s=a.length-1;s>=0;--s)for(var l=a[s],c=0;c<i.length;++c){var d="#"+t+" "+i[c].cls+"{"+i[c].key;if(0==l.length||/^\s$/.test(l)||-1!=l.indexOf(d)){a.splice(s,1);break}}o("head").append('<style type="text/css" id="'+e+'">'+a.join("\n")+"</style>")},Mobi.fixRegSpecialCharacter=function(e){for(var t=["\\",".","?","$","*","^","[","]","{","}","|","(",")","/"],i=0,o=t.length;i<o;i++)e=e.replace(t[i],"\\"+t[i]);return e},Mobi.bindTouchEvent=function(e,t,i){var o,n,a,r,s,l,c=jm(e),d=Fai.top.navigator.userAgent,m=/(iPhone|iPad|iPod|iOS|Android)/i.test(d),p=/(MQQBrowser)/i.test(d),u=/(iPhone|iPad|iPod|iOS)/i.test(d),h=Mobi.isWechat(),f=_htmlFontSize,g=_htmlFontSize,v=!1;function b(e,t,i){var o,a=[];if("function"==typeof t.callBack){for(o=0;o<t.args.length;o++)a.push(t.args[o]);a.push(n),a.push(i),t.callBack.apply(e,a)}}function j(e){var t=e||window.event;return"ontouchstart"in window&&(t=e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0]:e.touches[0]),{pageX:t.pageX,pageY:t.pageY}}p&&(g=8),u&&(g=4),c.length<1||(r="ontouchstart"in window,s=r?"touchstart":"mousedown",l=r?"touchend":"mouseup",n={touchMove:!1,toTop:!1,toLeft:!1,toRight:!1,toBottom:!1,mouseDownX:0,mouseDownY:0,mouseUpX:0,mouseUpY:0},o={stopPropagation:!0,callBack:"",args:[]},t=jm.extend({},o,t),i=jm.extend({},o,i),c.each(function(e,o){jm(o).on(s,function(e){n=function(e){return e.touchMove=!1,e.toTop=!1,e.toLeft=!1,e.toRight=!1,e.toBottom=!1,e.mouseDownX=0,e.mouseDownY=0,e.mouseUpX=0,e.mouseUpY=0,e}(n),a=j(e),n.mouseDownX=a.pageX,n.mouseDownY=a.pageY,t&&(b(this,t,e),t.stopPropagation&&!m&&(e.stopPropagation(),e.preventDefault()))}).on(l,function(e){a=j(e),n.mouseUpX=a.pageX,n.mouseUpY=a.pageY,n.mouseDownX==n.mouseUpX&&n.mouseDownY==n.mouseUpY||(n.touchMove=!0),n.mouseDownX>n.mouseUpX+f?n.toLeft=!0:n.mouseDownX+f<n.mouseUpX&&(n.toRight=!0),n.mouseUpY-n.mouseDownY>g?n.toBottom=!0:n.mouseDownY-n.mouseUpY>g&&(n.toTop=!0),b(this,i,e),i.stopPropagation&&!m&&(e.stopPropagation(),e.preventDefault())}),m&&jm(o).on("touchmove",function(){a=j(event),v=Math.abs(a.pageY-n.mouseDownY)>=g,!i.stopPropagation||v||u&&h||event.preventDefault()})}))},Mobi.loadImgAlone=function(e,t){var i=jm("#module"+e),o=(jm(window).width(),jm(window).height()),n=-1;i.hasClass("formStyle31")?lazyloadCubeNavigation(o,e):i.hasClass("formStyle5")&&(n=parseInt(t.type),t.picCompress,3==n&&lazyLoadProductList_2(o,e,2))},Mobi.triggerAllLazyLoad=function(){jm(window).trigger("scroll")},Mobi.getUrlParam=function(e,t){var i,o=e.substring(e.indexOf("?")+1,e.length).split("&");return jm.each(o,function(e,o){if(decodeURIComponent(o.substring(0,o.indexOf("=")))===t)return i=decodeURIComponent(o.substring(o.indexOf("=")+1,o.length)),!1}),i},Mobi.addDistCode=function(){var e=Fai.top.navigator.userAgent,t=/(iPhone|iPad|iPod|iOS)/i.test(e),i=window.location.href;if(!(i.indexOf("dist")>0||i.indexOf("mstl.jsp")>0||i.indexOf("mdetail.jsp")>0||i.indexOf("mlist.jsp")>0||i.indexOf("h-mstl")>0||i.indexOf("h-mdetail")>0||i.indexOf("h-mlist")>0)){var o=Mobi.getDistCodeByArgOrCookie();if(""!=o){var n="?dist="+o;if(i.indexOf("?")>0&&(n+="&"+i.split("?")[1]),t&&Mobi.isWechat())return i=i.split("?")[0],void window.location.replace(i+n);history.replaceState&&history.replaceState(null,"",n)}}},Mobi.bindMemberDistId=function(){var e=window.location.href;if(!(e.indexOf("dist")<0)&&e.indexOf("?")>0){var t=Mobi.getDistCodeByArgOrCookie();if(""==t){var i=Mobi.getUrlParam(e,"returnUrl")||"";""!=i&&(t=Mobi.getUrlParam(i,"dist")||"")}var o=jm.cookie("oldDistUVRecordKey")||"";""!=t&&jm.ajax({type:"get",url:"/ajax/dist_h.jsp?cmd=bindMemberDistTime&distCode="+t,success:function(e){var t=jm.cookie("_distCode")||"",i=Fai.top.sessionMemberId||0;o!=(t=t+"_"+i)&&jm.cookie("distUVRecordKey",""),Mobi.distUVDailyTotal()}})}},Mobi.distUVDailyTotal=function(){var e=jm.cookie("_distCode")||"",t=Fai.top.sessionMemberId||0,i=jm.cookie("distUVRecordKey")||"";if(""!=e&&""==i){var o=e+"_"+t;jm.ajax({type:"get",url:"/ajax/dist_h.jsp?cmd=distUVDailyTotal&distCode="+e,success:function(e){var t=jm.parseJSON(e);if(t.success){var i=new Date;i.setHours(23),i.setMinutes(59),i.setSeconds(59),document.cookie="distUVRecordKey="+t.distUVRecordCookie+";expires="+i.toGMTString(),document.cookie="oldDistUVRecordKey="+o+";expires="+i.toGMTString()}}})}},Mobi.getDistCodeByArgOrCookie=function(){var e="",t=window.location.href;return""==(e=Mobi.getUrlParam(t,"dist")||"")&&(e=jm.cookie("_distCode")||""),e},Mobi.getLanCodeFromLcid=function(e){switch(e=parseInt(e)){case 2052:return"cn";case 1033:return"en";case 1028:return"tcn";case 1041:return"jap";case 1042:return"kor";case 1108:return"lo";case 1054:return"th";case 11274:return"es";case 1049:return"ru";case 1036:return"fra";case 1040:return"it";case 1031:return"de"}},Mobi.getUrlParamObj=function(e){var t=new Object;if(-1!=e.indexOf("?")){var i=e.substr(1);strs=i.split("&");for(var o=0;o<strs.length;o++){var n=decodeURIComponent(strs[o].split("=")[0]),a=strs[o].split("=")[1];t[n]=a?decodeURIComponent(a):""}}return t},function(e,t){e.lockDocScroll=function(){t("body").data("fk-scroll","false")},e.openDocScroll=function(){t("body").data("fk-scroll","true")},t(function(){t("#g_web").on("touchmove",function(e){if("false"===t("body").data("fk-scroll"))return!1})})}(Mobi,jm),Mobi.bindInteractive=function(e){var t=Mobi.getPreviewWindow(),i=t.Mobi,o=t.jm("#module"+e,t.document),n=i.photoGroup;o.hasClass("formStyle34")&&jm.isFunction(i.photoGroup.bindInteractive)&&n.bindInteractive(o),o.hasClass("formStyle35")&&Mobi.bindServiceBtnEvent()},Mobi.forbiddenExternalLinks=function(){},Mobi.isContainExternallink=function(e,t){},Mobi.preciseDecimal=function(e,t){if(isNaN(parseFloat(e))&&!isFinite(e)||"number"!=typeof t||t<=0)return e;var i,o,n=e+"",a=n.indexOf(".");return a<0?e:(i=parseInt(n.slice(0,a)),o=parseFloat(n.slice(a,n.length)),i+parseFloat(o.toPrecision(t)))},Mobi.showBookingPanel=function(){Mobi.bookingBoxBind(!1),jm("#bookingPanelTriggle").data("pid",-1),jm("#bookingPanelTriggle").trigger("click")},Mobi.encodeHtml=function(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e},Mobi.wxShareAlter=function(e){var t=[];t.push("<div class='wxShare'>"),t.push("<div class='wxShareContent'>"),t.push("<div class='wxShareDesc'>"),t.push("<span>"+LS.weChatShare+"</span>"),t.push("</div>"),t.push("<div class='wxShareQrcode'><img width='190' height='190' alt='' src='"+e+"' /></div>"),t.push("</div>"),t.push("</div>");var i={title:"微信分享",width:480,height:480,divContent:t.join("")};Fai.top.Fai.popupWindowVersionTwo.createPopupWindow(i).getPopupWindowId()},Mobi.logErr=function(e){e&&jm.ajax({type:"GET",url:"/ajax/log_h.jsp?cmd=err&err="+Fai.encodeUrl(e)})},Mobi.isSupportWebp=function(){var e=!1;try{e=0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch(e){console.log(e)}return Mobi.isSupportWebp=function(){return e},Mobi.isSupportWebp()},Mobi.img2Webp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Mobi.isSupportWebp()&&!Fai.top._webDebug&&/(.faiusr.com)/.test(e)&&(e=e.replace(/(jpg|jpeg|png|gif)$|(jpg|jpeg|png|gif)\?v=/,function(e,t,i){return t?t+".webp":i?e.replace(i,i+".webp"):void 0})),e},Mobi.checkNestModule=function(e){var t={nest:!1,isTab:!1,isPack:!1,isFold:!1,isPopupZone:!1,isFloatZone:!1,parentId:0,inTab:!1,inPack:!1,inFold:!1,inPopupZone:!1,inFloatZone:!1,inList:[]},i=parseInt(e.attr("_intab"))||0,o=parseInt(e.attr("_inpack"))||0;return inFold=parseInt(e.attr("_infold"))||0,inPopupZone=parseInt(e.attr("_inpopupzone"))||0,inFloatZone=parseInt(e.attr("_infloatzone"))||0,e.hasClass("formStyle50")?(t.nest=!0,t.isTab=!0,e.find(".J_formTabButton").each(function(e,i){tabModuleId=parseInt(jm(i).attr("tabmoduleid")),isNaN(tabModuleId)||t.inList.push(tabModuleId)})):e.hasClass("formStyle51")?(t.nest=!0,t.isPack=!0,e.find(".J_formPackContent .form").each(function(e,i){packModuleId=parseInt(jm(i).attr("id").replace("module","")),isNaN(packModuleId)||t.inList.push(packModuleId)})):e.hasClass("formStyle58")?(t.nest=!0,t.isFold=!0,e.find(".J_formFoldItem .form").each(function(e,i){foldModuleId=parseInt(jm(i).attr("id").replace("module","")),isNaN(foldModuleId)||t.inList.push(foldModuleId)})):e.hasClass("formStyle62")?(t.nest=!0,t.isPopupZone=!0):e.hasClass("formStyle103")&&(t.nest=!0,t.isFloatZone=!0),i>0?(t.parentId=i,t.inTab=!0):o>0?(t.parentId=o,t.inPack=!0):inFold>0?(t.parentId=inFold,t.inFold=!0):inPopupZone>0?(t.parentId=inPopupZone,t.inPopupZone=!0):inFloatZone>0&&(t.parentId=inFloatZone,t.inFloatZone=!0),t},Mobi.getModuleAnimationStatus=function(e){var t=jm("#module"+e);return Mobi.checkNestModule(t).inPack?1:-1},Mobi.limitUv=function(){var e,t,i,o,n;if(e="&typeQy=0&isMobile=1&siteLan="+Fai.top._wid+"&startTime="+function(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1;i<10&&(i="0"+i);return new Date([t,i,"01"].join("-")).getTime()/1e3}()+"&endTime="+(t=new Date,i=t.getMonth(),o=++i,n=new Date(t.getFullYear(),o,1),new Date(n-864e5).getTime()/1e3),jm.ajax({type:"post",url:"/ajax/mobistatistics_h.jsp?cmd=timeDataNoAuth",data:e,timeout:6e4,async:!1,error:function(e,t,i){"timeout"==t&&Fai.ing("抱歉，数据量过大查询失败。请稍后再试")},success:function(e){var t=jm.parseJSON(e);t.success&&(Fai.top.usedUv=t.iVisitors)}}),Fai.top.usedUv>=300||Fai.top.isJuly3FreeUser&&Fai.top.usedUv>=100){Mobi.logDog(200618,14);var a='<div class="tipDialog"><span class="quitIcon"></span><img class="tipComtent" src="'+Fai.top._resImageRoot+'/image/v2/pageNotFound.png"></img><div class="tipFont"> 网站流量已达上限，暂时无法访问</div><div id="tipButton" class="tipButton"> 升级网站，拥有无限流量</div><div class="tipButton tipButtonFk"> 我是访客，也想免费建站</div></div>';jm("#g_body .fk-limtUv").append(a),document.getElementById("g_body").style.overflowY="hidden",jm(".fk-limtUv .quitIcon").click(function(){top.window.close()}),jm("#tipButton").click(function(){Mobi.logDog(200618,15),window.open("https://jzm.fkw.com/?_ta=2549")}),jm(".fk-limtUv .tipButtonFk").click(function(){Mobi.logDog(200618,18),window.open("https://jzm.fkw.com/?_ta=2550")})}else jm("#fk-limtUv").remove()},Mobi.limitDayUv=function(){var e="&siteLan="+Fai.top._wid+"&siteId="+Fai.top._siteId;jm.ajax({type:"post",url:"/ajax/site_h.jsp?cmd=getLimitPreview",data:e,timeout:6e4,success:function(e){var t=jm.parseJSON(e);if(t.success&&0!=t.type){var i="";if(1==t.type){if(Fai.top._oem)i+="免费域名"+t.acct+"只用作预览使用，如涉及到不良信息传播、转账交易等，请谨慎对待。";else{Mobi.logDog(200732,1);var o="";t.prefix&&t.mHomeHost&&(o=t.prefix+t.mHomeHost+"/feedBack/feedBack.jsp?url_s="+t.prefix+t.acct),Fai.top._isShowFkAuthTips?i+="免费域名"+t.acct+"只用作预览访问，商业用途请先<a href='https://www.fkw.com/marketing/domain.html' target='_blank' style='color:#5874d8;font-size:12px;text-decoration:underline;'>绑定独立域名</a>或<a href='https://i.fkw.com/portal.jsp#appId=setAuth' target='_blank' style='color:#5874d8;font-size:12px;text-decoration:underline;'>开通"+Fai.top._fkAuthTitle+"</a>":i+="免费域名"+t.acct+"只用作预览使用，如涉及到不良信息传播、转账交易等，请谨慎对待。<a style='color:#ff8e1e;font-size:14px;text-decoration:underline;' onclick='javascript:Mobi.logDog(200732, 2);'  href='"+o+"'>我要投诉</a>"}var n='<div id="fk-tipsLimitUv" class="fk-tipsDiv"><div  class="fk-mobiTips"><div class="scroll"><li>'+i+"</li><li>"+i+"</li></div></div></div>";jm("body").prepend(n),Fai.top.scollDistance=0,setInterval(function(){-780==Fai.top.scollDistance&&(Fai.top.scollDistance=0),Fai.top.scollDistance-=1,jm(".fk-mobiTips .scroll").css({left:Fai.top.scollDistance+"px"})},20),Mobi.autoFixGWebTop(_templateLayoutId)}else if(2==t.type)if(Fai.top._oem){i+="访客量超出限制，免费域名"+t.acct+"只用作预览访问，商业使用请绑定独立域名访问。";var a="";0==t.ver?a+="升级网站,绑定域名":t.isFaiDomain?a+="访问:"+t._mainUrl:a+="登陆后台，绑定域名";n='<div class="fk-limtUv"><div class="tipDialog"><span class="quitIcon"></span><img width="440px" height="245px" class="tipComtent" src="'+Fai.top._resImageRoot+'/image/v2/pageNotFound.png"></img><div class="tipFont" style="font-size:16px;width:90%;margin-left:5%;"> '+i+"</div></div></div>";jm("body").append(n),document.getElementById("g_body").style.overflowY="hidden"}else{if(Fai.top._isShowFkAuthTips){var r="//"+Fai.top._homeHost+"/marketing/domain.html",s="//"+Fai.top._portalHost+"/portal.jsp#appId=setAuth";i+="免费域名"+t.acct+"只用作预览访问，商业用途请先<a href='"+r+"' onclick='Site.logCorpDog(200848, 6);' target='_blank' style='color:#5874d8;text-decoration:underline;'>绑定独立域名</a>或<a href='"+s+"' target='_blank' onclick='Site.logCorpDog(200848, 3);' style='color:#5874d8;text-decoration:underline;'>开通"+Fai.top._fkAuthTitle+"</a>"}else i+="访客量超出限制，免费域名"+t.acct+"只用作预览访问，商业使用请绑定独立域名访问。";a="";0==t.ver?a+="升级网站,绑定域名":t.isFaiDomain?a+="访问:"+t._mainUrl:a+="登陆后台，绑定域名";n='<div class="fk-limtUv"><div class="tipDialog"><span class="quitIcon"></span><img width="440px" height="245px" class="tipComtent" src="'+Fai.top._resImageRoot+'/image/v2/pageNotFound.png"></img><div class="tipFont" style="font-size:16px;width:90%;margin-left:5%;"> '+i+'</div><div class="tipButton tipButton2">'+a+"</div></div></div>";jm("body").append(n),jm(".fk-limtUv .tipButton").click(function(){0==t.ver?window.open("https://jzm.fkw.com/product.html"):t.isFaiDomain?window.open(Fai.top.httpStr+t._mainUrl):window.open("https://i.fkw.com/portal.jsp")}),document.getElementById("g_body").style.overflowY="hidden"}else if(3==t.type){i="当前域名禁止访问";n='<div class="fk-limtUv"><div class="tipDialog"><span class="quitIcon"></span><img width="440px" height="245px" class="tipComtent" src="'+Fai.top._resImageRoot+'/image/v2/pageNotFound.png"></img><div class="tipFont" style="font-size:16px;width:90%;margin-left:5%;"> '+i+'</div><div class="tipButton tipButton2">点击这里访问您的网站</div></div></div>';jm("body").append(n),jm(".fk-limtUv .tipButton").click(function(){window.open(Fai.top.httpStr+t.acct)}),document.getElementById("g_body").style.overflowY="hidden"}}}})},Mobi.ajaxLogDog=function(){jm.ajax({type:"POST",url:"/ajax/log_h.jsp?cmd=mobiLogDog&hostName="+Fai.top.location.host,error:function(){Fai.ing("系统异常，请稍后重试",!0)},success:function(e){}})},Mobi.throttle=function(e,t){var i=0;return t=t||300,function(){var o=new Date;o-i>=t&&(e.apply(this,arguments),i=o)}},Mobi.debounce=function(e,t){var i=null;return t=t||300,function(){var o=this,n=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(o,n)},t)}},Mobi.loadFile=function(){var e=[];function t(t,i){try{for(var o,n=0;o=e[n++];)if(o.doc===t&&o.url==(i.src||i.href))return o}catch(e){return null}}return function(i,o,n,a){var r=t(i,o);if(r)r.ready?n&&n(r):(r.funs.push(n),a&&r.errFuns.push(a));else if(e.push({doc:i,url:o.src||o.href,funs:[n],errFuns:a?[a]:[]}),i.body){if(o.id&&o.realTime){var s=i.getElementById(o.id);s&&s.parentNode&&s.parentNode.removeChild(s)}if(!o.id||!i.getElementById(o.id)){var l=i.createElement(o.tag);for(var c in delete o.tag,o)l.setAttribute(c,o[c]);l.onload=l.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if((r=t(i,o)).funs.length>0){r.ready=1;for(var e;e=r.funs.pop();)e(r)}l.onload=l.onreadystatechange=null}},l.onerror=function(){if((r=t(i,o)).errFuns&&r.errFuns.length>0)for(var e;e=r.errFuns.pop();)e();throw Error("加载文件 "+(o.href||o.src)+" 失败 ")},i.getElementsByTagName("head")[0].appendChild(l)}}else{var d=[];for(var c in o)"tag"!=c&&d.push(c+'="'+o[c]+'"');i.write("<"+o.tag+" "+d.join(" ")+" ></"+o.tag+">")}}}(),Mobi.jumpToModulePosition=function(e){var t=e.jumpModuleId,i=e.colUrl,o=e.colId,n=jm("#webModuleContainer #module"+t),a=(window.event,!1);if(n.length<1)return i=="/col.jsp?id="+Fai.top._pageId||i=="/h-col-"+Fai.top._pageId+".html"?void(Fai.top._manageMode?Fai.top.Fai.ing("该模块已被删除或隐藏",!0):Mobi.ing(LS.linkPositionNotFound,3)):void(-1!=o&&jm.ajax({type:"post",data:"&_colId="+o+"&extId="+Fai.top._extId+"&v="+1e3*Math.random(),url:"ajax/colModuleManage_h.jsp?cmd=getColModulesId",error:function(){Fai.ing("加载失败",!0)},success:function(e){e=jm.parseJSON(e);for(var o=0;o<e.moduleListId.length;o++)if(e.moduleListId[o]==parseInt(t)){a=!0;break}if(a){var n=Mobi.getMobiLanCode();n=""==n?"":"/"+n,document.location.href=n+i+"#fai_"+t}else Fai.top._manageMode?Fai.top.Fai.ing("该模块已被删除或隐藏",!0):Mobi.ing(LS.linkPositionNotFound,3)}}));n.length>=1&&n.parents(".formStyle50").length>0||n.length>=1&&n.parents(".formStyle51").length>0||n.length>=1&&n.parents(".formStyle58").length>0?Fai.top._manageMode?Fai.top.Fai.ing("此链接已失效",!0):Mobi.ing(LS.linkFailure,2):(""==window.location.hash&&(window.location.hash="fai_"+t),Mobi.jumpAnimation(t))},Mobi.jumpAnimation=function(e){var t,i=jm("#web_header_fixed_box"),o=jm("#webModuleContainer #module"+e);if(Fai.top._openThemeV3)if("fixed"==i.css("position")){var n="string"==typeof i.height()?0:i.height();t=o.offset().top-n+.1}else t=o.offset().top;else t="fixed"==jm("#webHeaderBox").css("position")?o.offset().top-jm("#webHeaderBox").height()+.1:o.offset().top,1023!=Fai.top._templateFrameId&&1019!=Fai.top._templateFrameId&&1024!=Fai.top._templateFrameId||(t-=jm("#webHeaderBox").height()),1021==Fai.top._templateFrameId&&(t=t-jm("#webHeaderBox").height()-jm("#webHeaderBox").height());var a=parseInt(t)-10,r=parseInt(t)+10,s=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;if(!(s>a&&s<r)){var l,c,d=t,m=0;if(c=setInterval(function(e){isNaN(d)?clearInterval(c):(l=d/20,t=parseInt(m+l),m=t,document.body.scrollTop=t,document.documentElement.scrollTop=t,(0==t||t>=d-l)&&clearInterval(c))},1e3/90),Fai.top._openThemeV3){var p=parseInt(Mobi.getMainNavLayoutId());Mobi.closeNavV3(p)}else Mobi.clickJumpremoveAllSwipeMenuClass()}},Mobi.getMobiLanCode=function(){var e=Fai.top._lcid,t="";return 2052==(e=e||2052)&&(t="cn"),1033==e?t="en":1028==e?t="tcn":1041==e?t="jp":1042==e?t="kor":1108==e?t="lo":1054==e?t="th":11274==e?t="es":1049==e?t="ru":1036==e?t="fra":1040==e?t="it":1031==e&&(t="de"),window.location.pathname.startsWith("/"+t)||(t=""),t},Mobi.clickJumpremoveAllSwipeMenuClass=function(){var e,t=Fai.top._templateLayoutId;-1!==Mobi.getPreviewObject("navbar").className.indexOf("open")&&(jm("#navbar").removeClass("open"),jm("#navExistOffPanel").removeClass("navPanelOpen"),jm("#navButton").removeClass("navButtonOpen"),e="moveRight",jm("#webHeaderBox").removeClass(e),jm("#webBannerBox").removeClass(e),jm("#webContainerBox").removeClass(e),jm("#customerServiceDiv").removeClass(e),jm("#webFooter").removeClass(e),jm("#bgm_icon").removeClass(e),2===t&&jm("#webTop").css("height",""))},function(e,t){var i={};t.bindImgLazyLoad=function(t,o){var n={root:null,threshold:.01,rootMargin:"0px",imgClass:"J_img_lazyload",data_attribute:"src-original",loadExistImg:!1};o&&jm.extend(n,o);var a=n.loadExistImg,r=n.imgClass,s=n.data_attribute,l=jm("#"+t).find("."+r);i[t]&&(i[t].disconnect(),i[t]=null);var c=new IntersectionObserver(function(t){t.forEach(function(t){if(t&&t.isIntersecting&&t.target){var i=e(t.target);picPath=i.attr(s),picPath&&function(t,i,o,n,a){var r=e(t),s=r.attr(o),l="";l=9063789!=Fai.top._aid?Mobi.img2Webp(s):s;e("<img />").one("load",function(){r.is("img")?r.attr("src",l):r.is("div")&&r.find("image").length?r.find("image").attr("xlink:href",l):r.css("background-image","url('"+l+"')"),r.addClass("fade-in-for-lazyload");var c=setTimeout(function(){r.removeClass("fade-in-for-lazyload"),clearTimeout(c),c=null},600);i.unobserve(t),a&&n.each(function(t,n){jm(n).attr(o)==s&&function(t,i,o){var n=e(t),a=n.attr(o),r="";9063789!=Fai.top._aid&&(r=Mobi.img2Webp(a));n.is("img")?n.attr("src",r):n.is("div")&&n.find("image").length?n.find("image").attr("xlink:href",r):n.css("background-image","url('"+r+"')");i.unobserve(t)}(n,i,o)})}).attr("src",l)}(t.target,c,s,l,a)}})},{root:n.root,threshold:n.threshold,rootMargin:n.rootMargin});i[t]=c,l.each(function(e,t){c.observe(t)})}}(jm,Mobi),function(e,t){var i={};function o(e,t,i){var o=jm("#module"+e);o.children().remove(),o.append(t),jm.fkEval.call(window,i),"1005"==Fai.top._templateFrameId||1019==Fai.top._templateFrameId?Mobi.changeMorePosition(1):Mobi.changeMorePosition(0)}function n(e){try{var t=e.moduleInfo,i=t.style,o=t.id,a=e.renderOptions,r=e.renderSuccess,s=e.childModule;if(!t||!a)return;r?new Vue({data:{componentName:JzmModule.utils.getComponentNameByStyleId(i)},provide:{module:t,options:a},components:JzmModule.components,template:"<component :is='componentName'></component>",mounted:function(){var e={id:t.id,animation:Fai.top._openThemeV3?t.patternV3.a:t.pattern.a};jzUtils.run({name:"moduleAnimation.subscribe",callMethod:!0},e),s&&s.length&&s.forEach(function(e){n(e)})}}).$mount("#module"+o+" .module_content"):new Vue({data:{componentName:JzmModule.default},provide:{module:t,options:a},components:JzmModule.components,template:"<component :is='componentName'></component>",mounted:function(){s&&s.length&&s.forEach(function(e){n(e)})}}).$mount("#module"+o)}catch(e){console.log(e)}}i.domEventList={},i.ajaxModuleList=[],i.ham=!1,i.listen=function(e,t){this.domEventList[e]||(this.domEventList[e]=[]),this.domEventList[e].push(t)},i.trigger=function(){var e=Array.prototype.shift.call(arguments),t=this.domEventList[e];if(!t||0===t.length)return!1;for(var i,o=0;i=t[o++];)i.apply(this,arguments)},t.ajaxLoadModuleDom=function(e,t,n){i.listen("topBar",function(e){var t=Mobi.getPreviewWindow().jm(".multilingual");t.children().remove(),t.append(e.dom),jm.fkEval.call(window,e.scripts),Mobi.initLocater()}),i.listen("footer",function(e){jm("#webFooter").html(e.dom),jm.fkEval(e.scripts)}),i.listen("ajaxLoadDomScript",function(e){jm.fkEval.call(window,e)}),i.listen("renderAjaxLoadModule",function(){if(i.ham&&i.ajaxModuleList.length){for(var e=i.ajaxModuleList,t=0;t<e.length;t++){var n=e[t];o(n.moduleId,n.dom,n.scripts)}Mobi.initFooterHeight(),Mobi.onlineServiceInputWord()}}),i.listen("ajaxLoadPaginationDomList",function(){if(i.ajaxLoadPaginationDomList.length)for(var e=i.ajaxLoadPaginationDomList,t=0;t<e.length;t++){var o=e[t],n=o.moduleId,a=o.dom;if(a){var r=jm("#paginationDiv"+n);r.children().remove(),r.append(a)}}});var a=window.location.href,r="",s="";if(a.indexOf("lcid")>0){var l=Mobi.getUrlParam(a,"lcid");l&&(s+="?lcid="+l)}a.indexOf("_fromJzmHome")>0&&(Mobi.getUrlParam(a,"_fromJzmHome")&&(r+="&_fromJzmHome=true"));jm.ajax({type:"post",url:"ajax/ajaxLoadModuleDom_h.jsp"+s,data:"cmd=loadModuleDom&colId="+e+"&extId="+t+"&ajaxOptionInfo="+jm.encodeUrl(jm.decodeUrl(jm.toJSON(n)))+r+"&anchor="+jm.encodeUrl(Fai.top.location.hash),success:function(e,t,o){var n=o.getResponseHeader("wafUpdate");n&&"true"==n&&window.location.reload();try{e=jm.parseJSON(e)}catch(t){e={success:!1}}if(e.success){var a=jm.parseJSON(e.rtInfo);a.topBar&&i.trigger("topBar",a.topBar),a.footer&&i.trigger("footer",a.footer),e.scripts&&i.trigger("ajaxLoadDomScript",e.scripts),a.moduleDomList&&a.moduleDomList.length>0&&(i.ajaxModuleList=a.moduleDomList,i.trigger("renderAjaxLoadModule")),a.ajaxLoadPaginationDomList&&a.ajaxLoadPaginationDomList.length>0&&(i.ajaxLoadPaginationDomList=a.ajaxLoadPaginationDomList,i.trigger("ajaxLoadPaginationDomList"))}}})},t.renderModuleSSR=function(e,t){if(1103398!=_aid){(!Fai.top._moduleSSRList||Fai.top._moduleSSRList.length<1)&&(i.ham=!0);var o=Fai.top._moduleSSRList,a=window.location.search;return new Promise(function(i,n){var r=Mobi.getUrlParamObj(a);r.cmd="activateSsrmodule",r._colId=e,r._extId=t,r._colInfo=jm.toJSON(Fai.top._colInfo),r.moduleList=jm.toJSON(o),r.qurl=window.location.href,jm.ajax({type:"post",url:"ajax/module_h.jsp",data:r,success:function(e){try{e=jm.parseJSON(e)}catch(t){e={success:!0,optionList:[]}}var t=e.optionList;e.success?i(t):(Mobi.ing(LS.js_systemError,!1),n(t))}})}).then(function(e){var t=function(e){var t={},i={};return e.filter(function(e){var o=e.id,n=e.moduleInfo.style;return 50!=n&&51!=n&&58!=n||(i[o]=e),!!e.inLabelModule||(t[o]=e,!1)}).forEach(function(e){if(e.inLabelModule){var t=e.inLabelModule,o=i[t];if(!o)return;o.childModule||(o.childModule=[]),o.childModule.push(e)}}),t}(e);if(e&&e.length){for(var o in t){n(t[o])}i.ham=!0,i.trigger("renderAjaxLoadModule"),jzUtils.run({name:"moduleAnimation.publish",base:Mobi})}})}}}(jm,Mobi),function(e,t){var i=1,o=2;t.getLocationByAddress=function(e){return t.logDog(201151,i),new Promise(function(t,i){var o=new qq.maps.Geocoder;o.setComplete(function(e){t(e.detail.location)}),o.setError(function(e){i(e)}),o.getLocation(e)})},t.syncComputeDistanceBetween=function(e,i){t.logDog(201151,o);var n=new qq.maps.LatLng(e.latitude,e.longitude),a=new qq.maps.LatLng(i.latitude,i.longitude);return qq.maps.geometry.spherical.computeDistanceBetween(n,a)}}(jm,Mobi),Mobi.checkBit=function(e,t){var i=!0;if((e>2147483647||e<0||t>2147483647||t<0)&&(i=!1),i)return(e&t)==t;var o,n,a,r,s,l,c=e.toString(2),d=t.toString(2);if(c.length>62||d.length>62)return alert("Does not support more than 62 bit. flagBinary.length="+c.length+",bitFlagBinary.length"+d.length+"."),!1;r=o=n=a=0,c.length>31?(l=c.slice(0,c.length-31),s=c.slice(c.length-31),r=parseInt(l,"2"),o=parseInt(s,"2")):o=parseInt(c.slice(0,c.length),"2"),d.length>31?(l=d.slice(0,d.length-31),s=d.slice(d.length-31),n=parseInt(l,"2"),a=parseInt(s,"2")):a=parseInt(d.slice(0,d.length),"2");var m=(o&a)==a;return m&&(m=(r&n)==n),m},Mobi.bindViewIdForTs=function(){var e=window.location.href,t=Mobi.getUrlParam(e,"viewerId")||"";t&&""!=t?jm.setCookie("ts_viewerId",t):t=jm.getCookie("ts_viewerId"),(Fai.top.sessionMemberId||0)<=0||t&&""!=t&&(t=parseInt(t),isNaN(t)||jm.ajax({type:"get",url:"/ajax/member_h.jsp?cmd=setMemberViewerIdForTs&viewerId="+t,success:function(e){}}))},Mobi.logMonitor=function(e,t){jm.ajax({type:"POST",url:"ajax/log_h.jsp",data:"cmd=monitor&id="+e+(t?"&isLog="+t:"")})},Mobi.fixIosBug=function(){var e,t;/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(e=!0,t=0,document.body.addEventListener("focusin",function(i){var o=i.target;jm(o).closest(".jz_mobi_form").length&&(t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,e=!1)}),document.body.addEventListener("focusout",function(i){var o=i.target;jm(o).closest(".jz_mobi_form").length&&(e=!0,setTimeout(function(){e&&window.scrollTo(0,t)},300))}))},function(e,t,i){function o(){return new o.prototype.init}Mobi.DateUtil={getMonth:function(e){return new Date(e).getMonth()+1},getDayOfMonth:function(e){return new Date(e).getDate()},getYear:function(e){return new Date(e).getFullYear()},getHour:function(e){return new Date(e).getHours()},getMinutes:function(e){return new Date(e).getMinutes()},getZeroTime:function(e){var t=new Date(e);return t.setHours(0,0,0,0),t.getTime()},getNowZeroTime:function(){var e=(new Date).getTime();return this.getZeroTime(e)},getDayTextForNow:function(e){var t=this.getMonth(e),i=this.getDayOfMonth(e),o=""+i;i<10&&(o="0"+i);var n=""+t;t<10&&(n="0"+t);var a=n+"."+o,r=this.getZeroTime(e),s=this.getZeroTime((new Date).getTime()),l=s+this.DAY_UNIT;return r===s?a="今天":r===l&&(a="明天"),a=a+"(周"+this.getDayOfWeek(e)+")"},getIndexOfWeek:function(e){var t=new Date(e).getDay();return 0==t&&(t=7),t-1},getDayOfWeek:function(e){return["一","二","三","四","五","六","日"][this.getIndexOfWeek(e)]},getHourAndMinStr:function(e){new Date(e);var t=this.getHour(e),i=this.getMinutes(e);return(t<10?"0"+t:""+t)+":"+(i<10?"0"+i:""+i)},format:function(e,t){return i=new Date(e),n=t,(new o).format(i,n);var i,n},DAY_UNIT:864e5,HOUR_UNIT:36e5,HALF_HOUR_UNIT:18e5,MINUTE_UNIT:6e4},Mobi.isOpenAddrPropByType=function(e){Fai.top._OrderPropTypeDef;return Fai.top._addrPropList.some(function(t){return t.type===e})},o.fn=o.prototype={_default:{formatFn:function(e,t){return e=e||0,1===(t=t.length)?e:(Math.pow(10,t)+e+"").slice(-t)},formatMap:{Y:function(e,t){return o.fn._default.formatFn(e.getFullYear(),t)},M:function(e,t){return o.fn._default.formatFn(e.getMonth()+1,t)},D:function(e,t){return o.fn._default.formatFn(e.getDate(),t)},h:function(e,t){return o.fn._default.formatFn(e.getHours(),t)},m:function(e,t){return o.fn._default.formatFn(e.getMinutes(),t)},s:function(e,t){return o.fn._default.formatFn(e.getSeconds(),t)},w:function(e,t){return e.getDay()}}},init:function(){return this},config:function(e){for(var t in e)this._default[t]=e[t];return this},format:function(e,t){if(console.trace(),e=new Date(e),!/Invalid/i.test(e+"")){var i=this,o="";return t.replace(/([YMDhsmw])\1*/g,function(t){return o=t.charAt(),i._default.formatMap[o]?i._default.formatMap[o](e,t):""})}console.error("请提供一个合法日期！")}},o.fn.init.prototype=o.fn}(Mobi,jm),function(e,t){t.component={el:"#weChatConsult",template:'\n\t\t\t<div id="weChatConsult" class="weChatConsult">\n                <div class="weChatConsultBg" @click="closeHandle"></div>\n                <div class="weChatConsultBox consultWechatQrCodeBounceIn">\n                \t<svg class="weChatConsultCloseBtn" @click="closeHandle"><use xlink:href="#jzm-v26" /></svg>\n                    <img class="weChatConsultImg" :src="imgSrc">\n                    <div class="weChatConsultTextBox">\n                    \t<span class="centerText">请使用微信扫描二维码</span>\n                    </div>\n                </div>\n            </div>\n         ',computed:{},methods:{closeHandle:function(){t.destroy()}},mounted:function(){}},t.render=function(t){this.vm&&(this.vm.imgSrc=t),e("<div id='weChatConsult'></div>").appendTo("body"),this.component.data={imgSrc:t},this.vm=new Vue(this.component)},t.destroy=function(){this.vm&&(e(this.vm.$el).remove(),this.vm&&this.vm.$destroy(),this.vm=null)}}(jm,Mobi.consultImmediately||(Mobi.consultImmediately={})),function(e,t,i){t(function(){Vue.component("picker-view",{props:{values:Array},template:"\n\t\t\t\t<div class='fk_picker_view'>\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t"}),Vue.component("picker-view-column",{props:{list:{type:Array,required:!0},checkedIndex:Number},watch:{checkedIndex:function(e){this.currIndex=e;var t=-this.currIndex*this.cellHeight;this.currStyle.transform="translate3d(0, ".concat(t,"px, 0)"),this.$forceUpdate()}},data:function(){return{startTime:null,endTime:null,startX:0,startY:0,endX:0,endY:0,moveX:0,moveY:0,currStyle:{},currIndex:this.checkedIndex||0}},template:'\n\t\t\t\t<div class="fk_picker_view_column">\n\t\t\t\t\t<div class=\'fk_picker_view_column_list\' @touchstart="start" @touchend="end" @touchmove="move" :style="currStyle" @transitionEnd="transitionEnd" @webkitTransitionEnd="transitionEnd">\n\t\t\t\t\t\t<div class="fk_picker_view_column_item"></div>\n\t\t\t\t\t\t<div class="fk_picker_view_column_item"></div>\n\t\t\t\t\t\t<div class="fk_picker_view_column_item" :active=\'currIndex===index\' :disabled="item.disabled" v-for="(item, index) in list">{{item.text}}</div>\n\t\t\t\t\t\t<div class="fk_picker_view_column_item"></div>\n\t\t\t\t\t\t<div class="fk_picker_view_column_item"></div>\n\t\t\t\t\t\t<div class="fk_picker_view_column_item"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t',methods:{start:function(e){this.startTime=(new Date).getTime();var t=this.getTouch(e);this.startX=t.screenX,this.startY=t.screenY},move:function(e){var t=this.getTouch(e);this.moveX=t.screenX,this.moveY=t.screenY;var i=-this.currIndex*this.cellHeight+this.offsetY;this.currStyle={transform:"translate3d(0, ".concat(i,"px, 0)")}},end:function(e){this.endTime=(new Date).getTime();var t=this.getTouch(e);this.endX=t.screenX,this.endY=t.screenY;var i=this.endTime-this.startTime,o=this.moveOffsetY/i,n=30*this.cellHeight*o*.5,a=-Math.round(n/this.cellHeight),r=this.currIndex+a;r>this.list.length-1?r=this.list.length-1:r<=0&&(r=0),a=r-this.currIndex,this.currIndex=r;var s=Math.max(a/10*.3,.3),l=-this.currIndex*this.cellHeight;this.currStyle={transition:"transform ".concat(s,"s cubic-bezier(0.23, 1, 0.68, 1)"),transform:"translate3d(0, ".concat(l,"px, 0)")}},transitionEnd:function(){this.currStyle.transition="",this.$emit("change",this.currIndex)},getTouch:function(e){return e.changedTouches[0]}},computed:{offsetIndex:function(){return Math.round(this.offsetY/this.cellHeight)},offsetY:function(){var e=Math.round(this.moveY-this.startY);return e},moveOffsetY:function(){return Math.round(this.endY-this.startY)},moveOffsetIndex:function(){return Math.round(this.moveOffsetY/this.cellHeight)},cellHeight:function(){document.querySelector("html");return 2.1*parseFloat(t("html").css("font-size"))}}})})}(Mobi,jm),function(e,t){t.component={el:"#calculationModalFrame",template:'\n\t\t\t<div id="calculationModalFrame" class="calculationModalFrame">\n                <div class="calculationModalFrameBg" @click="closeHandle">\n\t                <div class="content_box consultWechatQrCodeBounceIn" @click.stop>\n\t                \t<svg class="close_btn" @click="closeHandle"><use xlink:href="#jzm-v26" /></svg>\n\t                \t<div class="result_content">\n\t                \t\t<div class="formula_result" v-for="(item, index) in calculateReultList">\n\t\t                \t\t<div class="formula_result_text" v-html="encodeHtml(item.name)"></div>\n\t\t                \t\t<div class="formula_result_money">{{formatMoney(item.value)}}<span v-if="item.uHide == 0" class="formula_result_unit">{{item.unit}}</span></div>\n\t                \t\t</div>\n\t                \t\t<div class="variable_list">\n\t                \t\t\t<div class="vaiable_item" v-for="(item, index) in variableData">\n\t                \t\t\t\t<div class="variable_name" v-html="encodeHtml(item.name)"></div>\n\t                \t\t\t\t<div class="variable_value" v-if="item.type == 0">{{formatMoney(item.value)}}<span v-if="item.uHide == 0" class="variable_unit">{{item.unit}}</span></div>\n\t                \t\t\t\t<div class="variable_value" v-else>{{item.valueKey}}</div>\n\t                \t\t\t</div>\n\t                \t\t</div>\n\t                \t\t<a @click="clickHandle($event)" :href="imgHref" class="result_img">\n\t                \t\t\t<img :src="imgSrc">\n\t                \t\t</a>\n\t                \t\t<div class="result_note_text" v-html="encodeHtml(resultText)"></div>\n\t                \t</div>\n\t                </div>\n                </div>\n            </div>\n         ',computed:{imgSrc:function(){return this.resultMsg.mip?this.resultMsg.mip:Fai.top._resRoot+"/image/v2/calculation_default_img.jpg?v=202003021225"},imgHref:function(){return"103"==this.resultMsg.jumpData.t&&Fai.top.manageMode?"javascript:top.Fai.ing('管理态不支持跳转外部链接，请通过“预览”进行访问', true)":this.resultMsg.jumpData.u?this.resultMsg.jumpData.u:"javascript:void(0)"},resultText:function(){return this.resultMsg.mt?this.resultMsg.mt:" "}},methods:{encodeHtml:function(e){return e&&e.replace?e.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/\b&nbsp;+/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\r/g,""):e},closeHandle:function(){t.destroy()},clickHandle:function(e){if(Fai.top.Mobi.checkSaveBar())return e.preventDefault(),!1},formatMoney:function(e){e=(e+"").replace(/[^0-9+-Ee.]/g,"");var t=isFinite(+e)?+e:0,i="";i=function(e,t){var i=Math.pow(10,t);return""+Math.round(e*i,10)/i}(t,2).split(".");for(var o=/(-?\d+)(\d{3})/;o.test(i[0]);)i[0]=i[0].replace(o,"$1,$2");return(i[1]||"").length<2&&(i[1]=i[1]||"",i[1]+=new Array(2-i[1].length+1).join("0")),i.join(".")}},mounted:function(){jm("html").css("position","fixed"),jm("body").css({overflow:"hidden",position:"fixed"})}},t.render=function(t,i,o){this.vm&&(this.vm.calculateReultList=t,this.vm.variableData=i,this.vm.resultMsg=o),e("<div id='calculationModalFrame'></div>").appendTo("body"),this.component.data={calculateReultList:t,variableData:i,resultMsg:o},this.vm=new Vue(this.component)},t.destroy=function(){this.vm&&(e(this.vm.$el).remove(),this.vm&&this.vm.$destroy(),this.vm=null),jm("html").css("position",""),jm("body").css({overflow:"",position:""})}}(jm,Mobi.calculationModalFrame||(Mobi.calculationModalFrame={})),function(e,t){var i=jm("body");t.component={el:"#formDiv",template:'\n\t\t\t<div id="formDiv" class="formDiv" :class="popupStyle" @click="panelClick" ref="formDiv">\n\t\t\t\t<div v-if="isCoverStyle" @click="stopPropagation" class=\'formHeader ShipDetailsHeader webHeaderBg g_main_bgColor_v3 g_oldThemeBgColor\'>\n\t\t\t\t\t<span class=\'g_close icon-gClose J_popup_close\' @click="closeHandle"></span>\n\t\t\t\t\t<span class=\'popupName\'>{{module.name}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div id=\'modulePopupWrap\' v-drag-resize="resizeOptions" :style="popupWidthStyle" ref="modulePopupWrap">\n\t\t\t\t\t<div id=\'modulePopup\' @click="stopPropagation">\n\t\t\t\t\t\t<div class="fixedHead" :class="noAnimationClass" :style="fixedHeadWidthStyle"  ref="fixedHead">\n\t\t\t\t\t\t\t<span v-if="!isCoverStyle" class=\'popupName\'>{{module.name}}</span>\n\t\t\t\t\t\t\t<span v-if="!isCoverStyle && showCloseBtn" class="mask_close J_popup_close" @click="closeHandle">\n\t\t\t\t\t\t\t\t<svg role="img" class="jzm-v26 J_popup_close">\n\t\t\t\t\t\t\t\t\t<use xlink:href="#jzm-v26"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\'formComponent\'></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n            </div>\n\t\t ',data:function(){return{formId:t.formId,module:t.module}},computed:{isCoverStyle:function(){return 0===this.module.content.ps},popupStyle:function(){return this.isCoverStyle?"coverStyle":"maskStyle"},showCloseBtn:function(){return 0===this.module.content.pcb},noAnimationClass:function(){return Fai.top._manageMode?"":"noAnimationClass"},popupWidthStyle:function(){if(!this.isCoverStyle){var e={},t=this.module.content.pw;return 1===t.t?e.width=t.w+"%":e.width="90%",e}},fixedHeadWidthStyle:function(){var e={},t=this.module.content.pw;return 1===t.t?e.width=t.w-3+"%":e.width="88%",e},resizeOptions:function(){var e=!Fai.top._manageMode||Fai.top._manageMode&&this.isCoverStyle,t=.5*i[0].offsetWidth,o=.9*i[0].offsetWidth;return{notAllow:e,handles:"w,e",alsoResizeParentSelector:null,alsoResizeChildSelector:null,fixPosition:!0,resize:this.resizeing,stop:this.resizeStop,maxHeight:null,maxWidth:o,minHeight:null,minWidth:t}}},methods:{resizeing:function(e,t){var i=_objectSpread({},t.size).width,o=jm(e.target),n=jm(o).find(".fixedHead");o.css({height:"auto"}),n.css({width:i-2+"px"})},resizeStop:function(e,t){var o=jm(e.target),n=_objectSpread({},t.size).width,a=i[0].offsetWidth,r=Math.round(n/a*100);r<50&&(r=50),r>90&&(r=90),this.module.content.pw.t=1,this.module.content.pw.w=r,o.css({height:"auto",width:n+"px"}),this.resize=1,Mobi.logDog(201228,12),Fai.top._mobiFormChange=!0,Fai.top.Mobi.styleChanged()},panelClick:function(){this.isCoverStyle&&Fai.top._manageMode?Fai.top.Mobi.openDesigner("mobiFormPopup","84",84,"","",!0):this.isCoverStyle||(1!=this.resize?t.destroy():1==this.resize&&(this.resize=0))},closeHandle:function(){t.destroy()},stopPropagation:function(e){var t=jm(e.target);t.hasClass("J_popup_close")||t.parents(".mask_close").hasClass("J_popup_close")||(1!=this.resize&&Fai.top._manageMode?Fai.top.Mobi.openDesigner("mobiFormPopup","84",84,"","",!0):1==this.resize&&(this.resize=0)),e.stopPropagation()}},mounted:function(){t.rending=!0;var e=this.$refs.modulePopupWrap.offsetWidth;jm(".fixedHead").css({transition:"none",width:"".concat(e,"px")}),setTimeout(function(){jm(".fixedHead").css({transition:"width 0.5s, height 0.5s"})},0)},watch:{"module.content.ps":{handler:function(e){this.$nextTick(function(){var e=this.$refs.modulePopupWrap.offsetWidth,t=jm(".fixedHead");t.css({transition:"none",width:"".concat(e,"px")}),setTimeout(function(){t.css({transition:"width 0.5s, height 0.5s"})},0)})},deep:!0}}},t.render=function(e,o,n){var a=o;if(jm(this.component.template).appendTo("body"),i.css("overflow-x","hidden"),i.css("overflow-y","hidden"),Fai.top._manageMode||jm("body, html").css("position","fixed"),this.formId=e,this.module=a,this.moduleWrap=new Vue(this.component),this.vueModule=new Vue({el:"#formComponent",provide:{module:a,options:n,formId:e},render:function(e){return e(JzmModule.default)}}),t.module=a,t.formId=e,Fai.top._manageMode){var r=n.args.itemList;Mobi.initModuleLayer("Popup",r,[],!1,!1,!1,7),Fai.top.mobiFormPopupIng=!0}},t.destroy=function(){t.rending=!1;var o=this.moduleWrap,n=this.vueModule;o&&(e(o.$el).remove(),o&&o.$destroy(),o=null),n&&(e(n.$el).remove(),n&&n.$destroy(),n=null),i.css("overflow-x","hidden"),i.css("overflow-y","scroll"),Fai.top._manageMode||jm("body, html").css("position","static"),Fai.top._manageMode&&(Fai.top.Mobi.closeDesigner(),Fai.top.Designer.formPanel.destroy(),Fai.top.mobiFormPopupIng=!1)}}(jm,Mobi.formPopup||(Mobi.formPopup={},Fai.top.Mobi.formPopup=Mobi.formPopup)),Mobi.initDirective=function(){Vue.directive("drag-resize",{inserted:function(e,t){if(Fai.top._manageMode){var i=t.value;Mobi.initDragResizable(e,i)}},update:function(e,t){if(Fai.top._manageMode){var i=t.value,o=$(e);i.notAllow?o.resizable("destroy"):o.attr("_resizable")&&!i.forceInit||Mobi.initDragResizable(e,i),i&&"function"==typeof i.directiveUpdate&&i.directiveUpdate.call(null,e,t)}}}),Vue.directive("ban-copy",{inserted:function(e,t){Fai.top.banCopyTextImg&&Mobi.initImgNoSelect(e)},update:function(e,t){Fai.top.banCopyTextImg&&Mobi.initImgNoSelect(e)}}),function(e){function t(e){return void 0===e&&(e=document.body),!0===e?document.body:e instanceof window.Node?e:document.querySelector(e)}var i=new Map,o={inserted:function(e,o,n){var a=o.value,r=e.parentNode,s=document.createComment(""),l=!1;!1!==a&&(r.replaceChild(s,e),t(a).appendChild(e),l=!0),i.has(e)||i.set(e,{parentNode:r,home:s,hasMovedOut:l})},componentUpdated:function(e,o){var n=o.value,a=i.get(e),r=a.parentNode,s=a.home,l=a.hasMovedOut;!l&&n?(r.replaceChild(s,e),t(n).appendChild(e),i.set(e,Object.assign({},i.get(e),{hasMovedOut:!0}))):l&&!1===n?(r.replaceChild(e,s),i.set(e,Object.assign({},i.get(e),{hasMovedOut:!1}))):n&&t(n).appendChild(e)},unbind:function(e,t){i.delete(e)}};e.directive("dom-portal",o)}(Vue)},jm,(Mobi.mapDetail||(Mobi.mapDetail={},Fai.top.Mobi.mapDetail=Mobi.mapDetail)).render=function(e,t,i){var o=JzmModule.utils.getComponentByName("mapView"),n=jm("body");jm(".map_view").remove(),n.append("\n\t\t<div class='map_view'>\n\t\t\t<map-view :location='location' :module=\"module\" :options=\"options\"></map-view>\n\t\t</div>\n\t\t"),n.css("overflow-y","hidden"),new Vue({el:".map_view",components:{mapView:o},data:function(){return{}},computed:{location:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return e}),module:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i}),options:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return t})}})},Mobi.closeFloatZone=function(){jm("#floatZoneContainer").remove()},Mobi.isPCPreview=function(){var e=self!=top,t=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){i=!1;break}return i}();return!e&&t},Mobi.fixFixedPostion=function(){var e=jm("body"),t=jm("#g_web"),i=e.length&&t.length,o=Mobi.isPCPreview(),n=(e.offset().width-t.offset().width)/2;o&&i&&jm(".floatZoneContainer .float_zone_wrap .form").each(function(e,t){var i=jm(t).offset().left+n;jm(t).css({left:"".concat(i,"px")})})},Mobi.initFloatEffect=function(e){Vue.component("float-effect",{name:"float-effect",props:{iconType:{type:Number},imgSrc:{type:String},styleType:{type:Number},iconBackgroundColor:{type:String},iconBackgroundColorType:{type:Number},iconColor:{type:String},iconColorType:{type:Number},jumpUrl:{type:String},jumpInfo:{type:Object}},template:'\n      <div class ="float_effect" @click.stop="jumpClickHandler">\n        <div v-if="styleType === 1" class="float_effect_style float_effect_style_1 g_main_bgColor_v3 g_oldThemeBgColor" :style="iconBgStyle">\n          <svg v-if="iconType !== 3" class="preview_icon" :style="iconStyle">  \n            <use :xlink:href="svgIconId" />\n          </svg>\n          <img v-else-if="imgSrc" :src="imgSrc" class="preview_icon"/>\n        </div>\n        <div v-if="styleType === 2" class="float_effect_style float_effect_style_2 g_main_bgColor_v3 g_oldThemeBgColor" :style="iconBgStyle" >\n          <svg v-if="iconType !== 3" class="preview_icon" :style="iconStyle">  \n            <use :xlink:href="svgIconId" />\n          </svg>\n          <img v-else-if="imgSrc" :src="imgSrc" class="preview_icon"/>\n        </div>    \n        <div v-if="styleType === 3" class="float_effect_style float_effect_style_3" :style="iconBgStyle">\n          <svg v-if="iconType !== 3" class="preview_icon" :style="iconStyle">  \n            <use :xlink:href="svgIconId" />\n          </svg>\n          <img v-else-if="imgSrc" :src="imgSrc" class="preview_icon"/>\n        </div>\n      </div>\n    ',computed:{svgIconId:function(){return{0:"#jzm-vphone_1",1:"#jzm-vmessage",2:"#jzm-vcustomer_service"}[this.iconType]},iconBgStyle:function(){return 0===this.iconBackgroundColorType?{}:{"background-color":this.iconBackgroundColor}},iconStyle:function(){return 0===this.iconColorType?{}:{color:this.iconColor}},hasLink:function(){return-1!==this.jumpInfo.t}},methods:{jumpClickHandler:function(){if(this.jumpUrl){if(Fai.top._manageMode){if(this.jumpUrl.includes("http")||this.jumpUrl.includes("https"))return void Fai.top.Fai.ing("管理态不支持跳转外部链接，请通过“预览”进行访问",!0);if(this.hasLink&&Fai.top.Mobi.checkSaveBar())return}window.location.href=this.jumpUrl}}}}),jm("#g_web").append('\n  <float-effect \n    id="floatEffect"\n    :icon-type="it" \n    :img-src="imgSrc"\n    :style-type="st"\n    :icon-background-color="ibc"\n    :icon-background-color-type="ibct"\n    :icon-color="ic"\n    :icon-color-type="ict"\n    :jump-url="jumpInfo.u"\n    :jump-info="jumpInfo"\n    v-if="isShow"\n    >\n  \n  </float-effect>');var t=new Vue({el:"#floatEffect",data:e,computed:{isShow:function(){return 0===this.ft&&this.isShowFloatEffect}},methods:{initModuleLayer:function(){if(Fai.top._manageMode){var e=[];e.push({display:"text",text:"编辑",title:"点击编辑悬浮效果",evalScript:"Fai.top.Mobi.openDesigner('JzFloatEffectEdit')"}),e.push({display:"icon",iconClass:"close",text:"隐藏",title:"点击隐藏浮效果",evalScript:"top.Fai.ing('点击隐藏悬浮图标，隐藏后可以从“设置”-“基本设置”-“全站设置”重新选择。',true);Fai.top.Mobi.hideFloatEffect();Mobi.setFloatEffectShowStatus();"}),$("#floatEffect").off("mousemove").on("mousemove",function(){Mobi.addModuleLayer("floatEffect",e,1)}).off("mouseleave").on("mouseleave",function(){Mobi.removeModuleLayer("floatEffect")})}},fixPosition:function(){if(this.isShow){var e=Mobi.isPCPreview(),t=jm("body"),i=jm("#g_web"),o=t.length&&i.length,n=jm(this.$el);if(e&&n&&o){var a=(t.offset().width-i.offset().width)/2,r=n.offset().left+a;n.css({left:"".concat(r,"px")})}}}},watch:{isShow:function(){var e=this;this.isShow&&this.$nextTick(function(){e.initModuleLayer()})}},mounted:function(){this.initModuleLayer(),this.fixPosition()}});Fai.top._manageMode&&(Fai.top.Mobi.setFloatEffectShowStatus=function(){var e;(e=Fai.top._rootStore.getters.getIsIndependentShowFloatEffectType?Fai.top._rootStore.getters.getIsIndependentShowFloatEffect:Fai.top._rootStore.getters.getIsShowFloatEffect)&&t.initModuleLayer(),t.isShowFloatEffect=e;var i=$("#floatZoneContainer");1===t.ft&&e?i.show():i.hide()},Fai.top.Mobi.hideFloatEffect=function(){Fai.top.Mobi.JZFloatEffectGuide.run(),Fai.top._rootStore.commit("changeIsShowFloatEffect",!1),Fai.top.Mobi.styleChanged(),Mobi.removeModuleLayer("floatEffect")},Fai.top.Mobi.hideFloatContainer=function(){Fai.top.Mobi.JZFloatEffectGuide.run(),Fai.top._rootStore.commit("changeIsShowFloatEffect",!1),Fai.top.Mobi.styleChanged()})},function(){var FloatZone=function(){function FloatZone(){_classCallCheck(this,FloatZone),this.editClass="jz_floatZoneEdit",this.moduleClass="jz_float_zone_module",this.isEdit=!1,this.moduleContentClass="float_zone_wrap",this.activeBtnClass="active",this.modulePosition=null,this.delModuleList=[],this.historyModules=[],this.curColHistoryModules=[],this.dragChange="dragChange"}return _createClass(FloatZone,[{key:"edit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initLayout();case 2:this.initAddModuleDragable(),this.isEdit=!0,this.initHistoryModules(!0);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initDesignLayout",value:function(){this.$designBody=Fai.top.$("body"),this.$designBody.addClass(this.editClass),this.initBtn()}},{key:"initBtn",value:function(){var e=this;Fai.top.$("\n            <div id='float_zone_edit_wrap' class=\"float_zone_edit_wrap\">\n                <span class='jz_button float_zone_edit_save' >保 存</span>\n                <span class='jz_button float_zone_edit_cancel '>取 消</span>\n                <span class='jz_button float_zone_edit_close active'>退出弹窗设计</span>\n            </div>\n        ").appendTo(Fai.top.$("#mobiReviewPage"));var t=Fai.top.$("#float_zone_edit_wrap");this.$saveBtn=t.find(".float_zone_edit_save"),this.$saveBtn.click(function(t){e.$saveBtn.hasClass(e.activeBtnClass)&&(t.stopPropagation(),e.save(),e.deactiveBtn())}),this.$cancelBtn=t.find(".float_zone_edit_cancel"),this.$cancelBtn.click(function(t){e.$cancelBtn.hasClass(e.activeBtnClass)&&(t.stopPropagation(),e.cancelEdit())}),this.$exitBtn=t.find(".float_zone_edit_close"),this.$exitBtn.click(function(t){e.$exitBtn.hasClass(e.activeBtnClass)&&(t.stopPropagation(),e.exitEdit(),e.refreshVisit())})}},{key:"destoryBtn",value:function(){Fai.top.$("#float_zone_edit_wrap").remove()}},{key:"resetDesignLayout",value:function(){this.$designBody.removeClass(this.editClass),this.destoryBtn()}},{key:"initModulePanelLayout",value:function(){this.$modulePanel=Mobi.getModuleWindow().$("body"),this.$modulePanel.addClass(this.editClass);var e=Fai.top.v_colModuleManagePanel,t=e.commFun,i=e.pageManageVue.pageManageTabDef;t.switchPanel("addModule",i,function(e){i[1].hidden=!0,i[2].hidden=!0})}},{key:"resetModulePanelLayout",value:function(){this.$modulePanel.removeClass(this.editClass);var e=Fai.top.v_colModuleManagePanel,t=e.commFun,i=e.pageManageVue.pageManageTabDef;t.switchPanel("addModule",i,function(e){i[1].hidden=!1,i[2].hidden=!0}),this.resetHistoryModules()}},{key:"initVisitLayout",value:function(){var _initVisitLayout=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this18=this,data,id,div,moduleInfo,script,inModuleListInfo,content,moduleList;return regeneratorRuntime.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.ajaxDom();case 2:data=_context2.sent,id=data.id,div=data.div,moduleInfo=data.moduleInfo,script=data.script,inModuleListInfo=data.inModuleListInfo,content=moduleInfo.content,moduleList=content.moduleList,this.inModuleListInfo=inModuleListInfo,this.moduleInfo=moduleInfo,this.id=id,$("#floatZoneContainer").remove(),Fai.top._floatZoneId=id,this.$module&&this.$module.remove(),this.$module=$(div),this.$module.addClass(this.moduleClass),this.$visitModuleContainer=$("#webModuleContainer"),this.$visitModuleContainer.append(this.$module),this.$visitBody=$("body"),this.$visitBody.addClass(this.editClass),this.script=script,eval(this.script),moduleList.forEach(function(e){_this18.activeModuleAction(e.id)});case 21:case"end":return _context2.stop()}},_callee2,this)}));function initVisitLayout(){return _initVisitLayout.apply(this,arguments)}return initVisitLayout}()},{key:"resetVisitLayout",value:function(){this.$visitBody.removeClass(this.editClass),this.$module.remove()}},{key:"initLayout",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initVisitLayout();case 2:this.initDesignLayout(),this.initModulePanelLayout();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetLayout",value:function(){this.resetDesignLayout(),this.resetModulePanelLayout(),this.resetVisitLayout(),this.isEdit=!1}},{key:"exitEdit",value:function(){this.resetLayout(),Fai.top.preModulePosition=0,Fai.top.Mobi.openDesigner("JzFloatEffectEdit")}},{key:"cancelEdit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Fai.top.Fai.ing("正在取消..."),e.next=3,this.initVisitLayout();case 3:this.initAddModuleDragable(),this.initHistoryModules(),this.delModuleList=[],Fai.top.Fai.ing("取消成功",!0),this.deactiveBtn();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ajaxDom",value:function(e){return e||(e={}),0===Fai.top._floatZoneId?this.initFloatZone():this.getFloatZone(e)}},{key:"initFloatZone",value:function(){return new Promise(function(e,t){$.ajax({type:"post",url:Mobi.genAjaxUrl("mobimodule_h.jsp")+"?cmd=addFloatZoneModule&style=103&colId="+Fai.top._colId+"&extId="+Fai.top._extId,error:function(){Fai.top.Fai.ing("打开悬浮容器失败！",!1),t()},success:function(t){var i=$.parseJSON(t);i.script="",e(i)}})})}},{key:"getFloatZone",value:function(e){var t=e.isEditFloatZone,i=void 0===t||t;return new Promise(function(e,t){$.ajax({type:"post",url:Mobi.genAjaxUrl("mobimodule_h.jsp")+"?cmd=getFloatZoneModule&style=103&colId="+Fai.top._colId+"&extId="+Fai.top._extId+"&floatZoneId="+Fai.top._floatZoneId,data:"isEditFloatZone=".concat(i),error:function(){Fai.top.Fai.ing("打开悬浮容器失败！",!1),t()},success:function(t){var i=$.parseJSON(t).rtInfo,o=i=$.parseJSON(i),n=o.moduleId,a=o.moduleInfo,r=o.dom,s=o.script,l=o.inModuleListInfo;e({id:n,moduleInfo:a,div:r,script:s,inModuleListInfo:l})}})})}},{key:"initPreview",value:function(){var _initPreview=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){var data,div,script,isShowFloatEffect,isIndependentShowFloatEffectType,isIndependentShowFloatEffect,isShowFloatZone,style,floatZoneContainer;return regeneratorRuntime.wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,this.ajaxDom({isEditFloatZone:!1});case 2:data=_context5.sent,div=data.div,script=data.script,$("#floatZoneContainer").remove(),isShowFloatEffect=Fai.top._rootStore.getters.getIsShowFloatEffect,isIndependentShowFloatEffectType=Fai.top._rootStore.getters.getIsIndependentShowFloatEffectType,isIndependentShowFloatEffect=Fai.top._rootStore.getters.getIsIndependentShowFloatEffect,isShowFloatZone=!1,isShowFloatZone=isIndependentShowFloatEffectType?isIndependentShowFloatEffect:isShowFloatEffect,style=isShowFloatZone?"":"display:none;",floatZoneContainer=$('<div id="floatZoneContainer" class="floatZoneContainer" style="'.concat(style,'">').concat(div,"</div>")),$("#g_web").append(floatZoneContainer),this.script=script,eval(this.script);case 15:case"end":return _context5.stop()}},_callee5,this)}));function initPreview(){return _initPreview.apply(this,arguments)}return initPreview}()},{key:"initAddModuleDragable",value:function(){this.$module.find("J_floatZoneSortContainer").length<1&&$("<div moduleId='"+this.id+"' class='J_floatZoneSortContainer fk-floatZoneSortContainer'></div>").appendTo(this.$module)}},{key:"addModule",value:function(e,t,i){var o,n=t.id,a=null;if(o=e.replace("inFloat_",""),$("#module"+o).find(".float_zone_wrap").append(i),a=$("#module"+n),this.modulePosition){var r=this.modulePosition,s=r.top,l=r.left,c=0,d=0;a.hasClass("formStyle54")?(c=a[0].offsetHeight,d=a.find(".floatBtn").width()+a[0].offsetWidth-a.width()):a.hasClass("formStyle52")?(c=a.height(),d=a.find(".fkEditor").width()):a.hasClass("formStyle53")&&(c=a.height(),d=a.find(".floatImgWrap").width()),(s-=c/2)<0&&(s=0),(l-=d/2)<0&&(l=0),a.css({position:"absolute",top:s,left:l})}else a.css({position:"absolute",top:0,left:0});this.modulePosition=null,Fai.top.Mobi.getModuleAttr(n).pattern.changed=!0,Fai.top.Mobi.styleChanged(),this.activeModuleAction(n)}},{key:"activeModuleAction",value:function(e){var t=$("#module"+e);t.attr("_infloatzone",this.id),t.css({position:"absolute"}),this.initResizable(t),this.initDragble(t)}},{key:"initDragble",value:function(e){var t=this,i=$(e);if(!(i.length<1)){var o=parseInt(i.attr("_modulestyle")),n=parseInt(i.attr("id").replace("module",""));i.draggable("destroy").draggable({containment:"parent",cursor:"move",axis:"x,y",scroll:!1,distance:3,tolerance:2,smartguides:".form",cancel:".formLockEdit, input, textarea, select, .ui-resizable-handle",start:function(e){i.css({"pointer-events":"none"})},drag:function(){52!=o&&53!=o&&54!=o||Fai.top.$("#fkEditor-toolBar-"+n).hide()},stop:function(e){var i=$("#module"+n),o=Fai.top.Mobi.getModuleAttr(n);i.data(t.dragChange,!0),o.pattern.changed=!0,Fai.top.Mobi.styleChanged(),i.css({"pointer-events":"auto"})}})}}},{key:"initResizable",value:function(e){e.hasClass("formStyle52")?Mobi.getPreviewWindow().Mobi.simpleTextResize(e):e.hasClass("formStyle53")?Mobi.getPreviewWindow().Mobi.floatImgResize(e):e.hasClass("formStyle54")&&Mobi.getPreviewWindow().Mobi.floatBtnResize(e)}},{key:"save",value:function(){var e=this.getFloatZoneInfo(),t=this.getInModuleContent(),i=this.id,o=[];o.push("&content=".concat(JSON.stringify(e))),o.push("&inModules=".concat(encodeURIComponent(JSON.stringify(t)))),o.push("&floatZoneId=".concat(JSON.stringify(i))),o.push("&delModuleList=".concat(JSON.stringify(this.delModuleList))),$.ajax({type:"post",url:Mobi.genAjaxUrl("mobimodule_h.jsp")+"?cmd=setFloatZoneModule&style=103&colId="+Fai.top._colId+"&extId="+Fai.top._extId+"&id="+i,data:o.join(""),error:function(){Fai.top.Fai.ing("服务繁忙，请稍候重试",!1)},success:function(e){$.parseJSON(e);Fai.top.Fai.successHandle(e,"保存成功","系统错误","",3,1)}})}},{key:"getFloatZoneInfo",value:function(){var e=this,t={},i=[],o=this.moduleInfo.content.moduleList,n=Fai.top.$("#mobiReviewPage").height();this.$module.find(".".concat(this.moduleContentClass," .form")).each(function(t,a){var r=parseInt($(a).attr("id").replace("module","")),s={},l=$(a),c=l.data(e.dragChange),d=o.find(function(e){return e.id===r});d||(c=!0),s.id=r,s.t=c?Math.trunc(1e4*e.toFixedFix(l[0].offsetTop/n,4)):d.t,s.l=c?l[0].offsetLeft:d.l,s.s=l.is(":visible"),i.push(s)}),o.forEach(function(t){var o=t.s,n=t.id,a=e.$module.find("#module".concat(n));o||0!==a.length||e.delModuleList.includes(n)||i.push(t)});var a=Object.create(null),r=[];return i.forEach(function(e){var t=e.id;a[t]||(r.push(e),a[t]=!0)}),t.moduleList=r,t}},{key:"getInModuleContent",value:function(){if(void 0!==Fai.top.moduleAttr){var e,t=[],i=Fai.top;return $("#module"+this.id).find(".form").each(function(o,n){var a=$(n),r=parseInt($(n).attr("id").replace("module","")),s=a.hasClass("formStyle".concat(52)),l=a.hasClass("formStyle".concat(54)),c=a.hasClass("formStyle".concat(53)),d=l&&Mobi.isModuleV2(54),m=c&&Mobi.isModuleV2(53);if(void 0!==Fai.top.moduleAttr["module"+r]){var p=Fai.top.moduleAttr["module"+r],u={},h=!1,f=i.Mobi.getModuleAttr(r);if(d&&(p=Fai.top._rootStore.getters.getModuleById(r)),Fai.top._openThemeV3&&(m||d)){var g=i.Mobi.getModuleAttrV3(r);g.patternChanged&&(u.patternV3=g.patternV3,h=!0)}if(f.pattern.changed&&(u.pattern=i.$.toJSON(i.Mobi.getModuleAttrPatternStg(r)),h=!0),p.contentChange&&p.content){if(e=p.content,s){var v=e.fontList.map(function(e){return e.resId});e=i.Mobi.getSimpleTextContent(a);var b=a.find(".fkEditor"),j=i.Mobi.mergeFonts(b);e.fontList=j,e.oldFontResIdList=v,e.tcc=-1===e.text.indexOf("_themecolor")?0:1,1==e.tcc&&(e.themeColor=Fai.top._themeColor)}l&&(e=i.Mobi.getFloagBtnContent(a)),u.content=e,h=!0}if(f.pattern.changed&&l){var _=(e=p.content).fontList.map(function(e){return e.resId});e=i.Mobi.getFloagBtnContent(a);var M=a.find(".floatBtn"),y=M.css("font-family")||"",S=[],I=i.Mobi.analysisCustomFontFaceFamily(y),w=I.flag,C=I.id,P=I.random;if("fontface"===w){var x=M.text();S.push({id:P,fontId:+C,fontFamily:y,substring:Fai.top.window.Fai.unique(x)})}e.fontList=S,e.oldFontResIdList=_,u.content=e,h=!0}h&&(u.id=r,t.push(u))}}),t}}},{key:"delModule",value:function(e){if(confirm("删除后模块将无法恢复，确定删除“"+e.title+"”？")){var t=e.id,i=Mobi.getPreviewWindow().$("#module".concat(t));i.length>0&&i.fadeOut(0,function(){i.remove()}),this.delModuleList.push(t),this.delModuleList=_toConsumableArray(new Set([].concat(_toConsumableArray(this.delModuleList),[t])));var o=this.historyModules.findIndex(function(e){return e.id===t});this.historyModules.splice(o,1),Fai.top.floatZone.activeBtn()}}},{key:"initHistoryModules",value:function(e){e&&this.updateCurColHistoryModules();var t=Fai.top.v_colModuleManagePanel;return this.historyModules=JSON.parse(JSON.stringify(this.inModuleListInfo)),this.historyModules=t.commFun.getCurColData(this.historyModules,t.commData.colModules.data,"floatZone"),t.commData.colModules.curCol=this.historyModules,this.historyModules}},{key:"resetHistoryModules",value:function(){var e=Fai.top.v_colModuleManagePanel;this.curColHistoryModules&&(e.commData.colModules.curCol=this.curColHistoryModules)}},{key:"updateCurColHistoryModules",value:function(){var e=Fai.top.v_colModuleManagePanel;this.curColHistoryModules=JSON.parse(JSON.stringify(e.commData.colModules.curCol))}},{key:"activeBtn",value:function(){this.$saveBtn.addClass(this.activeBtnClass),this.$cancelBtn.addClass(this.activeBtnClass),this.$exitBtn.removeClass(this.activeBtnClass)}},{key:"deactiveBtn",value:function(){this.$saveBtn.removeClass(this.activeBtnClass),this.$cancelBtn.removeClass(this.activeBtnClass),this.$exitBtn.addClass(this.activeBtnClass)}},{key:"refreshVisit",value:function(){this.initPreview()}},{key:"toFixedFix",value:function(e,t){var i=Math.pow(10,t);return Math.round(e*i,10)/i}}]),FloatZone}();Fai.top.floatZone=new FloatZone}(),function(e,t,i){t.jzPayUtils={openPayPage:function(e,t,i,o){""==o&&(o=i),window.location.href="/mallPayment.jsp?bssId=".concat(t,"&bssType=").concat(e,"&returnUrl=").concat(o,"&sucUrl=").concat(i)},setPayCookie:function(e,t,i,o){if(null==i||""==i){var n=location.pathname.split("/");i=n[n.length-1]}null!=o&&""!=o||(o=location.search),"?"!=o[0]&&(o="?"+o);var a="payReturnUrl_".concat(e,"_").concat(t),r="/".concat(i).concat(o);jm.cookie(a,r,{path:"/",expires:1})},normalOpenPay:function(e){var t=e.bssId,i=e.bssType,o=e.sucUrl,n=e.failUrl;e.pathname,e.urlParams;this.isWeChatPay()&&Mobi.isPC()?Mobi.ing("请在手机微信上访问和提交支付"):!this.isFaiWeChatPay()||this.isWechat()?(this.setPayCookie(i,t),this.openPayPage(i,t,o,n)):Mobi.ing("非微信环境不支持支付，请在微信浏览器下进行操作")},isWeChatPay:function(){var e=Fai.top._jzPayTypeList[0];return 1==Fai.top._jzPayTypeList.length&&e==Mobi.PayType.WXPAY},isFaiWeChatPay:function(){var e=Fai.top._jzPayTypeList[0];return 1==Fai.top._jzPayTypeList.length&&e==Mobi.PayType.FAIPAY},isWechat:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},t.BussinessType={BSSTYPE_FORM:5,BSSTYPE_KNOWPRODUCT:6},t.PayType={WXPAY:10,ALIAPY:12,FAIPAY:50}}(jm,Mobi);